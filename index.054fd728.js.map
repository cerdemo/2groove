{"mappings":"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ACA,gBACA,eACA,eACA,cACA,WACA,YACA,eACA,OACA,eACA,UACA,WACA,UACA,QACA,WACA,YACA,eACA,aACA,UACA,UACA,kBACA,oBACA,oBACA,iBACA,mBACA,iBACA,kBACA,uBACA,kBACA,eACA,oBACA,gBACA,gBACA,mBACA,eACA,gBACA,cACA,oBACA,iBACA,oBACA,oBACA,iBACA,gBACA,gBACA,QACA,QACA,WACA,OACA,UACA,WACA,SACA,SACA,cACA,QACA,cACA,YACA,aACA,cACA,aACA,iBACA,oBACA,eACA,WACA,aACA,iBACA,aACA,WACA,UAAA,CAGY,EAAAC,oBAAAA,CAAuB,CACnC,QACA,uBACA,QACA,SACA,OACA,UACA,WACA,QACA,OACA,OACA,aACA,YACA,gBACA,QACA,aACA,gBAAA,CAGY,EAAAF,gBAAAA,CAAmB,CAC/B,EAAG,eACH,EAAG,WACH,GAAI,YACJ,GAAI,iBACJ,GAAI,aACJ,GAAI,WACJ,GAAI,YACJ,GAAI,gBACJ,GAAI,cAAA,CAAA,E,I,S,C,C,C,C,C,E,I,E,I,E,I,C,S,E,S,C,C,C,C,C,C,C,E,O,G,C,G,C,E,O,C,E,S,C,C,C,E,S,E,C,E,G,C,E,E,I,C,G,C,M,E,C,E,E,C,C,S,E,C,E,G,C,E,E,K,C,G,C,M,E,C,E,E,C,C,S,E,C,E,I,C,C,E,I,C,E,E,K,E,A,C,A,C,E,E,K,A,Y,E,E,I,E,S,C,E,E,E,E,E,I,C,E,E,C,E,A,C,E,E,K,C,E,G,E,C,E,I,G,E,E,E,I,E,I,C,W,E,S,C,C,C,E,I,E,E,E,E,E,C,M,E,K,W,G,E,C,C,E,C,M,C,C,E,C,O,C,C,E,A,E,K,E,C,I,E,A,E,O,E,C,K,E,G,M,E,G,O,E,E,E,Y,O,Q,C,C,C,O,Q,C,C,W,O,I,A,C,E,E,S,E,C,E,O,S,C,E,O,S,C,E,G,E,M,A,U,mC,K,G,G,C,G,E,E,G,C,E,E,C,C,E,C,E,M,C,C,C,E,C,E,K,E,C,A,C,E,E,M,A,G,E,I,C,G,C,E,E,I,A,G,C,A,C,E,E,I,C,E,C,C,E,C,E,I,C,O,E,O,E,E,G,C,E,C,E,C,C,E,C,E,K,C,A,E,C,C,E,E,K,E,K,E,E,E,K,M,E,O,E,K,G,C,M,C,C,E,C,K,C,C,C,M,E,E,K,G,E,C,C,E,C,E,C,E,C,Q,M,E,E,E,G,C,G,G,E,I,C,G,G,Q,S,G,C,C,A,C,E,A,C,E,E,I,A,E,M,C,G,C,C,E,M,C,E,A,G,I,C,C,E,E,I,C,C,E,A,E,C,E,E,Q,C,G,I,C,C,E,E,C,C,G,C,C,E,C,C,C,E,E,C,C,E,C,C,C,E,A,E,C,E,K,C,C,C,E,C,K,C,G,I,C,C,E,E,E,K,C,C,C,E,C,C,E,K,C,C,C,E,C,E,E,K,C,G,G,E,K,C,C,C,E,C,C,E,K,C,C,C,E,C,E,G,C,I,C,G,K,C,C,C,E,E,E,G,C,G,G,E,I,C,G,G,Q,C,E,E,I,C,E,E,C,M,E,C,E,C,E,E,C,E,C,Q,C,E,E,C,C,G,E,C,C,E,C,M,C,C,E,C,M,C,M,C,C,E,C,C,C,E,C,K,E,K,C,C,C,E,C,E,E,C,C,C,C,C,O,c,C,E,a,C,M,C,C,G,E,M,C,E,K,C,E,I,C,K,EC1JL,IAAA,EAAA,EAAA,KAEA,EAAA,EAAA,KACA,EAAA,EAAA,KACA,EAAA,EAAA,IAKA,EAAA,WA8BC,SAAA,EAAYkK,CAAAA,EAAZ,IAAA,EAAA,IAAA,CAEKlC,EAA8B,KAClC,GAAIkC,EAAW,CAGd,IAAMC,EAAmCD,aAAqB5I,YAC3D,IAAIlC,WAAW8K,GACfA,CAGHlC,CAAAA,AAAAA,CAAAA,EAAAA,AAAW,CAAA,EAAA,EAAAnR,SAAAA,AAAAA,EAAUsT,EAAAA,EAGZtP,MAAAA,CAAOoE,OAAAA,CAAQ,SAAAgH,CAAAA,EACvB,IAAImE,EAAe,EAEnBnE,EAAMhH,OAAAA,CAAQ,SAACqG,CAAAA,EACd8E,GAAgB9E,EAAMvM,SAAAA,CACtBuM,EAAMnI,YAAAA,CAAeiN,CAAAA,EAAAA,GAKvBpC,EAASnN,MAAAA,CAoHZ,SAAqBA,CAAAA,EAGpB,IAFA,IAAMwP,EAAY,EAAA,CAET/T,EAAI,EAAGA,EAAIuE,EAAOtE,MAAAA,CAAQD,IAOlC,IANA,IAAMgU,EAAeD,EAAU9T,MAAAA,CAEzBgU,EAAW,IAAIhJ,IAEfiJ,E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","sources":["<anon>","src/js/utils/libs/@tonejs/midi/build/Midi.js","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/webpack/universalModuleDefinition","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/node_modules/array-flatten/dist.es2015/index.js","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/node_modules/midi-file/index.js","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/node_modules/midi-file/lib/midi-parser.js","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/node_modules/midi-file/lib/midi-writer.js","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/BinarySearch.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/ControlChange.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/ControlChanges.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/Encode.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/Header.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/Instrument.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/InstrumentMaps.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/Midi.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/Note.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/PitchBend.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/src/Track.ts","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/webpack/bootstrap","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/webpack/runtime/define property getters","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/webpack/runtime/hasOwnProperty shorthand","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/webpack/runtime/make namespace object","src/js/utils/libs/@tonejs/midi/build/webpack:/@tonejs/midi/webpack/startup"],"sourcesContent":["!function(t, e) {\n    if (\"object\" == typeof exports && \"object\" == typeof module) module.exports = e();\n    else if (\"function\" == typeof define && define.amd) define([], e);\n    else {\n        var r = e();\n        for(var n in r)(\"object\" == typeof exports ? exports : t)[n] = r[n];\n    }\n}(\"undefined\" != typeof self ? self : this, function() {\n    return (()=>{\n        var t = {\n            507: (t, e, r)=>{\n                \"use strict\";\n                function n(t) {\n                    var e = [];\n                    return i(t, e), e;\n                }\n                function i(t, e) {\n                    for(var r = 0; r < t.length; r++){\n                        var n = t[r];\n                        Array.isArray(n) ? i(n, e) : e.push(n);\n                    }\n                }\n                r.r(e), r.d(e, {\n                    flatten: ()=>n\n                });\n            },\n            289: (t, e, r)=>{\n                e.parseMidi = r(666), e.writeMidi = r(865);\n            },\n            666: (t)=>{\n                function e(t) {\n                    for(var e, n = new r(t), i = []; !n.eof();){\n                        var a = o();\n                        i.push(a);\n                    }\n                    return i;\n                    function o() {\n                        var t = {};\n                        t.deltaTime = n.readVarInt();\n                        var r = n.readUInt8();\n                        if (240 == (240 & r)) {\n                            if (255 !== r) {\n                                if (240 == r) return t.type = \"sysEx\", a = n.readVarInt(), t.data = n.readBytes(a), t;\n                                if (247 == r) return t.type = \"endSysEx\", a = n.readVarInt(), t.data = n.readBytes(a), t;\n                                throw \"Unrecognised MIDI event type byte: \" + r;\n                            }\n                            t.meta = !0;\n                            var i = n.readUInt8(), a = n.readVarInt();\n                            switch(i){\n                                case 0:\n                                    if (t.type = \"sequenceNumber\", 2 !== a) throw \"Expected length for sequenceNumber event is 2, got \" + a;\n                                    return t.number = n.readUInt16(), t;\n                                case 1:\n                                    return t.type = \"text\", t.text = n.readString(a), t;\n                                case 2:\n                                    return t.type = \"copyrightNotice\", t.text = n.readString(a), t;\n                                case 3:\n                                    return t.type = \"trackName\", t.text = n.readString(a), t;\n                                case 4:\n                                    return t.type = \"instrumentName\", t.text = n.readString(a), t;\n                                case 5:\n                                    return t.type = \"lyrics\", t.text = n.readString(a), t;\n                                case 6:\n                                    return t.type = \"marker\", t.text = n.readString(a), t;\n                                case 7:\n                                    return t.type = \"cuePoint\", t.text = n.readString(a), t;\n                                case 32:\n                                    if (t.type = \"channelPrefix\", 1 != a) throw \"Expected length for channelPrefix event is 1, got \" + a;\n                                    return t.channel = n.readUInt8(), t;\n                                case 33:\n                                    if (t.type = \"portPrefix\", 1 != a) throw \"Expected length for portPrefix event is 1, got \" + a;\n                                    return t.port = n.readUInt8(), t;\n                                case 47:\n                                    if (t.type = \"endOfTrack\", 0 != a) throw \"Expected length for endOfTrack event is 0, got \" + a;\n                                    return t;\n                                case 81:\n                                    if (t.type = \"setTempo\", 3 != a) throw \"Expected length for setTempo event is 3, got \" + a;\n                                    return t.microsecondsPerBeat = n.readUInt24(), t;\n                                case 84:\n                                    if (t.type = \"smpteOffset\", 5 != a) throw \"Expected length for smpteOffset event is 5, got \" + a;\n                                    var o = n.readUInt8();\n                                    return t.frameRate = ({\n                                        0: 24,\n                                        32: 25,\n                                        64: 29,\n                                        96: 30\n                                    })[96 & o], t.hour = 31 & o, t.min = n.readUInt8(), t.sec = n.readUInt8(), t.frame = n.readUInt8(), t.subFrame = n.readUInt8(), t;\n                                case 88:\n                                    if (t.type = \"timeSignature\", 4 != a) throw \"Expected length for timeSignature event is 4, got \" + a;\n                                    return t.numerator = n.readUInt8(), t.denominator = 1 << n.readUInt8(), t.metronome = n.readUInt8(), t.thirtyseconds = n.readUInt8(), t;\n                                case 89:\n                                    if (t.type = \"keySignature\", 2 != a) throw \"Expected length for keySignature event is 2, got \" + a;\n                                    return t.key = n.readInt8(), t.scale = n.readUInt8(), t;\n                                case 127:\n                                    return t.type = \"sequencerSpecific\", t.data = n.readBytes(a), t;\n                                default:\n                                    return t.type = \"unknownMeta\", t.data = n.readBytes(a), t.metatypeByte = i, t;\n                            }\n                        } else {\n                            var s;\n                            if (0 == (128 & r)) {\n                                if (null === e) throw \"Running status byte encountered before status byte\";\n                                s = r, r = e, t.running = !0;\n                            } else s = n.readUInt8(), e = r;\n                            var c = r >> 4;\n                            switch(t.channel = 15 & r, c){\n                                case 8:\n                                    return t.type = \"noteOff\", t.noteNumber = s, t.velocity = n.readUInt8(), t;\n                                case 9:\n                                    var u = n.readUInt8();\n                                    return t.type = 0 === u ? \"noteOff\" : \"noteOn\", t.noteNumber = s, t.velocity = u, 0 === u && (t.byte9 = !0), t;\n                                case 10:\n                                    return t.type = \"noteAftertouch\", t.noteNumber = s, t.amount = n.readUInt8(), t;\n                                case 11:\n                                    return t.type = \"controller\", t.controllerType = s, t.value = n.readUInt8(), t;\n                                case 12:\n                                    return t.type = \"programChange\", t.programNumber = s, t;\n                                case 13:\n                                    return t.type = \"channelAftertouch\", t.amount = s, t;\n                                case 14:\n                                    return t.type = \"pitchBend\", t.value = s + (n.readUInt8() << 7) - 8192, t;\n                                default:\n                                    throw \"Unrecognised MIDI event type: \" + c;\n                            }\n                        }\n                    }\n                }\n                function r(t) {\n                    this.buffer = t, this.bufferLen = this.buffer.length, this.pos = 0;\n                }\n                r.prototype.eof = function() {\n                    return this.pos >= this.bufferLen;\n                }, r.prototype.readUInt8 = function() {\n                    var t = this.buffer[this.pos];\n                    return this.pos += 1, t;\n                }, r.prototype.readInt8 = function() {\n                    var t = this.readUInt8();\n                    return 128 & t ? t - 256 : t;\n                }, r.prototype.readUInt16 = function() {\n                    return (this.readUInt8() << 8) + this.readUInt8();\n                }, r.prototype.readInt16 = function() {\n                    var t = this.readUInt16();\n                    return 32768 & t ? t - 65536 : t;\n                }, r.prototype.readUInt24 = function() {\n                    return (this.readUInt8() << 16) + (this.readUInt8() << 8) + this.readUInt8();\n                }, r.prototype.readInt24 = function() {\n                    var t = this.readUInt24();\n                    return 8388608 & t ? t - 16777216 : t;\n                }, r.prototype.readUInt32 = function() {\n                    return (this.readUInt8() << 24) + (this.readUInt8() << 16) + (this.readUInt8() << 8) + this.readUInt8();\n                }, r.prototype.readBytes = function(t) {\n                    var e = this.buffer.slice(this.pos, this.pos + t);\n                    return this.pos += t, e;\n                }, r.prototype.readString = function(t) {\n                    var e = this.readBytes(t);\n                    return String.fromCharCode.apply(null, e);\n                }, r.prototype.readVarInt = function() {\n                    for(var t = 0; !this.eof();){\n                        var e = this.readUInt8();\n                        if (!(128 & e)) return t + e;\n                        t += 127 & e, t <<= 7;\n                    }\n                    return t;\n                }, r.prototype.readChunk = function() {\n                    var t = this.readString(4), e = this.readUInt32();\n                    return {\n                        id: t,\n                        length: e,\n                        data: this.readBytes(e)\n                    };\n                }, t.exports = function(t) {\n                    var n = new r(t), i = n.readChunk();\n                    if (\"MThd\" != i.id) throw \"Bad MIDI file.  Expected 'MHdr', got: '\" + i.id + \"'\";\n                    for(var a = function(t) {\n                        var e = new r(t), n = {\n                            format: e.readUInt16(),\n                            numTracks: e.readUInt16()\n                        }, i = e.readUInt16();\n                        return 32768 & i ? (n.framesPerSecond = 256 - (i >> 8), n.ticksPerFrame = 255 & i) : n.ticksPerBeat = i, n;\n                    }(i.data), o = [], s = 0; !n.eof() && s < a.numTracks; s++){\n                        var c = n.readChunk();\n                        if (\"MTrk\" != c.id) throw \"Bad MIDI file.  Expected 'MTrk', got: '\" + c.id + \"'\";\n                        var u = e(c.data);\n                        o.push(u);\n                    }\n                    return {\n                        header: a,\n                        tracks: o\n                    };\n                };\n            },\n            865: (t)=>{\n                function e(t, e, i) {\n                    var a, o = new n, s = e.length, c = null;\n                    for(a = 0; a < s; a++)!1 !== i.running && (i.running || e[a].running) || (c = null), c = r(o, e[a], c, i.useByte9ForNoteOff);\n                    t.writeChunk(\"MTrk\", o.buffer);\n                }\n                function r(t, e, r, n) {\n                    var i = e.type, a = e.deltaTime, o = e.text || \"\", s = e.data || [], c = null;\n                    switch(t.writeVarInt(a), i){\n                        case \"sequenceNumber\":\n                            t.writeUInt8(255), t.writeUInt8(0), t.writeVarInt(2), t.writeUInt16(e.number);\n                            break;\n                        case \"text\":\n                            t.writeUInt8(255), t.writeUInt8(1), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"copyrightNotice\":\n                            t.writeUInt8(255), t.writeUInt8(2), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"trackName\":\n                            t.writeUInt8(255), t.writeUInt8(3), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"instrumentName\":\n                            t.writeUInt8(255), t.writeUInt8(4), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"lyrics\":\n                            t.writeUInt8(255), t.writeUInt8(5), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"marker\":\n                            t.writeUInt8(255), t.writeUInt8(6), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"cuePoint\":\n                            t.writeUInt8(255), t.writeUInt8(7), t.writeVarInt(o.length), t.writeString(o);\n                            break;\n                        case \"channelPrefix\":\n                            t.writeUInt8(255), t.writeUInt8(32), t.writeVarInt(1), t.writeUInt8(e.channel);\n                            break;\n                        case \"portPrefix\":\n                            t.writeUInt8(255), t.writeUInt8(33), t.writeVarInt(1), t.writeUInt8(e.port);\n                            break;\n                        case \"endOfTrack\":\n                            t.writeUInt8(255), t.writeUInt8(47), t.writeVarInt(0);\n                            break;\n                        case \"setTempo\":\n                            t.writeUInt8(255), t.writeUInt8(81), t.writeVarInt(3), t.writeUInt24(e.microsecondsPerBeat);\n                            break;\n                        case \"smpteOffset\":\n                            t.writeUInt8(255), t.writeUInt8(84), t.writeVarInt(5);\n                            var u = 31 & e.hour | ({\n                                24: 0,\n                                25: 32,\n                                29: 64,\n                                30: 96\n                            })[e.frameRate];\n                            t.writeUInt8(u), t.writeUInt8(e.min), t.writeUInt8(e.sec), t.writeUInt8(e.frame), t.writeUInt8(e.subFrame);\n                            break;\n                        case \"timeSignature\":\n                            t.writeUInt8(255), t.writeUInt8(88), t.writeVarInt(4), t.writeUInt8(e.numerator);\n                            var h = 255 & Math.floor(Math.log(e.denominator) / Math.LN2);\n                            t.writeUInt8(h), t.writeUInt8(e.metronome), t.writeUInt8(e.thirtyseconds || 8);\n                            break;\n                        case \"keySignature\":\n                            t.writeUInt8(255), t.writeUInt8(89), t.writeVarInt(2), t.writeInt8(e.key), t.writeUInt8(e.scale);\n                            break;\n                        case \"sequencerSpecific\":\n                            t.writeUInt8(255), t.writeUInt8(127), t.writeVarInt(s.length), t.writeBytes(s);\n                            break;\n                        case \"unknownMeta\":\n                            null != e.metatypeByte && (t.writeUInt8(255), t.writeUInt8(e.metatypeByte), t.writeVarInt(s.length), t.writeBytes(s));\n                            break;\n                        case \"sysEx\":\n                            t.writeUInt8(240), t.writeVarInt(s.length), t.writeBytes(s);\n                            break;\n                        case \"endSysEx\":\n                            t.writeUInt8(247), t.writeVarInt(s.length), t.writeBytes(s);\n                            break;\n                        case \"noteOff\":\n                            (c = (!1 !== n && e.byte9 || n && 0 == e.velocity ? 144 : 128) | e.channel) !== r && t.writeUInt8(c), t.writeUInt8(e.noteNumber), t.writeUInt8(e.velocity);\n                            break;\n                        case \"noteOn\":\n                            (c = 144 | e.channel) !== r && t.writeUInt8(c), t.writeUInt8(e.noteNumber), t.writeUInt8(e.velocity);\n                            break;\n                        case \"noteAftertouch\":\n                            (c = 160 | e.channel) !== r && t.writeUInt8(c), t.writeUInt8(e.noteNumber), t.writeUInt8(e.amount);\n                            break;\n                        case \"controller\":\n                            (c = 176 | e.channel) !== r && t.writeUInt8(c), t.writeUInt8(e.controllerType), t.writeUInt8(e.value);\n                            break;\n                        case \"programChange\":\n                            (c = 192 | e.channel) !== r && t.writeUInt8(c), t.writeUInt8(e.programNumber);\n                            break;\n                        case \"channelAftertouch\":\n                            (c = 208 | e.channel) !== r && t.writeUInt8(c), t.writeUInt8(e.amount);\n                            break;\n                        case \"pitchBend\":\n                            (c = 224 | e.channel) !== r && t.writeUInt8(c);\n                            var f = 8192 + e.value, p = 127 & f, l = f >> 7 & 127;\n                            t.writeUInt8(p), t.writeUInt8(l);\n                            break;\n                        default:\n                            throw \"Unrecognized event type: \" + i;\n                    }\n                    return c;\n                }\n                function n() {\n                    this.buffer = [];\n                }\n                n.prototype.writeUInt8 = function(t) {\n                    this.buffer.push(255 & t);\n                }, n.prototype.writeInt8 = n.prototype.writeUInt8, n.prototype.writeUInt16 = function(t) {\n                    var e = t >> 8 & 255, r = 255 & t;\n                    this.writeUInt8(e), this.writeUInt8(r);\n                }, n.prototype.writeInt16 = n.prototype.writeUInt16, n.prototype.writeUInt24 = function(t) {\n                    var e = t >> 16 & 255, r = t >> 8 & 255, n = 255 & t;\n                    this.writeUInt8(e), this.writeUInt8(r), this.writeUInt8(n);\n                }, n.prototype.writeInt24 = n.prototype.writeUInt24, n.prototype.writeUInt32 = function(t) {\n                    var e = t >> 24 & 255, r = t >> 16 & 255, n = t >> 8 & 255, i = 255 & t;\n                    this.writeUInt8(e), this.writeUInt8(r), this.writeUInt8(n), this.writeUInt8(i);\n                }, n.prototype.writeInt32 = n.prototype.writeUInt32, n.prototype.writeBytes = function(t) {\n                    this.buffer = this.buffer.concat(Array.prototype.slice.call(t, 0));\n                }, n.prototype.writeString = function(t) {\n                    var e, r = t.length, n = [];\n                    for(e = 0; e < r; e++)n.push(t.codePointAt(e));\n                    this.writeBytes(n);\n                }, n.prototype.writeVarInt = function(t) {\n                    if (t < 0) throw \"Cannot write negative variable-length integer\";\n                    if (t <= 127) this.writeUInt8(t);\n                    else {\n                        var e = t, r = [];\n                        for(r.push(127 & e), e >>= 7; e;){\n                            var n = 127 & e | 128;\n                            r.push(n), e >>= 7;\n                        }\n                        this.writeBytes(r.reverse());\n                    }\n                }, n.prototype.writeChunk = function(t, e) {\n                    this.writeString(t), this.writeUInt32(e.length), this.writeBytes(e);\n                }, t.exports = function(t, r) {\n                    if (\"object\" != typeof t) throw \"Invalid MIDI data\";\n                    r = r || {};\n                    var i, a = t.header || {}, o = t.tracks || [], s = o.length, c = new n;\n                    for(function(t, e, r) {\n                        var i = null == e.format ? 1 : e.format, a = 128;\n                        e.timeDivision ? a = e.timeDivision : e.ticksPerFrame && e.framesPerSecond ? a = -(255 & e.framesPerSecond) << 8 | 255 & e.ticksPerFrame : e.ticksPerBeat && (a = 32767 & e.ticksPerBeat);\n                        var o = new n;\n                        o.writeUInt16(i), o.writeUInt16(r), o.writeUInt16(a), t.writeChunk(\"MThd\", o.buffer);\n                    }(c, a, s), i = 0; i < s; i++)e(c, o[i], r);\n                    return c.buffer;\n                };\n            },\n            805: (t, e)=>{\n                \"use strict\";\n                function r(t, e, r) {\n                    void 0 === r && (r = \"ticks\");\n                    var n = 0, i = t.length, a = i;\n                    if (i > 0 && t[i - 1][r] <= e) return i - 1;\n                    for(; n < a;){\n                        var o = Math.floor(n + (a - n) / 2), s = t[o], c = t[o + 1];\n                        if (s[r] === e) {\n                            for(var u = o; u < t.length; u++)t[u][r] === e && (o = u);\n                            return o;\n                        }\n                        if (s[r] < e && c[r] > e) return o;\n                        s[r] > e ? a = o : s[r] < e && (n = o + 1);\n                    }\n                    return -1;\n                }\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.insert = e.search = void 0, e.search = r, e.insert = function(t, e, n) {\n                    if (void 0 === n && (n = \"ticks\"), t.length) {\n                        var i = r(t, e[n], n);\n                        t.splice(i + 1, 0, e);\n                    } else t.push(e);\n                };\n            },\n            543: (t, e)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.ControlChange = e.controlChangeIds = e.controlChangeNames = void 0, e.controlChangeNames = {\n                    1: \"modulationWheel\",\n                    2: \"breath\",\n                    4: \"footController\",\n                    5: \"portamentoTime\",\n                    7: \"volume\",\n                    8: \"balance\",\n                    10: \"pan\",\n                    64: \"sustain\",\n                    65: \"portamentoTime\",\n                    66: \"sostenuto\",\n                    67: \"softPedal\",\n                    68: \"legatoFootswitch\",\n                    84: \"portamentoControl\"\n                }, e.controlChangeIds = Object.keys(e.controlChangeNames).reduce(function(t, r) {\n                    return t[e.controlChangeNames[r]] = r, t;\n                }, {});\n                var r = new WeakMap, n = new WeakMap, i = function() {\n                    function t(t, e) {\n                        r.set(this, e), n.set(this, t.controllerType), this.ticks = t.absoluteTime, this.value = t.value;\n                    }\n                    return Object.defineProperty(t.prototype, \"number\", {\n                        get: function() {\n                            return n.get(this);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"name\", {\n                        get: function() {\n                            return e.controlChangeNames[this.number] ? e.controlChangeNames[this.number] : null;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"time\", {\n                        get: function() {\n                            return r.get(this).ticksToSeconds(this.ticks);\n                        },\n                        set: function(t) {\n                            var e = r.get(this);\n                            this.ticks = e.secondsToTicks(t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.toJSON = function() {\n                        return {\n                            number: this.number,\n                            ticks: this.ticks,\n                            time: this.time,\n                            value: this.value\n                        };\n                    }, t;\n                }();\n                e.ControlChange = i;\n            },\n            906: (t, e, r)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.createControlChanges = void 0;\n                var n = r(543);\n                e.createControlChanges = function() {\n                    return new Proxy({}, {\n                        get: function(t, e) {\n                            return t[e] ? t[e] : n.controlChangeIds.hasOwnProperty(e) ? t[n.controlChangeIds[e]] : void 0;\n                        },\n                        set: function(t, e, r) {\n                            return n.controlChangeIds.hasOwnProperty(e) ? t[n.controlChangeIds[e]] = r : t[e] = r, !0;\n                        }\n                    });\n                };\n            },\n            54: function(t, e, r) {\n                \"use strict\";\n                var n = this && this.__spreadArray || function(t, e, r) {\n                    if (r || 2 === arguments.length) for(var n, i = 0, a = e.length; i < a; i++)!n && i in e || (n || (n = Array.prototype.slice.call(e, 0, i)), n[i] = e[i]);\n                    return t.concat(n || Array.prototype.slice.call(e));\n                };\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.encode = void 0;\n                var i = r(289), a = r(535), o = r(507);\n                function s(t, e) {\n                    return {\n                        absoluteTime: t.ticks,\n                        channel: e,\n                        controllerType: t.number,\n                        deltaTime: 0,\n                        type: \"controller\",\n                        value: Math.floor(127 * t.value)\n                    };\n                }\n                function c(t) {\n                    return {\n                        absoluteTime: 0,\n                        channel: t.channel,\n                        deltaTime: 0,\n                        programNumber: t.instrument.number,\n                        type: \"programChange\"\n                    };\n                }\n                e.encode = function(t) {\n                    var e = {\n                        header: {\n                            format: 1,\n                            numTracks: t.tracks.length + 1,\n                            ticksPerBeat: t.header.ppq\n                        },\n                        tracks: n([\n                            n(n(n(n([\n                                {\n                                    absoluteTime: 0,\n                                    deltaTime: 0,\n                                    meta: !0,\n                                    text: t.header.name,\n                                    type: \"trackName\"\n                                }\n                            ], t.header.keySignatures.map(function(t) {\n                                return function(t) {\n                                    var e = a.keySignatureKeys.indexOf(t.key);\n                                    return {\n                                        absoluteTime: t.ticks,\n                                        deltaTime: 0,\n                                        key: e + 7,\n                                        meta: !0,\n                                        scale: \"major\" === t.scale ? 0 : 1,\n                                        type: \"keySignature\"\n                                    };\n                                }(t);\n                            }), !0), t.header.meta.map(function(t) {\n                                var e;\n                                return {\n                                    absoluteTime: (e = t).ticks,\n                                    deltaTime: 0,\n                                    meta: !0,\n                                    text: e.text,\n                                    type: e.type\n                                };\n                            }), !0), t.header.tempos.map(function(t) {\n                                return function(t) {\n                                    return {\n                                        absoluteTime: t.ticks,\n                                        deltaTime: 0,\n                                        meta: !0,\n                                        microsecondsPerBeat: Math.floor(6e7 / t.bpm),\n                                        type: \"setTempo\"\n                                    };\n                                }(t);\n                            }), !0), t.header.timeSignatures.map(function(t) {\n                                return function(t) {\n                                    return {\n                                        absoluteTime: t.ticks,\n                                        deltaTime: 0,\n                                        denominator: t.timeSignature[1],\n                                        meta: !0,\n                                        metronome: 24,\n                                        numerator: t.timeSignature[0],\n                                        thirtyseconds: 8,\n                                        type: \"timeSignature\"\n                                    };\n                                }(t);\n                            }), !0)\n                        ], t.tracks.map(function(t) {\n                            var e;\n                            return n(n(n([\n                                (e = t.name, {\n                                    absoluteTime: 0,\n                                    deltaTime: 0,\n                                    meta: !0,\n                                    text: e,\n                                    type: \"trackName\"\n                                }),\n                                c(t)\n                            ], function(t) {\n                                return (0, o.flatten)(t.notes.map(function(e) {\n                                    return function(t, e) {\n                                        return [\n                                            {\n                                                absoluteTime: t.ticks,\n                                                channel: e,\n                                                deltaTime: 0,\n                                                noteNumber: t.midi,\n                                                type: \"noteOn\",\n                                                velocity: Math.floor(127 * t.velocity)\n                                            },\n                                            {\n                                                absoluteTime: t.ticks + t.durationTicks,\n                                                channel: e,\n                                                deltaTime: 0,\n                                                noteNumber: t.midi,\n                                                type: \"noteOff\",\n                                                velocity: Math.floor(127 * t.noteOffVelocity)\n                                            }\n                                        ];\n                                    }(e, t.channel);\n                                }));\n                            }(t), !0), function(t) {\n                                for(var e = [], r = 0; r < 127; r++)t.controlChanges.hasOwnProperty(r) && t.controlChanges[r].forEach(function(r) {\n                                    e.push(s(r, t.channel));\n                                });\n                                return e;\n                            }(t), !0), function(t) {\n                                var e = [];\n                                return t.pitchBends.forEach(function(r) {\n                                    e.push(function(t, e) {\n                                        return {\n                                            absoluteTime: t.ticks,\n                                            channel: e,\n                                            deltaTime: 0,\n                                            type: \"pitchBend\",\n                                            value: t.value\n                                        };\n                                    }(r, t.channel));\n                                }), e;\n                            }(t), !0);\n                        }), !0)\n                    };\n                    return e.tracks = e.tracks.map(function(t) {\n                        t = t.sort(function(t, e) {\n                            return t.absoluteTime - e.absoluteTime;\n                        });\n                        var e = 0;\n                        return t.forEach(function(t) {\n                            t.deltaTime = t.absoluteTime - e, e = t.absoluteTime, delete t.absoluteTime;\n                        }), t.push({\n                            deltaTime: 0,\n                            meta: !0,\n                            type: \"endOfTrack\"\n                        }), t;\n                    }), new Uint8Array((0, i.writeMidi)(e));\n                };\n            },\n            535: (t, e, r)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.Header = e.keySignatureKeys = void 0;\n                var n = r(805), i = new WeakMap;\n                e.keySignatureKeys = [\n                    \"Cb\",\n                    \"Gb\",\n                    \"Db\",\n                    \"Ab\",\n                    \"Eb\",\n                    \"Bb\",\n                    \"F\",\n                    \"C\",\n                    \"G\",\n                    \"D\",\n                    \"A\",\n                    \"E\",\n                    \"B\",\n                    \"F#\",\n                    \"C#\"\n                ];\n                var a = function() {\n                    function t(t) {\n                        var r = this;\n                        if (this.tempos = [], this.timeSignatures = [], this.keySignatures = [], this.meta = [], this.name = \"\", i.set(this, 480), t) {\n                            i.set(this, t.header.ticksPerBeat), t.tracks.forEach(function(t) {\n                                t.forEach(function(t) {\n                                    t.meta && (\"timeSignature\" === t.type ? r.timeSignatures.push({\n                                        ticks: t.absoluteTime,\n                                        timeSignature: [\n                                            t.numerator,\n                                            t.denominator\n                                        ]\n                                    }) : \"setTempo\" === t.type ? r.tempos.push({\n                                        bpm: 6e7 / t.microsecondsPerBeat,\n                                        ticks: t.absoluteTime\n                                    }) : \"keySignature\" === t.type && r.keySignatures.push({\n                                        key: e.keySignatureKeys[t.key + 7],\n                                        scale: 0 === t.scale ? \"major\" : \"minor\",\n                                        ticks: t.absoluteTime\n                                    }));\n                                });\n                            });\n                            var n = 0;\n                            t.tracks[0].forEach(function(t) {\n                                n += t.deltaTime, t.meta && (\"trackName\" === t.type ? r.name = t.text : \"text\" !== t.type && \"cuePoint\" !== t.type && \"marker\" !== t.type && \"lyrics\" !== t.type || r.meta.push({\n                                    text: t.text,\n                                    ticks: n,\n                                    type: t.type\n                                }));\n                            }), this.update();\n                        }\n                    }\n                    return t.prototype.update = function() {\n                        var t = this, e = 0, r = 0;\n                        this.tempos.sort(function(t, e) {\n                            return t.ticks - e.ticks;\n                        }), this.tempos.forEach(function(n, i) {\n                            var a = i > 0 ? t.tempos[i - 1].bpm : t.tempos[0].bpm, o = n.ticks / t.ppq - r, s = 60 / a * o;\n                            n.time = s + e, e = n.time, r += o;\n                        }), this.timeSignatures.sort(function(t, e) {\n                            return t.ticks - e.ticks;\n                        }), this.timeSignatures.forEach(function(e, r) {\n                            var n = r > 0 ? t.timeSignatures[r - 1] : t.timeSignatures[0], i = (e.ticks - n.ticks) / t.ppq / n.timeSignature[0] / (n.timeSignature[1] / 4);\n                            n.measures = n.measures || 0, e.measures = i + n.measures;\n                        });\n                    }, t.prototype.ticksToSeconds = function(t) {\n                        var e = (0, n.search)(this.tempos, t);\n                        if (-1 !== e) {\n                            var r = this.tempos[e], i = r.time, a = (t - r.ticks) / this.ppq;\n                            return i + 60 / r.bpm * a;\n                        }\n                        return t / this.ppq * .5;\n                    }, t.prototype.ticksToMeasures = function(t) {\n                        var e = (0, n.search)(this.timeSignatures, t);\n                        if (-1 !== e) {\n                            var r = this.timeSignatures[e], i = (t - r.ticks) / this.ppq;\n                            return r.measures + i / (r.timeSignature[0] / r.timeSignature[1]) / 4;\n                        }\n                        return t / this.ppq / 4;\n                    }, Object.defineProperty(t.prototype, \"ppq\", {\n                        get: function() {\n                            return i.get(this);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.secondsToTicks = function(t) {\n                        var e = (0, n.search)(this.tempos, t, \"time\");\n                        if (-1 !== e) {\n                            var r = this.tempos[e], i = (t - r.time) / (60 / r.bpm);\n                            return Math.round(r.ticks + i * this.ppq);\n                        }\n                        var a = t / .5;\n                        return Math.round(a * this.ppq);\n                    }, t.prototype.toJSON = function() {\n                        return {\n                            keySignatures: this.keySignatures,\n                            meta: this.meta,\n                            name: this.name,\n                            ppq: this.ppq,\n                            tempos: this.tempos.map(function(t) {\n                                return {\n                                    bpm: t.bpm,\n                                    ticks: t.ticks\n                                };\n                            }),\n                            timeSignatures: this.timeSignatures\n                        };\n                    }, t.prototype.fromJSON = function(t) {\n                        this.name = t.name, this.tempos = t.tempos.map(function(t) {\n                            return Object.assign({}, t);\n                        }), this.timeSignatures = t.timeSignatures.map(function(t) {\n                            return Object.assign({}, t);\n                        }), this.keySignatures = t.keySignatures.map(function(t) {\n                            return Object.assign({}, t);\n                        }), this.meta = t.meta.map(function(t) {\n                            return Object.assign({}, t);\n                        }), i.set(this, t.ppq), this.update();\n                    }, t.prototype.setTempo = function(t) {\n                        this.tempos = [\n                            {\n                                bpm: t,\n                                ticks: 0\n                            }\n                        ], this.update();\n                    }, t;\n                }();\n                e.Header = a;\n            },\n            362: (t, e, r)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.Instrument = void 0;\n                var n = r(438), i = new WeakMap, a = function() {\n                    function t(t, e) {\n                        if (this.number = 0, i.set(this, e), this.number = 0, t) {\n                            var r = t.find(function(t) {\n                                return \"programChange\" === t.type;\n                            });\n                            r && (this.number = r.programNumber);\n                        }\n                    }\n                    return Object.defineProperty(t.prototype, \"name\", {\n                        get: function() {\n                            return this.percussion ? n.DrumKitByPatchID[this.number] : n.instrumentByPatchID[this.number];\n                        },\n                        set: function(t) {\n                            var e = n.instrumentByPatchID.indexOf(t);\n                            -1 !== e && (this.number = e);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"family\", {\n                        get: function() {\n                            return this.percussion ? \"drums\" : n.InstrumentFamilyByID[Math.floor(this.number / 8)];\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"percussion\", {\n                        get: function() {\n                            return 9 === i.get(this).channel;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.toJSON = function() {\n                        return {\n                            family: this.family,\n                            number: this.number,\n                            name: this.name\n                        };\n                    }, t.prototype.fromJSON = function(t) {\n                        this.number = t.number;\n                    }, t;\n                }();\n                e.Instrument = a;\n            },\n            438: (t, e)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.DrumKitByPatchID = e.InstrumentFamilyByID = e.instrumentByPatchID = void 0, e.instrumentByPatchID = [\n                    \"acoustic grand piano\",\n                    \"bright acoustic piano\",\n                    \"electric grand piano\",\n                    \"honky-tonk piano\",\n                    \"electric piano 1\",\n                    \"electric piano 2\",\n                    \"harpsichord\",\n                    \"clavi\",\n                    \"celesta\",\n                    \"glockenspiel\",\n                    \"music box\",\n                    \"vibraphone\",\n                    \"marimba\",\n                    \"xylophone\",\n                    \"tubular bells\",\n                    \"dulcimer\",\n                    \"drawbar organ\",\n                    \"percussive organ\",\n                    \"rock organ\",\n                    \"church organ\",\n                    \"reed organ\",\n                    \"accordion\",\n                    \"harmonica\",\n                    \"tango accordion\",\n                    \"acoustic guitar (nylon)\",\n                    \"acoustic guitar (steel)\",\n                    \"electric guitar (jazz)\",\n                    \"electric guitar (clean)\",\n                    \"electric guitar (muted)\",\n                    \"overdriven guitar\",\n                    \"distortion guitar\",\n                    \"guitar harmonics\",\n                    \"acoustic bass\",\n                    \"electric bass (finger)\",\n                    \"electric bass (pick)\",\n                    \"fretless bass\",\n                    \"slap bass 1\",\n                    \"slap bass 2\",\n                    \"synth bass 1\",\n                    \"synth bass 2\",\n                    \"violin\",\n                    \"viola\",\n                    \"cello\",\n                    \"contrabass\",\n                    \"tremolo strings\",\n                    \"pizzicato strings\",\n                    \"orchestral harp\",\n                    \"timpani\",\n                    \"string ensemble 1\",\n                    \"string ensemble 2\",\n                    \"synthstrings 1\",\n                    \"synthstrings 2\",\n                    \"choir aahs\",\n                    \"voice oohs\",\n                    \"synth voice\",\n                    \"orchestra hit\",\n                    \"trumpet\",\n                    \"trombone\",\n                    \"tuba\",\n                    \"muted trumpet\",\n                    \"french horn\",\n                    \"brass section\",\n                    \"synthbrass 1\",\n                    \"synthbrass 2\",\n                    \"soprano sax\",\n                    \"alto sax\",\n                    \"tenor sax\",\n                    \"baritone sax\",\n                    \"oboe\",\n                    \"english horn\",\n                    \"bassoon\",\n                    \"clarinet\",\n                    \"piccolo\",\n                    \"flute\",\n                    \"recorder\",\n                    \"pan flute\",\n                    \"blown bottle\",\n                    \"shakuhachi\",\n                    \"whistle\",\n                    \"ocarina\",\n                    \"lead 1 (square)\",\n                    \"lead 2 (sawtooth)\",\n                    \"lead 3 (calliope)\",\n                    \"lead 4 (chiff)\",\n                    \"lead 5 (charang)\",\n                    \"lead 6 (voice)\",\n                    \"lead 7 (fifths)\",\n                    \"lead 8 (bass + lead)\",\n                    \"pad 1 (new age)\",\n                    \"pad 2 (warm)\",\n                    \"pad 3 (polysynth)\",\n                    \"pad 4 (choir)\",\n                    \"pad 5 (bowed)\",\n                    \"pad 6 (metallic)\",\n                    \"pad 7 (halo)\",\n                    \"pad 8 (sweep)\",\n                    \"fx 1 (rain)\",\n                    \"fx 2 (soundtrack)\",\n                    \"fx 3 (crystal)\",\n                    \"fx 4 (atmosphere)\",\n                    \"fx 5 (brightness)\",\n                    \"fx 6 (goblins)\",\n                    \"fx 7 (echoes)\",\n                    \"fx 8 (sci-fi)\",\n                    \"sitar\",\n                    \"banjo\",\n                    \"shamisen\",\n                    \"koto\",\n                    \"kalimba\",\n                    \"bag pipe\",\n                    \"fiddle\",\n                    \"shanai\",\n                    \"tinkle bell\",\n                    \"agogo\",\n                    \"steel drums\",\n                    \"woodblock\",\n                    \"taiko drum\",\n                    \"melodic tom\",\n                    \"synth drum\",\n                    \"reverse cymbal\",\n                    \"guitar fret noise\",\n                    \"breath noise\",\n                    \"seashore\",\n                    \"bird tweet\",\n                    \"telephone ring\",\n                    \"helicopter\",\n                    \"applause\",\n                    \"gunshot\"\n                ], e.InstrumentFamilyByID = [\n                    \"piano\",\n                    \"chromatic percussion\",\n                    \"organ\",\n                    \"guitar\",\n                    \"bass\",\n                    \"strings\",\n                    \"ensemble\",\n                    \"brass\",\n                    \"reed\",\n                    \"pipe\",\n                    \"synth lead\",\n                    \"synth pad\",\n                    \"synth effects\",\n                    \"world\",\n                    \"percussive\",\n                    \"sound effects\"\n                ], e.DrumKitByPatchID = {\n                    0: \"standard kit\",\n                    8: \"room kit\",\n                    16: \"power kit\",\n                    24: \"electronic kit\",\n                    25: \"tr-808 kit\",\n                    32: \"jazz kit\",\n                    40: \"brush kit\",\n                    48: \"orchestra kit\",\n                    56: \"sound fx kit\"\n                };\n            },\n            233: function(t, e, r) {\n                \"use strict\";\n                var n = this && this.__awaiter || function(t, e, r, n) {\n                    return new (r || (r = Promise))(function(i, a) {\n                        function o(t) {\n                            try {\n                                c(n.next(t));\n                            } catch (t) {\n                                a(t);\n                            }\n                        }\n                        function s(t) {\n                            try {\n                                c(n.throw(t));\n                            } catch (t) {\n                                a(t);\n                            }\n                        }\n                        function c(t) {\n                            var e;\n                            t.done ? i(t.value) : (e = t.value, e instanceof r ? e : new r(function(t) {\n                                t(e);\n                            })).then(o, s);\n                        }\n                        c((n = n.apply(t, e || [])).next());\n                    });\n                }, i = this && this.__generator || function(t, e) {\n                    var r, n, i, a, o = {\n                        label: 0,\n                        sent: function() {\n                            if (1 & i[0]) throw i[1];\n                            return i[1];\n                        },\n                        trys: [],\n                        ops: []\n                    };\n                    return a = {\n                        next: s(0),\n                        throw: s(1),\n                        return: s(2)\n                    }, \"function\" == typeof Symbol && (a[Symbol.iterator] = function() {\n                        return this;\n                    }), a;\n                    function s(a) {\n                        return function(s) {\n                            return function(a) {\n                                if (r) throw new TypeError(\"Generator is already executing.\");\n                                for(; o;)try {\n                                    if (r = 1, n && (i = 2 & a[0] ? n.return : a[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, a[1])).done) return i;\n                                    switch(n = 0, i && (a = [\n                                        2 & a[0],\n                                        i.value\n                                    ]), a[0]){\n                                        case 0:\n                                        case 1:\n                                            i = a;\n                                            break;\n                                        case 4:\n                                            return o.label++, {\n                                                value: a[1],\n                                                done: !1\n                                            };\n                                        case 5:\n                                            o.label++, n = a[1], a = [\n                                                0\n                                            ];\n                                            continue;\n                                        case 7:\n                                            a = o.ops.pop(), o.trys.pop();\n                                            continue;\n                                        default:\n                                            if (!((i = (i = o.trys).length > 0 && i[i.length - 1]) || 6 !== a[0] && 2 !== a[0])) {\n                                                o = 0;\n                                                continue;\n                                            }\n                                            if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) {\n                                                o.label = a[1];\n                                                break;\n                                            }\n                                            if (6 === a[0] && o.label < i[1]) {\n                                                o.label = i[1], i = a;\n                                                break;\n                                            }\n                                            if (i && o.label < i[2]) {\n                                                o.label = i[2], o.ops.push(a);\n                                                break;\n                                            }\n                                            i[2] && o.ops.pop(), o.trys.pop();\n                                            continue;\n                                    }\n                                    a = e.call(t, o);\n                                } catch (t) {\n                                    a = [\n                                        6,\n                                        t\n                                    ], n = 0;\n                                } finally{\n                                    r = i = 0;\n                                }\n                                if (5 & a[0]) throw a[1];\n                                return {\n                                    value: a[0] ? a[1] : void 0,\n                                    done: !0\n                                };\n                            }([\n                                a,\n                                s\n                            ]);\n                        };\n                    }\n                };\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.Header = e.Track = e.Midi = void 0;\n                var a = r(289), o = r(535), s = r(334), c = r(54), u = function() {\n                    function t(t) {\n                        var e = this, r = null;\n                        if (t) {\n                            var n = t instanceof ArrayBuffer ? new Uint8Array(t) : t;\n                            (r = (0, a.parseMidi)(n)).tracks.forEach(function(t) {\n                                var e = 0;\n                                t.forEach(function(t) {\n                                    e += t.deltaTime, t.absoluteTime = e;\n                                });\n                            }), r.tracks = function(t) {\n                                for(var e = [], r = 0; r < t.length; r++)for(var n = e.length, i = new Map, a = Array(16).fill(0), o = 0, s = t[r]; o < s.length; o++){\n                                    var c = s[o], u = n, h = c.channel;\n                                    if (void 0 !== h) {\n                                        \"programChange\" === c.type && (a[h] = c.programNumber);\n                                        var f = a[h], p = \"\".concat(f, \" \").concat(h);\n                                        i.has(p) ? u = i.get(p) : (u = n + i.size, i.set(p, u));\n                                    }\n                                    e[u] || e.push([]), e[u].push(c);\n                                }\n                                return e;\n                            }(r.tracks);\n                        }\n                        this.header = new o.Header(r), this.tracks = [], t && (this.tracks = r.tracks.map(function(t) {\n                            return new s.Track(t, e.header);\n                        }), 1 === r.header.format && 0 === this.tracks[0].duration && this.tracks.shift());\n                    }\n                    return t.fromUrl = function(e) {\n                        return n(this, void 0, void 0, function() {\n                            var r;\n                            return i(this, function(n) {\n                                switch(n.label){\n                                    case 0:\n                                        return [\n                                            4,\n                                            fetch(e)\n                                        ];\n                                    case 1:\n                                        return (r = n.sent()).ok ? [\n                                            4,\n                                            r.arrayBuffer()\n                                        ] : [\n                                            3,\n                                            3\n                                        ];\n                                    case 2:\n                                        return [\n                                            2,\n                                            new t(n.sent())\n                                        ];\n                                    case 3:\n                                        throw new Error(\"Could not load '\".concat(e, \"'\"));\n                                }\n                            });\n                        });\n                    }, Object.defineProperty(t.prototype, \"name\", {\n                        get: function() {\n                            return this.header.name;\n                        },\n                        set: function(t) {\n                            this.header.name = t;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"duration\", {\n                        get: function() {\n                            var t = this.tracks.map(function(t) {\n                                return t.duration;\n                            });\n                            return Math.max.apply(Math, t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"durationTicks\", {\n                        get: function() {\n                            var t = this.tracks.map(function(t) {\n                                return t.durationTicks;\n                            });\n                            return Math.max.apply(Math, t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.addTrack = function() {\n                        var t = new s.Track(void 0, this.header);\n                        return this.tracks.push(t), t;\n                    }, t.prototype.toArray = function() {\n                        return (0, c.encode)(this);\n                    }, t.prototype.toJSON = function() {\n                        return {\n                            header: this.header.toJSON(),\n                            tracks: this.tracks.map(function(t) {\n                                return t.toJSON();\n                            })\n                        };\n                    }, t.prototype.fromJSON = function(t) {\n                        var e = this;\n                        this.header = new o.Header, this.header.fromJSON(t.header), this.tracks = t.tracks.map(function(t) {\n                            var r = new s.Track(void 0, e.header);\n                            return r.fromJSON(t), r;\n                        });\n                    }, t.prototype.clone = function() {\n                        var e = new t;\n                        return e.fromJSON(this.toJSON()), e;\n                    }, t;\n                }();\n                e.Midi = u;\n                var h = r(334);\n                Object.defineProperty(e, \"Track\", {\n                    enumerable: !0,\n                    get: function() {\n                        return h.Track;\n                    }\n                });\n                var f = r(535);\n                Object.defineProperty(e, \"Header\", {\n                    enumerable: !0,\n                    get: function() {\n                        return f.Header;\n                    }\n                });\n            },\n            518: (t, e)=>{\n                \"use strict\";\n                function r(t) {\n                    return [\n                        \"C\",\n                        \"C#\",\n                        \"D\",\n                        \"D#\",\n                        \"E\",\n                        \"F\",\n                        \"F#\",\n                        \"G\",\n                        \"G#\",\n                        \"A\",\n                        \"A#\",\n                        \"B\"\n                    ][t % 12];\n                }\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.Note = void 0;\n                var n, i, a = (n = /^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i, i = {\n                    cbb: -2,\n                    cb: -1,\n                    c: 0,\n                    \"c#\": 1,\n                    cx: 2,\n                    dbb: 0,\n                    db: 1,\n                    d: 2,\n                    \"d#\": 3,\n                    dx: 4,\n                    ebb: 2,\n                    eb: 3,\n                    e: 4,\n                    \"e#\": 5,\n                    ex: 6,\n                    fbb: 3,\n                    fb: 4,\n                    f: 5,\n                    \"f#\": 6,\n                    fx: 7,\n                    gbb: 5,\n                    gb: 6,\n                    g: 7,\n                    \"g#\": 8,\n                    gx: 9,\n                    abb: 7,\n                    ab: 8,\n                    a: 9,\n                    \"a#\": 10,\n                    ax: 11,\n                    bbb: 9,\n                    bb: 10,\n                    b: 11,\n                    \"b#\": 12,\n                    bx: 13\n                }, function(t) {\n                    var e = n.exec(t), r = e[1], a = e[2];\n                    return i[r.toLowerCase()] + 12 * (parseInt(a, 10) + 1);\n                }), o = new WeakMap, s = function() {\n                    function t(t, e, r) {\n                        o.set(this, r), this.midi = t.midi, this.velocity = t.velocity, this.noteOffVelocity = e.velocity, this.ticks = t.ticks, this.durationTicks = e.ticks - t.ticks;\n                    }\n                    return Object.defineProperty(t.prototype, \"name\", {\n                        get: function() {\n                            var t, e;\n                            return t = this.midi, e = Math.floor(t / 12) - 1, r(t) + e.toString();\n                        },\n                        set: function(t) {\n                            this.midi = a(t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"octave\", {\n                        get: function() {\n                            return Math.floor(this.midi / 12) - 1;\n                        },\n                        set: function(t) {\n                            var e = t - this.octave;\n                            this.midi += 12 * e;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"pitch\", {\n                        get: function() {\n                            return r(this.midi);\n                        },\n                        set: function(t) {\n                            this.midi = 12 * (this.octave + 1) + [\n                                \"C\",\n                                \"C#\",\n                                \"D\",\n                                \"D#\",\n                                \"E\",\n                                \"F\",\n                                \"F#\",\n                                \"G\",\n                                \"G#\",\n                                \"A\",\n                                \"A#\",\n                                \"B\"\n                            ].indexOf(t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"duration\", {\n                        get: function() {\n                            var t = o.get(this);\n                            return t.ticksToSeconds(this.ticks + this.durationTicks) - t.ticksToSeconds(this.ticks);\n                        },\n                        set: function(t) {\n                            var e = o.get(this).secondsToTicks(this.time + t);\n                            this.durationTicks = e - this.ticks;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"time\", {\n                        get: function() {\n                            return o.get(this).ticksToSeconds(this.ticks);\n                        },\n                        set: function(t) {\n                            var e = o.get(this);\n                            this.ticks = e.secondsToTicks(t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"bars\", {\n                        get: function() {\n                            return o.get(this).ticksToMeasures(this.ticks);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.toJSON = function() {\n                        return {\n                            duration: this.duration,\n                            durationTicks: this.durationTicks,\n                            midi: this.midi,\n                            name: this.name,\n                            ticks: this.ticks,\n                            time: this.time,\n                            velocity: this.velocity\n                        };\n                    }, t;\n                }();\n                e.Note = s;\n            },\n            882: (t, e)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.PitchBend = void 0;\n                var r = new WeakMap, n = function() {\n                    function t(t, e) {\n                        r.set(this, e), this.ticks = t.absoluteTime, this.value = t.value;\n                    }\n                    return Object.defineProperty(t.prototype, \"time\", {\n                        get: function() {\n                            return r.get(this).ticksToSeconds(this.ticks);\n                        },\n                        set: function(t) {\n                            var e = r.get(this);\n                            this.ticks = e.secondsToTicks(t);\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.toJSON = function() {\n                        return {\n                            ticks: this.ticks,\n                            time: this.time,\n                            value: this.value\n                        };\n                    }, t;\n                }();\n                e.PitchBend = n;\n            },\n            334: (t, e, r)=>{\n                \"use strict\";\n                Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                }), e.Track = void 0;\n                var n = r(805), i = r(543), a = r(906), o = r(882), s = r(362), c = r(518), u = new WeakMap, h = function() {\n                    function t(t, e) {\n                        var r = this;\n                        if (this.name = \"\", this.notes = [], this.controlChanges = (0, a.createControlChanges)(), this.pitchBends = [], u.set(this, e), t) {\n                            var n = t.find(function(t) {\n                                return \"trackName\" === t.type;\n                            });\n                            this.name = n ? n.text : \"\";\n                        }\n                        if (this.instrument = new s.Instrument(t, this), this.channel = 0, t) {\n                            for(var i = t.filter(function(t) {\n                                return \"noteOn\" === t.type;\n                            }), o = t.filter(function(t) {\n                                return \"noteOff\" === t.type;\n                            }), c = function() {\n                                var t = i.shift();\n                                h.channel = t.channel;\n                                var e = o.findIndex(function(e) {\n                                    return e.noteNumber === t.noteNumber && e.absoluteTime >= t.absoluteTime;\n                                });\n                                if (-1 !== e) {\n                                    var r = o.splice(e, 1)[0];\n                                    h.addNote({\n                                        durationTicks: r.absoluteTime - t.absoluteTime,\n                                        midi: t.noteNumber,\n                                        noteOffVelocity: r.velocity / 127,\n                                        ticks: t.absoluteTime,\n                                        velocity: t.velocity / 127\n                                    });\n                                }\n                            }, h = this; i.length;)c();\n                            t.filter(function(t) {\n                                return \"controller\" === t.type;\n                            }).forEach(function(t) {\n                                r.addCC({\n                                    number: t.controllerType,\n                                    ticks: t.absoluteTime,\n                                    value: t.value / 127\n                                });\n                            }), t.filter(function(t) {\n                                return \"pitchBend\" === t.type;\n                            }).forEach(function(t) {\n                                r.addPitchBend({\n                                    ticks: t.absoluteTime,\n                                    value: t.value / Math.pow(2, 13)\n                                });\n                            });\n                            var f = t.find(function(t) {\n                                return \"endOfTrack\" === t.type;\n                            });\n                            this.endOfTrackTicks = void 0 !== f ? f.absoluteTime : void 0;\n                        }\n                    }\n                    return t.prototype.addNote = function(t) {\n                        var e = u.get(this), r = new c.Note({\n                            midi: 0,\n                            ticks: 0,\n                            velocity: 1\n                        }, {\n                            ticks: 0,\n                            velocity: 0\n                        }, e);\n                        return Object.assign(r, t), (0, n.insert)(this.notes, r, \"ticks\"), this;\n                    }, t.prototype.addCC = function(t) {\n                        var e = u.get(this), r = new i.ControlChange({\n                            controllerType: t.number\n                        }, e);\n                        return delete t.number, Object.assign(r, t), Array.isArray(this.controlChanges[r.number]) || (this.controlChanges[r.number] = []), (0, n.insert)(this.controlChanges[r.number], r, \"ticks\"), this;\n                    }, t.prototype.addPitchBend = function(t) {\n                        var e = u.get(this), r = new o.PitchBend({}, e);\n                        return Object.assign(r, t), (0, n.insert)(this.pitchBends, r, \"ticks\"), this;\n                    }, Object.defineProperty(t.prototype, \"duration\", {\n                        get: function() {\n                            if (!this.notes.length) return 0;\n                            for(var t = this.notes[this.notes.length - 1].time + this.notes[this.notes.length - 1].duration, e = 0; e < this.notes.length - 1; e++){\n                                var r = this.notes[e].time + this.notes[e].duration;\n                                t < r && (t = r);\n                            }\n                            return t;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), Object.defineProperty(t.prototype, \"durationTicks\", {\n                        get: function() {\n                            if (!this.notes.length) return 0;\n                            for(var t = this.notes[this.notes.length - 1].ticks + this.notes[this.notes.length - 1].durationTicks, e = 0; e < this.notes.length - 1; e++){\n                                var r = this.notes[e].ticks + this.notes[e].durationTicks;\n                                t < r && (t = r);\n                            }\n                            return t;\n                        },\n                        enumerable: !1,\n                        configurable: !0\n                    }), t.prototype.fromJSON = function(t) {\n                        var e = this;\n                        for(var r in this.name = t.name, this.channel = t.channel, this.instrument = new s.Instrument(void 0, this), this.instrument.fromJSON(t.instrument), void 0 !== t.endOfTrackTicks && (this.endOfTrackTicks = t.endOfTrackTicks), t.controlChanges)t.controlChanges[r] && t.controlChanges[r].forEach(function(t) {\n                            e.addCC({\n                                number: t.number,\n                                ticks: t.ticks,\n                                value: t.value\n                            });\n                        });\n                        t.notes.forEach(function(t) {\n                            e.addNote({\n                                durationTicks: t.durationTicks,\n                                midi: t.midi,\n                                ticks: t.ticks,\n                                velocity: t.velocity\n                            });\n                        });\n                    }, t.prototype.toJSON = function() {\n                        for(var t = {}, e = 0; e < 127; e++)this.controlChanges.hasOwnProperty(e) && (t[e] = this.controlChanges[e].map(function(t) {\n                            return t.toJSON();\n                        }));\n                        var r = {\n                            channel: this.channel,\n                            controlChanges: t,\n                            pitchBends: this.pitchBends.map(function(t) {\n                                return t.toJSON();\n                            }),\n                            instrument: this.instrument.toJSON(),\n                            name: this.name,\n                            notes: this.notes.map(function(t) {\n                                return t.toJSON();\n                            })\n                        };\n                        return void 0 !== this.endOfTrackTicks && (r.endOfTrackTicks = this.endOfTrackTicks), r;\n                    }, t;\n                }();\n                e.Track = h;\n            }\n        }, e = {};\n        function r(n) {\n            var i = e[n];\n            if (void 0 !== i) return i.exports;\n            var a = e[n] = {\n                exports: {}\n            };\n            return t[n].call(a.exports, a, a.exports, r), a.exports;\n        }\n        return r.d = (t, e)=>{\n            for(var n in e)r.o(e, n) && !r.o(t, n) && Object.defineProperty(t, n, {\n                enumerable: !0,\n                get: e[n]\n            });\n        }, r.o = (t, e)=>Object.prototype.hasOwnProperty.call(t, e), r.r = (t)=>{\n            \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n                value: \"Module\"\n            }), Object.defineProperty(t, \"__esModule\", {\n                value: !0\n            });\n        }, r(233);\n    })();\n});\n\n//# sourceMappingURL=index.054fd728.js.map\n","!function(t,e){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)(\"object\"==typeof exports?exports:t)[n]=r[n]}}(\"undefined\"!=typeof self?self:this,(function(){return(()=>{var t={507:(t,e,r)=>{\"use strict\";function n(t){var e=[];return i(t,e),e}function i(t,e){for(var r=0;r<t.length;r++){var n=t[r];Array.isArray(n)?i(n,e):e.push(n)}}r.r(e),r.d(e,{flatten:()=>n})},289:(t,e,r)=>{e.parseMidi=r(666),e.writeMidi=r(865)},666:t=>{function e(t){for(var e,n=new r(t),i=[];!n.eof();){var a=o();i.push(a)}return i;function o(){var t={};t.deltaTime=n.readVarInt();var r=n.readUInt8();if(240==(240&r)){if(255!==r){if(240==r)return t.type=\"sysEx\",a=n.readVarInt(),t.data=n.readBytes(a),t;if(247==r)return t.type=\"endSysEx\",a=n.readVarInt(),t.data=n.readBytes(a),t;throw\"Unrecognised MIDI event type byte: \"+r}t.meta=!0;var i=n.readUInt8(),a=n.readVarInt();switch(i){case 0:if(t.type=\"sequenceNumber\",2!==a)throw\"Expected length for sequenceNumber event is 2, got \"+a;return t.number=n.readUInt16(),t;case 1:return t.type=\"text\",t.text=n.readString(a),t;case 2:return t.type=\"copyrightNotice\",t.text=n.readString(a),t;case 3:return t.type=\"trackName\",t.text=n.readString(a),t;case 4:return t.type=\"instrumentName\",t.text=n.readString(a),t;case 5:return t.type=\"lyrics\",t.text=n.readString(a),t;case 6:return t.type=\"marker\",t.text=n.readString(a),t;case 7:return t.type=\"cuePoint\",t.text=n.readString(a),t;case 32:if(t.type=\"channelPrefix\",1!=a)throw\"Expected length for channelPrefix event is 1, got \"+a;return t.channel=n.readUInt8(),t;case 33:if(t.type=\"portPrefix\",1!=a)throw\"Expected length for portPrefix event is 1, got \"+a;return t.port=n.readUInt8(),t;case 47:if(t.type=\"endOfTrack\",0!=a)throw\"Expected length for endOfTrack event is 0, got \"+a;return t;case 81:if(t.type=\"setTempo\",3!=a)throw\"Expected length for setTempo event is 3, got \"+a;return t.microsecondsPerBeat=n.readUInt24(),t;case 84:if(t.type=\"smpteOffset\",5!=a)throw\"Expected length for smpteOffset event is 5, got \"+a;var o=n.readUInt8();return t.frameRate={0:24,32:25,64:29,96:30}[96&o],t.hour=31&o,t.min=n.readUInt8(),t.sec=n.readUInt8(),t.frame=n.readUInt8(),t.subFrame=n.readUInt8(),t;case 88:if(t.type=\"timeSignature\",4!=a)throw\"Expected length for timeSignature event is 4, got \"+a;return t.numerator=n.readUInt8(),t.denominator=1<<n.readUInt8(),t.metronome=n.readUInt8(),t.thirtyseconds=n.readUInt8(),t;case 89:if(t.type=\"keySignature\",2!=a)throw\"Expected length for keySignature event is 2, got \"+a;return t.key=n.readInt8(),t.scale=n.readUInt8(),t;case 127:return t.type=\"sequencerSpecific\",t.data=n.readBytes(a),t;default:return t.type=\"unknownMeta\",t.data=n.readBytes(a),t.metatypeByte=i,t}}else{var s;if(0==(128&r)){if(null===e)throw\"Running status byte encountered before status byte\";s=r,r=e,t.running=!0}else s=n.readUInt8(),e=r;var c=r>>4;switch(t.channel=15&r,c){case 8:return t.type=\"noteOff\",t.noteNumber=s,t.velocity=n.readUInt8(),t;case 9:var u=n.readUInt8();return t.type=0===u?\"noteOff\":\"noteOn\",t.noteNumber=s,t.velocity=u,0===u&&(t.byte9=!0),t;case 10:return t.type=\"noteAftertouch\",t.noteNumber=s,t.amount=n.readUInt8(),t;case 11:return t.type=\"controller\",t.controllerType=s,t.value=n.readUInt8(),t;case 12:return t.type=\"programChange\",t.programNumber=s,t;case 13:return t.type=\"channelAftertouch\",t.amount=s,t;case 14:return t.type=\"pitchBend\",t.value=s+(n.readUInt8()<<7)-8192,t;default:throw\"Unrecognised MIDI event type: \"+c}}}}function r(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}r.prototype.eof=function(){return this.pos>=this.bufferLen},r.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},r.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},r.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},r.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-16777216:t},r.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},r.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)},r.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(!(128&e))return t+e;t+=127&e,t<<=7}return t},r.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32();return{id:t,length:e,data:this.readBytes(e)}},t.exports=function(t){var n=new r(t),i=n.readChunk();if(\"MThd\"!=i.id)throw\"Bad MIDI file.  Expected 'MHdr', got: '\"+i.id+\"'\";for(var a=function(t){var e=new r(t),n={format:e.readUInt16(),numTracks:e.readUInt16()},i=e.readUInt16();return 32768&i?(n.framesPerSecond=256-(i>>8),n.ticksPerFrame=255&i):n.ticksPerBeat=i,n}(i.data),o=[],s=0;!n.eof()&&s<a.numTracks;s++){var c=n.readChunk();if(\"MTrk\"!=c.id)throw\"Bad MIDI file.  Expected 'MTrk', got: '\"+c.id+\"'\";var u=e(c.data);o.push(u)}return{header:a,tracks:o}}},865:t=>{function e(t,e,i){var a,o=new n,s=e.length,c=null;for(a=0;a<s;a++)!1!==i.running&&(i.running||e[a].running)||(c=null),c=r(o,e[a],c,i.useByte9ForNoteOff);t.writeChunk(\"MTrk\",o.buffer)}function r(t,e,r,n){var i=e.type,a=e.deltaTime,o=e.text||\"\",s=e.data||[],c=null;switch(t.writeVarInt(a),i){case\"sequenceNumber\":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case\"text\":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case\"copyrightNotice\":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case\"trackName\":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case\"instrumentName\":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case\"lyrics\":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case\"marker\":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case\"cuePoint\":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case\"channelPrefix\":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case\"portPrefix\":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case\"endOfTrack\":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case\"setTempo\":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case\"smpteOffset\":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u=31&e.hour|{24:0,25:32,29:64,30:96}[e.frameRate];t.writeUInt8(u),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case\"timeSignature\":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case\"keySignature\":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case\"sequencerSpecific\":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(s.length),t.writeBytes(s);break;case\"unknownMeta\":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(s.length),t.writeBytes(s));break;case\"sysEx\":t.writeUInt8(240),t.writeVarInt(s.length),t.writeBytes(s);break;case\"endSysEx\":t.writeUInt8(247),t.writeVarInt(s.length),t.writeBytes(s);break;case\"noteOff\":(c=(!1!==n&&e.byte9||n&&0==e.velocity?144:128)|e.channel)!==r&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case\"noteOn\":(c=144|e.channel)!==r&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case\"noteAftertouch\":(c=160|e.channel)!==r&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case\"controller\":(c=176|e.channel)!==r&&t.writeUInt8(c),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case\"programChange\":(c=192|e.channel)!==r&&t.writeUInt8(c),t.writeUInt8(e.programNumber);break;case\"channelAftertouch\":(c=208|e.channel)!==r&&t.writeUInt8(c),t.writeUInt8(e.amount);break;case\"pitchBend\":(c=224|e.channel)!==r&&t.writeUInt8(c);var f=8192+e.value,p=127&f,l=f>>7&127;t.writeUInt8(p),t.writeUInt8(l);break;default:throw\"Unrecognized event type: \"+i}return c}function n(){this.buffer=[]}n.prototype.writeUInt8=function(t){this.buffer.push(255&t)},n.prototype.writeInt8=n.prototype.writeUInt8,n.prototype.writeUInt16=function(t){var e=t>>8&255,r=255&t;this.writeUInt8(e),this.writeUInt8(r)},n.prototype.writeInt16=n.prototype.writeUInt16,n.prototype.writeUInt24=function(t){var e=t>>16&255,r=t>>8&255,n=255&t;this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(n)},n.prototype.writeInt24=n.prototype.writeUInt24,n.prototype.writeUInt32=function(t){var e=t>>24&255,r=t>>16&255,n=t>>8&255,i=255&t;this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(n),this.writeUInt8(i)},n.prototype.writeInt32=n.prototype.writeUInt32,n.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},n.prototype.writeString=function(t){var e,r=t.length,n=[];for(e=0;e<r;e++)n.push(t.codePointAt(e));this.writeBytes(n)},n.prototype.writeVarInt=function(t){if(t<0)throw\"Cannot write negative variable-length integer\";if(t<=127)this.writeUInt8(t);else{var e=t,r=[];for(r.push(127&e),e>>=7;e;){var n=127&e|128;r.push(n),e>>=7}this.writeBytes(r.reverse())}},n.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},t.exports=function(t,r){if(\"object\"!=typeof t)throw\"Invalid MIDI data\";r=r||{};var i,a=t.header||{},o=t.tracks||[],s=o.length,c=new n;for(function(t,e,r){var i=null==e.format?1:e.format,a=128;e.timeDivision?a=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?a=-(255&e.framesPerSecond)<<8|255&e.ticksPerFrame:e.ticksPerBeat&&(a=32767&e.ticksPerBeat);var o=new n;o.writeUInt16(i),o.writeUInt16(r),o.writeUInt16(a),t.writeChunk(\"MThd\",o.buffer)}(c,a,s),i=0;i<s;i++)e(c,o[i],r);return c.buffer}},805:(t,e)=>{\"use strict\";function r(t,e,r){void 0===r&&(r=\"ticks\");var n=0,i=t.length,a=i;if(i>0&&t[i-1][r]<=e)return i-1;for(;n<a;){var o=Math.floor(n+(a-n)/2),s=t[o],c=t[o+1];if(s[r]===e){for(var u=o;u<t.length;u++)t[u][r]===e&&(o=u);return o}if(s[r]<e&&c[r]>e)return o;s[r]>e?a=o:s[r]<e&&(n=o+1)}return-1}Object.defineProperty(e,\"__esModule\",{value:!0}),e.insert=e.search=void 0,e.search=r,e.insert=function(t,e,n){if(void 0===n&&(n=\"ticks\"),t.length){var i=r(t,e[n],n);t.splice(i+1,0,e)}else t.push(e)}},543:(t,e)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:\"modulationWheel\",2:\"breath\",4:\"footController\",5:\"portamentoTime\",7:\"volume\",8:\"balance\",10:\"pan\",64:\"sustain\",65:\"portamentoTime\",66:\"sostenuto\",67:\"softPedal\",68:\"legatoFootswitch\",84:\"portamentoControl\"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce((function(t,r){return t[e.controlChangeNames[r]]=r,t}),{});var r=new WeakMap,n=new WeakMap,i=function(){function t(t,e){r.set(this,e),n.set(this,t.controllerType),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,\"number\",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"time\",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},t}();e.ControlChange=i},906:(t,e,r)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createControlChanges=void 0;var n=r(543);e.createControlChanges=function(){return new Proxy({},{get:function(t,e){return t[e]?t[e]:n.controlChangeIds.hasOwnProperty(e)?t[n.controlChangeIds[e]]:void 0},set:function(t,e,r){return n.controlChangeIds.hasOwnProperty(e)?t[n.controlChangeIds[e]]=r:t[e]=r,!0}})}},54:function(t,e,r){\"use strict\";var n=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,\"__esModule\",{value:!0}),e.encode=void 0;var i=r(289),a=r(535),o=r(507);function s(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:\"controller\",value:Math.floor(127*t.value)}}function c(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:\"programChange\"}}e.encode=function(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:n([n(n(n(n([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:\"trackName\"}],t.header.keySignatures.map((function(t){return function(t){var e=a.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:\"major\"===t.scale?0:1,type:\"keySignature\"}}(t)})),!0),t.header.meta.map((function(t){return{absoluteTime:(e=t).ticks,deltaTime:0,meta:!0,text:e.text,type:e.type};var e})),!0),t.header.tempos.map((function(t){return function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:\"setTempo\"}}(t)})),!0),t.header.timeSignatures.map((function(t){return function(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:\"timeSignature\"}}(t)})),!0)],t.tracks.map((function(t){return n(n(n([(e=t.name,{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:\"trackName\"}),c(t)],function(t){return(0,o.flatten)(t.notes.map((function(e){return function(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:\"noteOn\",velocity:Math.floor(127*t.velocity)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:\"noteOff\",velocity:Math.floor(127*t.noteOffVelocity)}]}(e,t.channel)})))}(t),!0),function(t){for(var e=[],r=0;r<127;r++)t.controlChanges.hasOwnProperty(r)&&t.controlChanges[r].forEach((function(r){e.push(s(r,t.channel))}));return e}(t),!0),function(t){var e=[];return t.pitchBends.forEach((function(r){e.push(function(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:\"pitchBend\",value:t.value}}(r,t.channel))})),e}(t),!0);var e})),!0)};return e.tracks=e.tracks.map((function(t){t=t.sort((function(t,e){return t.absoluteTime-e.absoluteTime}));var e=0;return t.forEach((function(t){t.deltaTime=t.absoluteTime-e,e=t.absoluteTime,delete t.absoluteTime})),t.push({deltaTime:0,meta:!0,type:\"endOfTrack\"}),t})),new Uint8Array((0,i.writeMidi)(e))}},535:(t,e,r)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Header=e.keySignatureKeys=void 0;var n=r(805),i=new WeakMap;e.keySignatureKeys=[\"Cb\",\"Gb\",\"Db\",\"Ab\",\"Eb\",\"Bb\",\"F\",\"C\",\"G\",\"D\",\"A\",\"E\",\"B\",\"F#\",\"C#\"];var a=function(){function t(t){var r=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name=\"\",i.set(this,480),t){i.set(this,t.header.ticksPerBeat),t.tracks.forEach((function(t){t.forEach((function(t){t.meta&&(\"timeSignature\"===t.type?r.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):\"setTempo\"===t.type?r.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):\"keySignature\"===t.type&&r.keySignatures.push({key:e.keySignatureKeys[t.key+7],scale:0===t.scale?\"major\":\"minor\",ticks:t.absoluteTime}))}))}));var n=0;t.tracks[0].forEach((function(t){n+=t.deltaTime,t.meta&&(\"trackName\"===t.type?r.name=t.text:\"text\"!==t.type&&\"cuePoint\"!==t.type&&\"marker\"!==t.type&&\"lyrics\"!==t.type||r.meta.push({text:t.text,ticks:n,type:t.type}))})),this.update()}}return t.prototype.update=function(){var t=this,e=0,r=0;this.tempos.sort((function(t,e){return t.ticks-e.ticks})),this.tempos.forEach((function(n,i){var a=i>0?t.tempos[i-1].bpm:t.tempos[0].bpm,o=n.ticks/t.ppq-r,s=60/a*o;n.time=s+e,e=n.time,r+=o})),this.timeSignatures.sort((function(t,e){return t.ticks-e.ticks})),this.timeSignatures.forEach((function(e,r){var n=r>0?t.timeSignatures[r-1]:t.timeSignatures[0],i=(e.ticks-n.ticks)/t.ppq/n.timeSignature[0]/(n.timeSignature[1]/4);n.measures=n.measures||0,e.measures=i+n.measures}))},t.prototype.ticksToSeconds=function(t){var e=(0,n.search)(this.tempos,t);if(-1!==e){var r=this.tempos[e],i=r.time,a=(t-r.ticks)/this.ppq;return i+60/r.bpm*a}return t/this.ppq*.5},t.prototype.ticksToMeasures=function(t){var e=(0,n.search)(this.timeSignatures,t);if(-1!==e){var r=this.timeSignatures[e],i=(t-r.ticks)/this.ppq;return r.measures+i/(r.timeSignature[0]/r.timeSignature[1])/4}return t/this.ppq/4},Object.defineProperty(t.prototype,\"ppq\",{get:function(){return i.get(this)},enumerable:!1,configurable:!0}),t.prototype.secondsToTicks=function(t){var e=(0,n.search)(this.tempos,t,\"time\");if(-1!==e){var r=this.tempos[e],i=(t-r.time)/(60/r.bpm);return Math.round(r.ticks+i*this.ppq)}var a=t/.5;return Math.round(a*this.ppq)},t.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map((function(t){return{bpm:t.bpm,ticks:t.ticks}})),timeSignatures:this.timeSignatures}},t.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map((function(t){return Object.assign({},t)})),this.timeSignatures=t.timeSignatures.map((function(t){return Object.assign({},t)})),this.keySignatures=t.keySignatures.map((function(t){return Object.assign({},t)})),this.meta=t.meta.map((function(t){return Object.assign({},t)})),i.set(this,t.ppq),this.update()},t.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},t}();e.Header=a},362:(t,e,r)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Instrument=void 0;var n=r(438),i=new WeakMap,a=function(){function t(t,e){if(this.number=0,i.set(this,e),this.number=0,t){var r=t.find((function(t){return\"programChange\"===t.type}));r&&(this.number=r.programNumber)}}return Object.defineProperty(t.prototype,\"name\",{get:function(){return this.percussion?n.DrumKitByPatchID[this.number]:n.instrumentByPatchID[this.number]},set:function(t){var e=n.instrumentByPatchID.indexOf(t);-1!==e&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"family\",{get:function(){return this.percussion?\"drums\":n.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"percussion\",{get:function(){return 9===i.get(this).channel},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(t){this.number=t.number},t}();e.Instrument=a},438:(t,e)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.DrumKitByPatchID=e.InstrumentFamilyByID=e.instrumentByPatchID=void 0,e.instrumentByPatchID=[\"acoustic grand piano\",\"bright acoustic piano\",\"electric grand piano\",\"honky-tonk piano\",\"electric piano 1\",\"electric piano 2\",\"harpsichord\",\"clavi\",\"celesta\",\"glockenspiel\",\"music box\",\"vibraphone\",\"marimba\",\"xylophone\",\"tubular bells\",\"dulcimer\",\"drawbar organ\",\"percussive organ\",\"rock organ\",\"church organ\",\"reed organ\",\"accordion\",\"harmonica\",\"tango accordion\",\"acoustic guitar (nylon)\",\"acoustic guitar (steel)\",\"electric guitar (jazz)\",\"electric guitar (clean)\",\"electric guitar (muted)\",\"overdriven guitar\",\"distortion guitar\",\"guitar harmonics\",\"acoustic bass\",\"electric bass (finger)\",\"electric bass (pick)\",\"fretless bass\",\"slap bass 1\",\"slap bass 2\",\"synth bass 1\",\"synth bass 2\",\"violin\",\"viola\",\"cello\",\"contrabass\",\"tremolo strings\",\"pizzicato strings\",\"orchestral harp\",\"timpani\",\"string ensemble 1\",\"string ensemble 2\",\"synthstrings 1\",\"synthstrings 2\",\"choir aahs\",\"voice oohs\",\"synth voice\",\"orchestra hit\",\"trumpet\",\"trombone\",\"tuba\",\"muted trumpet\",\"french horn\",\"brass section\",\"synthbrass 1\",\"synthbrass 2\",\"soprano sax\",\"alto sax\",\"tenor sax\",\"baritone sax\",\"oboe\",\"english horn\",\"bassoon\",\"clarinet\",\"piccolo\",\"flute\",\"recorder\",\"pan flute\",\"blown bottle\",\"shakuhachi\",\"whistle\",\"ocarina\",\"lead 1 (square)\",\"lead 2 (sawtooth)\",\"lead 3 (calliope)\",\"lead 4 (chiff)\",\"lead 5 (charang)\",\"lead 6 (voice)\",\"lead 7 (fifths)\",\"lead 8 (bass + lead)\",\"pad 1 (new age)\",\"pad 2 (warm)\",\"pad 3 (polysynth)\",\"pad 4 (choir)\",\"pad 5 (bowed)\",\"pad 6 (metallic)\",\"pad 7 (halo)\",\"pad 8 (sweep)\",\"fx 1 (rain)\",\"fx 2 (soundtrack)\",\"fx 3 (crystal)\",\"fx 4 (atmosphere)\",\"fx 5 (brightness)\",\"fx 6 (goblins)\",\"fx 7 (echoes)\",\"fx 8 (sci-fi)\",\"sitar\",\"banjo\",\"shamisen\",\"koto\",\"kalimba\",\"bag pipe\",\"fiddle\",\"shanai\",\"tinkle bell\",\"agogo\",\"steel drums\",\"woodblock\",\"taiko drum\",\"melodic tom\",\"synth drum\",\"reverse cymbal\",\"guitar fret noise\",\"breath noise\",\"seashore\",\"bird tweet\",\"telephone ring\",\"helicopter\",\"applause\",\"gunshot\"],e.InstrumentFamilyByID=[\"piano\",\"chromatic percussion\",\"organ\",\"guitar\",\"bass\",\"strings\",\"ensemble\",\"brass\",\"reed\",\"pipe\",\"synth lead\",\"synth pad\",\"synth effects\",\"world\",\"percussive\",\"sound effects\"],e.DrumKitByPatchID={0:\"standard kit\",8:\"room kit\",16:\"power kit\",24:\"electronic kit\",25:\"tr-808 kit\",32:\"jazz kit\",40:\"brush kit\",48:\"orchestra kit\",56:\"sound fx kit\"}},233:function(t,e,r){\"use strict\";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,s)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.Header=e.Track=e.Midi=void 0;var a=r(289),o=r(535),s=r(334),c=r(54),u=function(){function t(t){var e=this,r=null;if(t){var n=t instanceof ArrayBuffer?new Uint8Array(t):t;(r=(0,a.parseMidi)(n)).tracks.forEach((function(t){var e=0;t.forEach((function(t){e+=t.deltaTime,t.absoluteTime=e}))})),r.tracks=function(t){for(var e=[],r=0;r<t.length;r++)for(var n=e.length,i=new Map,a=Array(16).fill(0),o=0,s=t[r];o<s.length;o++){var c=s[o],u=n,h=c.channel;if(void 0!==h){\"programChange\"===c.type&&(a[h]=c.programNumber);var f=a[h],p=\"\".concat(f,\" \").concat(h);i.has(p)?u=i.get(p):(u=n+i.size,i.set(p,u))}e[u]||e.push([]),e[u].push(c)}return e}(r.tracks)}this.header=new o.Header(r),this.tracks=[],t&&(this.tracks=r.tracks.map((function(t){return new s.Track(t,e.header)})),1===r.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return t.fromUrl=function(e){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:return(r=n.sent()).ok?[4,r.arrayBuffer()]:[3,3];case 2:return[2,new t(n.sent())];case 3:throw new Error(\"Could not load '\".concat(e,\"'\"))}}))}))},Object.defineProperty(t.prototype,\"name\",{get:function(){return this.header.name},set:function(t){this.header.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"duration\",{get:function(){var t=this.tracks.map((function(t){return t.duration}));return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"durationTicks\",{get:function(){var t=this.tracks.map((function(t){return t.durationTicks}));return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(){var t=new s.Track(void 0,this.header);return this.tracks.push(t),t},t.prototype.toArray=function(){return(0,c.encode)(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map((function(t){return t.toJSON()}))}},t.prototype.fromJSON=function(t){var e=this;this.header=new o.Header,this.header.fromJSON(t.header),this.tracks=t.tracks.map((function(t){var r=new s.Track(void 0,e.header);return r.fromJSON(t),r}))},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}();e.Midi=u;var h=r(334);Object.defineProperty(e,\"Track\",{enumerable:!0,get:function(){return h.Track}});var f=r(535);Object.defineProperty(e,\"Header\",{enumerable:!0,get:function(){return f.Header}})},518:(t,e)=>{\"use strict\";function r(t){return[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"][t%12]}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Note=void 0;var n,i,a=(n=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,i={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13},function(t){var e=n.exec(t),r=e[1],a=e[2];return i[r.toLowerCase()]+12*(parseInt(a,10)+1)}),o=new WeakMap,s=function(){function t(t,e,r){o.set(this,r),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(t.prototype,\"name\",{get:function(){return t=this.midi,e=Math.floor(t/12)-1,r(t)+e.toString();var t,e},set:function(t){this.midi=a(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"octave\",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"pitch\",{get:function(){return r(this.midi)},set:function(t){this.midi=12*(this.octave+1)+[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"].indexOf(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"duration\",{get:function(){var t=o.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=o.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"time\",{get:function(){return o.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=o.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"bars\",{get:function(){return o.get(this).ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();e.Note=s},882:(t,e)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PitchBend=void 0;var r=new WeakMap,n=function(){function t(t,e){r.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,\"time\",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();e.PitchBend=n},334:(t,e,r)=>{\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Track=void 0;var n=r(805),i=r(543),a=r(906),o=r(882),s=r(362),c=r(518),u=new WeakMap,h=function(){function t(t,e){var r=this;if(this.name=\"\",this.notes=[],this.controlChanges=(0,a.createControlChanges)(),this.pitchBends=[],u.set(this,e),t){var n=t.find((function(t){return\"trackName\"===t.type}));this.name=n?n.text:\"\"}if(this.instrument=new s.Instrument(t,this),this.channel=0,t){for(var i=t.filter((function(t){return\"noteOn\"===t.type})),o=t.filter((function(t){return\"noteOff\"===t.type})),c=function(){var t=i.shift();h.channel=t.channel;var e=o.findIndex((function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime}));if(-1!==e){var r=o.splice(e,1)[0];h.addNote({durationTicks:r.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:r.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}},h=this;i.length;)c();t.filter((function(t){return\"controller\"===t.type})).forEach((function(t){r.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})})),t.filter((function(t){return\"pitchBend\"===t.type})).forEach((function(t){r.addPitchBend({ticks:t.absoluteTime,value:t.value/Math.pow(2,13)})}));var f=t.find((function(t){return\"endOfTrack\"===t.type}));this.endOfTrackTicks=void 0!==f?f.absoluteTime:void 0}}return t.prototype.addNote=function(t){var e=u.get(this),r=new c.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(r,t),(0,n.insert)(this.notes,r,\"ticks\"),this},t.prototype.addCC=function(t){var e=u.get(this),r=new i.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(r,t),Array.isArray(this.controlChanges[r.number])||(this.controlChanges[r.number]=[]),(0,n.insert)(this.controlChanges[r.number],r,\"ticks\"),this},t.prototype.addPitchBend=function(t){var e=u.get(this),r=new o.PitchBend({},e);return Object.assign(r,t),(0,n.insert)(this.pitchBends,r,\"ticks\"),this},Object.defineProperty(t.prototype,\"duration\",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var r=this.notes[e].time+this.notes[e].duration;t<r&&(t=r)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"durationTicks\",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var r=this.notes[e].ticks+this.notes[e].durationTicks;t<r&&(t=r)}return t},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(t){var e=this;for(var r in this.name=t.name,this.channel=t.channel,this.instrument=new s.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[r]&&t.controlChanges[r].forEach((function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})}));t.notes.forEach((function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})}))},t.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map((function(t){return t.toJSON()})));var r={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map((function(t){return t.toJSON()})),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map((function(t){return t.toJSON()}))};return void 0!==this.endOfTrackTicks&&(r.endOfTrackTicks=this.endOfTrackTicks),r},t}();e.Track=h}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r(233)})()}));\n//# sourceMappingURL=Midi.js.map","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn ","/**\n * Flatten an array indefinitely.\n */\nexport function flatten(array) {\n    var result = [];\n    $flatten(array, result);\n    return result;\n}\n/**\n * Internal flatten function recursively passes `result`.\n */\nfunction $flatten(array, result) {\n    for (var i = 0; i < array.length; i++) {\n        var value = array[i];\n        if (Array.isArray(value)) {\n            $flatten(value, result);\n        }\n        else {\n            result.push(value);\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","exports.parseMidi = require('./lib/midi-parser')\nexports.writeMidi = require('./lib/midi-writer')\n","// data can be any array-like object.  It just needs to support .length, .slice, and an element getter []\n\nfunction parseMidi(data) {\n  var p = new Parser(data)\n\n  var headerChunk = p.readChunk()\n  if (headerChunk.id != 'MThd')\n    throw \"Bad MIDI file.  Expected 'MHdr', got: '\" + headerChunk.id + \"'\"\n  var header = parseHeader(headerChunk.data)\n\n  var tracks = []\n  for (var i=0; !p.eof() && i < header.numTracks; i++) {\n    var trackChunk = p.readChunk()\n    if (trackChunk.id != 'MTrk')\n      throw \"Bad MIDI file.  Expected 'MTrk', got: '\" + trackChunk.id + \"'\"\n    var track = parseTrack(trackChunk.data)\n    tracks.push(track)\n  }\n\n  return {\n    header: header,\n    tracks: tracks\n  }\n}\n\n\nfunction parseHeader(data) {\n  var p = new Parser(data)\n\n  var format = p.readUInt16()\n  var numTracks = p.readUInt16()\n\n  var result = {\n    format: format,\n    numTracks: numTracks\n  }\n\n  var timeDivision = p.readUInt16()\n  if (timeDivision & 0x8000) {\n    result.framesPerSecond = 0x100 - (timeDivision >> 8)\n    result.ticksPerFrame = timeDivision & 0xFF\n  } else {\n    result.ticksPerBeat = timeDivision\n  }\n\n  return result\n}\n\nfunction parseTrack(data) {\n  var p = new Parser(data)\n\n  var events = []\n  while (!p.eof()) {\n    var event = readEvent()\n    events.push(event)\n  }\n\n  return events\n\n  var lastEventTypeByte = null\n\n  function readEvent() {\n    var event = {}\n    event.deltaTime = p.readVarInt()\n\n    var eventTypeByte = p.readUInt8()\n\n    if ((eventTypeByte & 0xf0) === 0xf0) {\n      // system / meta event\n      if (eventTypeByte === 0xff) {\n        // meta event\n        event.meta = true\n        var metatypeByte = p.readUInt8()\n        var length = p.readVarInt()\n        switch (metatypeByte) {\n          case 0x00:\n            event.type = 'sequenceNumber'\n            if (length !== 2) throw \"Expected length for sequenceNumber event is 2, got \" + length\n            event.number = p.readUInt16()\n            return event\n          case 0x01:\n            event.type = 'text'\n            event.text = p.readString(length)\n            return event\n          case 0x02:\n            event.type = 'copyrightNotice'\n            event.text = p.readString(length)\n            return event\n          case 0x03:\n            event.type = 'trackName'\n            event.text = p.readString(length)\n            return event\n          case 0x04:\n            event.type = 'instrumentName'\n            event.text = p.readString(length)\n            return event\n          case 0x05:\n            event.type = 'lyrics'\n            event.text = p.readString(length)\n            return event\n          case 0x06:\n            event.type = 'marker'\n            event.text = p.readString(length)\n            return event\n          case 0x07:\n            event.type = 'cuePoint'\n            event.text = p.readString(length)\n            return event\n          case 0x20:\n            event.type = 'channelPrefix'\n            if (length != 1) throw \"Expected length for channelPrefix event is 1, got \" + length\n            event.channel = p.readUInt8()\n            return event\n          case 0x21:\n            event.type = 'portPrefix'\n            if (length != 1) throw \"Expected length for portPrefix event is 1, got \" + length\n            event.port = p.readUInt8()\n            return event\n          case 0x2f:\n            event.type = 'endOfTrack'\n            if (length != 0) throw \"Expected length for endOfTrack event is 0, got \" + length\n            return event\n          case 0x51:\n            event.type = 'setTempo';\n            if (length != 3) throw \"Expected length for setTempo event is 3, got \" + length\n            event.microsecondsPerBeat = p.readUInt24()\n            return event\n          case 0x54:\n            event.type = 'smpteOffset';\n            if (length != 5) throw \"Expected length for smpteOffset event is 5, got \" + length\n            var hourByte = p.readUInt8()\n            var FRAME_RATES = { 0x00: 24, 0x20: 25, 0x40: 29, 0x60: 30 }\n            event.frameRate = FRAME_RATES[hourByte & 0x60]\n            event.hour = hourByte & 0x1f\n            event.min = p.readUInt8()\n            event.sec = p.readUInt8()\n            event.frame = p.readUInt8()\n            event.subFrame = p.readUInt8()\n            return event\n          case 0x58:\n            event.type = 'timeSignature'\n            if (length != 4) throw \"Expected length for timeSignature event is 4, got \" + length\n            event.numerator = p.readUInt8()\n            event.denominator = (1 << p.readUInt8())\n            event.metronome = p.readUInt8()\n            event.thirtyseconds = p.readUInt8()\n            return event\n          case 0x59:\n            event.type = 'keySignature'\n            if (length != 2) throw \"Expected length for keySignature event is 2, got \" + length\n            event.key = p.readInt8()\n            event.scale = p.readUInt8()\n            return event\n          case 0x7f:\n            event.type = 'sequencerSpecific'\n            event.data = p.readBytes(length)\n            return event\n          default:\n            event.type = 'unknownMeta'\n            event.data = p.readBytes(length)\n            event.metatypeByte = metatypeByte\n            return event\n        }\n      } else if (eventTypeByte == 0xf0) {\n        event.type = 'sysEx'\n        var length = p.readVarInt()\n        event.data = p.readBytes(length)\n        return event\n      } else if (eventTypeByte == 0xf7) {\n        event.type = 'endSysEx'\n        var length = p.readVarInt()\n        event.data = p.readBytes(length)\n        return event\n      } else {\n        throw \"Unrecognised MIDI event type byte: \" + eventTypeByte\n      }\n    } else {\n      // channel event\n      var param1\n      if ((eventTypeByte & 0x80) === 0) {\n        // running status - reuse lastEventTypeByte as the event type.\n        // eventTypeByte is actually the first parameter\n        if (lastEventTypeByte === null)\n          throw \"Running status byte encountered before status byte\"\n        param1 = eventTypeByte\n        eventTypeByte = lastEventTypeByte\n        event.running = true\n      } else {\n        param1 = p.readUInt8()\n        lastEventTypeByte = eventTypeByte\n      }\n      var eventType = eventTypeByte >> 4\n      event.channel = eventTypeByte & 0x0f\n      switch (eventType) {\n        case 0x08:\n          event.type = 'noteOff'\n          event.noteNumber = param1\n          event.velocity = p.readUInt8()\n          return event\n        case 0x09:\n          var velocity = p.readUInt8()\n          event.type = velocity === 0 ? 'noteOff' : 'noteOn'\n          event.noteNumber = param1\n          event.velocity = velocity\n          if (velocity === 0) event.byte9 = true\n          return event\n        case 0x0a:\n          event.type = 'noteAftertouch'\n          event.noteNumber = param1\n          event.amount = p.readUInt8()\n          return event\n        case 0x0b:\n          event.type = 'controller'\n          event.controllerType = param1\n          event.value = p.readUInt8()\n          return event\n        case 0x0c:\n          event.type = 'programChange'\n          event.programNumber = param1\n          return event\n        case 0x0d:\n          event.type = 'channelAftertouch'\n          event.amount = param1\n          return event\n        case 0x0e:\n          event.type = 'pitchBend'\n          event.value = (param1 + (p.readUInt8() << 7)) - 0x2000\n          return event\n        default:\n          throw \"Unrecognised MIDI event type: \" + eventType\n      }\n    }\n  }\n}\n\nfunction Parser(data) {\n  this.buffer = data\n  this.bufferLen = this.buffer.length\n  this.pos = 0\n}\n\nParser.prototype.eof = function() {\n  return this.pos >= this.bufferLen\n}\n\nParser.prototype.readUInt8 = function() {\n  var result = this.buffer[this.pos]\n  this.pos += 1\n  return result\n}\n\nParser.prototype.readInt8 = function() {\n  var u = this.readUInt8()\n  if (u & 0x80)\n    return u - 0x100\n  else\n    return u\n}\n\nParser.prototype.readUInt16 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8()\n\n    return (b0 << 8) + b1\n}\n\nParser.prototype.readInt16 = function() {\n  var u = this.readUInt16()\n  if (u & 0x8000)\n    return u - 0x10000\n  else\n    return u\n}\n\nParser.prototype.readUInt24 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8(),\n      b2 = this.readUInt8()\n\n    return (b0 << 16) + (b1 << 8) + b2\n}\n\nParser.prototype.readInt24 = function() {\n  var u = this.readUInt24()\n  if (u & 0x800000)\n    return u - 0x1000000\n  else\n    return u\n}\n\nParser.prototype.readUInt32 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8(),\n      b2 = this.readUInt8(),\n      b3 = this.readUInt8()\n\n    return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3\n}\n\nParser.prototype.readBytes = function(len) {\n  var bytes = this.buffer.slice(this.pos, this.pos + len)\n  this.pos += len\n  return bytes\n}\n\nParser.prototype.readString = function(len) {\n  var bytes = this.readBytes(len)\n  return String.fromCharCode.apply(null, bytes)\n}\n\nParser.prototype.readVarInt = function() {\n  var result = 0\n  while (!this.eof()) {\n    var b = this.readUInt8()\n    if (b & 0x80) {\n      result += (b & 0x7f)\n      result <<= 7\n    } else {\n      // b is last byte\n      return result + b\n    }\n  }\n  // premature eof\n  return result\n}\n\nParser.prototype.readChunk = function() {\n  var id = this.readString(4)\n  var length = this.readUInt32()\n  var data = this.readBytes(length)\n  return {\n    id: id,\n    length: length,\n    data: data\n  }\n}\n\nmodule.exports = parseMidi\n","// data should be the same type of format returned by parseMidi\n// for maximum compatibililty, returns an array of byte values, suitable for conversion to Buffer, Uint8Array, etc.\n\n// opts:\n// - running              reuse previous eventTypeByte when possible, to compress file\n// - useByte9ForNoteOff   use 0x09 for noteOff when velocity is zero\n\nfunction writeMidi(data, opts) {\n  if (typeof data !== 'object')\n    throw 'Invalid MIDI data'\n\n  opts = opts || {}\n\n  var header = data.header || {}\n  var tracks = data.tracks || []\n  var i, len = tracks.length\n\n  var w = new Writer()\n  writeHeader(w, header, len)\n\n  for (i=0; i < len; i++) {\n    writeTrack(w, tracks[i], opts)\n  }\n\n  return w.buffer\n}\n\nfunction writeHeader(w, header, numTracks) {\n  var format = header.format == null ? 1 : header.format\n\n  var timeDivision = 128\n  if (header.timeDivision) {\n    timeDivision = header.timeDivision\n  } else if (header.ticksPerFrame && header.framesPerSecond) {\n    timeDivision = (-(header.framesPerSecond & 0xFF) << 8) | (header.ticksPerFrame & 0xFF)\n  } else if (header.ticksPerBeat) {\n    timeDivision = header.ticksPerBeat & 0x7FFF\n  }\n\n  var h = new Writer()\n  h.writeUInt16(format)\n  h.writeUInt16(numTracks)\n  h.writeUInt16(timeDivision)\n\n  w.writeChunk('MThd', h.buffer)\n}\n\nfunction writeTrack(w, track, opts) {\n  var t = new Writer()\n  var i, len = track.length\n  var eventTypeByte = null\n  for (i=0; i < len; i++) {\n    // Reuse last eventTypeByte when opts.running is set, or event.running is explicitly set on it.\n    // parseMidi will set event.running for each event, so that we can get an exact copy by default.\n    // Explicitly set opts.running to false, to override event.running and never reuse last eventTypeByte.\n    if (opts.running === false || !opts.running && !track[i].running) eventTypeByte = null\n\n    eventTypeByte = writeEvent(t, track[i], eventTypeByte, opts.useByte9ForNoteOff)\n  }\n  w.writeChunk('MTrk', t.buffer)\n}\n\nfunction writeEvent(w, event, lastEventTypeByte, useByte9ForNoteOff) {\n  var type = event.type\n  var deltaTime = event.deltaTime\n  var text = event.text || ''\n  var data = event.data || []\n  var eventTypeByte = null\n  w.writeVarInt(deltaTime)\n\n  switch (type) {\n    // meta events\n    case 'sequenceNumber':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x00)\n      w.writeVarInt(2)\n      w.writeUInt16(event.number)\n      break;\n\n    case 'text':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x01)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'copyrightNotice':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x02)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'trackName':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x03)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'instrumentName':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x04)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'lyrics':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x05)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'marker':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x06)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'cuePoint':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x07)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'channelPrefix':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x20)\n      w.writeVarInt(1)\n      w.writeUInt8(event.channel)\n      break;\n\n    case 'portPrefix':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x21)\n      w.writeVarInt(1)\n      w.writeUInt8(event.port)\n      break;\n\n    case 'endOfTrack':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x2F)\n      w.writeVarInt(0)\n      break;\n\n    case 'setTempo':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x51)\n      w.writeVarInt(3)\n      w.writeUInt24(event.microsecondsPerBeat)\n      break;\n\n    case 'smpteOffset':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x54)\n      w.writeVarInt(5)\n      var FRAME_RATES = { 24: 0x00, 25: 0x20, 29: 0x40, 30: 0x60 }\n      var hourByte = (event.hour & 0x1F) | FRAME_RATES[event.frameRate]\n      w.writeUInt8(hourByte)\n      w.writeUInt8(event.min)\n      w.writeUInt8(event.sec)\n      w.writeUInt8(event.frame)\n      w.writeUInt8(event.subFrame)\n      break;\n\n    case 'timeSignature':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x58)\n      w.writeVarInt(4)\n      w.writeUInt8(event.numerator)\n      var denominator = Math.floor((Math.log(event.denominator) / Math.LN2)) & 0xFF\n      w.writeUInt8(denominator)\n      w.writeUInt8(event.metronome)\n      w.writeUInt8(event.thirtyseconds || 8)\n      break;\n\n    case 'keySignature':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x59)\n      w.writeVarInt(2)\n      w.writeInt8(event.key)\n      w.writeUInt8(event.scale)\n      break;\n\n    case 'sequencerSpecific':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x7F)\n      w.writeVarInt(data.length)\n      w.writeBytes(data)\n      break;\n\n    case 'unknownMeta':\n      if (event.metatypeByte != null) {\n        w.writeUInt8(0xFF)\n        w.writeUInt8(event.metatypeByte)\n        w.writeVarInt(data.length)\n        w.writeBytes(data)\n      }\n      break;\n\n    // system-exclusive\n    case 'sysEx':\n      w.writeUInt8(0xF0)\n      w.writeVarInt(data.length)\n      w.writeBytes(data)\n      break;\n\n    case 'endSysEx':\n      w.writeUInt8(0xF7)\n      w.writeVarInt(data.length)\n      w.writeBytes(data)\n      break;\n\n    // channel events\n    case 'noteOff':\n      // Use 0x90 when opts.useByte9ForNoteOff is set and velocity is zero, or when event.byte9 is explicitly set on it.\n      // parseMidi will set event.byte9 for each event, so that we can get an exact copy by default.\n      // Explicitly set opts.useByte9ForNoteOff to false, to override event.byte9 and always use 0x80 for noteOff events.\n      var noteByte = ((useByte9ForNoteOff !== false && event.byte9) || (useByte9ForNoteOff && event.velocity == 0)) ? 0x90 : 0x80\n\n      eventTypeByte = noteByte | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.noteNumber)\n      w.writeUInt8(event.velocity)\n      break;\n\n    case 'noteOn':\n      eventTypeByte = 0x90 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.noteNumber)\n      w.writeUInt8(event.velocity)\n      break;\n\n    case 'noteAftertouch':\n      eventTypeByte = 0xA0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.noteNumber)\n      w.writeUInt8(event.amount)\n      break;\n\n    case 'controller':\n      eventTypeByte = 0xB0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.controllerType)\n      w.writeUInt8(event.value)\n      break;\n\n    case 'programChange':\n      eventTypeByte = 0xC0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.programNumber)\n      break;\n\n    case 'channelAftertouch':\n      eventTypeByte = 0xD0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.amount)\n      break;\n\n    case 'pitchBend':\n      eventTypeByte = 0xE0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      var value14 = 0x2000 + event.value\n      var lsb14 = (value14 & 0x7F)\n      var msb14 = (value14 >> 7) & 0x7F\n      w.writeUInt8(lsb14)\n      w.writeUInt8(msb14)\n    break;\n\n    default:\n      throw 'Unrecognized event type: ' + type\n  }\n  return eventTypeByte\n}\n\n\nfunction Writer() {\n  this.buffer = []\n}\n\nWriter.prototype.writeUInt8 = function(v) {\n  this.buffer.push(v & 0xFF)\n}\nWriter.prototype.writeInt8 = Writer.prototype.writeUInt8\n\nWriter.prototype.writeUInt16 = function(v) {\n  var b0 = (v >> 8) & 0xFF,\n      b1 = v & 0xFF\n\n  this.writeUInt8(b0)\n  this.writeUInt8(b1)\n}\nWriter.prototype.writeInt16 = Writer.prototype.writeUInt16\n\nWriter.prototype.writeUInt24 = function(v) {\n  var b0 = (v >> 16) & 0xFF,\n      b1 = (v >> 8) & 0xFF,\n      b2 = v & 0xFF\n\n  this.writeUInt8(b0)\n  this.writeUInt8(b1)\n  this.writeUInt8(b2)\n}\nWriter.prototype.writeInt24 = Writer.prototype.writeUInt24\n\nWriter.prototype.writeUInt32 = function(v) {\n  var b0 = (v >> 24) & 0xFF,\n      b1 = (v >> 16) & 0xFF,\n      b2 = (v >> 8) & 0xFF,\n      b3 = v & 0xFF\n\n  this.writeUInt8(b0)\n  this.writeUInt8(b1)\n  this.writeUInt8(b2)\n  this.writeUInt8(b3)\n}\nWriter.prototype.writeInt32 = Writer.prototype.writeUInt32\n\n\nWriter.prototype.writeBytes = function(arr) {\n  this.buffer = this.buffer.concat(Array.prototype.slice.call(arr, 0))\n}\n\nWriter.prototype.writeString = function(str) {\n  var i, len = str.length, arr = []\n  for (i=0; i < len; i++) {\n    arr.push(str.codePointAt(i))\n  }\n  this.writeBytes(arr)\n}\n\nWriter.prototype.writeVarInt = function(v) {\n  if (v < 0) throw \"Cannot write negative variable-length integer\"\n\n  if (v <= 0x7F) {\n    this.writeUInt8(v)\n  } else {\n    var i = v\n    var bytes = []\n    bytes.push(i & 0x7F)\n    i >>= 7\n    while (i) {\n      var b = i & 0x7F | 0x80\n      bytes.push(b)\n      i >>= 7\n    }\n    this.writeBytes(bytes.reverse())\n  }\n}\n\nWriter.prototype.writeChunk = function(id, data) {\n  this.writeString(id)\n  this.writeUInt32(data.length)\n  this.writeBytes(data)\n}\n\nmodule.exports = writeMidi\n","/**\n * Return the index of the element at or before the given property\n * @hidden\n */\nexport function search(array: any[], value: any, prop = \"ticks\"): number {\n\tlet beginning = 0;\n\tconst len = array.length;\n\tlet end = len;\n\tif (len > 0 && array[len - 1][prop] <= value) {\n\t\treturn len - 1;\n\t}\n\twhile (beginning < end) {\n\t\t// calculate the midpoint for roughly equal partition\n\t\tlet midPoint = Math.floor(beginning + (end - beginning) / 2);\n\t\tconst event = array[midPoint];\n\t\tconst nextEvent = array[midPoint + 1];\n\t\tif (event[prop] === value) {\n\t\t\t// choose the last one that has the same value\n\t\t\tfor (let i = midPoint; i < array.length; i++) {\n\t\t\t\tconst testEvent = array[i];\n\t\t\t\tif (testEvent[prop] === value) {\n\t\t\t\t\tmidPoint = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn midPoint;\n\t\t} else if (event[prop] < value && nextEvent[prop] > value) {\n\t\t\treturn midPoint;\n\t\t} else if (event[prop] > value) {\n\t\t\t// search lower\n\t\t\tend = midPoint;\n\t\t} else if (event[prop] < value) {\n\t\t\t// search upper\n\t\t\tbeginning = midPoint + 1;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Does a binary search to insert the note\n * in the correct spot in the array\n * @hidden\n */\nexport function insert(array: any[], event: object, prop = \"ticks\"): void {\n\tif (array.length) {\n\t\tconst index = search(array, event[prop], prop);\n\t\tarray.splice(index + 1, 0, event);\n\t} else {\n\t\tarray.push(event);\n\t}\n}\n","import type { MidiControllerEvent } from \"midi-file\";\nimport { Header } from \"./Header\";\n\n/**\n * @hidden\n */\nexport type ControlChangeName =\n\t| \"modulationWheel\"\n\t| \"breath\"\n\t| \"footController\"\n\t| \"portamentoTime\"\n\t| \"volume\"\n\t| \"balance\"\n\t| \"pan\"\n\t| \"sustain\"\n\t| \"portamentoTime\"\n\t| \"sostenuto\"\n\t| \"softPedal\"\n\t| \"legatoFootswitch\"\n\t| \"portamentoControl\";\n\ninterface ControlChangeMap {\n\t[key: number]: ControlChangeName;\n}\n/**\n * A map of values to control change names\n * @hidden\n */\nexport const controlChangeNames: ControlChangeMap = {\n\t1: \"modulationWheel\",\n\t2: \"breath\",\n\t4: \"footController\",\n\t5: \"portamentoTime\",\n\t7: \"volume\",\n\t8: \"balance\",\n\t10: \"pan\",\n\t64: \"sustain\",\n\t65: \"portamentoTime\",\n\t66: \"sostenuto\",\n\t67: \"softPedal\",\n\t68: \"legatoFootswitch\",\n\t84: \"portamentoControl\",\n};\n\n/**\n * swap the keys and values\n * @hidden\n */\nexport const controlChangeIds = Object.keys(controlChangeNames).reduce((obj, key) => {\n\tobj[controlChangeNames[key]] = key;\n\treturn obj;\n}, {});\n\nconst privateHeaderMap = new WeakMap<ControlChange, Header>();\nconst privateCCNumberMap = new WeakMap<ControlChange, number>();\n\n/**\n * Represents a control change event\n */\nexport class ControlChange implements ControlChangeInterface {\n\n\t/**\n\t * The number value of the event\n\t */\n\tvalue: number;\n\n\t/**\n\t * The tick time of the event\n\t */\n\tticks: number;\n\n\t/**\n\t * @param event\n\t * @param header\n\t */\n\tconstructor(event: Partial<MidiControllerEvent & { absoluteTime: number }>, header: Header) {\n\t\tprivateHeaderMap.set(this, header);\n\t\tprivateCCNumberMap.set(this, event.controllerType);\n\n\t\tthis.ticks = event.absoluteTime;\n\t\tthis.value = event.value;\n\t}\n\n\t/**\n\t * The controller number\n\t */\n\tget number(): number {\n\t\treturn privateCCNumberMap.get(this);\n\t}\n\n\t/**\n\t * return the common name of the control number if it exists\n\t */\n\tget name(): ControlChangeName {\n\t\tif (controlChangeNames[this.number]) {\n\t\t\treturn controlChangeNames[this.number];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * The time of the event in seconds\n\t */\n\tget time(): number {\n\t\tconst header = privateHeaderMap.get(this);\n\t\treturn header.ticksToSeconds(this.ticks);\n\t}\n\n\tset time(t: number) {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tthis.ticks = header.secondsToTicks(t);\n\t}\n\n\ttoJSON(): ControlChangeJSON {\n\t\treturn {\n\t\t\tnumber: this.number,\n\t\t\tticks: this.ticks,\n\t\t\ttime: this.time,\n\t\t\tvalue: this.value,\n\t\t};\n\t}\n}\n\nexport interface ControlChangeJSON {\n\tnumber: number;\n\tticks: number;\n\ttime: number;\n\tvalue: number;\n}\n\nexport interface ControlChangeInterface {\n\tnumber: number;\n\tticks: number;\n\ttime: number;\n\tvalue: number;\n}\n","import { controlChangeIds } from \"./ControlChange\";\nimport { ControlChange, ControlChangeJSON } from \"./ControlChange\";\n\nexport interface ControlChanges {\n\t[key: string]: ControlChange[];\n\t[key: number]: ControlChange[];\n}\n\nexport interface ControlChangesJSON {\n\t[key: string]: ControlChangeJSON[];\n\t[key: number]: ControlChangeJSON[];\n}\n\n/**\n * Automatically creates an alias for named control values using Proxies\n * @hidden\n */\nexport function createControlChanges(): ControlChanges {\n\treturn new Proxy({}, {\n\t\t// tslint:disable-next-line: typedef\n\t\tget(target, handler) {\n\t\t\tif (target[handler]) {\n\t\t\t\treturn target[handler];\n\t\t\t} else if (controlChangeIds.hasOwnProperty(handler)) {\n\t\t\t\treturn target[controlChangeIds[handler]];\n\t\t\t}\n\t\t},\n\t\t// tslint:disable-next-line: typedef\n\t\tset(target, handler, value) {\n\t\t\tif (controlChangeIds.hasOwnProperty(handler)) {\n\t\t\t\ttarget[controlChangeIds[handler]] = value;\n\t\t\t} else {\n\t\t\t\ttarget[handler] = value;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t});\n}\n","import { writeMidi } from \"midi-file\";\n\nimport type {\n\tMidiControllerEvent, MidiData, MidiEndOfTrackEvent,\n\tMidiEvent, MidiKeySignatureEvent,\n\tMidiNoteOffEvent, MidiNoteOnEvent, MidiPitchBendEvent,\n\tMidiProgramChangeEvent, MidiSetTempoEvent, MidiTextEvent,\n\tMidiTimeSignatureEvent, MidiTrackNameEvent\n} from \"midi-file\";\n\nimport { KeySignatureEvent, keySignatureKeys, MetaEvent, TempoEvent, TimeSignatureEvent } from \"./Header\";\nimport { ControlChange } from \"./ControlChange\";\nimport { PitchBend } from \"./PitchBend\";\nimport { Midi } from \"./Midi\";\nimport { Note } from \"./Note\";\nimport { Track } from \"./Track\";\n\nimport { flatten } from \"array-flatten\";\n\n/** Used to add `absoluteTime` property. */\ntype WithAbsoluteTime = { absoluteTime: number };\n\nfunction encodeNote(note: Note, channel: number): [\n\t(MidiNoteOnEvent & WithAbsoluteTime),\n\t(MidiNoteOffEvent & WithAbsoluteTime)\n] {\n\treturn [{\n\t\tabsoluteTime: note.ticks,\n\t\tchannel,\n\t\tdeltaTime: 0,\n\t\tnoteNumber: note.midi,\n\t\ttype: \"noteOn\",\n\t\tvelocity: Math.floor(note.velocity * 127),\n\t},\n\t{\n\t\tabsoluteTime: note.ticks + note.durationTicks,\n\t\tchannel,\n\t\tdeltaTime: 0,\n\t\tnoteNumber: note.midi,\n\t\ttype: \"noteOff\",\n\t\tvelocity: Math.floor(note.noteOffVelocity * 127),\n\t}];\n}\n\nfunction encodeNotes(track: Track): Array<MidiNoteOnEvent | MidiNoteOffEvent> {\n\treturn flatten(track.notes.map(note => encodeNote(note, track.channel))) as unknown as Array<MidiNoteOnEvent | MidiNoteOffEvent>;\n}\n\nfunction encodeControlChange(\n\tcc: ControlChange,\n\tchannel: number\n): (MidiControllerEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: cc.ticks,\n\t\tchannel,\n\t\tcontrollerType: cc.number,\n\t\tdeltaTime: 0,\n\t\ttype: \"controller\",\n\t\tvalue: Math.floor(cc.value * 127),\n\t};\n}\n\nfunction encodeControlChanges(track: Track): MidiControllerEvent[] {\n\tconst controlChanges: MidiControllerEvent[] = [];\n\tfor (let i = 0; i < 127; i++) {\n\t\tif (track.controlChanges.hasOwnProperty(i)) {\n\t\t\ttrack.controlChanges[i].forEach((cc: ControlChange) => {\n\t\t\t\tcontrolChanges.push(encodeControlChange(cc, track.channel));\n\t\t\t});\n\t\t}\n\t}\n\treturn controlChanges;\n}\n\nfunction encodePitchBend(\n\tpb: PitchBend,\n\tchannel: number\n): (MidiPitchBendEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: pb.ticks,\n\t\tchannel,\n\t\tdeltaTime: 0,\n\t\ttype: \"pitchBend\",\n\t\tvalue: pb.value,\n\t};\n}\n\nfunction encodePitchBends(track: Track): MidiPitchBendEvent[] {\n\tconst pitchBends: MidiPitchBendEvent[] = [];\n\ttrack.pitchBends.forEach((pb: PitchBend) => {\n\t\tpitchBends.push(encodePitchBend(pb, track.channel));\n\t});\t\n\treturn pitchBends;\n}\n\nfunction encodeInstrument(track: Track): (MidiProgramChangeEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: 0,\n\t\tchannel: track.channel,\n\t\tdeltaTime: 0,\n\t\tprogramNumber: track.instrument.number,\n\t\ttype: \"programChange\",\n\t};\n}\n\nfunction encodeTrackName(name: string): (MidiTrackNameEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: 0,\n\t\tdeltaTime: 0,\n\t\tmeta: true,\n\t\ttext: name,\n\t\ttype: \"trackName\",\n\t};\n}\n\nfunction encodeTempo(tempo: TempoEvent): (MidiSetTempoEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: tempo.ticks,\n\t\tdeltaTime: 0,\n\t\tmeta: true,\n\t\tmicrosecondsPerBeat: Math.floor(60000000 / tempo.bpm),\n\t\ttype: \"setTempo\",\n\t};\n}\n\nfunction encodeTimeSignature(timeSig: TimeSignatureEvent): (MidiTimeSignatureEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: timeSig.ticks,\n\t\tdeltaTime: 0,\n\t\tdenominator: timeSig.timeSignature[1],\n\t\tmeta: true,\n\t\tmetronome: 24,\n\t\tnumerator: timeSig.timeSignature[0],\n\t\tthirtyseconds: 8,\n\t\ttype: \"timeSignature\",\n\t};\n}\n\n// function encodeMeta(event: )\n\nfunction encodeKeySignature(keySig: KeySignatureEvent): (MidiKeySignatureEvent & WithAbsoluteTime) {\n\tconst keyIndex = keySignatureKeys.indexOf(keySig.key);\n\treturn {\n\t\tabsoluteTime: keySig.ticks,\n\t\tdeltaTime: 0,\n\t\tkey: keyIndex + 7,\n\t\tmeta: true,\n\t\tscale: keySig.scale === \"major\" ? 0 : 1,\n\t\ttype: \"keySignature\",\n\t};\n}\n\nfunction encodeText(\n\ttextEvent: (MetaEvent & { ticks: number; })\n): (MidiTextEvent & WithAbsoluteTime) {\n\treturn {\n\t\tabsoluteTime: textEvent.ticks,\n\t\tdeltaTime: 0,\n\t\tmeta: true,\n\t\ttext: textEvent.text,\n\t\ttype: textEvent.type,\n\t} as (MidiTextEvent & WithAbsoluteTime);\n}\n\n/**\n * Convert the MIDI object to an array.\n */\nexport function encode(midi: Midi): Uint8Array {\n\tconst midiData: MidiData = {\n\t\theader: {\n\t\t\tformat: 1,\n\t\t\tnumTracks: midi.tracks.length + 1,\n\t\t\tticksPerBeat: midi.header.ppq,\n\t\t},\n\t\ttracks: [\n\t\t\t[\n\t\t\t\t// The name data.\n\t\t\t\t{\n\t\t\t\t\tabsoluteTime: 0,\n\t\t\t\t\tdeltaTime: 0,\n\t\t\t\t\tmeta: true,\n\t\t\t\t\ttext: midi.header.name,\n\t\t\t\t\ttype: \"trackName\",\n\t\t\t\t} as MidiTrackNameEvent,\n\t\t\t\t...midi.header.keySignatures.map(keySig => encodeKeySignature(keySig)),\n\t\t\t\t// and all the meta events (cloned for safety)\n\t\t\t\t...midi.header.meta.map(e => encodeText(e)),\n\t\t\t\t// the first track is all the tempo data\n\t\t\t\t...midi.header.tempos.map(tempo => encodeTempo(tempo)),\n\t\t\t\t// and the time signature data.\n\t\t\t\t...midi.header.timeSignatures.map(timeSig => encodeTimeSignature(timeSig)),\n\t\t\t],\n\t\t\t// The remaining tracks.\n\t\t\t...midi.tracks.map((track) => {\n\t\t\t\treturn [\n\t\t\t\t\t// Add the name\n\t\t\t\t\tencodeTrackName(track.name),\n\t\t\t\t\t// the instrument\n\t\t\t\t\tencodeInstrument(track),\n\t\t\t\t\t// add the notes\n\t\t\t\t\t...encodeNotes(track),\n\t\t\t\t\t// and the control changes\n\t\t\t\t\t...encodeControlChanges(track),\n\t\t\t\t\t// and the pitch bends.\n\t\t\t\t\t...encodePitchBends(track)\n\t\t\t\t];\n\t\t\t}),\n\t\t],\n\t};\n\n\t// Sort and set `deltaTime` of all of the tracks.\n\tmidiData.tracks = midiData.tracks.map((track: (MidiEvent & WithAbsoluteTime)[]) => {\n\t\ttrack = track.sort((a, b) => a.absoluteTime - b.absoluteTime);\n\t\t\n\t\tlet lastTime = 0;\n\t\ttrack.forEach(note => {\n\t\t\tnote.deltaTime = note.absoluteTime - lastTime;\n\t\t\tlastTime = note.absoluteTime;\n\t\t\tdelete note.absoluteTime;\n\t\t});\n\n\t\t// End of track.\n\t\ttrack.push({\n\t\t\tdeltaTime: 0,\n\t\t\tmeta: true,\n\t\t\ttype: \"endOfTrack\",\n\t\t} as (MidiEndOfTrackEvent & WithAbsoluteTime));\n\t\treturn track;\n\t});\n\n\t// Rreturn `midiData`.\n\treturn new Uint8Array(writeMidi(midiData));\n}\n","import type { MidiData, MidiEvent } from \"midi-file\";\nimport { search } from \"./BinarySearch\";\n\nconst privatePPQMap = new WeakMap<Header, number>();\n\nexport interface TempoEvent {\n\tticks: number;\n\tbpm: number;\n\ttime?: number;\n}\n\nexport interface TimeSignatureEvent {\n\tticks: number;\n\ttimeSignature: number[];\n\tmeasures?: number;\n}\n\nexport interface MetaEvent {\n\ttext: string;\n\ttype: string;\n\tticks: number;\n}\n\nexport interface KeySignatureEvent {\n\tticks: number;\n\tkey: string;\n\tscale: string;\n}\n\n/**\n * @hidden\n */\nexport const keySignatureKeys = [\n\t\"Cb\",\n\t\"Gb\",\n\t\"Db\",\n\t\"Ab\",\n\t\"Eb\",\n\t\"Bb\",\n\t\"F\",\n\t\"C\",\n\t\"G\",\n\t\"D\",\n\t\"A\",\n\t\"E\",\n\t\"B\",\n\t\"F#\",\n\t\"C#\",\n];\n\n/**\n * The parsed MIDI file header.\n */\nexport class Header {\n\t/**\n\t * The array of all the tempo events.\n\t */\n\ttempos: TempoEvent[] = [];\n\n\t/**\n\t * The time signatures.\n\t */\n\ttimeSignatures: TimeSignatureEvent[] = [];\n\n\t/**\n\t * The time signatures.\n\t */\n\tkeySignatures: KeySignatureEvent[] = [];\n\n\t/**\n\t * Additional meta events.\n\t */\n\tmeta: MetaEvent[] = [];\n\n\t/**\n\t * The name of the MIDI file;\n\t */\n\tname = \"\";\n\n\tconstructor(midiData?: MidiData) {\n\t\t// Look through all the tracks for tempo changes.\n\t\tprivatePPQMap.set(this, 480);\n\n\t\tif (midiData) {\n\t\t\tprivatePPQMap.set(this, midiData.header.ticksPerBeat);\n\t\t\t\n\t\t\t// Check time signature and tempo events from all of the tracks.\n\t\t\tmidiData.tracks.forEach(track => {\n\t\t\t\ttrack.forEach((event: MidiEvent & { absoluteTime: number; meta?: boolean; }) => {\n\t\t\t\t\tif (event.meta) {\n\t\t\t\t\t\tif (event.type === \"timeSignature\") {\n\t\t\t\t\t\t\tthis.timeSignatures.push({\n\t\t\t\t\t\t\t\tticks: event.absoluteTime,\n\t\t\t\t\t\t\t\ttimeSignature: [\n\t\t\t\t\t\t\t\t\tevent.numerator,\n\t\t\t\t\t\t\t\t\tevent.denominator,\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (event.type === \"setTempo\") {\n\t\t\t\t\t\t\tthis.tempos.push({\n\t\t\t\t\t\t\t\tbpm: 60000000 / event.microsecondsPerBeat,\n\t\t\t\t\t\t\t\tticks: event.absoluteTime,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (event.type === \"keySignature\") {\n\t\t\t\t\t\t\tthis.keySignatures.push({\n\t\t\t\t\t\t\t\tkey: keySignatureKeys[event.key + 7],\n\t\t\t\t\t\t\t\tscale: event.scale === 0 ? \"major\" : \"minor\",\n\t\t\t\t\t\t\t\tticks: event.absoluteTime,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Check the first track for other relevant data.\n\t\t\tlet firstTrackCurrentTicks = 0; // Used for absolute times.\n\t\t\tmidiData.tracks[0].forEach((event: MidiEvent & { meta?: boolean; }) => {\n\t\t\t\tfirstTrackCurrentTicks += event.deltaTime;\n\n\t\t\t\tif (event.meta) {\n\t\t\t\t\tif (event.type === \"trackName\") {\n\t\t\t\t\t\tthis.name = event.text;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tevent.type === \"text\" ||\n\t\t\t\t\t\tevent.type === \"cuePoint\" ||\n\t\t\t\t\t\tevent.type === \"marker\" ||\n\t\t\t\t\t\tevent.type === \"lyrics\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.meta.push({\n\t\t\t\t\t\t\ttext: event.text,\n\t\t\t\t\t\t\tticks: firstTrackCurrentTicks,\n\t\t\t\t\t\t\ttype: event.type,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\t/**\n\t * This must be invoked after any changes are made to the tempo array\n\t * or the timeSignature array for the updated values to be reflected.\n\t */\n\tupdate(): void {\n\t\tlet currentTime = 0;\n\t\tlet lastEventBeats = 0;\n\n\t\t// Make sure it's sorted;\n\t\tthis.tempos.sort((a, b) => a.ticks - b.ticks);\n\t\tthis.tempos.forEach((event, index) => {\n\t\t\tconst lastBPM =\n\t\t\t\tindex > 0 ? this.tempos[index - 1].bpm : this.tempos[0].bpm;\n\t\t\tconst beats = event.ticks / this.ppq - lastEventBeats;\n\t\t\tconst elapsedSeconds = (60 / lastBPM) * beats;\n\n\t\t\tevent.time = elapsedSeconds + currentTime;\n\t\t\tcurrentTime = event.time;\n\t\t\tlastEventBeats += beats;\n\t\t});\n\n\t\tthis.timeSignatures.sort((a, b) => a.ticks - b.ticks);\n\t\tthis.timeSignatures.forEach((event, index) => {\n\t\t\tconst lastEvent =\n\t\t\t\tindex > 0\n\t\t\t\t\t? this.timeSignatures[index - 1]\n\t\t\t\t\t: this.timeSignatures[0];\n\n\t\t\tconst elapsedBeats = (event.ticks - lastEvent.ticks) / this.ppq;\n\t\t\tconst elapsedMeasures =\n\t\t\t\telapsedBeats /\n\t\t\t\tlastEvent.timeSignature[0] /\n\t\t\t\t(lastEvent.timeSignature[1] / 4);\n\n\t\t\tlastEvent.measures = lastEvent.measures || 0;\n\t\t\tevent.measures = elapsedMeasures + lastEvent.measures;\n\t\t});\n\t}\n\n\t/**\n\t * Convert ticks into seconds based on the tempo changes.\n\t */\n\tticksToSeconds(ticks: number): number {\n\t\t// Find the relevant position.\n\t\tconst index = search(this.tempos, ticks);\n\n\t\tif (index !== -1) {\n\t\t\tconst tempo = this.tempos[index];\n\t\t\tconst tempoTime = tempo.time;\n\t\t\tconst elapsedBeats = (ticks - tempo.ticks) / this.ppq;\n\n\t\t\treturn tempoTime + (60 / tempo.bpm) * elapsedBeats;\n\t\t} else {\n\t\t\t// Assume 120.\n\t\t\tconst beats = ticks / this.ppq;\n\t\t\treturn (60 / 120) * beats;\n\t\t}\n\t}\n\n\t/**\n\t * Convert ticks into measures based off of the time signatures.\n\t */\n\tticksToMeasures(ticks: number): number {\n\t\tconst index = search(this.timeSignatures, ticks);\n\n\t\tif (index !== -1) {\n\t\t\tconst timeSigEvent = this.timeSignatures[index];\n\t\t\tconst elapsedBeats = (ticks - timeSigEvent.ticks) / this.ppq;\n\n\t\t\treturn (\n\t\t\t\ttimeSigEvent.measures +\n\t\t\t\telapsedBeats /\n\t\t\t\t\t(timeSigEvent.timeSignature[0] /\n\t\t\t\t\t\ttimeSigEvent.timeSignature[1]) /\n\t\t\t\t\t4\n\t\t\t);\n\t\t} else {\n\t\t\treturn ticks / this.ppq / 4;\n\t\t}\n\t}\n\n\t/**\n\t * The number of ticks per quarter note.\n\t */\n\tget ppq(): number {\n\t\treturn privatePPQMap.get(this);\n\t}\n\n\t/**\n\t * Convert seconds to ticks based on the tempo events.\n\t */\n\tsecondsToTicks(seconds: number): number {\n\t\t// Find the relevant position.\n\t\tconst index = search(this.tempos, seconds, \"time\");\n\n\t\tif (index !== -1) {\n\t\t\tconst tempo = this.tempos[index];\n\t\t\tconst tempoTime = tempo.time;\n\t\t\tconst elapsedTime = seconds - tempoTime;\n\t\t\tconst elapsedBeats = elapsedTime / (60 / tempo.bpm);\n\n\t\t\treturn Math.round(tempo.ticks + elapsedBeats * this.ppq);\n\t\t} else {\n\t\t\t// Assume 120.\n\t\t\tconst beats = seconds / (60 / 120);\n\t\t\treturn Math.round(beats * this.ppq);\n\t\t}\n\t}\n\n\t/**\n\t * Convert the header into an object.\n\t */\n\ttoJSON(): HeaderJSON {\n\t\treturn {\n\t\t\tkeySignatures: this.keySignatures,\n\t\t\tmeta: this.meta,\n\t\t\tname: this.name,\n\t\t\tppq: this.ppq,\n\t\t\ttempos: this.tempos.map((t) => {\n\t\t\t\treturn {\n\t\t\t\t\tbpm: t.bpm,\n\t\t\t\t\tticks: t.ticks,\n\t\t\t\t};\n\t\t\t}),\n\t\t\ttimeSignatures: this.timeSignatures,\n\t\t};\n\t}\n\n\t/**\n\t * Parse a header json object.\n\t */\n\tfromJSON(json: HeaderJSON): void {\n\t\tthis.name = json.name;\n\t\t\n\t\t// Clone all the attributes.\n\t\tthis.tempos = json.tempos.map((t) => Object.assign({}, t));\n\t\tthis.timeSignatures = json.timeSignatures.map((t) =>\n\t\t\tObject.assign({}, t)\n\t\t);\n\t\tthis.keySignatures = json.keySignatures.map((t) =>\n\t\t\tObject.assign({}, t)\n\t\t);\n\t\tthis.meta = json.meta.map((t) => Object.assign({}, t));\n\n\t\tprivatePPQMap.set(this, json.ppq);\n\t\tthis.update();\n\t}\n\n\t/**\n\t * Update the tempo of the midi to a single tempo. Will remove and replace\n\t * any other tempos currently set and update all of the event timing.\n\t * @param bpm The tempo in beats per second.\n\t */\n\tsetTempo(bpm: number): void {\n\t\tthis.tempos = [\n\t\t\t{\n\t\t\t\tbpm,\n\t\t\t\tticks: 0,\n\t\t\t},\n\t\t];\n\t\tthis.update();\n\t}\n}\n\nexport interface HeaderJSON {\n\tname: string;\n\tppq: number;\n\tmeta: MetaEvent[];\n\ttempos: TempoEvent[];\n\ttimeSignatures: TimeSignatureEvent[];\n\tkeySignatures: KeySignatureEvent[];\n}\n","import type {\n\tMidiEvent,\n\tMidiProgramChangeEvent\n} from \"midi-file\";\n\nimport { DrumKitByPatchID, instrumentByPatchID, InstrumentFamilyByID } from \"./InstrumentMaps\";\nimport { Track } from \"./Track\";\n\n/**\n * @hidden\n */\nconst privateTrackMap = new WeakMap<Instrument, Track>();\n\n/**\n * Describes the MIDI instrument of a track.\n */\nexport class Instrument {\n\n\t/**\n\t * The instrument number. Defaults to 0.\n\t */\n\tnumber = 0;\n\n\t/**\n\t * @param trackData\n\t * @param track \n\t */\n\tconstructor(trackData: MidiEvent[], track: Track) {\n\t\tprivateTrackMap.set(this, track);\n\t\tthis.number = 0;\n\n\t\tif (trackData) {\n\t\t\tconst programChange = trackData.find(\n\t\t\t\te => e.type === \"programChange\"\n\t\t\t) as MidiProgramChangeEvent;\n\n\t\t\t// Set 'number' from 'programNumber' if exists.\n\t\t\tif (programChange) {\n\t\t\t\tthis.number = programChange.programNumber;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The common name of the instrument.\n\t */\n\tget name(): string {\n\t\tif (this.percussion) {\n\t\t\treturn DrumKitByPatchID[this.number];\n\t\t} else {\n\t\t\treturn instrumentByPatchID[this.number];\n\t\t}\n\t}\n\n\tset name(n: string) {\n\t\tconst patchNumber = instrumentByPatchID.indexOf(n);\n\t\tif (patchNumber !== -1) {\n\t\t\tthis.number = patchNumber;\n\t\t}\n\t}\n\n\t/**\n\t * The instrument family, e.g. \"piano\".\n\t */\n\tget family(): string {\n\t\tif (this.percussion) {\n\t\t\treturn \"drums\";\n\t\t} else {\n\t\t\treturn InstrumentFamilyByID[Math.floor(this.number / 8)];\n\t\t}\n\t}\n\n\t/**\n\t * If the instrument is a percussion instrument.\n\t */\n\tget percussion(): boolean {\n\t\tconst track = privateTrackMap.get(this);\n\t\treturn track.channel === 9;\n\t}\n\n\t/**\n\t * Convert it to JSON form.\n\t */\n\ttoJSON(): InstrumentJSON {\n\t\treturn {\n\t\t\tfamily: this.family,\n\t\t\tnumber: this.number,\n\t\t\tname: this.name\n\t\t};\n\t}\n\n\t/**\n\t * Convert from JSON form.\n\t */\n\tfromJSON(json: InstrumentJSON): void {\n\t\tthis.number = json.number;\n\t}\n}\n\nexport interface InstrumentJSON {\n\tfamily: string;\n\tnumber: number;\n\tname: string;\n}\n","export const instrumentByPatchID = [\n\t\"acoustic grand piano\",\n\t\"bright acoustic piano\",\n\t\"electric grand piano\",\n\t\"honky-tonk piano\",\n\t\"electric piano 1\",\n\t\"electric piano 2\",\n\t\"harpsichord\",\n\t\"clavi\",\n\t\"celesta\",\n\t\"glockenspiel\",\n\t\"music box\",\n\t\"vibraphone\",\n\t\"marimba\",\n\t\"xylophone\",\n\t\"tubular bells\",\n\t\"dulcimer\",\n\t\"drawbar organ\",\n\t\"percussive organ\",\n\t\"rock organ\",\n\t\"church organ\",\n\t\"reed organ\",\n\t\"accordion\",\n\t\"harmonica\",\n\t\"tango accordion\",\n\t\"acoustic guitar (nylon)\",\n\t\"acoustic guitar (steel)\",\n\t\"electric guitar (jazz)\",\n\t\"electric guitar (clean)\",\n\t\"electric guitar (muted)\",\n\t\"overdriven guitar\",\n\t\"distortion guitar\",\n\t\"guitar harmonics\",\n\t\"acoustic bass\",\n\t\"electric bass (finger)\",\n\t\"electric bass (pick)\",\n\t\"fretless bass\",\n\t\"slap bass 1\",\n\t\"slap bass 2\",\n\t\"synth bass 1\",\n\t\"synth bass 2\",\n\t\"violin\",\n\t\"viola\",\n\t\"cello\",\n\t\"contrabass\",\n\t\"tremolo strings\",\n\t\"pizzicato strings\",\n\t\"orchestral harp\",\n\t\"timpani\",\n\t\"string ensemble 1\",\n\t\"string ensemble 2\",\n\t\"synthstrings 1\",\n\t\"synthstrings 2\",\n\t\"choir aahs\",\n\t\"voice oohs\",\n\t\"synth voice\",\n\t\"orchestra hit\",\n\t\"trumpet\",\n\t\"trombone\",\n\t\"tuba\",\n\t\"muted trumpet\",\n\t\"french horn\",\n\t\"brass section\",\n\t\"synthbrass 1\",\n\t\"synthbrass 2\",\n\t\"soprano sax\",\n\t\"alto sax\",\n\t\"tenor sax\",\n\t\"baritone sax\",\n\t\"oboe\",\n\t\"english horn\",\n\t\"bassoon\",\n\t\"clarinet\",\n\t\"piccolo\",\n\t\"flute\",\n\t\"recorder\",\n\t\"pan flute\",\n\t\"blown bottle\",\n\t\"shakuhachi\",\n\t\"whistle\",\n\t\"ocarina\",\n\t\"lead 1 (square)\",\n\t\"lead 2 (sawtooth)\",\n\t\"lead 3 (calliope)\",\n\t\"lead 4 (chiff)\",\n\t\"lead 5 (charang)\",\n\t\"lead 6 (voice)\",\n\t\"lead 7 (fifths)\",\n\t\"lead 8 (bass + lead)\",\n\t\"pad 1 (new age)\",\n\t\"pad 2 (warm)\",\n\t\"pad 3 (polysynth)\",\n\t\"pad 4 (choir)\",\n\t\"pad 5 (bowed)\",\n\t\"pad 6 (metallic)\",\n\t\"pad 7 (halo)\",\n\t\"pad 8 (sweep)\",\n\t\"fx 1 (rain)\",\n\t\"fx 2 (soundtrack)\",\n\t\"fx 3 (crystal)\",\n\t\"fx 4 (atmosphere)\",\n\t\"fx 5 (brightness)\",\n\t\"fx 6 (goblins)\",\n\t\"fx 7 (echoes)\",\n\t\"fx 8 (sci-fi)\",\n\t\"sitar\",\n\t\"banjo\",\n\t\"shamisen\",\n\t\"koto\",\n\t\"kalimba\",\n\t\"bag pipe\",\n\t\"fiddle\",\n\t\"shanai\",\n\t\"tinkle bell\",\n\t\"agogo\",\n\t\"steel drums\",\n\t\"woodblock\",\n\t\"taiko drum\",\n\t\"melodic tom\",\n\t\"synth drum\",\n\t\"reverse cymbal\",\n\t\"guitar fret noise\",\n\t\"breath noise\",\n\t\"seashore\",\n\t\"bird tweet\",\n\t\"telephone ring\",\n\t\"helicopter\",\n\t\"applause\",\n\t\"gunshot\",\n];\n\nexport const InstrumentFamilyByID = [\n\t\"piano\",\n\t\"chromatic percussion\",\n\t\"organ\",\n\t\"guitar\",\n\t\"bass\",\n\t\"strings\",\n\t\"ensemble\",\n\t\"brass\",\n\t\"reed\",\n\t\"pipe\",\n\t\"synth lead\",\n\t\"synth pad\",\n\t\"synth effects\",\n\t\"world\",\n\t\"percussive\",\n\t\"sound effects\",\n];\n\nexport const DrumKitByPatchID = {\n\t0: \"standard kit\",\n\t8: \"room kit\",\n\t16: \"power kit\",\n\t24: \"electronic kit\",\n\t25: \"tr-808 kit\",\n\t32: \"jazz kit\",\n\t40: \"brush kit\",\n\t48: \"orchestra kit\",\n\t56: \"sound fx kit\",\n};\n","import type {\n\tMidiData,\n\tMidiEvent\n} from \"midi-file\";\n\nimport { parseMidi } from \"midi-file\";\n\nimport { Header, HeaderJSON } from \"./Header\";\nimport { Track, TrackJSON } from \"./Track\";\nimport { encode } from \"./Encode\";\n\n/**\n * The main midi parsing class.\n */\nexport class Midi {\n\n\t/**\n\t * Download and parse the MIDI file. Returns a promise\n\t * which resolves to the generated MIDI file.\n\t * @param url The URL to fetch.\n\t */\n\tstatic async fromUrl(url: string): Promise<Midi> {\n\t\tconst response = await fetch(url);\n\t\tif (response.ok) {\n\t\t\tconst arrayBuffer = await response.arrayBuffer();\n\t\t\treturn new Midi(arrayBuffer);\n\t\t} else {\n\t\t\tthrow new Error(`Could not load '${url}'`);\n\t\t}\n\t}\n\n\t/**\n\t * The header information, includes things like tempo and meta events.\n\t */\n\theader: Header;\n\n\t/**\n\t * The midi tracks.\n\t */\n\ttracks: Track[];\n\n\t/**\n\t * Parse the midi data\n\t */\n\tconstructor(midiArray?: (ArrayLike<number> | ArrayBuffer)) {\n\t\t// Parse the MIDI data if there is any.\n\t\tlet midiData: (MidiData | null) = null;\n\t\tif (midiArray) {\n\t\t\t// Transform midiArray to ArrayLike<number>\n\t\t\t// only if it's an ArrayBuffer.\n\t\t\tconst midiArrayLike: ArrayLike<number> = midiArray instanceof ArrayBuffer\n\t\t\t\t? new Uint8Array(midiArray)\n\t\t\t\t: midiArray;\n\n\t\t\t// Parse MIDI data.\n\t\t\tmidiData = parseMidi(midiArrayLike);\n\n\t\t\t// Add the absolute times to each of the tracks.\n\t\t\tmidiData.tracks.forEach(track => {\n\t\t\t\tlet currentTicks = 0;\n\n\t\t\t\ttrack.forEach((event: MidiEvent & { absoluteTime: number; }) => {\n\t\t\t\t\tcurrentTicks += event.deltaTime;\n\t\t\t\t\tevent.absoluteTime = currentTicks;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Ensure at most one instrument per track.\n\t\t\tmidiData.tracks = splitTracks(midiData.tracks);\n\t\t}\n\n\t\tthis.header = new Header(midiData);\n\t\tthis.tracks = [];\n\n\t\t// Parse MIDI data.\n\t\tif (midiArray) {\n\t\t\t// Format 0, everything is on the same track.\n\t\t\tthis.tracks = midiData.tracks.map(trackData => new Track(trackData, this.header));\n\n\t\t\t// If it's format 1 and there are no notes on the first track, remove it.\n\t\t\tif (midiData.header.format === 1 && this.tracks[0].duration === 0) {\n\t\t\t\tthis.tracks.shift();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The name of the midi file, taken from the first track.\n\t */\n\tget name(): string {\n\t\treturn this.header.name;\n\t}\n\n\tset name(n) {\n\t\tthis.header.name = n;\n\t}\n\n\t/**\n\t * The total length of the file in seconds.\n\t */\n\tget duration(): number {\n\t\t// Get the max of the last note of all the tracks.\n\t\tconst durations = this.tracks.map(t => t.duration);\n\t\treturn Math.max(...durations);\n\t}\n\n\t/**\n\t * The total length of the file in ticks.\n\t */\n\tget durationTicks(): number {\n\t\t// Get the max of the last note of all the tracks.\n\t\tconst durationTicks = this.tracks.map(t => t.durationTicks);\n\t\treturn Math.max(...durationTicks);\n\t}\n\n\t/**\n\t * Add a track to the MIDI file.\n\t */\n\taddTrack(): Track {\n\t\tconst track = new Track(undefined, this.header);\n\t\tthis.tracks.push(track);\n\n\t\treturn track;\n\t}\n\n\t/**\n\t * Encode the MIDI as a Uint8Array.\n\t */\n\ttoArray(): Uint8Array {\n\t\treturn encode(this);\n\t}\n\n\t/**\n\t * Convert the MIDI object to JSON.\n\t */\n\ttoJSON(): MidiJSON {\n\t\treturn {\n\t\t\theader: this.header.toJSON(),\n\t\t\ttracks: this.tracks.map(track => track.toJSON()),\n\t\t};\n\t}\n\n\t/**\n\t * Parse a JSON representation of the object. Will overwrite the current\n\t * tracks and header.\n\t */\n\tfromJSON(json: MidiJSON): void {\n\t\tthis.header = new Header();\n\t\tthis.header.fromJSON(json.header);\n\t\tthis.tracks = json.tracks.map(trackJSON => {\n\t\t\tconst track = new Track(undefined, this.header);\n\t\t\ttrack.fromJSON(trackJSON);\n\n\t\t\treturn track;\n\t\t});\n\t}\n\n\t/**\n\t * Clone the entire object MIDI object.\n\t */\n\tclone(): Midi {\n\t\tconst midi = new Midi();\n\t\tmidi.fromJSON(this.toJSON());\n\n\t\treturn midi;\n\t}\n}\n\n/**\n * The MIDI data in JSON format.\n */\nexport interface MidiJSON {\n\theader: HeaderJSON;\n\ttracks: TrackJSON[];\n}\n\nexport { TrackJSON, Track } from \"./Track\";\nexport { HeaderJSON, Header } from \"./Header\";\n\n/**\n * Given a list of MIDI tracks, make sure that each channel corresponds to at\n * most one channel and at most one instrument. This means splitting up tracks\n * that contain more than one channel or instrument.\n */\nfunction splitTracks(tracks: Array<MidiEvent[]>): Array<MidiEvent[]> {\n\tconst newTracks = [];\n\n\tfor (let i = 0; i < tracks.length; i++) {\n\t\tconst defaultTrack = newTracks.length;\n\t\t// a map from [program, channel] tuples to new track numbers\n\t\tconst trackMap = new Map<string, number>();\n\t\t// a map from channel numbers to current program numbers\n\t\tconst currentProgram = Array(16).fill(0) as Array<number>;\n\n\t\tfor (const event of tracks[i]) {\n\t\t\tlet targetTrack = defaultTrack;\n\n\t\t\t// If the event has a channel, we need to find that channel's current\n\t\t\t// program number and the appropriate track for this [program, channel]\n\t\t\t// pair.\n\t\t\tconst channel = (event as (MidiEvent & { channel?: number })).channel;\n\t\t\tif (channel !== undefined) {\n\t\t\t\tif (event.type === \"programChange\") {\n\t\t\t\t\tcurrentProgram[channel] = event.programNumber;\n\t\t\t\t}\n\n\t\t\t\tconst program = currentProgram[channel];\n\t\t\t\tconst trackKey = `${program} ${channel}`;\n\t\t\t\t\n\t\t\t\tif (trackMap.has(trackKey)) {\n\t\t\t\t\ttargetTrack = trackMap.get(trackKey);\n\t\t\t\t} else {\n\t\t\t\t\ttargetTrack = defaultTrack + trackMap.size;\n\t\t\t\t\ttrackMap.set(trackKey, targetTrack);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!newTracks[targetTrack]) {\n\t\t\t\tnewTracks.push([]);\n\t\t\t}\n\n\t\t\tnewTracks[targetTrack].push(event);\n\t\t}\n\t}\n\n\treturn newTracks;\n}\n","import { Header } from \"./Header\";\n\n/**\n * Convert a MIDI note into a pitch.\n */\nfunction midiToPitch(midi: number): string {\n\tconst octave = Math.floor(midi / 12) - 1;\n\treturn midiToPitchClass(midi) + octave.toString();\n}\n\n/**\n * Convert a MIDI note to a pitch class (just the pitch no octave).\n */\nfunction midiToPitchClass(midi: number): string {\n\tconst scaleIndexToNote = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n\tconst note = midi % 12;\n\treturn scaleIndexToNote[note];\n}\n\n/**\n * Convert a pitch class to a MIDI note.\n */\nfunction pitchClassToMidi(pitch: string): number {\n\tconst scaleIndexToNote = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n\treturn scaleIndexToNote.indexOf(pitch);\n}\n\n/**\n * Convert a pitch to a MIDI number.\n */\n// tslint:disable-next-line: only-arrow-functions typedef\nconst pitchToMidi: (note: string) => number = (function() {\n\tconst regexp = /^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i;\n\tconst noteToScaleIndex = {\n\t\t// tslint:disable-next-line: object-literal-sort-keys\n\t\tcbb: -2, cb: -1, c: 0, \"c#\": 1, cx: 2,\n\t\tdbb: 0, db: 1, d: 2, \"d#\": 3, dx: 4,\n\t\tebb: 2, eb: 3, e: 4, \"e#\": 5, ex: 6,\n\t\tfbb: 3, fb: 4, f: 5, \"f#\": 6, fx: 7,\n\t\tgbb: 5, gb: 6, g: 7, \"g#\": 8, gx: 9,\n\t\tabb: 7, ab: 8, a: 9, \"a#\": 10, ax: 11,\n\t\tbbb: 9, bb: 10, b: 11, \"b#\": 12, bx: 13,\n\t};\n\n\treturn (note) => {\n\t\tconst split = regexp.exec(note);\n\t\tconst pitch = split[1];\n\t\tconst octave = split[2];\n\t\tconst index = noteToScaleIndex[pitch.toLowerCase()];\n\t\treturn index + (parseInt(octave, 10) + 1) * 12;\n\t};\n}());\n\nconst privateHeaderMap = new WeakMap<Note, Header>();\n\n/**\n * A Note consists of a `noteOn` and `noteOff` event.\n */\nexport class Note implements NoteInterface {\n\n\t/**\n\t * The notes MIDI value.\n\t */\n\tmidi: number;\n\n\t/**\n\t * The normalized velocity (0-1).\n\t */\n\tvelocity: number;\n\n\t/**\n\t * The velocity of the note off.\n\t */\n\tnoteOffVelocity: number;\n\n\t/**\n\t * The start time in ticks.\n\t */\n\tticks: number;\n\n\t/**\n\t * The duration in ticks.\n\t */\n\tdurationTicks: number;\n\n\tconstructor(noteOn: NoteOnEvent, noteOff: NoteOffEvent, header: Header) {\n\t\tprivateHeaderMap.set(this, header);\n\n\t\tthis.midi = noteOn.midi;\n\n\t\tthis.velocity = noteOn.velocity;\n\n\t\tthis.noteOffVelocity = noteOff.velocity;\n\n\t\tthis.ticks = noteOn.ticks;\n\n\t\tthis.durationTicks = noteOff.ticks - noteOn.ticks;\n\t}\n\n\t/**\n\t * The note name and octave in scientific pitch notation, e.g. \"C4\".\n\t */\n\tget name(): string {\n\t\treturn midiToPitch(this.midi);\n\t}\n\n\tset name(n: string) {\n\t\tthis.midi = pitchToMidi(n);\n\t}\n\n\t/**\n\t * The notes octave number.\n\t */\n\tget octave(): number {\n\t\treturn Math.floor(this.midi / 12) - 1;\n\t}\n\n\tset octave(o: number) {\n\t\tconst diff = o - this.octave;\n\t\tthis.midi += diff * 12;\n\t}\n\n\t/**\n\t * The pitch class name. e.g. \"A\".\n\t */\n\tget pitch(): string {\n\t\treturn midiToPitchClass(this.midi);\n\t}\n\n\tset pitch(p: string) {\n\t\tthis.midi = 12 * (this.octave + 1) + pitchClassToMidi(p);\n\t}\n\n\t/**\n\t * The duration of the segment in seconds.\n\t */\n\tget duration(): number {\n\t\tconst header = privateHeaderMap.get(this);\n\t\treturn header.ticksToSeconds(this.ticks + this.durationTicks) - header.ticksToSeconds(this.ticks);\n\t}\n\n\tset duration(d: number) {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tconst noteEndTicks = header.secondsToTicks(this.time + d);\n\t\tthis.durationTicks = noteEndTicks - this.ticks;\n\t}\n\n\t/**\n\t * The time of the event in seconds.\n\t */\n\tget time(): number {\n\t\tconst header = privateHeaderMap.get(this);\n\t\treturn header.ticksToSeconds(this.ticks);\n\t}\n\n\tset time(t: number) {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tthis.ticks = header.secondsToTicks(t);\n\t}\n\n\t/**\n\t * The number of measures (and partial measures) to this beat.\n\t * Takes into account time signature changes.\n\t * @readonly\n\t */\n\tget bars(): number {\n\t\tconst header = privateHeaderMap.get(this);\n\t\treturn header.ticksToMeasures(this.ticks);\n\t}\n\n\ttoJSON(): NoteJSON {\n\t\treturn {\n\t\t\tduration: this.duration,\n\t\t\tdurationTicks: this.durationTicks,\n\t\t\tmidi: this.midi,\n\t\t\tname: this.name,\n\t\t\tticks: this.ticks,\n\t\t\ttime: this.time,\n\t\t\tvelocity: this.velocity,\n\t\t};\n\t}\n}\n\nexport interface NoteJSON {\n\ttime: number;\n\tmidi: number;\n\tname: string;\n\tvelocity: number;\n\tduration: number;\n\tticks: number;\n\tdurationTicks: number;\n}\n\nexport interface NoteOnEvent {\n\tticks: number;\n\tvelocity: number;\n\tmidi: number;\n}\n\nexport interface NoteOffEvent {\n\tticks: number;\n\tvelocity: number;\n}\n\nexport interface NoteInterface {\n\ttime: number;\n\tticks: number;\n\tduration: number;\n\tdurationTicks: number;\n\tmidi: number;\n\tpitch: string;\n\toctave: number;\n\tname: string;\n\tnoteOffVelocity: number;\n\tvelocity: number;\n}\n\ntype PitchDescription = {\n\tname: string;\n} | {\n\tpitch: string;\n\toctave: number;\n} | {\n\tmidi: number;\n}\n\ntype VelocityDescription = {\n\tvelocity?: number;\n\tnoteOffVelocity?: number;\n}\n\ntype TimeDescription = {\n\ttime: number;\n\tduration?: number;\n} | {\n\tticks: number;\n\tdurationTicks?: number;\n}\n\n/**\n * @hidden\n */\nexport type NoteConstructorInterface = PitchDescription & VelocityDescription & TimeDescription\n","import { Header } from \"./Header\";\nimport { MidiPitchBendEvent } from \"midi-file\";\n\nconst privateHeaderMap = new WeakMap<PitchBend, Header>();\n\n/**\n * Represents a pitch bend event.\n */\nexport class PitchBend implements PitchBendInterface {\n\n\t/**\n\t * The pitch value from...\n\t */\n\tvalue: number;\n\n\t/**\n\t * The tick time of the event.\n\t */\n\tticks: number;\n\n\t/**\n\t * @param event\n\t * @param header\n\t */\n\tconstructor(event: Partial<MidiPitchBendEvent & { absoluteTime: number; }>, header: Header) {\n\t\tprivateHeaderMap.set(this, header);\n\n\t\tthis.ticks = event.absoluteTime;\n\t\tthis.value = event.value;\n\t}\n\n\t/**\n\t * The time of the event in seconds\n\t */\n\tget time(): number {\n\t\tconst header = privateHeaderMap.get(this);\n\t\treturn header.ticksToSeconds(this.ticks);\n\t}\n\n\tset time(t: number) {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tthis.ticks = header.secondsToTicks(t);\n\t}\n\n\ttoJSON(): PitchBendJSON {\n\t\treturn {\n\t\t\tticks: this.ticks,\n\t\t\ttime: this.time,\n\t\t\tvalue: this.value,\n\t\t};\n\t}\n}\n\nexport interface PitchBendJSON {\n\tticks: number;\n\ttime: number;\n\tvalue: number;\n}\n\nexport interface PitchBendInterface {\n\tticks: number;\n\ttime: number;\n\tvalue: number;\n}\n","import type {\n\tMidiControllerEvent,\n\tMidiEndOfTrackEvent,\n\tMidiEvent,\n\tMidiNoteOffEvent, MidiNoteOnEvent,\n\tMidiPitchBendEvent, MidiTrackNameEvent\n} from \"midi-file\";\n\n// Used to add `absoluteTime` property to 'MidiEvent's.\ntype WithAbsoluteTime = { absoluteTime: number; };\n\nimport { insert } from \"./BinarySearch\";\nimport { ControlChange, ControlChangeInterface } from \"./ControlChange\";\nimport { ControlChangesJSON, createControlChanges } from \"./ControlChanges\";\nimport { PitchBend, PitchBendInterface, PitchBendJSON } from \"./PitchBend\";\n\nimport { Header } from \"./Header\";\nimport { Instrument, InstrumentJSON } from \"./Instrument\";\nimport { Note, NoteConstructorInterface, NoteJSON } from \"./Note\";\n\nconst privateHeaderMap = new WeakMap<Track, Header>();\n\n/**\n * A Track is a collection of 'notes' and 'controlChanges'.\n */\nexport class Track {\n\t/**\n\t * The name of the track.\n\t */\n\tname = \"\";\n\n\t/**\n\t * The instrument associated with the track.\n\t */\n\tinstrument: Instrument;\n\n\t/**\n\t * The track's note events.\n\t */\n\tnotes: Note[] = [];\n\n\t/**\n\t * The channel number of the track. Applies this channel\n\t * to all events associated with the channel.\n\t */\n\tchannel: number;\n\n\t/**\n\t * The control change events.\n\t */\n\tcontrolChanges = createControlChanges();\n\n\t/**\n\t * The end of track event (if it exists) in ticks.\n\t */\n\tendOfTrackTicks?: number;\n\n\t/**\n\t * The pitch bend events.\n\t */\n\tpitchBends: PitchBend[] = [];\n\n\tconstructor(trackData: MidiEvent[], header: Header) {\n\t\tprivateHeaderMap.set(this, header);\n\n\t\tif (trackData) {\n\t\t\t// Get the name of the track.\n\t\t\tconst nameEvent = trackData.find(\n\t\t\t\t(e) => e.type === \"trackName\"\n\t\t\t) as MidiTrackNameEvent;\n\n\t\t\t// Set empty name if 'trackName' event isn't found.\n\t\t\tthis.name = nameEvent ? nameEvent.text : \"\";\n\t\t}\n\n\t\tthis.instrument = new Instrument(trackData, this);\n\n\t\t// Defaults to 0.\n\t\tthis.channel = 0;\n\n\t\tif (trackData) {\n\t\t\tconst noteOns = trackData.filter(\n\t\t\t\t(event) => event.type === \"noteOn\"\n\t\t\t) as (MidiNoteOnEvent & WithAbsoluteTime)[];\n\n\t\t\tconst noteOffs = trackData.filter(\n\t\t\t\t(event) => event.type === \"noteOff\"\n\t\t\t) as (MidiNoteOffEvent & WithAbsoluteTime)[];\n\n\t\t\twhile (noteOns.length) {\n\t\t\t\tconst currentNote = noteOns.shift();\n\n\t\t\t\t// Set the channel based on the note.\n\t\t\t\tthis.channel = currentNote.channel;\n\n\t\t\t\t// Find the corresponding note off.\n\t\t\t\tconst offIndex = noteOffs.findIndex(\n\t\t\t\t\t(note) =>\n\t\t\t\t\t\tnote.noteNumber === currentNote.noteNumber &&\n\t\t\t\t\t\tnote.absoluteTime >= currentNote.absoluteTime\n\t\t\t\t);\n\n\t\t\t\tif (offIndex !== -1) {\n\t\t\t\t\t// Once it's got the note off, add it.\n\t\t\t\t\tconst noteOff = noteOffs.splice(offIndex, 1)[0];\n\n\t\t\t\t\tthis.addNote({\n\t\t\t\t\t\tdurationTicks:\n\t\t\t\t\t\t\tnoteOff.absoluteTime - currentNote.absoluteTime,\n\t\t\t\t\t\tmidi: currentNote.noteNumber,\n\t\t\t\t\t\tnoteOffVelocity: noteOff.velocity / 127,\n\t\t\t\t\t\tticks: currentNote.absoluteTime,\n\t\t\t\t\t\tvelocity: currentNote.velocity / 127,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst controlChanges = trackData.filter(\n\t\t\t\t(event) => event.type === \"controller\"\n\t\t\t) as (MidiControllerEvent & WithAbsoluteTime)[];\n\t\t\tcontrolChanges.forEach((event) => {\n\t\t\t\tthis.addCC({\n\t\t\t\t\tnumber: event.controllerType,\n\t\t\t\t\tticks: event.absoluteTime,\n\t\t\t\t\tvalue: event.value / 127,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst pitchBends = trackData.filter(\n\t\t\t\t(event) => event.type === \"pitchBend\"\n\t\t\t) as (MidiPitchBendEvent & WithAbsoluteTime)[];\n\t\t\tpitchBends.forEach((event) => {\n\t\t\t\tthis.addPitchBend({\n\t\t\t\t\tticks: event.absoluteTime,\n\t\t\t\t\t// Scale the value between -2^13 to 2^13 to -2 to 2.\n\t\t\t\t\tvalue: event.value / Math.pow(2, 13),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst endOfTrackEvent:\n\t\t\t| (MidiEndOfTrackEvent & WithAbsoluteTime)\n\t\t\t| undefined = trackData.find(\n\t\t\t\t(event): event is (MidiEndOfTrackEvent & WithAbsoluteTime) =>\n\t\t\t\t\tevent.type === \"endOfTrack\"\n\t\t\t);\n\n\t\t\tthis.endOfTrackTicks =\n\t\t\t\tendOfTrackEvent !== undefined\n\t\t\t\t\t? endOfTrackEvent.absoluteTime\n\t\t\t\t\t: undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Add a note to the notes array.\n\t * @param props The note properties to add.\n\t */\n\taddNote(props: NoteConstructorInterface): this {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tconst note = new Note(\n\t\t\t{\n\t\t\t\tmidi: 0,\n\t\t\t\tticks: 0,\n\t\t\t\tvelocity: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tticks: 0,\n\t\t\t\tvelocity: 0,\n\t\t\t},\n\t\t\theader\n\t\t);\n\n\t\tObject.assign(note, props);\n\t\tinsert(this.notes, note, \"ticks\");\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a control change to the track.\n\t * @param props\n\t */\n\taddCC(\n\t\tprops:\n\t\t| Omit<ControlChangeInterface, \"ticks\">\n\t\t| Omit<ControlChangeInterface, \"time\">\n\t): this {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tconst cc = new ControlChange(\n\t\t\t{\n\t\t\t\tcontrollerType: props.number,\n\t\t\t},\n\t\t\theader\n\t\t);\n\t\tdelete props.number;\n\t\tObject.assign(cc, props);\n\t\tif (!Array.isArray(this.controlChanges[cc.number])) {\n\t\t\tthis.controlChanges[cc.number] = [];\n\t\t}\n\t\tinsert(this.controlChanges[cc.number], cc, \"ticks\");\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a control change to the track.\n\t */\n\taddPitchBend(\n\t\tprops:\n\t\t| Omit<PitchBendInterface, \"ticks\">\n\t\t| Omit<PitchBendInterface, \"time\">\n\t): this {\n\t\tconst header = privateHeaderMap.get(this);\n\t\tconst pb = new PitchBend({}, header);\n\t\tObject.assign(pb, props);\n\t\tinsert(this.pitchBends, pb, \"ticks\");\n\t\treturn this;\n\t}\n\n\t/**\n\t * The end time of the last event in the track.\n\t */\n\tget duration(): number {\n\t\tif (!this.notes.length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet maxDuration =\n\t\t\tthis.notes[this.notes.length - 1].time +\n\t\t\tthis.notes[this.notes.length - 1].duration;\n\n\t\tfor (let i = 0; i < this.notes.length - 1; i++) {\n\t\t\tconst duration = this.notes[i].time + this.notes[i].duration;\n\t\t\tif (maxDuration < duration) {\n\t\t\t\tmaxDuration = duration;\n\t\t\t}\n\t\t}\n\n\t\treturn maxDuration;\n\t}\n\n\t/**\n\t * The end time of the last event in the track in ticks.\n\t */\n\tget durationTicks(): number {\n\t\tif (!this.notes.length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet maxDuration =\n\t\t\tthis.notes[this.notes.length - 1].ticks +\n\t\t\tthis.notes[this.notes.length - 1].durationTicks;\n\t\tfor (let i = 0; i < this.notes.length - 1; i++) {\n\t\t\tconst duration = this.notes[i].ticks + this.notes[i].durationTicks;\n\t\t\tif (maxDuration < duration) {\n\t\t\t\tmaxDuration = duration;\n\t\t\t}\n\t\t}\n\n\t\treturn maxDuration;\n\t}\n\n\t/**\n\t * Assign the JSON values to this track.\n\t */\n\tfromJSON(json: TrackJSON): void {\n\t\tthis.name = json.name;\n\t\tthis.channel = json.channel;\n\t\tthis.instrument = new Instrument(undefined, this);\n\t\tthis.instrument.fromJSON(json.instrument);\n\n\t\tif (json.endOfTrackTicks !== undefined) {\n\t\t\tthis.endOfTrackTicks = json.endOfTrackTicks;\n\t\t}\n\n\t\tfor (const number in json.controlChanges) {\n\t\t\tif (json.controlChanges[number]) {\n\t\t\t\tjson.controlChanges[number].forEach((cc) => {\n\t\t\t\t\tthis.addCC({\n\t\t\t\t\t\tnumber: cc.number,\n\t\t\t\t\t\tticks: cc.ticks,\n\t\t\t\t\t\tvalue: cc.value,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tjson.notes.forEach((n) => {\n\t\t\tthis.addNote({\n\t\t\t\tdurationTicks: n.durationTicks,\n\t\t\t\tmidi: n.midi,\n\t\t\t\tticks: n.ticks,\n\t\t\t\tvelocity: n.velocity,\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Convert the track into a JSON format.\n\t */\n\ttoJSON(): TrackJSON {\n\t\t// Convert all the CCs to JSON.\n\t\tconst controlChanges = {};\n\t\tfor (let i = 0; i < 127; i++) {\n\t\t\tif (this.controlChanges.hasOwnProperty(i)) {\n\t\t\t\tcontrolChanges[i] = this.controlChanges[i].map((c) =>\n\t\t\t\t\tc.toJSON()\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst json: TrackJSON = {\n\t\t\tchannel: this.channel,\n\t\t\tcontrolChanges,\n\t\t\tpitchBends: this.pitchBends.map((pb) => pb.toJSON()),\n\t\t\tinstrument: this.instrument.toJSON(),\n\t\t\tname: this.name,\n\t\t\tnotes: this.notes.map((n) => n.toJSON()),\n\t\t};\n\n\t\tif (this.endOfTrackTicks !== undefined) {\n\t\t\tjson.endOfTrackTicks = this.endOfTrackTicks;\n\t\t}\n\n\t\treturn json;\n\t}\n}\n\nexport interface TrackJSON {\n\tname: string;\n\tnotes: NoteJSON[];\n\tchannel: number;\n\tinstrument: InstrumentJSON;\n\tcontrolChanges: ControlChangesJSON;\n\tpitchBends: PitchBendJSON[];\n\tendOfTrackTicks?: number;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(233);\n"],"names":["t","e","exports","module","define","amd","r","n","self","i","length","Array","isArray","push","d","flatten","parseMidi","writeMidi","buffer","bufferLen","pos","prototype","eof","readUInt8","readInt8","readUInt16","readInt16","readUInt24","readInt24","readUInt32","readBytes","slice","readString","String","fromCharCode","apply","readVarInt","readChunk","id","data","a","format","numTracks","framesPerSecond","ticksPerFrame","ticksPerBeat","o","s","c","u","deltaTime","type","meta","number","text","channel","port","microsecondsPerBeat","frameRate","hour","min","sec","frame","subFrame","numerator","denominator","metronome","thirtyseconds","key","scale","metatypeByte","running","noteNumber","velocity","byte9","amount","controllerType","value","programNumber","header","tracks","writeUInt8","writeInt8","writeUInt16","writeInt16","writeUInt24","writeInt24","writeUInt32","writeInt32","writeBytes","concat","call","writeString","codePointAt","writeVarInt","reverse","writeChunk","timeDivision","h","Math","floor","log","LN2","f","useByte9ForNoteOff","Object","defineProperty","insert","search","splice","ControlChange","controlChangeIds","controlChangeNames","keys","reduce","WeakMap","set","ticks","absoluteTime","get","enumerable","configurable","ticksToSeconds","secondsToTicks","toJSON","time","createControlChanges","Proxy","hasOwnProperty","__spreadArray","arguments","encode","ppq","name","keySignatures","map","keySignatureKeys","indexOf","tempos","bpm","timeSignatures","timeSignature","instrument","notes","midi","durationTicks","noteOffVelocity","controlChanges","forEach","pitchBends","sort","Uint8Array","Header","update","measures","ticksToMeasures","round","fromJSON","assign","setTempo","Instrument","find","percussion","DrumKitByPatchID","instrumentByPatchID","InstrumentFamilyByID","family","__awaiter","Promise","next","throw","done","then","__generator","label","sent","trys","ops","return","Symbol","iterator","TypeError","pop","Track","Midi","ArrayBuffer","Map","fill","p","has","size","duration","shift","fromUrl","fetch","ok","arrayBuffer","Error","max","addTrack","toArray","clone","Note","cbb","cb","cx","dbb","db","dx","ebb","eb","ex","fbb","fb","fx","gbb","gb","g","gx","abb","ab","ax","bbb","bb","b","bx","exec","toLowerCase","parseInt","toString","octave","PitchBend","filter","findIndex","addNote","addCC","addPitchBend","endOfTrackTicks","toStringTag","root","factory","this","array","result","$flatten","parseTrack","lastEventTypeByte","Parser","events","event","readEvent","eventTypeByte","hourByte","param1","eventType","len","bytes","headerChunk","parseHeader","trackChunk","track","writeTrack","w","opts","Writer","writeEvent","value14","lsb14","msb14","v","b0","b1","b2","b3","arr","str","writeHeader","prop","beginning","end","midPoint","nextEvent","index","obj","privateHeaderMap","privateCCNumberMap","target","handler","encodeControlChange","cc","encodeInstrument","midiData","keySig","keyIndex","encodeKeySignature","textEvent","tempo","encodeTempo","timeSig","encodeTimeSignature","note","encodeNote","encodeNotes","encodeControlChanges","pb","encodePitchBend","encodePitchBends","lastTime","privatePPQMap","currentTime","lastEventBeats","lastBPM","beats","elapsedSeconds","lastEvent","elapsedMeasures","tempoTime","elapsedBeats","timeSigEvent","seconds","json","privateTrackMap","trackData","programChange","patchNumber","midiArray","midiArrayLike","currentTicks","newTracks","defaultTrack","trackMap","currentProgram","targetTrack","undefined","program","trackKey","splitTracks","url","response","durations","trackJSON","midiToPitchClass","regexp","noteToScaleIndex","pitchToMidi","split","pitch","noteOn","noteOff","diff","noteEndTicks","nameEvent","noteOns","noteOffs","currentNote","offIndex","pow","endOfTrackEvent","props","maxDuration","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition"],"version":3,"file":"index.054fd728.js.map"}