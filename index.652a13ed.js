let t,r,o,n,s;var i,a,l,u,c,d,h,f,p,m,y,g,v,b,x,j,w,S,T,E,k,M,C,A,O,R,P,L,I,D,F,N,U,B,V,G,H,z,q,W,X,Y,Z,Q,J,$,K,ee,et,er,eo,en,es,ei,ea,el,eu,ec,ed,eh,ef,ep,em,ey,eg,ev,eb,e_,ex,ej,ew,eS,eT,eE,ek,eM,eC,eA,eO,eR,eP,eL,eI,eD,eF,eN,eU,eB,eV,eG,eH,ez,eq,eW,eX,eY,eZ,eQ,eJ,e$,eK,e0,e1,e2,e3,e5,e4,e6,e8,e7,e9,te,tt,tr,to,tn,ts,ti,ta,tl,tu,tc,td,th,tf,tp,tm,ty=globalThis,tg={},tv={},tb=ty.parcelRequirefc44;null==tb&&((tb=function(t){if(t in tg)return tg[t].exports;if(t in tv){var r=tv[t];delete tv[t];var o={id:t,exports:{}};return tg[t]=o,r.call(o.exports,o,o.exports),o.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,r){tv[t]=r},ty.parcelRequirefc44=tb);var t_=tb.register;t_("02Ztr",function(t,r){var o=tb("gpDEB"),n=tb("kzBhd"),s=tb("72a6v"),i=tb("dIU5s");t.exports=function(t,r){return o(t)||n(t,r)||s(t,r)||i()},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("gpDEB",function(t,r){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("kzBhd",function(t,r){t.exports=function(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var n,s,i,a,l=[],u=!0,c=!1;try{if(i=(o=o.call(t)).next,0===r){if(Object(o)!==o)return;u=!1}else for(;!(u=(n=i.call(o)).done)&&(l.push(n.value),l.length!==r);u=!0);}catch(t){c=!0,s=t}finally{try{if(!u&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("72a6v",function(t,r){var o=tb("2zZPz");t.exports=function(t,r){if(t){if("string"==typeof t)return o(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,r)}},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("2zZPz",function(t,r){t.exports=function(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,n=Array(r);o<r;o++)n[o]=t[o];return n},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("dIU5s",function(t,r){t.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("fu0YK",function(t,r){t.exports=function(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("lR7jo",function(t,r){var o=tb("5DKOa");function n(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,o(s.key),s)}}t.exports=function(t,r,o){return r&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("5DKOa",function(t,r){var o=tb("41YNz").default,n=tb("fKGZD");t.exports=function(t){var r=n(t,"string");return"symbol"===o(r)?r:String(r)},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("41YNz",function(t,r){function o(r){return t.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,o(r)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}),t_("fKGZD",function(t,r){var o=tb("41YNz").default;t.exports=function(t,r){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,r||"default");if("object"!==o(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports}),t_("lw8Mu",function(t,r){t.exports=new URL("closed-hihat_1.c3598e64.mp3",import.meta.url).toString()}),t_("1NuFb",function(t,r){t.exports=new URL("closed-hihat_2.df9c6d68.mp3",import.meta.url).toString()}),t_("e3CPn",function(t,r){t.exports=new URL("closed-hihat_3.2e25a9fb.mp3",import.meta.url).toString()}),t_("j8xcP",function(t,r){t.exports=new URL("closed-hihat_4.546f9296.mp3",import.meta.url).toString()}),t_("dfk0E",function(t,r){t.exports=new URL("closed-hihat_5.84f49b25.mp3",import.meta.url).toString()}),t_("1WnZU",function(t,r){t.exports=new URL("closed-hihat_6.583c3a3d.mp3",import.meta.url).toString()}),t_("1ITJB",function(t,r){t.exports=new URL("closed-hihat_7.769c6d06.mp3",import.meta.url).toString()}),t_("570Mo",function(t,r){t.exports=new URL("closed-hihat_8.6911f924.mp3",import.meta.url).toString()}),t_("amPri",function(t,r){t.exports=new URL("closed-hihat_9.8e0b0ab6.mp3",import.meta.url).toString()}),t_("fAaYz",function(t,r){t.exports=new URL("closed-hihat_10.51d068e3.mp3",import.meta.url).toString()}),t_("fPRLW",function(t,r){t.exports=new URL("closed-hihat_11.8cabb786.mp3",import.meta.url).toString()}),t_("kwhgF",function(t,r){t.exports=new URL("closed-hihat_12.b1e4a2bf.mp3",import.meta.url).toString()}),t_("e0iWv",function(t,r){t.exports=new URL("open-hihat_1.1fa9c461.mp3",import.meta.url).toString()}),t_("l6Y43",function(t,r){t.exports=new URL("open-hihat_2.2f935a0f.mp3",import.meta.url).toString()}),t_("fBSj4",function(t,r){t.exports=new URL("open-hihat_3.ed4ec909.mp3",import.meta.url).toString()}),t_("ajKwd",function(t,r){t.exports=new URL("open-hihat_4.5364cb46.mp3",import.meta.url).toString()}),t_("ck7JE",function(t,r){t.exports=new URL("open-hihat_5.14edd338.mp3",import.meta.url).toString()}),t_("hnHVd",function(t,r){t.exports=new URL("open-hihat_6.0efdc832.mp3",import.meta.url).toString()}),t_("aA3m4",function(t,r){t.exports=new URL("open-hihat_7.f7c80852.mp3",import.meta.url).toString()}),t_("8a69x",function(t,r){t.exports=new URL("open-hihat_8.e6bbdeff.mp3",import.meta.url).toString()}),t_("dqHjm",function(t,r){t.exports=new URL("open-hihat_9.ce51d058.mp3",import.meta.url).toString()}),t_("jnTsG",function(t,r){t.exports=new URL("open-hihat_10.4ec7a4eb.mp3",import.meta.url).toString()}),t_("c1zb3",function(t,r){t.exports=new URL("open-hihat_11.0bc90e96.mp3",import.meta.url).toString()}),t_("26IF6",function(t,r){t.exports=new URL("open-hihat_12.a95c984b.mp3",import.meta.url).toString()}),t_("lbiIu",function(t,r){t.exports=new URL("crash_1.6aa3010b.mp3",import.meta.url).toString()}),t_("2NGyf",function(t,r){t.exports=new URL("crash_2.ad19f12b.mp3",import.meta.url).toString()}),t_("lABIk",function(t,r){t.exports=new URL("crash_3.8ba5b29e.mp3",import.meta.url).toString()}),t_("3iUw5",function(t,r){t.exports=new URL("crash_4.a17a8a67.mp3",import.meta.url).toString()}),t_("274PA",function(t,r){t.exports=new URL("crash_5.8b1d5604.mp3",import.meta.url).toString()}),t_("7ehjG",function(t,r){t.exports=new URL("crash_6.9dcf9ed6.mp3",import.meta.url).toString()}),t_("9N1z7",function(t,r){t.exports=new URL("crash_7.6a40b51c.mp3",import.meta.url).toString()}),t_("71k2j",function(t,r){t.exports=new URL("crash_8.99d0fd8d.mp3",import.meta.url).toString()}),t_("5Pvi2",function(t,r){t.exports=new URL("crash_9.4b8594d9.mp3",import.meta.url).toString()}),t_("2RFd4",function(t,r){t.exports=new URL("crash_10.0d7efbff.mp3",import.meta.url).toString()}),t_("1eKy2",function(t,r){t.exports=new URL("crash_11.cd2e80a9.mp3",import.meta.url).toString()}),t_("8YECZ",function(t,r){t.exports=new URL("crash_12.4ad8210f.mp3",import.meta.url).toString()}),t_("5SxuK",function(t,r){t.exports=new URL("ride_1.b04f8857.mp3",import.meta.url).toString()}),t_("ldQTA",function(t,r){t.exports=new URL("ride_2.1e254981.mp3",import.meta.url).toString()}),t_("f6Cx3",function(t,r){t.exports=new URL("ride_3.506fe573.mp3",import.meta.url).toString()}),t_("dWpbb",function(t,r){t.exports=new URL("ride_4.f8c46940.mp3",import.meta.url).toString()}),t_("hhn9f",function(t,r){t.exports=new URL("ride_5.9eedc3c5.mp3",import.meta.url).toString()}),t_("ZdGiJ",function(t,r){t.exports=new URL("ride_6.6119b558.mp3",import.meta.url).toString()}),t_("j9z4h",function(t,r){t.exports=new URL("ride_7.05f04bb8.mp3",import.meta.url).toString()}),t_("kiJCK",function(t,r){t.exports=new URL("ride_8.e0a39ea5.mp3",import.meta.url).toString()}),t_("272cE",function(t,r){t.exports=new URL("ride_9.b606a5a3.mp3",import.meta.url).toString()}),t_("bTlbG",function(t,r){t.exports=new URL("ride_10.c4914e82.mp3",import.meta.url).toString()}),t_("6CR9H",function(t,r){t.exports=new URL("ride_11.657bdea3.mp3",import.meta.url).toString()}),t_("1Ltew",function(t,r){t.exports=new URL("ride_12.b86f4115.mp3",import.meta.url).toString()}),t_("6bXMG",function(t,r){t.exports=new URL("kick_1.6d75be8e.mp3",import.meta.url).toString()}),t_("1v8uQ",function(t,r){t.exports=new URL("kick_2.eef489eb.mp3",import.meta.url).toString()}),t_("1gWYQ",function(t,r){t.exports=new URL("kick_3.d59afb9a.mp3",import.meta.url).toString()}),t_("7GIzt",function(t,r){t.exports=new URL("kick_4.b6aa1d5a.mp3",import.meta.url).toString()}),t_("46MCu",function(t,r){t.exports=new URL("kick_5.5a4a1577.mp3",import.meta.url).toString()}),t_("56E5k",function(t,r){t.exports=new URL("kick_6.1b1aa317.mp3",import.meta.url).toString()}),t_("2nfIT",function(t,r){t.exports=new URL("kick_7.0e6a60bd.mp3",import.meta.url).toString()}),t_("1vINS",function(t,r){t.exports=new URL("kick_8.a6e6cb22.mp3",import.meta.url).toString()}),t_("feiA7",function(t,r){t.exports=new URL("kick_9.e90f0f7b.mp3",import.meta.url).toString()}),t_("aQbil",function(t,r){t.exports=new URL("kick_10.2508647b.mp3",import.meta.url).toString()}),t_("624Hq",function(t,r){t.exports=new URL("kick_11.ca60b639.mp3",import.meta.url).toString()}),t_("fYSwK",function(t,r){t.exports=new URL("kick_12.183b69d7.mp3",import.meta.url).toString()}),t_("awcGy",function(t,r){t.exports=new URL("snare_1.5e9b43b5.mp3",import.meta.url).toString()}),t_("3sfcn",function(t,r){t.exports=new URL("snare_2.673c28c6.mp3",import.meta.url).toString()}),t_("9KbLN",function(t,r){t.exports=new URL("snare_3.3b5c10f7.mp3",import.meta.url).toString()}),t_("bSyUS",function(t,r){t.exports=new URL("snare_4.54b1f023.mp3",import.meta.url).toString()}),t_("8KIwk",function(t,r){t.exports=new URL("snare_5.81e6e076.mp3",import.meta.url).toString()}),t_("kdpRC",function(t,r){t.exports=new URL("snare_6.109bef8f.mp3",import.meta.url).toString()}),t_("hjY08",function(t,r){t.exports=new URL("snare_7.a258b319.mp3",import.meta.url).toString()}),t_("eM6M7",function(t,r){t.exports=new URL("snare_8.57c5e497.mp3",import.meta.url).toString()}),t_("1SKcy",function(t,r){t.exports=new URL("snare_9.3d8c9482.mp3",import.meta.url).toString()}),t_("j9hxR",function(t,r){t.exports=new URL("snare_10.b2b762b9.mp3",import.meta.url).toString()}),t_("2NXPr",function(t,r){t.exports=new URL("snare_11.64dc3f03.mp3",import.meta.url).toString()}),t_("gAz4G",function(t,r){t.exports=new URL("snare_12.7da1f5d8.mp3",import.meta.url).toString()}),t_("aD9Um",function(t,r){t.exports=new URL("hi-tom_1.ded5f514.mp3",import.meta.url).toString()}),t_("7IHL8",function(t,r){t.exports=new URL("hi-tom_2.8574ea96.mp3",import.meta.url).toString()}),t_("lhP3B",function(t,r){t.exports=new URL("hi-tom_3.9438c9df.mp3",import.meta.url).toString()}),t_("kqdlv",function(t,r){t.exports=new URL("hi-tom_4.928d7f59.mp3",import.meta.url).toString()}),t_("5YpTq",function(t,r){t.exports=new URL("hi-tom_5.a339ccb1.mp3",import.meta.url).toString()}),t_("9d0yB",function(t,r){t.exports=new URL("hi-tom_6.94994fbe.mp3",import.meta.url).toString()}),t_("d38YH",function(t,r){t.exports=new URL("hi-tom_7.ee3ea907.mp3",import.meta.url).toString()}),t_("hF6rJ",function(t,r){t.exports=new URL("hi-tom_8.38b2f80d.mp3",import.meta.url).toString()}),t_("iQi5z",function(t,r){t.exports=new URL("hi-tom_9.5a2cd443.mp3",import.meta.url).toString()}),t_("ifCLN",function(t,r){t.exports=new URL("hi-tom_10.dba10a8d.mp3",import.meta.url).toString()}),t_("iRvZv",function(t,r){t.exports=new URL("hi-tom_11.de67cef1.mp3",import.meta.url).toString()}),t_("75iiO",function(t,r){t.exports=new URL("hi-tom_12.f5d60938.mp3",import.meta.url).toString()}),t_("6kBfN",function(t,r){t.exports=new URL("mid-tom_1.3fc809be.mp3",import.meta.url).toString()}),t_("8hpbe",function(t,r){t.exports=new URL("mid-tom_2.6b59b8f0.mp3",import.meta.url).toString()}),t_("iuitn",function(t,r){t.exports=new URL("mid-tom_3.17f1cc7f.mp3",import.meta.url).toString()}),t_("ekqSg",function(t,r){t.exports=new URL("mid-tom_4.72bb4506.mp3",import.meta.url).toString()}),t_("iULhj",function(t,r){t.exports=new URL("mid-tom_5.c1baf999.mp3",import.meta.url).toString()}),t_("5iX8l",function(t,r){t.exports=new URL("mid-tom_6.f2fc805f.mp3",import.meta.url).toString()}),t_("8itDX",function(t,r){t.exports=new URL("mid-tom_7.970248d0.mp3",import.meta.url).toString()}),t_("2eaI0",function(t,r){t.exports=new URL("mid-tom_8.73bfd563.mp3",import.meta.url).toString()}),t_("ls98q",function(t,r){t.exports=new URL("mid-tom_9.211b9f20.mp3",import.meta.url).toString()}),t_("euiK4",function(t,r){t.exports=new URL("mid-tom_10.6a403e17.mp3",import.meta.url).toString()}),t_("9HaM0",function(t,r){t.exports=new URL("mid-tom_11.58388abe.mp3",import.meta.url).toString()}),t_("ge5lW",function(t,r){t.exports=new URL("mid-tom_12.bcd70088.mp3",import.meta.url).toString()}),t_("4OwOj",function(t,r){t.exports=new URL("floor-tom_1.12e2e635.mp3",import.meta.url).toString()}),t_("c29E2",function(t,r){t.exports=new URL("floor-tom_2.e6e78471.mp3",import.meta.url).toString()}),t_("aq3tN",function(t,r){t.exports=new URL("floor-tom_3.49806c39.mp3",import.meta.url).toString()}),t_("brntc",function(t,r){t.exports=new URL("floor-tom_4.a291815e.mp3",import.meta.url).toString()}),t_("gUGe5",function(t,r){t.exports=new URL("floor-tom_5.090c6c58.mp3",import.meta.url).toString()}),t_("awWFT",function(t,r){t.exports=new URL("floor-tom_6.e90de229.mp3",import.meta.url).toString()}),t_("ftxH4",function(t,r){t.exports=new URL("floor-tom_7.68418ad4.mp3",import.meta.url).toString()}),t_("3yq6D",function(t,r){t.exports=new URL("floor-tom_8.20433cf0.mp3",import.meta.url).toString()}),t_("cwkqo",function(t,r){t.exports=new URL("floor-tom_9.f95e6621.mp3",import.meta.url).toString()}),t_("7lfO5",function(t,r){t.exports=new URL("floor-tom_10.8525c2e8.mp3",import.meta.url).toString()}),t_("8ab0Q",function(t,r){t.exports=new URL("floor-tom_11.58d9143f.mp3",import.meta.url).toString()}),t_("6sqLW",function(t,r){t.exports=new URL("floor-tom_12.24ed6b48.mp3",import.meta.url).toString()});// Author: Çağrı Erdem, 2023
// Description: Main bundler script for 2groove web app.
// import "./../styles/mainUI.css";
// ----------------------------
// ----------------------------
// Author: Çağrı Erdem, 2023
// Description: MIDI Drum Sampler for 2groove web app.
const tx="14.7.77";var tj={};i=tb("02Ztr"),a=tb("fu0YK"),l=tb("lR7jo"),u=function(t,r,o){return{endTime:r,insertTime:o,type:"exponentialRampToValue",value:t}},c=function(t,r,o){return{endTime:r,insertTime:o,type:"linearRampToValue",value:t}},d=function(t,r){return{startTime:r,type:"setValue",value:t}},h=function(t,r,o){return{duration:o,startTime:r,type:"setValueCurve",values:t}},f=function(t,r,o){var n=o.startTime,s=o.target;return s+(r-s)*Math.exp((n-t)/o.timeConstant)},p=function(t){return"exponentialRampToValue"===t.type},m=function(t){return"linearRampToValue"===t.type},y=function(t){return p(t)||m(t)},g=function(t){return"setValue"===t.type},v=function(t){return"setValueCurve"===t.type},b=function t(r,o,n,s){var i=r[o];return void 0===i?s:y(i)||g(i)?i.value:v(i)?i.values[i.values.length-1]:f(n,t(r,o-1,i.startTime,s),i)},x=function(t,r,o,n,s){return void 0===o?[n.insertTime,s]:y(o)?[o.endTime,o.value]:g(o)?[o.startTime,o.value]:v(o)?[o.startTime+o.duration,o.values[o.values.length-1]]:[o.startTime,b(t,r-1,o.startTime,s)]},j=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},S=function(t){return j(t)||w(t)?t.cancelTime:p(t)||m(t)?t.endTime:t.startTime},T=function(t,r,o,n){var s=n.endTime,i=n.value;return o===i?i:0<o&&0<i||o<0&&i<0?o*Math.pow(i/o,(t-r)/(s-r)):0},E=function(t,r,o,n){return o+(t-r)/(n.endTime-r)*(n.value-o)},k=function(t,r){var o=Math.floor(r),n=Math.ceil(r);return o===n?t[o]:(1-(r-o))*t[o]+(1-(n-r))*t[n]},M=function(t,r){var o=r.duration,n=r.startTime,s=r.values,i=(t-n)/o*(s.length-1);return k(s,i)},C=function(t){return"setTarget"===t.type},A=/*#__PURE__*/function(t){function r(t){a(this,r),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return l(r,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var r=S(t);if(j(t)||w(t)){var o=this._automationEvents.findIndex(function(o){return w(t)&&v(o)?o.startTime+o.duration>=r:S(o)>=r}),n=this._automationEvents[o];if(-1!==o&&(this._automationEvents=this._automationEvents.slice(0,o)),j(t)){var s=this._automationEvents[this._automationEvents.length-1];if(void 0!==n&&y(n)){if(void 0!==s&&C(s))throw Error("The internal list is malformed.");var i=void 0===s?n.insertTime:v(s)?s.startTime+s.duration:S(s),a=void 0===s?this._defaultValue:v(s)?s.values[s.values.length-1]:s.value,l=p(n)?T(r,i,a,n):E(r,i,a,n),f=p(n)?u(l,r,this._currenTime):c(l,r,this._currenTime);this._automationEvents.push(f)}if(void 0!==s&&C(s)&&this._automationEvents.push(d(this.getValue(r),r)),void 0!==s&&v(s)&&s.startTime+s.duration>r){var g=r-s.startTime,b=(s.values.length-1)/s.duration,x=Math.max(2,1+Math.ceil(g*b)),k=g/(x-1)*b,M=s.values.slice(0,x);if(k<1)for(var A=1;A<x;A+=1){var O=k*A%1;M[A]=s.values[A-1]*(1-O)+s.values[A]*O}this._automationEvents[this._automationEvents.length-1]=h(M,s.startTime,g)}}}else{var R=this._automationEvents.findIndex(function(t){return S(t)>r}),P=-1===R?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[R-1];if(void 0!==P&&v(P)&&S(P)+P.duration>r)return!1;var L=p(t)?u(t.value,t.endTime,this._currenTime):m(t)?c(t.value,r,this._currenTime):t;if(-1===R)this._automationEvents.push(L);else{if(v(t)&&r+t.duration>S(this._automationEvents[R]))return!1;this._automationEvents.splice(R,0,L)}}return!0}},{key:"flush",value:function(t){var r=this._automationEvents.findIndex(function(r){return S(r)>t});if(r>1){var o=this._automationEvents.slice(r-1),n=o[0];C(n)&&o.unshift(d(b(this._automationEvents,r-2,n.startTime,this._defaultValue),n.startTime)),this._automationEvents=o}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var r=this._automationEvents.findIndex(function(r){return S(r)>t}),o=this._automationEvents[r],n=(-1===r?this._automationEvents.length:r)-1,s=this._automationEvents[n];if(void 0!==s&&C(s)&&(void 0===o||!y(o)||o.insertTime>t))return f(t,b(this._automationEvents,n-1,s.startTime,this._defaultValue),s);if(void 0!==s&&g(s)&&(void 0===o||!y(o)))return s.value;if(void 0!==s&&v(s)&&(void 0===o||!y(o)||s.startTime+s.duration>t))return t<s.startTime+s.duration?M(t,s):s.values[s.values.length-1];if(void 0!==s&&y(s)&&(void 0===o||!y(o)))return s.value;if(void 0!==o&&p(o)){var a=i(x(this._automationEvents,n,s,o,this._defaultValue),2);return T(t,a[0],a[1],o)}if(void 0!==o&&m(o)){var l=i(x(this._automationEvents,n,s,o,this._defaultValue),2);return E(t,l[0],l[1],o)}return this._defaultValue}}]),r}(Symbol.iterator),tj.AutomationEventList=A,tj.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},tj.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},tj.createExponentialRampToValueAutomationEvent=function(t,r){return{endTime:r,type:"exponentialRampToValue",value:t}},tj.createLinearRampToValueAutomationEvent=function(t,r){return{endTime:r,type:"linearRampToValue",value:t}},tj.createSetTargetAutomationEvent=function(t,r,o){return{startTime:r,target:t,timeConstant:o,type:"setTarget"}},tj.createSetValueAutomationEvent=d,tj.createSetValueCurveAutomationEvent=h;const tw=new WeakSet,tS=new WeakMap,tT=new WeakMap,tE=new WeakMap,tk=new WeakMap,tM=new WeakMap,tC=new WeakMap,tA=new WeakMap,tO=new WeakMap,tR=new WeakMap,tP={construct:()=>tP},tL=t=>{try{let r=new Proxy(t,tP);new r;// tslint:disable-line:no-unused-expression
}catch{return!1}return!0},tI=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,tD=(t,r)=>{let o=[],n=t.replace(/^[\s]+/,""),s=n.match(tI);for(;null!==s;){let t=s[1].slice(1,-1),i=s[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,r).toString());o.push(i),s=(n=n.slice(s[0].length).replace(/^[\s]+/,"")).match(tI)}return[o.join(";"),n]},tF=t=>{if(void 0!==t&&!Array.isArray(t))throw TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},tN=t=>{if(!tL(t))throw TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw TypeError("The given value for processorCtor should have a prototype.")},tU=(t,r)=>{let o=t.get(r);if(void 0===o)throw Error("A value with the given key could not be found.");return o},tB=(t,r)=>{let o=Array.from(t).filter(r);if(o.length>1)throw Error("More than one element was found.");if(0===o.length)throw Error("No element was found.");let[n]=o;return t.delete(n),n},tV=(t,r,o,n)=>{let s=tU(t,r),i=tB(s,t=>t[0]===o&&t[1]===n);return 0===s.size&&t.delete(r),i},tG=t=>tU(tC,t),tH=t=>{if(tw.has(t))throw Error("The AudioNode is already stored.");tw.add(t),tG(t).forEach(t=>t(!0))},tz=t=>"port"in t,tq=t=>{if(!tw.has(t))throw Error("The AudioNode is not stored.");tw.delete(t),tG(t).forEach(t=>t(!1))},tW=(t,r)=>{!tz(t)&&r.every(t=>0===t.size)&&tq(t)},tX={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},tY=(t,r)=>t.context===r,tZ=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},tQ=()=>new DOMException("","IndexSizeError"),tJ=t=>{var r;t.getChannelData=(r=t.getChannelData,o=>{try{return r.call(t,o)}catch(t){if(12===t.code)throw tQ();throw t}})},t$={numberOfChannels:1},tK=t=>tw.has(t),t0={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",// Bug #149: Safari does not yet support the detune AudioParam.
loop:!1,loopEnd:0,loopStart:0,playbackRate:1},t1=t=>"playbackRate"in t,t2=t=>"frequency"in t&&"gain"in t,t3=t=>"offset"in t,t5=t=>!("frequency"in t)&&"gain"in t,t4=t=>"detune"in t&&"frequency"in t,t6=t=>"pan"in t,t8=t=>tU(tS,t),t7=t=>tU(tE,t),t9=(t,r)=>{let{activeInputs:o}=t8(t);o.forEach(o=>o.forEach(([o])=>{r.includes(t)||t9(o,[...r,t])}));let n=t1(t)?[// Bug #149: Safari does not yet support the detune AudioParam.
t.playbackRate]:tz(t)?Array.from(t.parameters.values()):t2(t)?[t.Q,t.detune,t.frequency,t.gain]:t3(t)?[t.offset]:t5(t)?[t.gain]:t4(t)?[t.detune,t.frequency]:t6(t)?[t.pan]:[];for(let t of n){let o=t7(t);void 0!==o&&o.activeInputs.forEach(([t])=>t9(t,r))}tK(t)&&tq(t)},re=t=>{t9(t.destination,[])},rt=t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t),rr=t=>"context"in t,ro=t=>rr(t[0]),rn=(t,r,o,n)=>{for(let r of t)if(o(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return t.add(r),!0},rs=(t,r,[o,n],s)=>{rn(t,[r,o,n],t=>t[0]===r&&t[1]===o,s)},ri=(t,[r,o,n],s)=>{let i=t.get(r);void 0===i?t.set(r,new Set([[o,n]])):rn(i,[o,n],t=>t[0]===o,s)},ra=t=>"inputs"in t,rl=(t,r,o,n)=>{if(ra(r)){let s=r.inputs[n];return t.connect(s,o,0),[s,o,0]}return t.connect(r,o,n),[r,o,n]},ru=(t,r,o)=>{for(let n of t)if(n[0]===r&&n[1]===o)return t.delete(n),n;return null},rc=(t,r,o)=>tB(t,t=>t[0]===r&&t[1]===o),rd=(t,r)=>{let o=tG(t);if(!o.delete(r))throw Error("Missing the expected event listener.")},rh=(t,r,o)=>{let n=tU(t,r),s=tB(n,t=>t[0]===o);return 0===n.size&&t.delete(r),s},rf=(t,r,o,n)=>{ra(r)?t.disconnect(r.inputs[n],o,0):t.disconnect(r,o,n)},rp=t=>tU(tT,t),rm=t=>tU(tk,t),ry=t=>tA.has(t),rg=t=>!tw.has(t),rv=(t,r)=>new Promise(o=>{/*
         * This bug existed in Safari up until v14.0.2. Since AudioWorklets were not supported in Safari until v14.1 the presence of the
         * constructor for an AudioWorkletNode can be used here to skip the test.
         */if(null!==r)o(!0);else{let r=t.createScriptProcessor(256,1,1),n=t.createGain(),s=t.createBuffer(1,2,44100),i=s.getChannelData(0);// tslint:disable-line deprecation
    i[0]=1,i[1]=1;let a=t.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(t.destination),a.connect(n),a.disconnect(n),// tslint:disable-next-line:deprecation
    r.onaudioprocess=n=>{let s=n.inputBuffer.getChannelData(0);// tslint:disable-line deprecation
    Array.prototype.some.call(s,t=>1===t)?o(!0):o(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),rb=(t,r)=>{let o=new Map;for(let r of t)for(let t of r){let r=o.get(t);o.set(t,void 0===r?1:r+1)}o.forEach((t,o)=>r(o,t))},r_=t=>"context"in t,rx=t=>{var r,o;let n=new Map;t.connect=(r=t.connect.bind(t),(t,o=0,s=0)=>{let i=r_(t)?r(t,o,s):r(t,o),a=n.get(t);return void 0===a?n.set(t,[{input:s,output:o}]):a.every(t=>t.input!==s||t.output!==o)&&a.push({input:s,output:o}),i}),t.disconnect=(o=t.disconnect,(r,s,i)=>{if(o.apply(t),void 0===r)n.clear();else if("number"==typeof r)for(let[t,o]of n){let s=o.filter(t=>t.output!==r);0===s.length?n.delete(t):n.set(t,s)}else if(n.has(r)){if(void 0===s)n.delete(r);else{let t=n.get(r);if(void 0!==t){let o=t.filter(t=>t.output!==s&&(t.input!==i||void 0===i));0===o.length?n.delete(r):n.set(r,o)}}}for(let[r,o]of n)o.forEach(o=>{r_(r)?t.connect(r,o.output,o.input):t.connect(r,o.output)})})},rj=(t,r,o,n)=>{let{activeInputs:s,passiveInputs:i}=t7(r),{outputs:a}=t8(t),l=tG(t),u=a=>{let l=rp(t),u=rm(r);if(a){let r=rh(i,t,o);rs(s,t,r,!1),n||ry(t)||l.connect(u,o)}else{let r=rc(s,t,o);ri(i,r,!1),n||ry(t)||l.disconnect(u,o)}};return!!rn(a,[r,o],t=>t[0]===r&&t[1]===o,!0)&&(l.add(u),tK(t)?rs(s,t,[o,u],!0):ri(i,[t,o,u],!0),!0)},rw=(t,r,o,n)=>{let{activeInputs:s,passiveInputs:i}=t8(r),a=ru(s[n],t,o);if(null===a){let r=tV(i,t,o,n);return[r[2],!1]}return[a[2],!0]},rS=(t,r,o)=>{let{activeInputs:n,passiveInputs:s}=t7(r),i=ru(n,t,o);if(null===i){let r=rh(s,t,o);return[r[1],!1]}return[i[2],!0]},rT=(t,r,o,n,s)=>{let[i,a]=rw(t,o,n,s);if(null===i||(rd(t,i),!a||r||ry(t)||rf(rp(t),rp(o),n,s)),tK(o)){let{activeInputs:t}=t8(o);tW(o,t)}},rE=(t,r,o,n)=>{let[s,i]=rS(t,o,n);null===s||(rd(t,s),!i||r||ry(t)||rp(t).disconnect(rm(o),n))},rk=(t,r)=>{let o=t8(t),n=[];for(let s of o.outputs)ro(s)?rT(t,r,...s):rE(t,r,...s),n.push(s[0]);return o.outputs.clear(),n},rM=(t,r,o)=>{let n=t8(t),s=[];for(let i of n.outputs)i[1]===o&&(ro(i)?rT(t,r,...i):rE(t,r,...i),s.push(i[0]),n.outputs.delete(i));return s},rC=(t,r,o,n,s)=>{let i=t8(t);return Array.from(i.outputs).filter(t=>t[0]===o&&(void 0===n||t[1]===n)&&(void 0===s||t[2]===s)).map(o=>(ro(o)?rT(t,r,...o):rE(t,r,...o),i.outputs.delete(o),o[0]))};class rA{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,r=null){return this._map.forEach((o,n)=>t.call(r,o,n,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const rO={channelCount:2,// Bug #61: The channelCountMode should be 'max' according to the spec but is set to 'explicit' to achieve consistent behavior.
channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function rR(t,r,o,n,s){if("function"==typeof t.copyFromChannel)0===r[o].byteLength&&(r[o]=new Float32Array(128)),t.copyFromChannel(r[o],n,s);else{let i=t.getChannelData(n);// The byteLength will be 0 when the ArrayBuffer was transferred.
if(0===r[o].byteLength)r[o]=i.slice(s,s+128);else{let t=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);r[o].set(t)}}}const rP=(t,r,o,n,s)=>{"function"==typeof t.copyToChannel?0!==r[o].byteLength&&t.copyToChannel(r[o],n,s):0!==r[o].byteLength&&t.getChannelData(n).set(r[o],s)},rL=(t,r)=>{let o=[];for(let n=0;n<t;n+=1){let t=[],s="number"==typeof r?r:r[n];for(let r=0;r<s;r+=1)t.push(new Float32Array(128));o.push(t)}return o},rI=(t,r)=>{let o=tU(tR,t),n=rp(r);return tU(o,n)},rD=async(t,r,o,n,s,i,a)=>{// Ceil the length to the next full render quantum.
// Bug #17: Safari does not yet expose the length.
let l=null===r?128*Math.ceil(t.context.length/128):r.length,u=n.channelCount*n.numberOfInputs,c=s.reduce((t,r)=>t+r,0),d=0===c?null:o.createBuffer(c,l,o.sampleRate);if(void 0===i)throw Error("Missing the processor constructor.");let h=t8(t),f=await rI(o,t),p=rL(n.numberOfInputs,n.channelCount),m=rL(n.numberOfOutputs,s),y=Array.from(t.parameters.keys()).reduce((t,r)=>({...t,[r]:new Float32Array(128)}),{});for(let c=0;c<l;c+=128){if(n.numberOfInputs>0&&null!==r)for(let t=0;t<n.numberOfInputs;t+=1)for(let o=0;o<n.channelCount;o+=1)rR(r,p[t],o,o,c);void 0!==i.parameterDescriptors&&null!==r&&i.parameterDescriptors.forEach(({name:t},o)=>{rR(r,y,t,u+o,c)});for(let t=0;t<n.numberOfInputs;t+=1)for(let r=0;r<s[t];r+=1)0===m[t][r].byteLength&&(m[t][r]=new Float32Array(128));try{let t=p.map((t,r)=>0===h.activeInputs[r].size?[]:t),r=a(c/o.sampleRate,o.sampleRate,()=>f.process(t,m,y));if(null!==d)for(let t=0,r=0;t<n.numberOfOutputs;t+=1){for(let o=0;o<s[t];o+=1)rP(d,m[t],o,r+o,c);r+=s[t]}if(!r)break}catch(r){t.dispatchEvent(new ErrorEvent("processorerror",{colno:r.colno,filename:r.filename,lineno:r.lineno,message:r.message}));break}}return d},rF={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},rN={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},rU={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},rB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},rV={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},rG=t=>{let{port1:r,port2:o}=new MessageChannel;return new Promise(n=>{let s=()=>{o.onmessage=null,r.close(),o.close(),n()};o.onmessage=()=>s();try{r.postMessage(t,[t])}catch{// Ignore errors.
}finally{s()}})},rH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},rz=t=>"delayTime"in t,rq=(t,r,o)=>{let n=r[o];if(void 0===n)throw t();return n},rW={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},rX={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},rY=()=>new DOMException("","InvalidStateError"),rZ=()=>new DOMException("","InvalidAccessError"),rQ=t=>{var r;t.getFrequencyResponse=(r=t.getFrequencyResponse,(o,n,s)=>{if(o.length!==n.length||n.length!==s.length)throw rZ();return r.call(t,o,n,s)})},rJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},r$=(t,r,o,n,s,i,a,l,u,c,d)=>{let h=c.length,f=l;for(let l=0;l<h;l+=1){let h=o[0]*c[l];for(let r=1;r<s;r+=1){let n=f-r&u-1;// tslint:disable-line:no-bitwise
h+=o[r]*i[n],h-=t[r]*a[n]}for(let t=s;t<n;t+=1)h+=o[t]*i[f-t&u-1];// tslint:disable-line:no-bitwise
for(let o=s;o<r;o+=1)h-=t[o]*a[f-o&u-1];// tslint:disable-line:no-bitwise
i[f]=c[l],a[f]=h,f=f+1&u-1,d[l]=h}return f},rK=(t,r,o,n)=>{let s=o instanceof Float64Array?o:new Float64Array(o),i=n instanceof Float64Array?n:new Float64Array(n),a=s.length,l=i.length,u=Math.min(a,l);if(1!==s[0]){for(let t=0;t<a;t+=1)i[t]/=s[0];for(let t=1;t<l;t+=1)s[t]/=s[0]}let c=new Float32Array(32),d=new Float32Array(32),h=r.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let r=0;r<f;r+=1){let o=t.getChannelData(r),n=h.getChannelData(r);c.fill(0),d.fill(0),r$(s,a,i,l,u,c,d,0,32,o,n)}return h},r0={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},r1=t=>{// This 12 numbers represent the 48 bytes of an empty WAVE file with a single sample.
let r=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{// Bug #1: Safari requires a successCallback.
let o=t.decodeAudioData(r.buffer,()=>{// Ignore the success callback.
});if(void 0===o)return!1;return o.catch(()=>{// Ignore rejected errors.
}),!0}catch{// Ignore errors.
}return!1},r2=(t,r,o)=>{let n=r[o];void 0!==n&&n!==t[o]&&(t[o]=n)},r3=(t,r)=>{r2(t,r,"channelCount"),r2(t,r,"channelCountMode"),r2(t,r,"channelInterpretation")},r5=t=>"function"==typeof t.getFloatTimeDomainData,r4=t=>{t.getFloatTimeDomainData=r=>{let o=new Uint8Array(r.length);t.getByteTimeDomainData(o);let n=Math.max(o.length,t.fftSize);for(let t=0;t<n;t+=1)r[t]=(o[t]-128)*.0078125;return r}},r6=(t,r,o)=>{let n=r[o];void 0!==n&&n!==t[o].value&&(t[o].value=n)},r8=t=>{var r;let o;t.start=(r=t.start,o=!1,(n=0,s=0,i)=>{if(o)throw rY();r.call(t,n,s,i),o=!0})},r7=t=>{var r;t.start=(r=t.start,(o=0,n=0,s)=>{if("number"==typeof s&&s<0||n<0||o<0)throw RangeError("The parameters can't be negative.");// @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.
r.call(t,o,n,s)})},r9=t=>{var r;t.stop=(r=t.stop,(o=0)=>{if(o<0)throw RangeError("The parameter can't be negative.");r.call(t,o)})},oe=t=>{let{port1:r}=new MessageChannel;try{// This will throw an error if the audioWorkletNodeOptions are not clonable.
r.postMessage(t)}finally{r.close()}},ot=(t,r)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*r))))),or=t=>new Promise((r,o)=>{let{port1:n,port2:s}=new MessageChannel;n.onmessage=({data:t})=>{n.close(),s.close(),r(t)},n.onmessageerror=({data:t})=>{n.close(),s.close(),o(t)},// This will throw an error if the audioWorkletNodeOptions are not clonable.
    s.postMessage(t)}),oo=async(t,r)=>{let o=await or(r);return new t(o)},on=(t,r,o,n)=>{let s=tR.get(t);void 0===s&&(s=new WeakMap,tR.set(t,s));let i=oo(o,n);return s.set(r,i),i},os=(t,r)=>{let o=t.createBiquadFilter();return r3(o,r),r6(o,r,"Q"),r6(o,r,"detune"),r6(o,r,"frequency"),r6(o,r,"gain"),r2(o,r,"type"),o},oi=t=>{let r=t.numberOfOutputs;// Bug #97: Safari does not throw an error when attempting to change the channelCount to something other than its initial value.
Object.defineProperty(t,"channelCount",{get:()=>r,set:t=>{if(t!==r)throw rY()}}),// Bug #30: Safari does not throw an error when attempting to change the channelCountMode to something other than explicit.
Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw rY()}}),// Bug #32: Safari does not throw an error when attempting to change the channelInterpretation to something other than discrete.
Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw rY()}})},oa=(t,r)=>{let o=t.createChannelSplitter(r.numberOfOutputs);return r3(o,r),oi(o),o},ol=(t,r)=>(t.connect=r.connect.bind(r),t.disconnect=r.disconnect.bind(r),t),ou=(t,r)=>{let o=t.createDelay(r.maxDelayTime);return r3(o,r),r6(o,r,"delayTime"),o},oc=(t,r)=>{let o=t.createGain();return r3(o,r),r6(o,r,"gain"),o};function od(t,r){let o=[0,0];for(let s=t.length-1;s>=0;s-=1){var n;o=[(n=o)[0]*r[0]-n[1]*r[1],n[0]*r[1]+n[1]*r[0]],o[0]+=t[s]}return o}const oh=(t,r,o,n)=>t.createScriptProcessor(r,o,n),of=()=>new DOMException("","NotSupportedError"),op={numberOfChannels:1},om={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},oy={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},og={disableNormalization:!1},ov={channelCount:2,/*
     * Bug #105: The channelCountMode should be 'clamped-max' according to the spec but is set to 'explicit' to achieve consistent
     * behavior.
     */channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ob=()=>new DOMException("","UnknownError"),o_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ox=(t,r,o)=>// Bug #5: Safari does not support copyFromChannel() and copyToChannel().
    void 0===t.copyFromChannel?t.getChannelData(o)[0]:(t.copyFromChannel(r,o),r[0]),oj=t=>{if(null===t)return!1;let r=t.length;return r%2!=0?0!==t[Math.floor(r/2)]:t[r/2-1]+t[r/2]!==0},ow=(t,r,o,n)=>{let s=t;for(;!s.hasOwnProperty(r);)s=Object.getPrototypeOf(s);let{get:i,set:a}=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,{get:o(i),set:n(a)})},oS=(t,r,o)=>{try{t.setValueAtTime(r,o)}catch(n){if(9!==n.code)throw n;oS(t,r,o+1e-7)}},oT=t=>{let r=t.createOscillator();try{r.start(-1)}catch(t){return t instanceof RangeError}return!1},oE=t=>{let r=t.createBuffer(1,1,44100),o=t.createBufferSource();o.buffer=r,o.start(),o.stop();try{return o.stop(),!0}catch{return!1}},ok=t=>{let r=t.createOscillator();try{r.stop(-1)}catch(t){return t instanceof RangeError}return!1},oM=(t,r)=>{var o,n;let s;let i=r.createGain();t.connect(i);let a=(o=t.disconnect,()=>{// @todo TypeScript cannot infer the overloaded signature with 1 argument yet.
o.call(t,i),t.removeEventListener("ended",a)});t.addEventListener("ended",a),ol(t,i),t.stop=(n=t.stop,s=!1,(r=0)=>{if(s)try{n.call(t,r)}catch{i.gain.setValueAtTime(0,r)}else n.call(t,r),s=!0})},oC=(t,r)=>o=>{let n={value:t};return(Object.defineProperties(o,{currentTarget:n,target:n}),"function"==typeof r)?r.call(t,o):r.handleEvent.call(t,o)},oA=new WeakMap,oO=(R=new Map,P=new WeakMap,(t,r)=>{let o=P.get(t);if(void 0!==o)return o;let n=R.get(t);if(void 0!==n)return n;try{let o=r();if(o instanceof Promise)return R.set(t,o),o.catch(()=>!1).then(r=>(R.delete(t),P.set(t,r),r));return P.set(t,o),o}catch{return P.set(t,!1),!1}}),oR="undefined"==typeof window?null:window,oP=(t,r)=>{let o=t.createAnalyser();// Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.
if(r3(o,r),!(r.maxDecibels>r.minDecibels))throw tQ();return r2(o,r,"fftSize"),r2(o,r,"maxDecibels"),r2(o,r,"minDecibels"),r2(o,r,"smoothingTimeConstant"),oO(r5,()=>r5(o))||r4(o),o},oL=t=>{let r=t8(t);if(null===r.renderer)throw Error("Missing the renderer of the given AudioNode in the audio graph.");return r.renderer},oI=async(t,r,o)=>{let n=t8(t);await Promise.all(n.activeInputs.map((n,s)=>Array.from(n).map(async([n,i])=>{let a=oL(n),l=await a.render(n,r),u=t.context.destination;ry(n)||t===u&&ry(t)||l.connect(o,i,s)})).reduce((t,r)=>[...t,...r],[]))},oD=t=>{let r=tM.get(t);if(void 0===r)throw rY();return r},oF=null===oR?null:oR.hasOwnProperty("OfflineAudioContext")?oR.OfflineAudioContext:oR.hasOwnProperty("webkitOfflineAudioContext")?oR.webkitOfflineAudioContext:null,oN=t=>null!==oF&&t instanceof oF,oU=new WeakMap,oB=class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,o){if(null!==r){let n=this._listeners.get(r);void 0===n&&(n=oC(this,r),"function"==typeof r&&this._listeners.set(r,n)),this._nativeEventTarget.addEventListener(t,n,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,o){let n=null===r?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,void 0===n?null:n,o)}},oV=null===oR?null:oR.hasOwnProperty("AudioContext")?oR.AudioContext:oR.hasOwnProperty("webkitAudioContext")?oR.webkitAudioContext:null,oG=t=>null!==oV&&t instanceof oV,oH=t=>null!==oR&&"function"==typeof oR.AudioNode&&t instanceof oR.AudioNode,oz=t=>null!==oR&&"function"==typeof oR.AudioParam&&t instanceof oR.AudioParam,oq=null===oR?null:oR.hasOwnProperty("AudioWorkletNode")?oR.AudioWorkletNode:null,oW=(L=(t,r,o)=>{let n=[];for(let t=0;t<o.numberOfInputs;t+=1)n.push(new Set);tS.set(t,{activeInputs:n,outputs:new Set,passiveInputs:new WeakMap,renderer:r})},I=((t,r,o,n,s,i,a,l,u,c,d,h,f)=>{let p=new WeakMap;return(m,y,g,v,b)=>{let{activeInputs:x,passiveInputs:j}=i(y),{outputs:w}=i(m),S=l(m),T=i=>{let l=u(y),c=u(m);if(i){let r=tV(j,m,g,v);t(x,m,r,!1),b||h(m)||o(c,l,g,v),f(y)&&tH(y)}else{let t=n(x,m,g,v);r(j,v,t,!1),b||h(m)||s(c,l,g,v);let o=a(y);if(0===o)d(y)&&tW(y,x);else{let t=p.get(y);void 0!==t&&clearTimeout(t),p.set(y,setTimeout(()=>{d(y)&&tW(y,x)},1e3*o))}}};return!!c(w,[y,g,v],t=>t[0]===y&&t[1]===g&&t[2]===v,!0)&&(S.add(T),d(m)?t(x,m,[g,v,T],!0):r(j,v,[m,g,T],!0),!0)}})((t,r,[o,n,s],i)=>{rn(t[n],[r,o,s],t=>t[0]===r&&t[1]===o,i)},(t,r,[o,n,s],i)=>{let a=t.get(o);void 0===a?t.set(o,new Set([[n,r,s]])):rn(a,[n,r,s],t=>t[0]===n&&t[1]===r,i)},rl,(t,r,o,n)=>tB(t[n],t=>t[0]===r&&t[1]===o),rf,t8,t=>{var r;return null!==(r=oA.get(t))&&void 0!==r?r:0},tG,rp,rn,tK,ry,rg),D=t=>(r,o)=>{let n=tA.get(r);if(void 0===n){if(!t&&tK(r)){let t=rp(r),{outputs:o}=t8(r);for(let r of o)if(ro(r)){let o=rp(r[0]);rf(t,o,r[1],r[2])}else{let o=rm(r[0]);t.disconnect(o,r[1])}}tA.set(r,o)}else tA.set(r,n+o)},F=(t,r)=>{let o=tA.get(t);if(void 0===o)throw Error("Missing the expected cycle count.");let n=oD(t.context),s=oN(n);if(o===r){if(tA.delete(t),!s&&tK(t)){let r=rp(t),{outputs:o}=t8(t);for(let t of o)if(ro(t)){let o=rp(t[0]);rl(r,o,t[1],t[2])}else{let o=rm(t[0]);r.connect(o,t[1])}}}else tA.set(t,o-r)},N=function t(r,o){let n=rr(o)?o:tU(oU,o);if(rz(n))return[];if(r[0]===n)return[r];if(r.includes(n))return[];let{outputs:s}=t8(n);return Array.from(s).map(o=>t([...r,n],o[0])).reduce((t,r)=>t.concat(r),[])},U=oB,class extends U{constructor(t,r,o,n){super(o),this._context=t,this._nativeAudioNode=o;let s=oD(t);oG(s)&&!0!==oO(rv,()=>rv(s,oq))&&rx(o),tT.set(this,o),tC.set(this,new Set),"closed"!==t.state&&r&&tH(this),L(this,n,o)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}// tslint:disable-next-line:invalid-void
connect(t,r=0,o=0){// Bug #174: Safari does expose a wrong numberOfOutputs for MediaStreamAudioDestinationNodes.
if(r<0||r>=this._nativeAudioNode.numberOfOutputs)throw tQ();let n=oD(this._context),s=oN(n);if(oH(t)||oz(t))throw rZ();if(rr(t)){let n=rp(t);try{let i=rl(this._nativeAudioNode,n,r,o),a=rg(this);(s||a)&&this._nativeAudioNode.disconnect(...i),"closed"!==this.context.state&&!a&&rg(t)&&tH(t)}catch(t){// Bug #41: Safari does not throw the correct exception so far.
if(12===t.code)throw rZ();throw t}let i=I(this,t,r,o,s);// Bug #164: Only Firefox detects cycles so far.
if(i){let r=N([this],t);rb(r,D(s))}return t}let i=rm(t);/*
             * Bug #73, #147 & #153: Safari does not support to connect an input signal to the playbackRate AudioParam of an
             * AudioBufferSourceNode. This can't be easily detected and that's why the outdated name property is used here to identify
             * Safari. In addition to that the maxValue property is used to only detect the affected versions below v14.0.2.
             */if("playbackRate"===i.name&&1024===i.maxValue)throw of();try{this._nativeAudioNode.connect(i,r),(s||rg(this))&&this._nativeAudioNode.disconnect(i,r)}catch(t){// Bug #58: Safari doesn't throw an InvalidAccessError yet.
if(12===t.code)throw rZ();throw t}let a=rj(this,t,r,s);// Bug #164: Only Firefox detects cycles so far.
if(a){let r=N([this],t);rb(r,D(s))}}disconnect(t,r,o){let n;let s=oD(this._context),i=oN(s);if(void 0===t)n=rk(this,i);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw tQ();n=rM(this,i,t)}else{if(void 0!==r&&(r<0||r>=this.numberOfOutputs)||rr(t)&&void 0!==o&&(o<0||o>=t.numberOfInputs))throw tQ();if(0===(n=rC(this,i,t,r,o)).length)throw rZ()}// Bug #164: Only Firefox detects cycles so far.
for(let t of n){let r=N([this],t);rb(r,F)}}}),oX=(B=oW,V=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,fftSize:n.fftSize,maxDecibels:n.maxDecibels,minDecibels:n.minDecibels,smoothingTimeConstant:n.smoothingTimeConstant};n=oP(o,t)}return t.set(o,n),await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends B{constructor(t,r){let o=oD(t),n={...tX,...r},s=oP(o,n),i=oN(o)?V():null;super(t,!1,s,i),this._nativeAnalyserNode=s}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){// Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.
let r=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=r,tQ()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){// Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.
let r=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=r,tQ()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}}),oY=new WeakSet,oZ=null===oR?null:oR.hasOwnProperty("AudioBuffer")?oR.AudioBuffer:null,oQ=(G=new Uint32Array(1),t=>(G[0]=t,G[0])),oJ=t=>{t.copyFromChannel=(r,o,n=0)=>{let s=oQ(n),i=oQ(o);if(i>=t.numberOfChannels)throw tQ();let a=t.length,l=t.getChannelData(i),u=r.length;for(let t=s<0?-s:0;t+s<a&&t<u;t+=1)r[t]=l[t+s]},t.copyToChannel=(r,o,n=0)=>{let s=oQ(n),i=oQ(o);if(i>=t.numberOfChannels)throw tQ();let a=t.length,l=t.getChannelData(i),u=r.length;for(let t=s<0?-s:0;t+s<a&&t<u;t+=1)l[t+s]=r[t]}},o$=t=>{var r,o;t.copyFromChannel=(r=t.copyFromChannel,(o,n,s=0)=>{let i=oQ(s),a=oQ(n);if(i<t.length)return r.call(t,o,a,i)}),t.copyToChannel=(o=t.copyToChannel,(r,n,s=0)=>{let i=oQ(s),a=oQ(n);if(i<t.length)return o.call(t,r,a,i)})},oK=(H=()=>{if(null===oZ)return!1;try{new oZ({length:1,sampleRate:44100});// tslint:disable-line:no-unused-expression
}catch{return!1}return!0},n=null,class t{constructor(t){if(null===oF)throw Error("Missing the native OfflineAudioContext constructor.");let{length:r,numberOfChannels:o,sampleRate:s}={...t$,...t};null===n&&(n=new oF(1,1,44100));/*
             * Bug #99: Firefox does not throw a NotSupportedError when the numberOfChannels is zero. But it only does it when using the
             * factory function. But since Firefox also supports the constructor everything should be fine.
             */let i=null!==oZ&&oO(H,H)?new oZ({length:r,numberOfChannels:o,sampleRate:s}):n.createBuffer(o,r,s);// Bug #99: Safari does not throw an error when the numberOfChannels is zero.
if(0===i.numberOfChannels)throw of();/*
             * This does violate all good pratices but it is necessary to allow this AudioBuffer to be used with native
             * (Offline)AudioContexts.
             */return"function"!=typeof i.copyFromChannel?(oJ(i),tJ(i)):oO(tZ,()=>tZ(i))||o$(i),oY.add(i),i}static[Symbol.hasInstance](r){return null!==r&&"object"==typeof r&&Object.getPrototypeOf(r)===t.prototype||oY.has(r)}}),o0=(t,r)=>{let o=oc(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.connect(o).connect(t.destination);let n=()=>{r.removeEventListener("ended",n),r.disconnect(o),o.disconnect()};r.addEventListener("ended",n)},o1=async(t,r,o)=>{let n=t7(t);await Promise.all(Array.from(n.activeInputs).map(async([t,n])=>{let s=oL(t),i=await s.render(t,r);ry(t)||i.connect(o,n)}))},o2=(t,r,o)=>o1(r,t,o),o3=(z=t=>{let r=t.createBufferSource();r.start();try{r.start()}catch{return!0}return!1},q=t=>{let r=t.createBufferSource(),o=t.createBuffer(1,1,44100);r.buffer=o;try{r.start(0,1)}catch{return!1}return!0},W=t=>{let r=t.createBufferSource();r.start();try{r.stop()}catch{return!1}return!0},X=t=>{var r;t.start=(r=t.start,(o=0,n=0,s)=>{let i=t.buffer,a=null===i?n:Math.min(i.duration,n);// Bug #155: Safari does not handle the offset correctly if it would cause the buffer to be not be played at all.
null!==i&&a>i.duration-.5/t.context.sampleRate?r.call(t,o,0,0):r.call(t,o,a,s)})},Y=(t,r)=>{let o=r.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=o),ow(t,"buffer",r=>()=>{let n=r.call(t);return n===o?null:n},r=>n=>r.call(t,null===n?o:n))},(t,r)=>{let o=t.createBufferSource();return r3(o,r),r6(o,r,"playbackRate"),r2(o,r,"buffer"),r2(o,r,"loop"),r2(o,r,"loopEnd"),r2(o,r,"loopStart"),oO(z,()=>z(t))||r8(o),oO(q,()=>q(t))||X(o),oO(W,()=>W(t))||Y(o,t),oO(oT,()=>oT(t))||r7(o),oO(oE,()=>oE(t))||oM(o,t),oO(ok,()=>ok(t))||r9(o),// Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.
o0(t,o),o}),o5=(Z=t=>{let r=t7(t);if(null===r.renderer)throw Error("Missing the renderer of the given AudioParam in the audio graph.");return r.renderer},(t,r,o)=>{let n=Z(r);return n.replay(o),o1(r,t,o)}),o4=(Q=(t,r)=>{tE.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:r})},J=t=>({replay(r){for(let o of t)if("exponentialRampToValue"===o.type){let{endTime:t,value:n}=o;r.exponentialRampToValueAtTime(n,t)}else if("linearRampToValue"===o.type){let{endTime:t,value:n}=o;r.linearRampToValueAtTime(n,t)}else if("setTarget"===o.type){let{startTime:t,target:n,timeConstant:s}=o;r.setTargetAtTime(n,t,s)}else if("setValue"===o.type){let{startTime:t,value:n}=o;r.setValueAtTime(n,t)}else if("setValueCurve"===o.type){let{duration:t,startTime:n,values:s}=o;r.setValueCurveAtTime(s,n,t)}else throw Error("Can't apply an unknown automation.")}}),$=tj.createCancelAndHoldAutomationEvent,K=tj.createCancelScheduledValuesAutomationEvent,ee=tj.createExponentialRampToValueAutomationEvent,et=tj.createLinearRampToValueAutomationEvent,er=tj.createSetTargetAutomationEvent,eo=tj.createSetValueAutomationEvent,en=tj.createSetValueCurveAutomationEvent,(t,r,o,n=null,s=null)=>{// Bug #196 Only Safari sets the defaultValue to the initial value.
let i=o.value,a=new tj.AutomationEventList(i),l=r?J(a):null,u={get defaultValue(){return i},get maxValue(){return null===n?o.maxValue:n},get minValue(){return null===s?o.minValue:s},get value(){return o.value},set value(value){o.value=value,// Bug #98: Firefox & Safari do not yet treat the value setter like a call to setValueAtTime().
u.setValueAtTime(value,t.context.currentTime)},cancelAndHoldAtTime(r){// Bug #28: Firefox & Safari do not yet implement cancelAndHoldAtTime().
if("function"==typeof o.cancelAndHoldAtTime)null===l&&a.flush(t.context.currentTime),a.add($(r)),o.cancelAndHoldAtTime(r);else{let n=Array.from(a).pop();null===l&&a.flush(t.context.currentTime),a.add($(r));let s=Array.from(a).pop();o.cancelScheduledValues(r),n!==s&&void 0!==s&&("exponentialRampToValue"===s.type?o.exponentialRampToValueAtTime(s.value,s.endTime):"linearRampToValue"===s.type?o.linearRampToValueAtTime(s.value,s.endTime):"setValue"===s.type?o.setValueAtTime(s.value,s.startTime):"setValueCurve"===s.type&&o.setValueCurveAtTime(s.values,s.startTime,s.duration))}return u},cancelScheduledValues:r=>(null===l&&a.flush(t.context.currentTime),a.add(K(r)),o.cancelScheduledValues(r),u),exponentialRampToValueAtTime(r,n){// Bug #45: Safari does not throw an error yet.
if(0===r||!Number.isFinite(n)||n<0)throw RangeError();let s=t.context.currentTime;return null===l&&a.flush(s),0===Array.from(a).length&&(a.add(eo(i,s)),o.setValueAtTime(i,s)),a.add(ee(r,n)),o.exponentialRampToValueAtTime(r,n),u},linearRampToValueAtTime(r,n){let s=t.context.currentTime;return null===l&&a.flush(s),0===Array.from(a).length&&(a.add(eo(i,s)),o.setValueAtTime(i,s)),a.add(et(r,n)),o.linearRampToValueAtTime(r,n),u},setTargetAtTime:(r,n,s)=>(null===l&&a.flush(t.context.currentTime),a.add(er(r,n,s)),o.setTargetAtTime(r,n,s),u),setValueAtTime:(r,n)=>(null===l&&a.flush(t.context.currentTime),a.add(eo(r,n)),o.setValueAtTime(r,n),u),setValueCurveAtTime(r,n,s){// Bug 183: Safari only accepts a Float32Array.
let i=r instanceof Float32Array?r:new Float32Array(r);/*
                 * Bug #152: Safari does not correctly interpolate the values of the curve.
                 * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the
                 * existence of the webkitAudioContext is used as a workaround here.
                 */if(null!==oV&&"webkitAudioContext"===oV.name){let r=n+s,c=t.context.sampleRate,d=Math.ceil(n*c),h=Math.floor(r*c),f=h-d,p=new Float32Array(f);for(let t=0;t<f;t+=1){let r=(i.length-1)/s*((d+t)/c-n),o=Math.floor(r),a=Math.ceil(r);p[t]=o===a?i[o]:(1-(r-o))*i[o]+(1-(a-r))*i[a]}null===l&&a.flush(t.context.currentTime),a.add(en(p,n,s)),o.setValueCurveAtTime(p,n,s);let m=h/c;m<r&&oS(u,p[p.length-1],m),oS(u,i[i.length-1],r)}else null===l&&a.flush(t.context.currentTime),a.add(en(i,n,s)),o.setValueCurveAtTime(i,n,s);return u}};return tk.set(u,o),oU.set(u,t),Q(u,l),u}),o6=(es=oW,ei=()=>{let t=new WeakMap,r=null,o=null,n=async(n,s)=>{let i=rp(n),a=tY(i,s);if(!a){let t={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,// Bug #149: Safari does not yet support the detune AudioParam.
loop:i.loop,loopEnd:i.loopEnd,loopStart:i.loopStart,playbackRate:i.playbackRate.value};i=o3(s,t),null!==r&&i.start(...r),null!==o&&i.stop(o)}return t.set(s,i),a?await o2(s,n.playbackRate,i.playbackRate):await o5(s,n.playbackRate,i.playbackRate),await oI(n,s,i),i};return{set start(value){r=value},set stop(value){o=value},render(r,o){let s=t.get(o);return void 0!==s?Promise.resolve(s):n(r,o)}}},class extends es{constructor(t,r){let o=oD(t),n={...t0,...r},s=o3(o,n),i=oN(o),a=i?ei():null;super(t,!1,s,a),this._audioBufferSourceNodeRenderer=a,this._isBufferNullified=!1,this._isBufferSet=null!==n.buffer,this._nativeAudioBufferSourceNode=s,this._onended=null,// Bug #73: Safari does not export the correct values for maxValue and minValue.
this._playbackRate=o4(this,i,s.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){// Bug #72: Only Chrome & Edge do not allow to reassign the buffer yet.
if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw rY();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){let r="function"==typeof t?oC(this,t):null;this._nativeAudioBufferSourceNode.onended=r;let o=this._nativeAudioBufferSourceNode.onended;this._onended=null!==o&&o===r?t:o}get playbackRate(){return this._playbackRate}start(t=0,r=0,o){if(this._nativeAudioBufferSourceNode.start(t,r,o),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===o?[t,r]:[t,r,o]),"closed"!==this.context.state){tH(this);let t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),tK(this)&&tq(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}}),o8=(ea=oW,el=t=>{let r=new WeakMap,o=async(o,n)=>{let s=n.destination;return r.set(n,s),await t(o,n,s),s};return{render(t,n){let s=r.get(n);return void 0!==s?Promise.resolve(s):o(t,n)}}},eu=(t,r,o)=>{let n=t.destination;// Bug #132: Safari does not have the correct channelCount.
if(n.channelCount!==r)try{n.channelCount=r}catch{// Bug #169: Safari throws an error on each attempt to change the channelCount.
}o&&"explicit"!==n.channelCountMode&&(n.channelCountMode="explicit"),0===n.maxChannelCount&&Object.defineProperty(n,"maxChannelCount",{value:r});// Bug #168: No browser does yet have an AudioDestinationNode with an output.
let s=oc(t,{channelCount:r,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:1});return ow(s,"channelCount",t=>()=>t.call(s),t=>r=>{t.call(s,r);try{n.channelCount=r}catch(t){// Bug #169: Safari throws an error on each attempt to change the channelCount.
    if(r>n.maxChannelCount)throw t}}),ow(s,"channelCountMode",t=>()=>t.call(s),t=>r=>{t.call(s,r),n.channelCountMode=r}),ow(s,"channelInterpretation",t=>()=>t.call(s),t=>r=>{t.call(s,r),n.channelInterpretation=r}),Object.defineProperty(s,"maxChannelCount",{get:()=>n.maxChannelCount}),// @todo This should be disconnected when the context is closed.
s.connect(n),s},class extends ea{constructor(t,r){let o=oD(t),n=oN(o),s=eu(o,r,n),i=n?el(oI):null;super(t,!1,s,i),this._isNodeOfNativeOfflineAudioContext=n,this._nativeAudioDestinationNode=s}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){// Bug #52: Chrome, Edge & Safari do not throw an exception at all.
// Bug #54: Firefox does throw an IndexSizeError.
if(this._isNodeOfNativeOfflineAudioContext)throw rY();// Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.
if(t>this._nativeAudioDestinationNode.maxChannelCount)throw tQ();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){// Bug #53: No browser does throw an exception yet.
if(this._isNodeOfNativeOfflineAudioContext)throw rY();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}}),o7=(t,r)=>oA.set(t,r),o9=(ec=oW,ed=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={Q:n.Q.value,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,detune:n.detune.value,frequency:n.frequency.value,gain:n.gain.value,type:n.type};n=os(o,t)}return t.set(o,n),s?(await o2(o,r.Q,n.Q),await o2(o,r.detune,n.detune),await o2(o,r.frequency,n.frequency),await o2(o,r.gain,n.gain)):(await o5(o,r.Q,n.Q),await o5(o,r.detune,n.detune),await o5(o,r.frequency,n.frequency),await o5(o,r.gain,n.gain)),await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends ec{constructor(t,r){let o=oD(t),n={...rF,...r},s=os(o,n),i=oN(o),a=i?ed():null;super(t,!1,s,a),// Bug #80: Safari does not export the correct values for maxValue and minValue.
this._Q=o4(this,i,s.Q,34028234663852886e22,-34028234663852886e22),// Bug #78: Firefox & Safari do not export the correct values for maxValue and minValue.
this._detune=o4(this,i,s.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),// Bug #77: Firefox & Safari do not export the correct value for minValue.
this._frequency=o4(this,i,s.frequency,t.sampleRate/2,0),// Bug #79: Firefox & Safari do not export the correct values for maxValue and minValue.
this._gain=o4(this,i,s.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=s,// @todo Determine a meaningful tail-time instead of just using one second.
o7(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,r,o){// Bug #189: Safari does throw an InvalidStateError.
try{this._nativeBiquadFilterNode.getFrequencyResponse(t,r,o)}catch(t){if(11===t.code)throw rZ();throw t}// Bug #68: Safari does not throw an error if the parameters differ in their length.
if(t.length!==r.length||r.length!==o.length)throw rZ()}}),ne=(t,r,o)=>{var n,s;let i=new Set;return t.connect=(n=t.connect,(o,s=0,a=0)=>{let l=0===i.size;if(oH(o))return(// @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.
n.call(t,o,s,a),rn(i,[o,s,a],t=>t[0]===o&&t[1]===s&&t[2]===a,!0),l&&r(),o);n.call(t,o,s),rn(i,[o,s],t=>t[0]===o&&t[1]===s,!0),l&&r()}),t.disconnect=(s=t.disconnect,(r,n,a)=>{let l=i.size>0;if(void 0===r)s.apply(t),i.clear();else if("number"==typeof r)for(let o of(// @todo TypeScript cannot infer the overloaded signature with 1 argument yet.
s.call(t,r),i))o[1]===r&&i.delete(o);else for(let o of(oH(r)?s.call(t,r,n,a):s.call(t,r,n),i))o[0]===r&&(void 0===n||o[1]===n)&&(void 0===a||o[2]===a)&&i.delete(o);let u=0===i.size;l&&u&&o()}),t},nt=(eh=(t,r)=>{// Bug #15: Safari does not return the default properties.
r.channelCount=1,r.channelCountMode="explicit",// Bug #16: Safari does not throw an error when setting a different channelCount or channelCountMode.
Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw rY()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw rY()}});// Bug #20: Safari requires a connection of any kind to treat the input signal correctly.
let o=t.createBufferSource();ne(r,()=>{let t=r.numberOfInputs;for(let n=0;n<t;n+=1)o.connect(r,0,n)},()=>o.disconnect(r))},(t,r)=>{let o=t.createChannelMerger(r.numberOfInputs);return null!==oV&&"webkitAudioContext"===oV.name&&eh(t,o),r3(o,r),o}),nr=(ef=oW,ep=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,numberOfInputs:n.numberOfInputs};n=nt(o,t)}return t.set(o,n),await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends ef{constructor(t,r){let o=oD(t),n={...rN,...r},s=nt(o,n),i=oN(o)?ep():null;super(t,!1,s,i)}}),no=(em=oW,ey=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,numberOfOutputs:n.numberOfOutputs};n=oa(o,t)}return t.set(o,n),await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},eg=t=>({...t,channelCount:t.numberOfOutputs}),class extends em{constructor(t,r){let o=oD(t),n=eg({...rU,...r}),s=oa(o,n),i=oN(o)?ey():null;super(t,!1,s,i)}}),nn=(ev=(t,{offset:r,...o})=>{let n=t.createBuffer(1,2,44100),s=o3(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=oc(t,{...o,gain:r}),a=n.getChannelData(0);return(// Bug #95: Safari does not play or loop one sample buffers.
a[0]=1,a[1]=1,s.buffer=n,s.loop=!0,// Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.
o0(t,s),ne(ol({get bufferSize(){return},get channelCount(){return i.channelCount},set channelCount(value){i.channelCount=value},get channelCountMode(){return i.channelCountMode},set channelCountMode(value){i.channelCountMode=value},get channelInterpretation(){return i.channelInterpretation},set channelInterpretation(value){i.channelInterpretation=value},get context(){return i.context},get inputs(){return[]},get numberOfInputs(){return s.numberOfInputs},get numberOfOutputs(){return i.numberOfOutputs},get offset(){return i.gain},get onended(){return s.onended},set onended(value){s.onended=value},addEventListener:(...t)=>s.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>s.dispatchEvent(t[0]),removeEventListener:(...t)=>s.removeEventListener(t[0],t[1],t[2]),start(t=0){s.start.call(s,t)},stop(t=0){s.stop.call(s,t)}},i),()=>s.connect(i),()=>s.disconnect(i)))},(t,r)=>{// Bug #62: Safari does not support ConstantSourceNodes.
if(void 0===t.createConstantSource)return ev(t,r);let o=t.createConstantSource();return r3(o,r),r6(o,r,"offset"),oO(oT,()=>oT(t))||r7(o),oO(ok,()=>ok(t))||r9(o),// Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.
o0(t,o),o}),ns=(eb=oW,e_=()=>{let t=new WeakMap,r=null,o=null,n=async(n,s)=>{let i=rp(n),a=tY(i,s);if(!a){let t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,offset:i.offset.value};i=nn(s,t),null!==r&&i.start(r),null!==o&&i.stop(o)}return t.set(s,i),a?await o2(s,n.offset,i.offset):await o5(s,n.offset,i.offset),await oI(n,s,i),i};return{set start(value){r=value},set stop(value){o=value},render(r,o){let s=t.get(o);return void 0!==s?Promise.resolve(s):n(r,o)}}},class extends eb{constructor(t,r){let o=oD(t),n={...rB,...r},s=nn(o,n),i=oN(o),a=i?e_():null;super(t,!1,s,a),this._constantSourceNodeRenderer=a,this._nativeConstantSourceNode=s,/*
             * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and minValue
             * for GainNodes.
             */this._offset=o4(this,i,s.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){let r="function"==typeof t?oC(this,t):null;this._nativeConstantSourceNode.onended=r;let o=this._nativeConstantSourceNode.onended;this._onended=null!==o&&o===r?t:o}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){tH(this);let t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),tK(this)&&tq(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}}),ni=(t,r)=>{let o=t.createConvolver();// Bug #113: Safari does allow to set the channelCount to a value larger than 2.
if(r3(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),r2(o,r,"buffer"),r.channelCount>2||(ow(o,"channelCount",t=>()=>t.call(o),t=>r=>{if(r>2)throw of();return t.call(o,r)}),"max"===r.channelCountMode))throw of();return ow(o,"channelCountMode",t=>()=>t.call(o),t=>r=>{if("max"===r)throw of();return t.call(o,r)}),o},na=(ex=oW,ej=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={buffer:n.buffer,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,disableNormalization:!n.normalize};n=ni(o,t)}return t.set(o,n),ra(n)?await oI(r,o,n.inputs[0]):await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends ex{constructor(t,r){let o=oD(t),n={...rV,...r},s=ni(o,n),i=oN(o),a=i?ej():null;super(t,!1,s,a),this._isBufferNullified=!1,this._nativeConvolverNode=s,null!==n.buffer&&o7(this,n.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){// Bug #115: Safari does not allow to set the buffer to null.
if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){let t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,o7(this,0)}else this._isBufferNullified=!1,o7(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}}),nl=(ew=oW,eS=t=>{let r=new WeakMap,o=async(o,n)=>{let s=rp(o),i=tY(s,n);if(!i){let r={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,delayTime:s.delayTime.value,maxDelayTime:t};s=ou(n,r)}return r.set(n,s),i?await o2(n,o.delayTime,s.delayTime):await o5(n,o.delayTime,s.delayTime),await oI(o,n,s),s};return{render(t,n){let s=r.get(n);return void 0!==s?Promise.resolve(s):o(t,n)}}},class extends ew{constructor(t,r){let o=oD(t),n={...rH,...r},s=ou(o,n),i=oN(o),a=i?eS(n.maxDelayTime):null;super(t,!1,s,a),this._delayTime=o4(this,i,s.delayTime),o7(this,n.maxDelayTime)}get delayTime(){return this._delayTime}}),nu=(t,r)=>{let o=t.createDynamicsCompressor();// Bug #108: Safari allows a channelCount of three and above.
if(r3(o,r),r.channelCount>2||"max"===r.channelCountMode)throw of();return r6(o,r,"attack"),r6(o,r,"knee"),r6(o,r,"ratio"),r6(o,r,"release"),r6(o,r,"threshold"),o},nc=(eT=oW,eE=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={attack:n.attack.value,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,knee:n.knee.value,ratio:n.ratio.value,release:n.release.value,threshold:n.threshold.value};n=nu(o,t)}return t.set(o,n),s?(await o2(o,r.attack,n.attack),await o2(o,r.knee,n.knee),await o2(o,r.ratio,n.ratio),await o2(o,r.release,n.release),await o2(o,r.threshold,n.threshold)):(await o5(o,r.attack,n.attack),await o5(o,r.knee,n.knee),await o5(o,r.ratio,n.ratio),await o5(o,r.release,n.release),await o5(o,r.threshold,n.threshold)),await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends eT{constructor(t,r){let o=oD(t),n={...rW,...r},s=nu(o,n),i=oN(o),a=i?eE():null;super(t,!1,s,a),this._attack=o4(this,i,s.attack),this._knee=o4(this,i,s.knee),this._nativeDynamicsCompressorNode=s,this._ratio=o4(this,i,s.ratio),this._release=o4(this,i,s.release),this._threshold=o4(this,i,s.threshold),o7(this,.006)}get attack(){return this._attack}// Bug #108: Safari allows a channelCount of three and above which is why the getter and setter needs to be overwritten here.
get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){let r=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=r,of()}/*
         * Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max' yet which is why the getter and setter needs to be
         * overwritten here.
         */get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){let r=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=r,of()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return(// Bug #111: Safari returns an AudioParam instead of a number.
"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction)}get release(){return this._release}get threshold(){return this._threshold}}),nd=(ek=oW,eM=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:n.gain.value};n=oc(o,t)}return t.set(o,n),s?await o2(o,r.gain,n.gain):await o5(o,r.gain,n.gain),await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends ek{constructor(t,r){let o=oD(t),n={...rX,...r},s=oc(o,n),i=oN(o),a=i?eM():null;super(t,!1,s,a),// Bug #74: Safari does not export the correct values for maxValue and minValue.
this._gain=o4(this,i,s.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}}),nh=(eC=()=>{if(null===oF)return Promise.resolve(!1);let t=new oF(1,1,44100),r=oc(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});// Bug #21: Safari does not support promises yet.
return new Promise(o=>{t.oncomplete=()=>{r.disconnect(),o(0!==t.currentTime)},t.startRendering()})},t=>// Bug #21: Safari does not support promises yet.
    oO(r1,()=>r1(t))?Promise.resolve(oO(eC,eC)).then(r=>{if(!r){let r=oh(t,512,0,1);t.oncomplete=()=>{r.onaudioprocess=null,r.disconnect()},r.onaudioprocess=()=>t.currentTime,r.connect(t.destination)}return t.startRendering()}):new Promise(r=>{// Bug #48: Safari does not render an OfflineAudioContext without any connected node.
    let o=oc(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.oncomplete=t=>{o.disconnect(),r(t.renderedBuffer)},o.connect(t.destination),t.startRendering()})),nf=(eA=(t,r,{channelCount:o,channelCountMode:n,channelInterpretation:s,feedback:i,feedforward:a})=>{let l=ot(r,t.sampleRate),u=i instanceof Float64Array?i:new Float64Array(i),c=a instanceof Float64Array?a:new Float64Array(a),d=u.length,h=c.length,f=Math.min(d,h);if(0===d||d>20)throw of();if(0===u[0])throw rY();if(0===h||h>20)throw of();if(0===c[0])throw rY();if(1!==u[0]){for(let t=0;t<h;t+=1)c[t]/=u[0];for(let t=1;t<d;t+=1)u[t]/=u[0]}let p=oh(t,l,o,o);p.channelCount=o,p.channelCountMode=n,p.channelInterpretation=s;let m=[],y=[],g=[];for(let t=0;t<o;t+=1){m.push(0);let t=new Float32Array(32),r=new Float32Array(32);t.fill(0),r.fill(0),y.push(t),g.push(r)}// tslint:disable-next-line:deprecation
p.onaudioprocess=t=>{let r=t.inputBuffer,o=t.outputBuffer,n=r.numberOfChannels;for(let t=0;t<n;t+=1){let n=r.getChannelData(t),s=o.getChannelData(t);m[t]=r$(u,d,c,h,f,y[t],g[t],m[t],32,n,s)}};let v=t.sampleRate/2;return ol({get bufferSize(){return l},get channelCount(){return p.channelCount},set channelCount(value){p.channelCount=value},get channelCountMode(){return p.channelCountMode},set channelCountMode(value){p.channelCountMode=value},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(value){p.channelInterpretation=value},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},addEventListener:(...t)=>p.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>p.dispatchEvent(t[0]),getFrequencyResponse(t,r,o){if(t.length!==r.length||r.length!==o.length)throw rZ();let n=t.length;for(let s=0;s<n;s+=1){let n=-Math.PI*(t[s]/v),i=[Math.cos(n),Math.sin(n)],a=od(c,i),l=od(u,i),d=function(t,r){let o=r[0]*r[0]+r[1]*r[1];return[(t[0]*r[0]+t[1]*r[1])/o,(t[1]*r[0]-t[0]*r[1])/o]}(a,l);r[s]=Math.sqrt(d[0]*d[0]+d[1]*d[1]),o[s]=Math.atan2(d[1],d[0])}},removeEventListener:(...t)=>p.removeEventListener(t[0],t[1],t[2])},p)},(t,r,o)=>{// Bug #9: Safari does not support IIRFilterNodes.
if(void 0===t.createIIRFilter)return eA(t,r,o);// @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.
let n=t.createIIRFilter(o.feedforward,o.feedback);return r3(n,o),n}),np=(eO=oW,eR=(t,r)=>{let o=new WeakMap,n=null,s=async(s,i)=>{let a=null,l=rp(s),u=tY(l,i);if(void 0===i.createIIRFilter?a=o3(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):u||(l=i.createIIRFilter(r,t)),o.set(i,null===a?l:a),null!==a){if(null===n){if(null===oF)throw Error("Missing the native OfflineAudioContext constructor.");let o=new oF(s.context.destination.channelCount,s.context.length,i.sampleRate);n=(async()=>{await oI(s,o,o.destination);let n=await nh(o);return rK(n,i,t,r)})()}let o=await n;return a.buffer=o,a.start(0),a}return await oI(s,i,l),l};return{render(t,r){let n=o.get(r);return void 0!==n?Promise.resolve(n):s(t,r)}}},class extends eO{constructor(t,r){let o=oD(t),n=oN(o),s={...rJ,...r},i=nf(o,n?null:t.baseLatency,s),a=n?eR(s.feedback,s.feedforward):null;super(t,!1,i,a),rQ(i),this._nativeIIRFilterNode=i,// @todo Determine a meaningful tail-time instead of just using one second.
o7(this,1)}getFrequencyResponse(t,r,o){return this._nativeIIRFilterNode.getFrequencyResponse(t,r,o)}}),nm=new WeakMap,ny=(eP=(t,r)=>{let o=r.listener,{forwardX:n,forwardY:s,forwardZ:i,positionX:a,positionY:l,positionZ:u,upX:c,upY:d,upZ:h}=void 0===o.forwardX?(()=>{let n=new Float32Array(1),s=nt(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),i=oN(r),a=!1,l=[0,0,-1,0,1,0],u=[0,0,0],c=()=>{if(a)return;a=!0;let t=oh(r,256,9,0);// tslint:disable-next-line:deprecation
t.onaudioprocess=({inputBuffer:t})=>{let r=[ox(t,n,0),ox(t,n,1),ox(t,n,2),ox(t,n,3),ox(t,n,4),ox(t,n,5)];r.some((t,r)=>t!==l[r])&&(o.setOrientation(...r),l=r);let s=[ox(t,n,6),ox(t,n,7),ox(t,n,8)];s.some((t,r)=>t!==u[r])&&(o.setPosition(...s),u=s)},s.connect(t)},d=t=>r=>{r!==l[t]&&(l[t]=r,o.setOrientation(...l))},h=t=>r=>{r!==u[t]&&(u[t]=r,o.setPosition(...u))},f=(o,n,a)=>{var l,u,d,h,f,p,m;let y=nn(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:n});y.connect(s,0,o),// @todo This should be stopped when the context is closed.
y.start(),Object.defineProperty(y.offset,"defaultValue",{get:()=>n});/*
                 * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and
                 * minValue for GainNodes.
                 */let g=o4({context:t},i,y.offset,34028234663852886e22,-34028234663852886e22);return ow(g,"value",t=>()=>t.call(g),t=>r=>{try{t.call(g,r)}catch(t){if(9!==t.code)throw t}c(),i&&a(r)}),g.cancelAndHoldAtTime=(l=g.cancelAndHoldAtTime,i?()=>{throw of()}:(...t)=>{let r=l.apply(g,t);return c(),r}),g.cancelScheduledValues=(u=g.cancelScheduledValues,i?()=>{throw of()}:(...t)=>{let r=u.apply(g,t);return c(),r}),g.exponentialRampToValueAtTime=(d=g.exponentialRampToValueAtTime,i?()=>{throw of()}:(...t)=>{let r=d.apply(g,t);return c(),r}),g.linearRampToValueAtTime=(h=g.linearRampToValueAtTime,i?()=>{throw of()}:(...t)=>{let r=h.apply(g,t);return c(),r}),g.setTargetAtTime=(f=g.setTargetAtTime,i?()=>{throw of()}:(...t)=>{let r=f.apply(g,t);return c(),r}),g.setValueAtTime=(p=g.setValueAtTime,i?()=>{throw of()}:(...t)=>{let r=p.apply(g,t);return c(),r}),g.setValueCurveAtTime=(m=g.setValueCurveAtTime,i?()=>{throw of()}:(...t)=>{let r=m.apply(g,t);return c(),r}),g};return{forwardX:f(0,0,d(0)),forwardY:f(1,0,d(1)),forwardZ:f(2,-1,d(2)),positionX:f(6,0,h(0)),positionY:f(7,0,h(1)),positionZ:f(8,0,h(2)),upX:f(3,0,d(3)),upY:f(4,1,d(4)),upZ:f(5,0,d(5))}})():o;return{get forwardX(){return n},get forwardY(){return s},get forwardZ(){return i},get positionX(){return a},get positionY(){return l},get positionZ(){return u},get upX(){return c},get upY(){return d},get upZ(){return h}}},eL=oB,class extends eL{constructor(t,r){super(t),this._nativeContext=t,tM.set(this,t),oN(t)&&nm.set(t,new Set),this._destination=new o8(this,r),this._listener=eP(this,t),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){let r="function"==typeof t?oC(this,t):null;this._nativeContext.onstatechange=r;let o=this._nativeContext.onstatechange;this._onstatechange=null!==o&&o===r?t:o}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}}),ng=(t,r)=>{let o=t.createOscillator();return r3(o,r),r6(o,r,"detune"),r6(o,r,"frequency"),void 0!==r.periodicWave?o.setPeriodicWave(r.periodicWave):r2(o,r,"type"),oO(oT,()=>oT(t))||r7(o),oO(oE,()=>oE(t))||oM(o,t),oO(ok,()=>ok(t))||r9(o),// Bug #175: Safari will not fire an ended event if the OscillatorNode is unconnected.
o0(t,o),o},nv=(eI=oW,eD=()=>{let t=new WeakMap,r=null,o=null,n=null,s=async(s,i)=>{let a=rp(s),l=tY(a,i);if(!l){let t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,detune:a.detune.value,frequency:a.frequency.value,periodicWave:null===r?void 0:r,type:a.type};a=ng(i,t),null!==o&&a.start(o),null!==n&&a.stop(n)}return t.set(i,a),l?(await o2(i,s.detune,a.detune),await o2(i,s.frequency,a.frequency)):(await o5(i,s.detune,a.detune),await o5(i,s.frequency,a.frequency)),await oI(s,i,a),a};return{set periodicWave(value){r=value},set start(value){o=value},set stop(value){n=value},render(r,o){let n=t.get(o);return void 0!==n?Promise.resolve(n):s(r,o)}}},class extends eI{constructor(t,r){let o=oD(t),n={...om,...r},s=ng(o,n),i=oN(o),a=i?eD():null,l=t.sampleRate/2;super(t,!1,s,a),// Bug #81: Firefox & Safari do not export the correct values for maxValue and minValue.
this._detune=o4(this,i,s.detune,153600,-153600),// Bug #76: Safari does not export the correct values for maxValue and minValue.
this._frequency=o4(this,i,s.frequency,l,-l),this._nativeOscillatorNode=s,this._onended=null,this._oscillatorNodeRenderer=a,null!==this._oscillatorNodeRenderer&&void 0!==n.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=n.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){let r="function"==typeof t?oC(this,t):null;this._nativeOscillatorNode.onended=r;let o=this._nativeOscillatorNode.onended;this._onended=null!==o&&o===r?t:o}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){tH(this);let t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),tK(this)&&tq(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}}),nb=(t,r)=>{let o=o3(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),n=t.createBuffer(1,2,44100);return o.buffer=n,o.loop=!0,o.connect(r),o.start(),()=>{o.stop(),o.disconnect(r)}},n_=(eF=(t,{curve:r,oversample:o,...n})=>{let s=t.createWaveShaper(),i=t.createWaveShaper();r3(s,n),r3(i,n);let a=oc(t,{...n,gain:1}),l=oc(t,{...n,gain:-1}),u=oc(t,{...n,gain:1}),c=oc(t,{...n,gain:-1}),d=null,h=!1,f=null,p={get bufferSize(){return},get channelCount(){return s.channelCount},set channelCount(value){a.channelCount=value,l.channelCount=value,s.channelCount=value,u.channelCount=value,i.channelCount=value,c.channelCount=value},get channelCountMode(){return s.channelCountMode},set channelCountMode(value){a.channelCountMode=value,l.channelCountMode=value,s.channelCountMode=value,u.channelCountMode=value,i.channelCountMode=value,c.channelCountMode=value},get channelInterpretation(){return s.channelInterpretation},set channelInterpretation(value){a.channelInterpretation=value,l.channelInterpretation=value,s.channelInterpretation=value,u.channelInterpretation=value,i.channelInterpretation=value,c.channelInterpretation=value},get context(){return s.context},get curve(){return f},set curve(value){// Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.
if(null!==value&&value.length<2)throw rY();if(null===value)s.curve=value,i.curve=value;else{let t=value.length,r=new Float32Array(t+2-t%2),o=new Float32Array(t+2-t%2);r[0]=value[0],o[0]=-value[t-1];let n=Math.ceil((t+1)/2),a=(t+1)/2-1;for(let s=1;s<n;s+=1){let i=s/n*a,l=Math.floor(i),u=Math.ceil(i);r[s]=l===u?value[l]:(1-(i-l))*value[l]+(1-(u-i))*value[u],o[s]=l===u?-value[t-1-l]:-((1-(i-l))*value[t-1-l])-(1-(u-i))*value[t-1-u]}r[n]=t%2==1?value[n-1]:(value[n-2]+value[n-1])/2,s.curve=r,i.curve=o}f=value,h&&(oj(f)&&null===d?d=nb(t,a):null!==d&&(d(),d=null))},get inputs(){return[a]},get numberOfInputs(){return s.numberOfInputs},get numberOfOutputs(){return s.numberOfOutputs},get oversample(){return s.oversample},set oversample(value){s.oversample=value,i.oversample=value},addEventListener:(...t)=>a.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>a.dispatchEvent(t[0]),removeEventListener:(...t)=>a.removeEventListener(t[0],t[1],t[2])};return null!==r&&(p.curve=r instanceof Float32Array?r:new Float32Array(r)),o!==p.oversample&&(p.oversample=o),ne(ol(p,u),()=>{a.connect(s).connect(u),a.connect(l).connect(i).connect(c).connect(u),h=!0,oj(f)&&(d=nb(t,a))},()=>{a.disconnect(s),s.disconnect(u),a.disconnect(l),l.disconnect(i),i.disconnect(c),c.disconnect(u),h=!1,null!==d&&(d(),d=null)})},(t,r)=>{let o=t.createWaveShaper();/*
         * Bug #119: Safari does not correctly map the values.
         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of
         * the webkitAudioContext is used as a workaround here. Testing for the automationRate property is necessary because this workaround
         * isn't necessary anymore since v14.0.2 of Safari.
         */if(null!==oV&&"webkitAudioContext"===oV.name&&void 0===t.createGain().gain.automationRate)return eF(t,r);r3(o,r);let n=null===r.curve||r.curve instanceof Float32Array?r.curve:new Float32Array(r.curve);// Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.
if(null!==n&&n.length<2)throw rY();r2(o,{curve:n},"curve"),r2(o,r,"oversample");let s=null,i=!1;return ow(o,"curve",t=>()=>t.call(o),r=>n=>(r.call(o,n),i&&(oj(n)&&null===s?s=nb(t,o):oj(n)||null===s||(s(),s=null)),n)),ne(o,()=>{i=!0,oj(o.curve)&&(s=nb(t,o))},()=>{i=!1,null!==s&&(s(),s=null)})}),nx=(eN=(t,{coneInnerAngle:r,coneOuterAngle:o,coneOuterGain:n,distanceModel:s,maxDistance:i,orientationX:a,orientationY:l,orientationZ:u,panningModel:c,positionX:d,positionY:h,positionZ:f,refDistance:p,rolloffFactor:m,...y})=>{let g=t.createPanner();// Bug #125: Safari does not throw an error yet.
if(y.channelCount>2||"max"===y.channelCountMode)throw of();r3(g,y);let v={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},b=nt(t,{...v,channelInterpretation:"speakers",numberOfInputs:6}),x=oc(t,{...y,gain:1}),j=oc(t,{...v,gain:1}),w=oc(t,{...v,gain:0}),S=oc(t,{...v,gain:0}),T=oc(t,{...v,gain:0}),E=oc(t,{...v,gain:0}),k=oc(t,{...v,gain:0}),M=oh(t,256,6,1),C=n_(t,{...v,curve:new Float32Array([1,1]),oversample:"none"}),A=[a,l,u],O=[d,h,f],R=new Float32Array(1);// tslint:disable-next-line:deprecation
M.onaudioprocess=({inputBuffer:t})=>{let r=[ox(t,R,0),ox(t,R,1),ox(t,R,2)];r.some((t,r)=>t!==A[r])&&(g.setOrientation(...r),A=r);let o=[ox(t,R,3),ox(t,R,4),ox(t,R,5)];o.some((t,r)=>t!==O[r])&&(g.setPosition(...o),O=o)},Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0});let P={get bufferSize(){return},get channelCount(){return g.channelCount},set channelCount(value){// Bug #125: Safari does not throw an error yet.
if(value>2)throw of();x.channelCount=value,g.channelCount=value},get channelCountMode(){return g.channelCountMode},set channelCountMode(value){// Bug #126: Safari does not throw an error yet.
if("max"===value)throw of();x.channelCountMode=value,g.channelCountMode=value},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(value){x.channelInterpretation=value,g.channelInterpretation=value},get coneInnerAngle(){return g.coneInnerAngle},set coneInnerAngle(value){g.coneInnerAngle=value},get coneOuterAngle(){return g.coneOuterAngle},set coneOuterAngle(value){g.coneOuterAngle=value},get coneOuterGain(){return g.coneOuterGain},set coneOuterGain(value){// Bug #127: Safari does not throw an InvalidStateError yet.
if(value<0||value>1)throw rY();g.coneOuterGain=value},get context(){return g.context},get distanceModel(){return g.distanceModel},set distanceModel(value){g.distanceModel=value},get inputs(){return[x]},get maxDistance(){return g.maxDistance},set maxDistance(value){// Bug #128: Safari does not throw an error yet.
if(value<0)throw RangeError();g.maxDistance=value},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return w.gain},get orientationZ(){return S.gain},get panningModel(){return g.panningModel},set panningModel(value){g.panningModel=value},get positionX(){return T.gain},get positionY(){return E.gain},get positionZ(){return k.gain},get refDistance(){return g.refDistance},set refDistance(value){// Bug #129: Safari does not throw an error yet.
if(value<0)throw RangeError();g.refDistance=value},get rolloffFactor(){return g.rolloffFactor},set rolloffFactor(value){// Bug #130: Safari does not throw an error yet.
if(value<0)throw RangeError();g.rolloffFactor=value},addEventListener:(...t)=>x.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>x.dispatchEvent(t[0]),removeEventListener:(...t)=>x.removeEventListener(t[0],t[1],t[2])};return r!==P.coneInnerAngle&&(P.coneInnerAngle=r),o!==P.coneOuterAngle&&(P.coneOuterAngle=o),n!==P.coneOuterGain&&(P.coneOuterGain=n),s!==P.distanceModel&&(P.distanceModel=s),i!==P.maxDistance&&(P.maxDistance=i),a!==P.orientationX.value&&(P.orientationX.value=a),l!==P.orientationY.value&&(P.orientationY.value=l),u!==P.orientationZ.value&&(P.orientationZ.value=u),c!==P.panningModel&&(P.panningModel=c),d!==P.positionX.value&&(P.positionX.value=d),h!==P.positionY.value&&(P.positionY.value=h),f!==P.positionZ.value&&(P.positionZ.value=f),p!==P.refDistance&&(P.refDistance=p),m!==P.rolloffFactor&&(P.rolloffFactor=m),(1!==A[0]||0!==A[1]||0!==A[2])&&g.setOrientation(...A),(0!==O[0]||0!==O[1]||0!==O[2])&&g.setPosition(...O),ne(ol(P,g),()=>{x.connect(g),// Bug #119: Safari does not fully support the WaveShaperNode.
rl(x,C,0,0),C.connect(j).connect(b,0,0),C.connect(w).connect(b,0,1),C.connect(S).connect(b,0,2),C.connect(T).connect(b,0,3),C.connect(E).connect(b,0,4),C.connect(k).connect(b,0,5),b.connect(M).connect(t.destination)},()=>{x.disconnect(g),// Bug #119: Safari does not fully support the WaveShaperNode.
rf(x,C,0,0),C.disconnect(j),j.disconnect(b),C.disconnect(w),w.disconnect(b),C.disconnect(S),S.disconnect(b),C.disconnect(T),T.disconnect(b),C.disconnect(E),E.disconnect(b),C.disconnect(k),k.disconnect(b),b.disconnect(M),M.disconnect(t.destination)})},(t,r)=>{let o=t.createPanner();return(// Bug #124: Safari does not support modifying the orientation and the position with AudioParams.
void 0===o.orientationX?eN(t,r):(r3(o,r),r6(o,r,"orientationX"),r6(o,r,"orientationY"),r6(o,r,"orientationZ"),r6(o,r,"positionX"),r6(o,r,"positionY"),r6(o,r,"positionZ"),r2(o,r,"coneInnerAngle"),r2(o,r,"coneOuterAngle"),r2(o,r,"coneOuterGain"),r2(o,r,"distanceModel"),r2(o,r,"maxDistance"),r2(o,r,"panningModel"),r2(o,r,"refDistance"),r2(o,r,"rolloffFactor"),o))}),nj=(eU=oW,eB=()=>{let t=new WeakMap,r=null,o=async(o,n)=>{let s=null,i=rp(o),a={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation},l={...a,coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,panningModel:i.panningModel,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor},u=tY(i,n);// Bug #124: Safari does not support modifying the orientation and the position with AudioParams.
if("bufferSize"in i)s=oc(n,{...a,gain:1});else if(!u){let t={...l,orientationX:i.orientationX.value,orientationY:i.orientationY.value,orientationZ:i.orientationZ.value,positionX:i.positionX.value,positionY:i.positionY.value,positionZ:i.positionZ.value};i=nx(n,t)}if(t.set(n,null===s?i:s),null!==s){if(null===r){if(null===oF)throw Error("Missing the native OfflineAudioContext constructor.");let t=new oF(6,o.context.length,n.sampleRate),s=nt(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),r=(async()=>{let r=await Promise.all([o.orientationX,o.orientationY,o.orientationZ,o.positionX,o.positionY,o.positionZ].map(async(r,o)=>{let n=nn(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===o?1:0});return await o5(t,r,n.offset),n}));for(let t=0;t<6;t+=1)r[t].connect(s,0,t),r[t].start(0);return nh(t)})()}let t=await r,i=oc(n,{...a,gain:1});await oI(o,n,i);let u=[];for(let r=0;r<t.numberOfChannels;r+=1)u.push(t.getChannelData(r));let c=[u[0][0],u[1][0],u[2][0]],d=[u[3][0],u[4][0],u[5][0]],h=oc(n,{...a,gain:1}),f=nx(n,{...l,orientationX:c[0],orientationY:c[1],orientationZ:c[2],positionX:d[0],positionY:d[1],positionZ:d[2]});i.connect(h).connect(f.inputs[0]),f.connect(s);for(let r=128;r<t.length;r+=128){let t=[u[0][r],u[1][r],u[2][r]],o=[u[3][r],u[4][r],u[5][r]];if(t.some((t,r)=>t!==c[r])||o.some((t,r)=>t!==d[r])){c=t,d=o;let u=r/n.sampleRate;h.gain.setValueAtTime(0,u),h=oc(n,{...a,gain:0}),f=nx(n,{...l,orientationX:c[0],orientationY:c[1],orientationZ:c[2],positionX:d[0],positionY:d[1],positionZ:d[2]}),h.gain.setValueAtTime(1,u),i.connect(h).connect(f.inputs[0]),f.connect(s)}}return s}return u?(await o2(n,o.orientationX,i.orientationX),await o2(n,o.orientationY,i.orientationY),await o2(n,o.orientationZ,i.orientationZ),await o2(n,o.positionX,i.positionX),await o2(n,o.positionY,i.positionY),await o2(n,o.positionZ,i.positionZ)):(await o5(n,o.orientationX,i.orientationX),await o5(n,o.orientationY,i.orientationY),await o5(n,o.orientationZ,i.orientationZ),await o5(n,o.positionX,i.positionX),await o5(n,o.positionY,i.positionY),await o5(n,o.positionZ,i.positionZ)),ra(i)?await oI(o,n,i.inputs[0]):await oI(o,n,i),i};return{render(r,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):o(r,n)}}},class extends eU{constructor(t,r){let o=oD(t),n={...oy,...r},s=nx(o,n),i=oN(o),a=i?eB():null;super(t,!1,s,a),this._nativePannerNode=s,// Bug #74: Safari does not export the correct values for maxValue and minValue.
this._orientationX=o4(this,i,s.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=o4(this,i,s.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=o4(this,i,s.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=o4(this,i,s.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=o4(this,i,s.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=o4(this,i,s.positionZ,34028234663852886e22,-34028234663852886e22),// @todo Determine a meaningful tail-time instead of just using one second.
o7(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}}),nw=(eV=(t,{disableNormalization:r,imag:o,real:n})=>{// Bug #180: Safari does not allow to use ordinary arrays.
let s=o instanceof Float32Array?o:new Float32Array(o),i=n instanceof Float32Array?n:new Float32Array(n),a=t.createPeriodicWave(i,s,{disableNormalization:r});// Bug #181: Safari does not throw an IndexSizeError so far if the given arrays have less than two values.
if(Array.from(o).length<2)throw tQ();return a},eG=new WeakSet,eH=t=>{let{imag:r,real:o}=t;return void 0===r?void 0===o?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(o,()=>0),real:o}:void 0===o?{...t,imag:r,real:Array.from(r,()=>0)}:{...t,imag:r,real:o}},class t{constructor(t,r){let o=oD(t),n=eH({...og,...r}),s=eV(o,n);// This does violate all good pratices but it is used here to simplify the handling of periodic waves.
return eG.add(s),s}static[Symbol.hasInstance](r){return null!==r&&"object"==typeof r&&Object.getPrototypeOf(r)===t.prototype||eG.has(r)}}),nS=((t,r,o,n,s,i)=>{let a=new Float32Array([1,1]),l=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...u,oversample:"none"},d=(t,r,s,i)=>{let d=new Float32Array(16385),h=new Float32Array(16385);for(let t=0;t<16385;t+=1){let r=t/16384*l;d[t]=Math.cos(r),h[t]=Math.sin(r)}let f=o(t,{...u,gain:0}),p=n(t,{...c,curve:d}),m=n(t,{...c,curve:a}),y=o(t,{...u,gain:0}),g=n(t,{...c,curve:h});return{connectGraph(){r.connect(f),r.connect(void 0===m.inputs?m:m.inputs[0]),r.connect(y),m.connect(s),s.connect(void 0===p.inputs?p:p.inputs[0]),s.connect(void 0===g.inputs?g:g.inputs[0]),p.connect(f.gain),g.connect(y.gain),f.connect(i,0,0),y.connect(i,0,1)},disconnectGraph(){r.disconnect(f),r.disconnect(void 0===m.inputs?m:m.inputs[0]),r.disconnect(y),m.disconnect(s),s.disconnect(void 0===p.inputs?p:p.inputs[0]),s.disconnect(void 0===g.inputs?g:g.inputs[0]),p.disconnect(f.gain),g.disconnect(y.gain),f.disconnect(i,0,0),y.disconnect(i,0,1)}}},h=(t,s,i,d)=>{let h=new Float32Array(16385),f=new Float32Array(16385),p=new Float32Array(16385),m=new Float32Array(16385),y=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>y){let r=(t-y)/(16384-y)*l;h[t]=Math.cos(r),f[t]=Math.sin(r),p[t]=0,m[t]=1}else{let r=t/(16384-y)*l;h[t]=1,f[t]=0,p[t]=Math.cos(r),m[t]=Math.sin(r)}let g=r(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=o(t,{...u,gain:0}),b=n(t,{...c,curve:h}),x=o(t,{...u,gain:0}),j=n(t,{...c,curve:f}),w=n(t,{...c,curve:a}),S=o(t,{...u,gain:0}),T=n(t,{...c,curve:p}),E=o(t,{...u,gain:0}),k=n(t,{...c,curve:m});return{connectGraph(){s.connect(g),s.connect(void 0===w.inputs?w:w.inputs[0]),g.connect(v,0),g.connect(x,0),g.connect(S,1),g.connect(E,1),w.connect(i),i.connect(void 0===b.inputs?b:b.inputs[0]),i.connect(void 0===j.inputs?j:j.inputs[0]),i.connect(void 0===T.inputs?T:T.inputs[0]),i.connect(void 0===k.inputs?k:k.inputs[0]),b.connect(v.gain),j.connect(x.gain),T.connect(S.gain),k.connect(E.gain),v.connect(d,0,0),S.connect(d,0,0),x.connect(d,0,1),E.connect(d,0,1)},disconnectGraph(){s.disconnect(g),s.disconnect(void 0===w.inputs?w:w.inputs[0]),g.disconnect(v,0),g.disconnect(x,0),g.disconnect(S,1),g.disconnect(E,1),w.disconnect(i),i.disconnect(void 0===b.inputs?b:b.inputs[0]),i.disconnect(void 0===j.inputs?j:j.inputs[0]),i.disconnect(void 0===T.inputs?T:T.inputs[0]),i.disconnect(void 0===k.inputs?k:k.inputs[0]),b.disconnect(v.gain),j.disconnect(x.gain),T.disconnect(S.gain),k.disconnect(E.gain),v.disconnect(d,0,0),S.disconnect(d,0,0),x.disconnect(d,0,1),E.disconnect(d,0,1)}}},f=(t,r,o,n,i)=>{if(1===r)return d(t,o,n,i);if(2===r)return h(t,o,n,i);throw s()};return(r,{channelCount:n,channelCountMode:a,pan:l,...u})=>{if("max"===a)throw s();let c=t(r,{...u,channelCount:1,channelCountMode:a,numberOfInputs:2}),d=o(r,{...u,channelCount:n,channelCountMode:a,gain:1}),h=o(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:l}),{connectGraph:p,disconnectGraph:m}=f(r,n,d,h,c);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});let y=!1;return i(ol({get bufferSize(){return},get channelCount(){return d.channelCount},set channelCount(value){d.channelCount!==value&&(y&&m(),{connectGraph:p,disconnectGraph:m}=f(r,value,d,h,c),y&&p()),d.channelCount=value},get channelCountMode(){return d.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw s();d.channelCountMode=value},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(value){d.channelInterpretation=value},get context(){return d.context},get inputs(){return[d]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get pan(){return h.gain},addEventListener:(...t)=>d.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>d.dispatchEvent(t[0]),removeEventListener:(...t)=>d.removeEventListener(t[0],t[1],t[2])},c),()=>{p(),y=!0},()=>{m(),y=!1})}})(nt,oa,oc,n_,of,ne),nT=(t,r)=>{let o=r.channelCountMode;/*
         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari
         * which supports it and therefore it can't be supported at all.
         */if("clamped-max"===o)throw of();// Bug #105: Safari does not support the StereoPannerNode.
if(void 0===t.createStereoPanner)return nS(t,r);let n=t.createStereoPanner();return r3(n,r),r6(n,r,"pan"),/*
         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari
         * which supports it and therefore it can't be supported at all.
         */Object.defineProperty(n,"channelCountMode",{get:()=>o,set:t=>{if(t!==o)throw of()}}),n},nE=(ez=oW,eq=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,pan:n.pan.value};n=nT(o,t)}return t.set(o,n),s?await o2(o,r.pan,n.pan):await o5(o,r.pan,n.pan),ra(n)?await oI(r,o,n.inputs[0]):await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends ez{constructor(t,r){let o=oD(t),n={...ov,...r},s=nT(o,n),i=oN(o),a=i?eq():null;super(t,!1,s,a),this._pan=o4(this,i,s.pan)}get pan(){return this._pan}}),nk=(eW=oW,eX=()=>{let t=new WeakMap,r=async(r,o)=>{let n=rp(r),s=tY(n,o);if(!s){let t={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,curve:n.curve,oversample:n.oversample};n=n_(o,t)}return t.set(o,n),ra(n)?await oI(r,o,n.inputs[0]):await oI(r,o,n),n};return{render(o,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):r(o,n)}}},class extends eW{constructor(t,r){let o=oD(t),n={...o_,...r},s=n_(o,n),i=oN(o),a=i?eX():null;// @todo Add a mechanism to only switch a WaveShaperNode to active while it is connected.
super(t,!0,s,a),this._isCurveNullified=!1,this._nativeWaveShaperNode=s,// @todo Determine a meaningful tail-time instead of just using one second.
o7(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){// Bug #103: Safari does not allow to set the curve to null.
if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{// Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.
// Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.
if(t.length<2)throw rY();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}}),nM=null!==oR&&oR.isSecureContext,nC=(t,r,o)=>{Object.defineProperties(oR,{currentFrame:{configurable:!0,get:()=>Math.round(t*r)},currentTime:{configurable:!0,get:()=>t}});try{return o()}finally{null!==oR&&(delete oR.currentFrame,delete oR.currentTime)}},nA=new WeakMap,nO=nM?(eZ=t=>new Promise((r,o)=>{if(null===oR){// Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.
    o(SyntaxError());return}let n=oR.document.head;if(null===n)o(SyntaxError());else{let s=oR.document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(i),l=oR.onerror,u=()=>{oR.onerror=l,URL.revokeObjectURL(a)};oR.onerror=(t,r,n,s,i)=>// @todo Edge thinks the source is the one of the html document.
        r===a||r===oR.location.href&&1===n&&1===s?(u(),o(i),!1):null!==l?l(t,r,n,s,i):void 0,s.onerror=()=>{u(),// Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.
    o(SyntaxError())},s.onload=()=>{u(),r()},s.src=a,s.type="module",n.appendChild(s)}}),eY=()=>new DOMException("","AbortError"),eQ=async t=>{try{let r=await fetch(t);if(r.ok)return[await r.text(),r.url]}catch{// Ignore errors.
}// tslint:disable-line:no-empty
throw eY()},eJ=t=>{let r=nA.get(t);if(void 0!==r)return r;if(null===oF)throw Error("Missing the native OfflineAudioContext constructor.");return(// Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.
r=new oF(1,1,44100),nA.set(t,r),r)},e$=new WeakMap,eK=new WeakMap,e0=async()=>{// Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.
if(null===oq)return!0;if(null===oF)return!1;let t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new oF(1,128,44100),o=URL.createObjectURL(t),n=!1,s=!1;try{await r.audioWorklet.addModule(o);let t=new oq(r,"a",{numberOfOutputs:0}),i=r.createOscillator();t.port.onmessage=()=>n=!0,t.onprocessorerror=()=>s=!0,i.connect(t),i.start(0),await r.startRendering(),// Bug #197: Safari does not deliver the messages before the promise returned by startRendering() resolves.
await new Promise(t=>setTimeout(t))}catch{// Ignore errors.
}finally{URL.revokeObjectURL(o)}return n&&!s},s=0,(t,r,o={credentials:"omit"})=>{let n=eK.get(t);if(void 0!==n&&n.has(r))return Promise.resolve();let i=e$.get(t);if(void 0!==i){let t=i.get(r);if(void 0!==t)return t}let a=oD(t),l=void 0===a.audioWorklet?eQ(r).then(([t,r])=>{let[o,n]=tD(t,r),s=`${o};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${n}
})})(window,'_AWGS')`;// @todo Evaluating the given source code is a possible security problem.
return eZ(s)}).then(()=>{let t=oR._AWGS.pop();if(void 0===t)throw SyntaxError();nC(a.currentTime,a.sampleRate,()=>t(class{},void 0,(t,r)=>{if(""===t.trim())throw of();let o=tO.get(a);if(void 0!==o){if(o.has(t))throw of();tN(r),tF(r.parameterDescriptors),o.set(t,r)}else tN(r),tF(r.parameterDescriptors),tO.set(a,new Map([[t,r]]))},a.sampleRate,void 0,void 0))}):Promise.all([eQ(r),Promise.resolve(oO(e0,e0))]).then(([[t,r],n])=>{let i=s+1;s=i;let[l,u]=tD(t,r),c=`${l};((AudioWorkletProcessor,registerProcessor)=>{${u}
})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`,d=new Blob([c],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(d);return a.audioWorklet.addModule(h,o).then(()=>{if(oN(a))return a;// Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.
let t=eJ(a);return t.audioWorklet.addModule(h,o).then(()=>t)}).then(t=>{if(null===oq)throw SyntaxError();try{// Bug #190: Safari doesn't throw an error when loading an unparsable module.
new oq(t,`__sac${i}`);// tslint:disable-line:no-unused-expression
}catch{throw SyntaxError()}}).finally(()=>URL.revokeObjectURL(h))});return void 0===i?e$.set(t,new Map([[r,l]])):i.set(r,l),l.then(()=>{let o=eK.get(t);void 0===o?eK.set(t,new Set([r])):o.add(r)}).finally(()=>{let o=e$.get(t);void 0!==o&&o.delete(r)}),l}):void 0,nR=(e1=()=>new DOMException("","DataCloneError"),e2=()=>new DOMException("","EncodingError"),e3=new WeakSet,e5=t=>oG(t)||oN(t),(t,r)=>{let o=e5(t)?t:oD(t);// Bug #43: Only Chrome and Edge do throw a DataCloneError.
if(e3.has(r)){let t=e1();return Promise.reject(t)}// The audioData parameter maybe of a type which can't be added to a WeakSet.
try{e3.add(r)}catch{// Ignore errors.
}return(// Bug #21: Safari does not support promises yet.
oO(r1,()=>r1(o))?o.decodeAudioData(r).then(t=>(rG(r).catch(()=>{// Ignore errors.
    }),oO(tZ,()=>tZ(t))||o$(t),oY.add(t),t)):new Promise((t,n)=>{let s=async()=>{// Bug #133: Safari does neuter the ArrayBuffer.
try{await rG(r)}catch{// Ignore errors.
}},i=t=>{n(t),s()};// Bug #26: Safari throws a synchronous error.
try{// Bug #1: Safari requires a successCallback.
o.decodeAudioData(r,r=>{"function"!=typeof r.copyFromChannel&&(oJ(r),tJ(r)),oY.add(r),s().then(()=>t(r))},t=>{// Bug #4: Safari returns null instead of an error.
null===t?i(e2()):i(t)})}catch(t){i(t)}}))}),nP=(e4=ny,class extends e4{constructor(t,r){super(t,r),this._nativeContext=t,this._audioWorklet=void 0===nO?void 0:{addModule:(t,r)=>nO(this,t,r)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new oX(this)}createBiquadFilter(){return new o9(this)}createBuffer(t,r,o){return new oK({length:r,numberOfChannels:t,sampleRate:o})}createBufferSource(){return new o6(this)}createChannelMerger(t=6){return new nr(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new no(this,{numberOfOutputs:t})}createConstantSource(){return new ns(this)}createConvolver(){return new na(this)}createDelay(t=1){return new nl(this,{maxDelayTime:t})}createDynamicsCompressor(){return new nc(this)}createGain(){return new nd(this)}createIIRFilter(t,r){return new np(this,{feedback:r,feedforward:t})}createOscillator(){return new nv(this)}createPanner(){return new nj(this)}createPeriodicWave(t,r,o={disableNormalization:!1}){return new nw(this,{...o,imag:r,real:t})}createStereoPanner(){return new nE(this)}createWaveShaper(){return new nk(this)}decodeAudioData(t,r,o){return nR(this._nativeContext,t).then(t=>("function"==typeof r&&r(t),t),t=>{throw"function"==typeof o&&o(t),t})}}),nL=(e6=oW,e8=(t,r)=>t.createMediaElementSource(r.mediaElement),class extends e6{constructor(t,r){let o=oD(t),n=e8(o,r);// Bug #171: Safari allows to create a MediaElementAudioSourceNode with an OfflineAudioContext.
if(oN(o))throw TypeError();super(t,!0,n,null),this._nativeMediaElementAudioSourceNode=n}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}}),nI=(e7=oW,e9=(t,r)=>{let o=t.createMediaStreamDestination();return r3(o,r),1===o.numberOfOutputs&&Object.defineProperty(o,"numberOfOutputs",{get:()=>0}),o},class extends e7{constructor(t,r){let o=oD(t);// Bug #173: Safari allows to create a MediaStreamAudioDestinationNode with an OfflineAudioContext.
if(oN(o))throw TypeError();let n={...r0,...r},s=e9(o,n);super(t,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}}),nD=(te=oW,tt=(t,{mediaStream:r})=>{let o=r.getAudioTracks();/*
     * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.
     * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.
     */o.sort((t,r)=>t.id<r.id?-1:t.id>r.id?1:0);let n=o.slice(0,1),s=t.createMediaStreamSource(new MediaStream(n));return(/*
     * Bug #151 & #159: The given mediaStream gets reconstructed before it gets passed to the native node which is why the accessor needs
     * to be overwritten as it would otherwise expose the reconstructed version.
     */Object.defineProperty(s,"mediaStream",{value:r}),s)},class extends te{constructor(t,r){let o=oD(t),n=tt(o,r);// Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.
if(oN(o))throw TypeError();super(t,!0,n,null),this._nativeMediaStreamAudioSourceNode=n}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}),nF=(tr=oW,to=(t,{mediaStreamTrack:r})=>{// Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.
if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(r);let o=new MediaStream([r]),n=t.createMediaStreamSource(o);// Bug #120: Firefox does not throw an error if the mediaStream has no audio track.
if("audio"!==r.kind)throw rY();// Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.
if(oN(t))throw TypeError();return n},class extends tr{constructor(t,r){let o=oD(t),n=to(o,r);super(t,!0,n,null)}}),nN=(tn=nP,class extends tn{constructor(t={}){let r;if(null===oV)throw Error("Missing the native AudioContext constructor.");try{r=new oV(t)}catch(t){// Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.
if(12===t.code&&"sampleRate is not in range"===t.message)throw of();throw t}// Bug #131 Safari returns null when there are four other AudioContexts running already.
if(null===r)throw ob();// Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.
if(!rt(t.latencyHint))throw TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);// Bug #150 Safari does not support setting the sampleRate.
if(void 0!==t.sampleRate&&r.sampleRate!==t.sampleRate)throw of();super(r,2);let{latencyHint:o}=t,{sampleRate:n}=r;/*
             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes
             * to 'running'.
             */if(// @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.
this._baseLatency="number"==typeof r.baseLatency?r.baseLatency:"balanced"===o?512/n:"interactive"===o||void 0===o?256/n:"playback"===o?1024/n:/*
                                   * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a
                                   * ScriptProcessorNode.
                                   */128*Math.max(2,Math.min(128,Math.round(o*n/128)))/n,this._nativeAudioContext=r,"webkitAudioContext"===oV.name?(this._nativeGainNode=r.createGain(),this._nativeOscillatorNode=r.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(r.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===r.state){this._state="suspended";let t=()=>{"suspended"===this._state&&(this._state=null),r.removeEventListener("statechange",t)};r.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return(// Bug #35: Firefox does not throw an error if the AudioContext was closed before.
"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw rY()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),re(this)})))}createMediaElementSource(t){return new nL(this,{mediaElement:t})}createMediaStreamDestination(){return new nI(this)}createMediaStreamSource(t){return new nD(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new nF(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,r)=>{let o=()=>{this._nativeAudioContext.removeEventListener("statechange",o),"running"===this._nativeAudioContext.state?t():this.resume().then(t,r)};this._nativeAudioContext.addEventListener("statechange",o)}):this._nativeAudioContext.resume().catch(t=>{// Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.
// Bug #56: Safari invokes the catch handler but without an error.
if(void 0===t||15===t.code)throw rY();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{// Bug #56: Safari invokes the catch handler but without an error.
if(void 0===t)throw rY();throw t})}}),nU=t=>{let r=nm.get(t);if(void 0===r)throw Error("The context has no set of AudioWorkletNodes.");return r},nB=(t,r,o=0,n=0)=>{let s=t[o];if(void 0===s)throw tQ();return r_(r)?s.connect(r,0,n):s.connect(r,0)},nV=(t,r,o,n=0)=>void 0===r?t.forEach(t=>t.disconnect()):"number"==typeof r?rq(tQ,t,r).disconnect():r_(r)?void 0===o?t.forEach(t=>t.disconnect(r)):void 0===n?rq(tQ,t,o).disconnect(r,0):rq(tQ,t,o).disconnect(r,0,n):void 0===o?t.forEach(t=>t.disconnect(r)):rq(tQ,t,o).disconnect(r,0),nG=new WeakMap,nH=(ts=t=>tU(nG,t),(t,r,o,n)=>{var s,i;if(0===n.numberOfInputs&&0===n.numberOfOutputs)throw of();let a=Array.isArray(n.outputChannelCount)?n.outputChannelCount:Array.from(n.outputChannelCount);// @todo Check if any of the channelCount values is greater than the implementation's maximum number of channels.
if(a.some(t=>t<1))throw of();if(a.length!==n.numberOfOutputs)throw tQ();// Bug #61: This is not part of the standard but required for the faker to work.
if("explicit"!==n.channelCountMode)throw of();let l=n.channelCount*n.numberOfInputs,u=a.reduce((t,r)=>t+r,0),c=void 0===o.parameterDescriptors?0:o.parameterDescriptors.length;// Bug #61: This is not part of the standard but required for the faker to work.
if(l+c>6||u>6)throw of();let d=new MessageChannel,h=[],f=[];for(let r=0;r<n.numberOfInputs;r+=1)h.push(oc(t,{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:1})),f.push(oa(t,{channelCount:n.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:n.channelCount}));let p=[];if(void 0!==o.parameterDescriptors)for(let{defaultValue:r,maxValue:s,minValue:i,name:a}of o.parameterDescriptors){let o=nn(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==n.parameterData[a]?n.parameterData[a]:void 0===r?0:r});Object.defineProperties(o.offset,{defaultValue:{get:()=>void 0===r?0:r},maxValue:{get:()=>void 0===s?34028234663852886e22:s},minValue:{get:()=>void 0===i?-34028234663852886e22:i}}),p.push(o)}let m=nt(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,l+c)}),y=ot(r,t.sampleRate),g=oh(t,y,l+c,Math.max(1,u)),v=oa(t,{channelCount:Math.max(1,u),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,u)}),b=[];for(let r=0;r<n.numberOfOutputs;r+=1)b.push(nt(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:a[r]}));for(let t=0;t<n.numberOfInputs;t+=1){h[t].connect(f[t]);for(let r=0;r<n.channelCount;r+=1)f[t].connect(m,r,t*n.channelCount+r)}let x=new rA(void 0===o.parameterDescriptors?[]:o.parameterDescriptors.map(({name:t},r)=>{let o=p[r];return o.connect(m,0,l+r),o.start(0),[t,o.offset]}));m.connect(g);let j=n.channelInterpretation,w=null,S=0===n.numberOfOutputs?[g]:b,T={get bufferSize(){return y},get channelCount(){return n.channelCount},set channelCount(_){// Bug #61: This is not part of the standard but required for the faker to work.
throw rY()},get channelCountMode(){return n.channelCountMode},set channelCountMode(_){// Bug #61: This is not part of the standard but required for the faker to work.
throw rY()},get channelInterpretation(){return j},set channelInterpretation(value){for(let t of h)t.channelInterpretation=value;j=value},get context(){return g.context},get inputs(){return h},get numberOfInputs(){return n.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},get onprocessorerror(){return w},set onprocessorerror(value){"function"==typeof w&&T.removeEventListener("processorerror",w),"function"==typeof(w="function"==typeof value?value:null)&&T.addEventListener("processorerror",w)},get parameters(){return x},get port(){return d.port2},addEventListener:(...t)=>g.addEventListener(t[0],t[1],t[2]),connect:nB.bind(null,S),disconnect:nV.bind(null,S),dispatchEvent:(...t)=>g.dispatchEvent(t[0]),removeEventListener:(...t)=>g.removeEventListener(t[0],t[1],t[2])},E=new Map;d.port1.addEventListener=(s=d.port1.addEventListener,(...r)=>{if("message"===r[0]){let o="function"==typeof r[1]?r[1]:"object"==typeof r[1]&&null!==r[1]&&"function"==typeof r[1].handleEvent?r[1].handleEvent:null;if(null!==o){let n=E.get(r[1]);void 0!==n?r[1]=n:(r[1]=r=>{nC(t.currentTime,t.sampleRate,()=>o(r))},E.set(o,r[1]))}}return s.call(d.port1,r[0],r[1],r[2])}),d.port1.removeEventListener=(i=d.port1.removeEventListener,(...t)=>{if("message"===t[0]){let r=E.get(t[1]);void 0!==r&&(E.delete(t[1]),t[1]=r)}return i.call(d.port1,t[0],t[1],t[2])});let k=null;Object.defineProperty(d.port1,"onmessage",{get:()=>k,set:t=>{"function"==typeof k&&d.port1.removeEventListener("message",k),"function"==typeof(k="function"==typeof t?t:null)&&(d.port1.addEventListener("message",k),d.port1.start())}}),o.prototype.port=d.port1;let M=null,C=on(t,T,o,n);C.then(t=>M=t);let A=rL(n.numberOfInputs,n.channelCount),O=rL(n.numberOfOutputs,a),R=void 0===o.parameterDescriptors?[]:o.parameterDescriptors.reduce((t,{name:r})=>({...t,[r]:new Float32Array(128)}),{}),P=!0,L=()=>{n.numberOfOutputs>0&&g.disconnect(v);for(let t=0,r=0;t<n.numberOfOutputs;t+=1){let o=b[t];for(let n=0;n<a[t];n+=1)v.disconnect(o,r+n,n);r+=a[t]}},I=new Map;// tslint:disable-next-line:deprecation
g.onaudioprocess=({inputBuffer:r,outputBuffer:s})=>{if(null!==M){let i=ts(T);for(let u=0;u<y;u+=128){for(let t=0;t<n.numberOfInputs;t+=1)for(let o=0;o<n.channelCount;o+=1)rR(r,A[t],o,o,u);void 0!==o.parameterDescriptors&&o.parameterDescriptors.forEach(({name:t},o)=>{rR(r,R,t,l+o,u)});for(let t=0;t<n.numberOfInputs;t+=1)for(let r=0;r<a[t];r+=1)0===O[t][r].byteLength&&(O[t][r]=new Float32Array(128));try{let r=A.map((t,r)=>{let o=i[r];if(o.size>0)return I.set(r,y/128),t;let n=I.get(r);return void 0===n?[]:(t.every(t=>t.every(t=>0===t))&&(1===n?I.delete(r):I.set(r,n-1)),t)}),o=nC(t.currentTime+u/t.sampleRate,t.sampleRate,()=>M.process(r,O,R));P=o;for(let t=0,r=0;t<n.numberOfOutputs;t+=1){for(let o=0;o<a[t];o+=1)rP(s,O[t],o,r+o,u);r+=a[t]}}catch(t){P=!1,T.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!P){for(let t=0;t<n.numberOfInputs;t+=1){h[t].disconnect(f[t]);for(let r=0;r<n.channelCount;r+=1)f[u].disconnect(m,r,t*n.channelCount+r)}if(void 0!==o.parameterDescriptors){let t=o.parameterDescriptors.length;for(let r=0;r<t;r+=1){let t=p[r];t.disconnect(m,0,l+r),t.stop()}}m.disconnect(g),g.onaudioprocess=null,D?L():U();break}}}};let D=!1,F=oc(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),N=()=>g.connect(F).connect(t.destination),U=()=>{g.disconnect(F),F.disconnect()};return N(),ne(T,()=>{if(P){U(),n.numberOfOutputs>0&&g.connect(v);for(let t=0,r=0;t<n.numberOfOutputs;t+=1){let o=b[t];for(let n=0;n<a[t];n+=1)v.connect(o,r+n,n);r+=a[t]}}D=!0},()=>{P&&(N(),L()),D=!1})}),nz=(ti=(t,r)=>{nU(t).delete(r)},(t,r,o)=>{let n=new WeakMap,s=null,i=async(i,a)=>{let l=rp(i),u=null,c=tY(l,a),d=Array.isArray(r.outputChannelCount)?r.outputChannelCount:Array.from(r.outputChannelCount);// Bug #61: Only Chrome, Edge & Firefox have an implementation of the AudioWorkletNode yet.
if(null===oq){let t=d.reduce((t,r)=>t+r,0),o=oa(a,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),n=[];for(let t=0;t<i.numberOfOutputs;t+=1)n.push(nt(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:d[t]}));let s=oc(a,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});s.connect=nB.bind(null,n),s.disconnect=nV.bind(null,n),u=[o,n,s]}else c||(l=new oq(a,t));if(n.set(a,null===u?l:u[2]),null!==u){if(null===s){if(void 0===o)throw Error("Missing the processor constructor.");if(null===oF)throw Error("Missing the native OfflineAudioContext constructor.");// Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.
let t=i.channelCount*i.numberOfInputs,n=void 0===o.parameterDescriptors?0:o.parameterDescriptors.length,l=t+n,u=async()=>{let o=new oF(l,// Bug #17: Safari does not yet expose the length.
128*Math.ceil(i.context.length/128),a.sampleRate),s=[],u=[];for(let t=0;t<r.numberOfInputs;t+=1)s.push(oc(o,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1})),u.push(oa(o,{channelCount:r.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:r.channelCount}));let c=await Promise.all(Array.from(i.parameters.values()).map(async t=>{let r=nn(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await o5(o,t,r.offset),r})),d=nt(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+n)});for(let t=0;t<r.numberOfInputs;t+=1){s[t].connect(u[t]);for(let o=0;o<r.channelCount;o+=1)u[t].connect(d,o,t*r.channelCount+o)}for(let[r,o]of c.entries())o.connect(d,0,t+r),o.start(0);return d.connect(o.destination),await Promise.all(s.map(t=>oI(i,o,t))),nh(o)};s=rD(i,0===l?null:await u(),a,r,d,o,nC)}let t=await s,n=o3(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,c,h]=u;null!==t&&(n.buffer=t,n.start(0)),n.connect(l);for(let t=0,r=0;t<i.numberOfOutputs;t+=1){let o=c[t];for(let n=0;n<d[t];n+=1)l.connect(o,r+n,n);r+=d[t]}return h}if(c)for(let[t,r]of i.parameters.entries())await o2(a,r,l.parameters.get(t));else for(let[t,r]of i.parameters.entries())await o5(a,r,l.parameters.get(t));return await oI(i,a,l),l};return{render(t,r){ti(r,t);let o=n.get(r);return void 0!==o?Promise.resolve(o):i(t,r)}}}),nq=nM?(ta=(t,r)=>{nU(t).add(r)},tl=oW,tu=(t,r,o,n,s,i)=>{if(null!==o)try{var a,l;let r=new o(t,n,i),s=new Map,u=null;/*
                 * Bug #86: Chrome and Edge do not invoke the process() function if the corresponding AudioWorkletNode is unconnected but
                 * has an output.
                 */if(Object.defineProperties(r,{/*
                     * Bug #61: Overwriting the property accessors for channelCount and channelCountMode is necessary as long as some
                     * browsers have no native implementation to achieve a consistent behavior.
                     */channelCount:{get:()=>i.channelCount,set:()=>{throw rY()}},channelCountMode:{get:()=>"explicit",set:()=>{throw rY()}},// Bug #156: Chrome and Edge do not yet fire an ErrorEvent.
onprocessorerror:{get:()=>u,set:t=>{"function"==typeof u&&r.removeEventListener("processorerror",u),u="function"==typeof t?t:null,"function"==typeof u&&r.addEventListener("processorerror",u)}}}),r.addEventListener=(a=r.addEventListener,(...t)=>{if("processorerror"===t[0]){let r="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==r){let o=s.get(t[1]);void 0!==o?t[1]=o:(t[1]=o=>{// Bug #178: Chrome and Edge do fire an event of type error.
"error"===o.type?(Object.defineProperties(o,{type:{value:"processorerror"}}),r(o)):r(new ErrorEvent(t[0],{...o}))},s.set(r,t[1]))}}return(// Bug #178: Chrome and Edge do fire an event of type error.
a.call(r,"error",t[1],t[2]),a.call(r,...t))}),r.removeEventListener=(l=r.removeEventListener,(...t)=>{if("processorerror"===t[0]){let r=s.get(t[1]);void 0!==r&&(s.delete(t[1]),t[1]=r)}return(// Bug #178: Chrome and Edge do fire an event of type error.
l.call(r,"error",t[1],t[2]),l.call(r,t[0],t[1],t[2]))}),0!==i.numberOfOutputs){let o=oc(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});// @todo Disconnect the connection when the process() function of the AudioWorkletNode returns false.
return r.connect(o).connect(t.destination),ne(r,()=>o.disconnect(),()=>o.connect(t.destination))}return r}catch(t){// Bug #60: Chrome & Edge throw an InvalidStateError instead of a NotSupportedError.
if(11===t.code)throw of();throw t}// Bug #61: Only Chrome & Edge have an implementation of the AudioWorkletNode yet.
if(void 0===s)throw of();return oe(i),nH(t,r,s,i)},tc=t=>nA.get(t),td=t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?/*
                   * Bug #61: This should be the computedNumberOfChannels, but unfortunately that is almost impossible to fake. That's why
                   * the channelCountMode is required to be 'explicit' as long as there is not a native implementation in every browser. That
                   * makes sure the computedNumberOfChannels is equivilant to the channelCount which makes it much easier to compute.
                   */[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),th=(t,r)=>{nG.set(t,r)},tf=t=>{let{port1:r,port2:o}=new MessageChannel;try{// This will throw an error if the audioWorkletNodeOptions are not clonable.
r.postMessage(t)}finally{r.close(),o.close()}},class extends tl{constructor(t,r,o){var n;let s=oD(t),i=oN(s),a=td({...rO,...o});// Bug #191: Safari doesn't throw an error if the options aren't clonable.
tf(a);let l=tO.get(s),u=null==l?void 0:l.get(r),c=i||"closed"!==s.state?s:null!==(n=tc(s))&&void 0!==n?n:s,d=tu(c,i?null:t.baseLatency,oq,r,u,a),h=i?nz(r,a,u):null;/*
             * @todo Add a mechanism to switch an AudioWorkletNode to passive once the process() function of the AudioWorkletProcessor
             * returns false.
             */super(t,!0,d,h);let f=[];d.parameters.forEach((t,r)=>{let o=o4(this,i,t);f.push([r,o])}),this._nativeAudioWorkletNode=d,this._onprocessorerror=null,this._parameters=new rA(f),i&&ta(s,this);let{activeInputs:p}=t8(this);th(d,p)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){let r="function"==typeof t?oC(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=r;let o=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==o&&o===r?t:o}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}}):void 0,nW=(t,r,o)=>{if(null===oF)throw Error("Missing the native OfflineAudioContext constructor.");try{return new oF(t,r,o)}catch(t){// Bug #143, #144 & #146: Safari throws a SyntaxError when numberOfChannels, length or sampleRate are invalid.
if("SyntaxError"===t.name)throw of();throw t}},nX=(t,r)=>oL(t).render(t,r)/*
         * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to the
         * destination.
         */.then(()=>Promise.all(Array.from(nU(r)).map(t=>oL(t).render(t,r)))).then(()=>nh(r)).then(t=>("function"!=typeof t.copyFromChannel?(oJ(t),tJ(t)):oO(tZ,()=>tZ(t))||o$(t),oY.add(t),t)),nY=(tp=nP,class extends tp{constructor(t,r,o){let n;if("number"==typeof t&&void 0!==r&&void 0!==o)n={length:r,numberOfChannels:t,sampleRate:o};else if("object"==typeof t)n=t;else throw Error("The given parameters are not valid.");let{length:s,numberOfChannels:i,sampleRate:a}={...op,...n},l=nW(i,s,a);oO(r1,()=>r1(l))||l.addEventListener("statechange",(()=>{let t=0,r=o=>{"running"===this._state&&(t>0?(l.removeEventListener("statechange",r),o.stopImmediatePropagation(),this._waitForThePromiseToSettle(o)):t+=1)};return r})()),super(l,i),this._length=s,this._nativeOfflineAudioContext=l,this._state=null}get length(){return(// Bug #17: Safari does not yet expose the length.
void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length)}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return(/*
             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore
             * the state of the nativeOfflineAudioContext might no transition to running immediately.
             */"running"===this._state?Promise.reject(rY()):(this._state="running",nX(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,re(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}}),nZ=t=>{let r=tM.get(t);return oG(r)||oG(t)},nQ=t=>tT.has(t)||oH(t),nJ=t=>tk.has(t)||oz(t),n$=t=>{let r=tM.get(t);return oN(r)||oN(t)};/**
 * Assert that the statement is true, otherwise invoke the error.
 * @param statement
 * @param error The message which is passed into an Error
 */function nK(t,r){if(!t)throw Error(r)}function n0(t,r,o=1/0){if(!(r<=t&&t<=o))throw RangeError(`Value must be within [${r}, ${o}], got: ${t}`)}function n1(t){// add a warning if the context is not started
t.isOffline||"running"===t.state||n3('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}/**
 * The default logger is the console
 */let n2=console;function n3(...t){n2.warn(...t)}/**
 * Test if the arg is undefined
 */function n5(t){return void 0===t}function n4(t){return!n5(t)}function n6(t){return"number"==typeof t}function n8(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function n7(t){return"boolean"==typeof t}function n9(t){return Array.isArray(t)}function se(t){return"string"==typeof t}function st(t){return se(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const sr="object"==typeof self?self:null,so=sr&&(sr.hasOwnProperty("AudioContext")||sr.hasOwnProperty("webkitAudioContext"));function sn(t,r,o,n){var s,i=arguments.length,a=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,r,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(i<3?s(a):i>3?s(r,o,a):s(r,o))||a);return i>3&&a&&Object.defineProperty(r,o,a),a}function ss(t,r,o,n){return new(o||(o=Promise))(function(s,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function l(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var r;t.done?s(t.value):((r=t.value)instanceof o?r:new o(function(t){t(r)})).then(a,l)}u((n=n.apply(t,r||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;/**
 * A class which provides a reliable callback using either
 * a Web Worker, or if that isn't supported, falls back to setTimeout.
 */class si{constructor(t,r,o){this._callback=t,this._type=r,this._updateInterval=o,// create the clock source for the first time
this._createClock()}/**
     * Generate a web worker
     */_createWorker(){let t=new Blob([/* javascript */`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),r=URL.createObjectURL(t),o=new Worker(r);o.onmessage=this._callback.bind(this),this._worker=o}/**
     * Create a timeout loop
     */_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}/**
     * Create the clock source.
     */_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){// workers not supported, fallback to timeout
this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}/**
     * Clean up the current clock source
     */_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}/**
     * The rate in seconds the ticker will update
     */get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}/**
     * The type of the ticker, either a worker or a timeout
     */get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}/**
     * Clean up
     */dispose(){this._disposeClock()}}function sa(t){return t instanceof AudioBuffer}function sl(t,...r){if(!r.length)return t;let o=r.shift();if(n8(t)&&n8(o))for(let r in o){var n;(n=o[r],"value"===r||nJ(n)||nQ(n)||sa(n))?t[r]=o[r]:n8(o[r])?(t[r]||Object.assign(t,{[r]:{}}),sl(t[r],o[r])):Object.assign(t,{[r]:o[r]})}// @ts-ignore
return sl(t,...r)}function su(t,r,o=[],n){let s={},i=Array.from(r);// if the first argument is an object and has an object key
if(n8(i[0])&&n&&!Reflect.has(i[0],n)){// if it's not part of the defaults
let r=Object.keys(i[0]).some(r=>Reflect.has(t,r));r||(// merge that key
sl(s,{[n]:i[0]}),// remove the obj key from the keys
o.splice(o.indexOf(n),1),// shift the first argument off
i.shift())}if(1===i.length&&n8(i[0]))sl(s,i[0]);else for(let t=0;t<o.length;t++)n4(i[t])&&(s[o[t]]=i[t]);return sl(t,s)}function sc(t,r){return n5(t)?r:t}function sd(t,r){return r.forEach(r=>{Reflect.has(t,r)&&delete t[r]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class sh{constructor(){//-------------------------------------
// 	DEBUGGING
//-------------------------------------
/**
         * Set this debug flag to log all events that happen in this class.
         */this.debug=!1,//-------------------------------------
// 	DISPOSING
//-------------------------------------
/**
         * Indicates if the instance was disposed
         */this._wasDisposed=!1}/**
     * Returns all of the default options belonging to the class.
     */static getDefaults(){return{}}/**
     * Prints the outputs to the console log for debugging purposes.
     * Prints the contents only if either the object has a property
     * called `debug` set to true, or a variable called TONE_DEBUG_CLASS
     * is set to the name of the class.
     * @example
     * const osc = new Tone.Oscillator();
     * // prints all logs originating from this oscillator
     * osc.debug = true;
     * // calls to start/stop will print in the console
     * osc.start();
     */log(...t){// if the object is either set to debug = true
// or if there is a string on the Tone.global.with the class name
(this.debug||sr&&this.toString()===sr.TONE_DEBUG_CLASS)&&function(...t){n2.log(...t)}(this,...t)}/**
     * disconnect and dispose.
     */dispose(){return this._wasDisposed=!0,this}/**
     * Indicates if the instance was disposed. 'Disposing' an
     * instance means that all of the Web Audio nodes that were
     * created for the instance are disconnected and freed for garbage collection.
     */get disposed(){return this._wasDisposed}/**
     * Convert the class to a string
     * @example
     * const osc = new Tone.Oscillator();
     * console.log(osc.toString());
     */toString(){return this.name}}function sf(t,r){return t>r+1e-6}function sp(t,r){return sf(t,r)||sm(t,r)}function sm(t,r){return 1e-6>Math.abs(t-r)}/**
 * The version number semver
 */sh.version=tx;class sy extends sh{constructor(){super(),this.name="Timeline",/**
         * The array of scheduled timeline events
         */this._timeline=[];let t=su(sy.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}/**
     * The number of items in the timeline.
     */get length(){return this._timeline.length}/**
     * Insert an event object onto the timeline. Events must have a "time" attribute.
     * @param event  The event object to insert into the timeline.
     */add(t){if(nK(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){let r=this._timeline[this.length-1];nK(sp(t.time,r.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{let r=this._search(t.time);this._timeline.splice(r+1,0,t)}// if the length is more than the memory, remove the previous ones
if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}/**
     * Remove an event from the timeline.
     * @param  {Object}  event  The event object to remove from the list.
     * @returns {Timeline} this
     */remove(t){let r=this._timeline.indexOf(t);return -1!==r&&this._timeline.splice(r,1),this}/**
     * Get the nearest event whose time is less than or equal to the given time.
     * @param  time  The time to query.
     */get(t,r="time"){let o=this._search(t,r);return -1!==o?this._timeline[o]:null}/**
     * Return the first event in the timeline without removing it
     * @returns {Object} The first event object
     */peek(){return this._timeline[0]}/**
     * Return the first event in the timeline and remove it
     */shift(){return this._timeline.shift()}/**
     * Get the event which is scheduled after the given time.
     * @param  time  The time to query.
     */getAfter(t,r="time"){let o=this._search(t,r);return o+1<this._timeline.length?this._timeline[o+1]:null}/**
     * Get the event before the event at the given time.
     * @param  time  The time to query.
     */getBefore(t){let r=this._timeline.length;// if it's after the last item, return the last item
if(r>0&&this._timeline[r-1].time<t)return this._timeline[r-1];let o=this._search(t);return o-1>=0?this._timeline[o-1]:null}/**
     * Cancel events at and after the given time
     * @param  after  The time to query.
     */cancel(t){if(this._timeline.length>1){let r=this._search(t);if(r>=0){if(sm(this._timeline[r].time,t)){// get the first item with that time
for(let o=r;o>=0&&sm(this._timeline[o].time,t);o--)r=o;this._timeline=this._timeline.slice(0,r)}else this._timeline=this._timeline.slice(0,r+1)}else this._timeline=[]}else 1===this._timeline.length&&sp(this._timeline[0].time,t)&&(this._timeline=[]);return this}/**
     * Cancel events before or equal to the given time.
     * @param  time  The time to cancel before.
     */cancelBefore(t){let r=this._search(t);return r>=0&&(this._timeline=this._timeline.slice(r+1)),this}/**
     * Returns the previous event if there is one. null otherwise
     * @param  event The event to find the previous one of
     * @return The event right before the given event
     */previousEvent(t){let r=this._timeline.indexOf(t);return r>0?this._timeline[r-1]:null}/**
     * Does a binary search on the timeline array and returns the
     * nearest event index whose time is after or equal to the given time.
     * If a time is searched before the first index in the timeline, -1 is returned.
     * If the time is after the end, the index of the last item is returned.
     */_search(t,r="time"){if(0===this._timeline.length)return -1;let o=0,n=this._timeline.length,s=n;if(n>0&&this._timeline[n-1][r]<=t)return n-1;for(;o<s;){// calculate the midpoint for roughly equal partition
let n=Math.floor(o+(s-o)/2),i=this._timeline[n],a=this._timeline[n+1];if(sm(i[r],t)){// choose the last one that has the same time
for(let o=n;o<this._timeline.length;o++){let s=this._timeline[o];if(sm(s[r],t))n=o;else break}return n}if(i[r]+1e-6<t&&sf(a[r],t))return n;sf(i[r],t)?s=n:o=n+1}return -1}/**
     * Internal iterator. Applies extra safety checks for
     * removing items from the array.
     */_iterate(t,r=0,o=this._timeline.length-1){this._timeline.slice(r,o+1).forEach(t)}/**
     * Iterate over everything in the array
     * @param  callback The callback to invoke with every item
     */forEach(t){return this._iterate(t),this}/**
     * Iterate over everything in the array at or before the given time.
     * @param  time The time to check if items are before
     * @param  callback The callback to invoke with every item
     */forEachBefore(t,r){// iterate over the items in reverse so that removing an item doesn't break things
let o=this._search(t);return -1!==o&&this._iterate(r,0,o),this}/**
     * Iterate over everything in the array after the given time.
     * @param  time The time to check if items are before
     * @param  callback The callback to invoke with every item
     */forEachAfter(t,r){// iterate over the items in reverse so that removing an item doesn't break things
let o=this._search(t);return this._iterate(r,o+1),this}/**
     * Iterate over everything in the array between the startTime and endTime.
     * The timerange is inclusive of the startTime, but exclusive of the endTime.
     * range = [startTime, endTime).
     * @param  startTime The time to check if items are before
     * @param  endTime The end of the test interval.
     * @param  callback The callback to invoke with every item
     */forEachBetween(t,r,o){let n=this._search(t),s=this._search(r);return -1!==n&&-1!==s?(this._timeline[n].time!==t&&(n+=1),this._timeline[s].time===r&&(s-=1),this._iterate(o,n,s)):-1===n&&this._iterate(o,0,s),this}/**
     * Iterate over everything in the array at or after the given time. Similar to
     * forEachAfter, but includes the item(s) at the given time.
     * @param  time The time to check if items are before
     * @param  callback The callback to invoke with every item
     */forEachFrom(t,r){// iterate over the items in reverse so that removing an item doesn't break things
let o=this._search(t);// work backwards until the event time is less than time
for(;o>=0&&this._timeline[o].time>=t;)o--;return this._iterate(r,o+1),this}/**
     * Iterate over everything in the array at the given time
     * @param  time The time to check if items are before
     * @param  callback The callback to invoke with every item
     */forEachAtTime(t,r){// iterate over the items in reverse so that removing an item doesn't break things
let o=this._search(t);if(-1!==o&&sm(this._timeline[o].time,t)){let n=o;for(let r=o;r>=0&&sm(this._timeline[r].time,t);r--)n=r;this._iterate(t=>{r(t)},n,o)}return this}/**
     * Clean up.
     */dispose(){return super.dispose(),this._timeline=[],this}}//-------------------------------------
// INITIALIZING NEW CONTEXT
//-------------------------------------
/**
 * Array of callbacks to invoke when a new context is created
 */const sg=[];function sv(t){sg.push(t)}/**
 * Array of callbacks to invoke when a new context is created
 */const sb=[];function s_(t){sb.push(t)}class sx extends sh{constructor(){super(...arguments),this.name="Emitter"}/**
     * Bind a callback to a specific event.
     * @param  event     The name of the event to listen for.
     * @param  callback  The callback to invoke when the event is emitted
     */on(t,r){// split the event
let o=t.split(/\W+/);return o.forEach(t=>{n5(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(r)}),this}/**
     * Bind a callback which is only invoked once
     * @param  event     The name of the event to listen for.
     * @param  callback  The callback to invoke when the event is emitted
     */once(t,r){let o=(...n)=>{// invoke the callback
r(...n),// remove the event
this.off(t,o)};return this.on(t,o),this}/**
     * Remove the event listener.
     * @param  event     The event to stop listening to.
     * @param  callback  The callback which was bound to the event with Emitter.on.
     *                   If no callback is given, all callbacks events are removed.
     */off(t,r){let o=t.split(/\W+/);return o.forEach(o=>{if(n5(this._events)&&(this._events={}),this._events.hasOwnProperty(t)){if(n5(r))this._events[t]=[];else{let o=this._events[t];for(let t=o.length-1;t>=0;t--)o[t]===r&&o.splice(t,1)}}}),this}/**
     * Invoke all of the callbacks bound to the event
     * with any arguments passed in.
     * @param  event  The name of the event.
     * @param args The arguments to pass to the functions listening.
     */emit(t,...r){if(this._events&&this._events.hasOwnProperty(t)){let o=this._events[t].slice(0);for(let t=0,n=o.length;t<n;t++)o[t].apply(this,r)}return this}/**
     * Add Emitter functions (on/off/emit) to the object
     */static mixin(t){// instance._events = {};
["on","once","off","emit"].forEach(r=>{let o=Object.getOwnPropertyDescriptor(sx.prototype,r);Object.defineProperty(t.prototype,r,o)})}/**
     * Clean up
     */dispose(){return super.dispose(),this._events=void 0,this}}class sj extends sx{constructor(){super(...arguments),this.isOffline=!1}/*
     * This is a placeholder so that JSON.stringify does not throw an error
     * This matches what JSON.stringify(audioContext) returns on a native
     * audioContext instance.
     */toJSON(){return{}}}class sw extends sj{constructor(){super(),this.name="Context",/**
         * An object containing all of the constants AudioBufferSourceNodes
         */this._constants=new Map,/**
         * All of the setTimeout events.
         */this._timeouts=new sy,/**
         * The timeout id counter
         */this._timeoutIds=0,/**
         * Private indicator if the context has been initialized
         */this._initialized=!1,/**
         * Indicates if the context is an OfflineAudioContext or an AudioContext
         */this.isOffline=!1,//--------------------------------------------
// AUDIO WORKLET
//--------------------------------------------
/**
         * Maps a module name to promise of the addModule method
         */this._workletModules=new Map;let t=su(sw.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=new nN({latencyHint:t.latencyHint}),this._ticker=new si(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),// fwd events from the context
this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}/**
     * Finish setting up the context. **You usually do not need to do this manually.**
     */initialize(){if(!this._initialized){var t;t=this,// add any additional modules
sg.forEach(r=>r(t)),this._initialized=!0}return this}//---------------------------
// BASE AUDIO CONTEXT METHODS
//---------------------------
createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,r,o){return this._context.createBuffer(t,r,o)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,r){// @ts-ignore
return this._context.createIIRFilter(t,r)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,r,o){return this._context.createPeriodicWave(t,r,o)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){nK(nZ(this._context),"Not available if OfflineAudioContext");let r=this._context;return r.createMediaStreamSource(t)}createMediaElementSource(t){nK(nZ(this._context),"Not available if OfflineAudioContext");let r=this._context;return r.createMediaElementSource(t)}createMediaStreamDestination(){nK(nZ(this._context),"Not available if OfflineAudioContext");let t=this._context;return t.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}/**
     * The current time in seconds of the AudioContext.
     */get currentTime(){return this._context.currentTime}/**
     * The current time in seconds of the AudioContext.
     */get state(){return this._context.state}/**
     * The current time in seconds of the AudioContext.
     */get sampleRate(){return this._context.sampleRate}/**
     * The listener
     */get listener(){return this.initialize(),this._listener}set listener(t){nK(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}/**
     * There is only one Transport per Context. It is created on initialization.
     */get transport(){return this.initialize(),this._transport}set transport(t){nK(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}/**
     * This is the Draw object for the context which is useful for synchronizing the draw frame with the Tone.js clock.
     */get draw(){return this.initialize(),this._draw}set draw(t){nK(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}/**
     * A reference to the Context's destination node.
     */get destination(){return this.initialize(),this._destination}set destination(t){nK(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}/**
     * Create an audio worklet node from a name and options. The module
     * must first be loaded using [[addAudioWorkletModule]].
     */createAudioWorkletNode(t,r){var o;return o=this.rawContext,nK(n4(nq),"This node only works in a secure context (https or localhost)"),new nq(o,t,r)}/**
     * Add an AudioWorkletProcessor module
     * @param url The url of the module
     * @param name The name of the module
     */addAudioWorkletModule(t,r){return ss(this,void 0,void 0,function*(){nK(n4(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(r)||this._workletModules.set(r,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(r)})}/**
     * Returns a promise which resolves when all of the worklets have been loaded on this context
     */workletsAreReady(){return ss(this,void 0,void 0,function*(){let t=[];this._workletModules.forEach(r=>t.push(r)),yield Promise.all(t)})}//---------------------------
// TICKER
//---------------------------
/**
     * How often the interval callback is invoked.
     * This number corresponds to how responsive the scheduling
     * can be. context.updateInterval + context.lookAhead gives you the
     * total latency between scheduling an event and hearing it.
     */get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}/**
     * What the source of the clock is, either "worker" (default),
     * "timeout", or "offline" (none).
     */get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}/**
     * The type of playback, which affects tradeoffs between audio
     * output latency and responsiveness.
     * In addition to setting the value in seconds, the latencyHint also
     * accepts the strings "interactive" (prioritizes low latency),
     * "playback" (prioritizes sustained playback), "balanced" (balances
     * latency and performance).
     * @example
     * // prioritize sustained playback
     * const context = new Tone.Context({ latencyHint: "playback" });
     * // set this context as the global Context
     * Tone.setContext(context);
     * // the global context is gettable with Tone.getContext()
     * console.log(Tone.getContext().latencyHint);
     */get latencyHint(){return this._latencyHint}/**
     * Update the lookAhead and updateInterval based on the latencyHint
     */_setLatencyHint(t){let r=0;if(this._latencyHint=t,se(t))switch(t){case"interactive":r=.1;break;case"playback":r=.5;break;case"balanced":r=.25}this.lookAhead=r,this.updateInterval=r/2}/**
     * The unwrapped AudioContext or OfflineAudioContext
     */get rawContext(){return this._context}/**
     * The current audio context time plus a short [[lookAhead]].
     */now(){return this._context.currentTime+this.lookAhead}/**
     * The current audio context time without the [[lookAhead]].
     * In most cases it is better to use [[now]] instead of [[immediate]] since
     * with [[now]] the [[lookAhead]] is applied equally to _all_ components including internal components,
     * to making sure that everything is scheduled in sync. Mixing [[now]] and [[immediate]]
     * can cause some timing issues. If no lookAhead is desired, you can set the [[lookAhead]] to `0`.
     */immediate(){return this._context.currentTime}/**
     * Starts the audio context from a suspended state. This is required
     * to initially start the AudioContext. See [[Tone.start]]
     */resume(){return nZ(this._context)?this._context.resume():Promise.resolve()}/**
     * Close the context. Once closed, the context can no longer be used and
     * any AudioNodes created from the context will be silent.
     */close(){return ss(this,void 0,void 0,function*(){if(nZ(this._context)&&(yield this._context.close()),this._initialized){var t;t=this,// add any additional modules
sb.forEach(r=>r(t))}})}/**
     * **Internal** Generate a looped buffer at some constant value.
     */getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let r=this._context.createBuffer(1,128,this._context.sampleRate),o=r.getChannelData(0);for(let r=0;r<o.length;r++)o[r]=t;let n=this._context.createBufferSource();return n.channelCount=1,n.channelCountMode="explicit",n.buffer=r,n.loop=!0,n.start(0),this._constants.set(t,n),n}}/**
     * Clean up. Also closes the audio context.
     */dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}//---------------------------
// TIMEOUTS
//---------------------------
/**
     * The private loop which keeps track of the context scheduled timeouts
     * Is invoked from the clock source
     */_timeoutLoop(){let t=this.now(),r=this._timeouts.peek();for(;this._timeouts.length&&r&&r.time<=t;)// invoke the callback
r.callback(),// shift the first event off
this._timeouts.shift(),// get the next one
r=this._timeouts.peek()}/**
     * A setTimeout which is guaranteed by the clock source.
     * Also runs in the offline context.
     * @param  fn       The callback to invoke
     * @param  timeout  The timeout in seconds
     * @returns ID to use when invoking Context.clearTimeout
     */setTimeout(t,r){this._timeoutIds++;let o=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:o+r}),this._timeoutIds}/**
     * Clears a previously scheduled timeout with Tone.context.setTimeout
     * @param  id  The ID returned from setTimeout
     */clearTimeout(t){return this._timeouts.forEach(r=>{r.id===t&&this._timeouts.remove(r)}),this}/**
     * Clear the function scheduled by [[setInterval]]
     */clearInterval(t){return this.clearTimeout(t)}/**
     * Adds a repeating event to the context's callback clock
     */setInterval(t,r){let o=++this._timeoutIds,n=()=>{let s=this.now();this._timeouts.add({callback:()=>{// invoke the callback
t(),// invoke the event to repeat it
n()},id:o,time:s+r})};return(// kick it off
n(),o)}}function sS(t,r){n9(r)?r.forEach(r=>sS(t,r)):Object.defineProperty(t,r,{enumerable:!0,writable:!1})}const sT=()=>{// no operation here!
};class sE extends sh{constructor(){super(),this.name="ToneAudioBuffer",/**
         * Callback when the buffer is loaded.
         */this.onload=sT;let t=su(sE.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&sa(t.url)||t.url instanceof sE?this.set(t.url):se(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:sT,onload:sT,reverse:!1}}/**
     * The sample rate of the AudioBuffer
     */get sampleRate(){return this._buffer?this._buffer.sampleRate:sA().sampleRate}/**
     * Pass in an AudioBuffer or ToneAudioBuffer to set the value of this buffer.
     */set(t){return t instanceof sE?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}/**
     * The audio buffer stored in the object.
     */get(){return this._buffer}/**
     * Makes an fetch request for the selected url then decodes the file as an audio buffer.
     * Invokes the callback once the audio buffer loads.
     * @param url The url of the buffer to load. filetype support depends on the browser.
     * @returns A Promise which resolves with this ToneAudioBuffer
     */load(t){return ss(this,void 0,void 0,function*(){let r=sE.load(t).then(t=>{this.set(t),// invoke the onload method
this.onload(this)});sE.downloads.push(r);try{yield r}finally{// remove the downloaded file
let t=sE.downloads.indexOf(r);sE.downloads.splice(t,1)}return this})}/**
     * clean up
     */dispose(){return super.dispose(),this._buffer=void 0,this}/**
     * Set the audio buffer from the array.
     * To create a multichannel AudioBuffer, pass in a multidimensional array.
     * @param array The array to fill the audio buffer
     */fromArray(t){let r=n9(t)&&t[0].length>0,o=r?t.length:1,n=r?t[0].length:t.length,s=sA(),i=s.createBuffer(o,n,s.sampleRate),a=r||1!==o?t:[t];for(let t=0;t<o;t++)i.copyToChannel(a[t],t);return this._buffer=i,this}/**
     * Sums multiple channels into 1 channel
     * @param chanNum Optionally only copy a single channel from the array.
     */toMono(t){if(n6(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length),r=this.numberOfChannels;for(let o=0;o<r;o++){let r=this.toArray(o);for(let o=0;o<r.length;o++)t[o]+=r[o]}// divide by the number of channels
t=t.map(t=>t/r),this.fromArray(t)}return this}/**
     * Get the buffer as an array. Single channel buffers will return a 1-dimensional
     * Float32Array, and multichannel buffers will return multidimensional arrays.
     * @param channel Optionally only copy a single channel from the array.
     */toArray(t){if(n6(t))return this.getChannelData(t);{if(1===this.numberOfChannels)return this.toArray(0);let t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}/**
     * Returns the Float32Array representing the PCM audio data for the specific channel.
     * @param  channel  The channel number to return
     * @return The audio as a TypedArray
     */getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}/**
     * Cut a subsection of the array and return a buffer of the
     * subsection. Does not modify the original buffer
     * @param start The time to start the slice
     * @param end The end time to slice. If none is given will default to the end of the buffer
     */slice(t,r=this.duration){let o=Math.floor(t*this.sampleRate),n=Math.floor(r*this.sampleRate);nK(o<n,"The start time must be less than the end time");let s=n-o,i=sA().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)i.copyToChannel(this.getChannelData(t).subarray(o,n),t);return new sE(i)}/**
     * Reverse the buffer.
     */_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}/**
     * If the buffer is loaded or not
     */get loaded(){return this.length>0}/**
     * The duration of the buffer in seconds.
     */get duration(){return this._buffer?this._buffer.duration:0}/**
     * The length of the buffer in samples
     */get length(){return this._buffer?this._buffer.length:0}/**
     * The number of discrete audio channels. Returns 0 if no buffer is loaded.
     */get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}/**
     * Reverse the buffer.
     */get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}/**
     * Create a ToneAudioBuffer from the array. To create a multichannel AudioBuffer,
     * pass in a multidimensional array.
     * @param array The array to fill the audio buffer
     * @return A ToneAudioBuffer created from the array
     */static fromArray(t){return new sE().fromArray(t)}/**
     * Creates a ToneAudioBuffer from a URL, returns a promise which resolves to a ToneAudioBuffer
     * @param  url The url to load.
     * @return A promise which resolves to a ToneAudioBuffer
     */static fromUrl(t){return ss(this,void 0,void 0,function*(){let r=new sE;return yield r.load(t)})}/**
     * Loads a url using fetch and returns the AudioBuffer.
     */static load(t){return ss(this,void 0,void 0,function*(){// test if the url contains multiple extensions
let r=t.match(/\[([^\]\[]+\|.+)\]$/);if(r){let o=r[1].split("|"),n=o[0];for(let t of o)if(sE.supportsType(t)){n=t;break}t=t.replace(r[0],n)}// make sure there is a slash between the baseUrl and the url
let o=""===sE.baseUrl||sE.baseUrl.endsWith("/")?sE.baseUrl:sE.baseUrl+"/",n=yield fetch(o+t);if(!n.ok)throw Error(`could not load url: ${t}`);let s=yield n.arrayBuffer(),i=yield sA().decodeAudioData(s);return i})}/**
     * Checks a url's extension to see if the current browser can play that file type.
     * @param url The url/extension to test
     * @return If the file extension can be played
     * @static
     * @example
     * Tone.ToneAudioBuffer.supportsType("wav"); // returns true
     * Tone.ToneAudioBuffer.supportsType("path/to/file.wav"); // returns true
     */static supportsType(t){let r=t.split("."),o=r[r.length-1],n=document.createElement("audio").canPlayType("audio/"+o);return""!==n}/**
     * Returns a Promise which resolves when all of the buffers have loaded
     */static loaded(){return ss(this,void 0,void 0,function*(){for(// this makes sure that the function is always async
yield Promise.resolve();sE.downloads.length;)yield sE.downloads[0]})}}//-------------------------------------
// STATIC METHODS
//-------------------------------------
/**
 * A path which is prefixed before every url.
 */sE.baseUrl="",/**
 * All of the downloads
 */sE.downloads=[];class sk extends sw{constructor(){var t,r,o,n,s,i;super({clockSource:"offline",context:(t=arguments[0],n$(t))?arguments[0]:(r=arguments[0],o=arguments[1]*arguments[2],n=arguments[2],new nY(r,o,n)),lookAhead:0,updateInterval:(s=arguments[0],n$(s))?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",/**
         * An artificial clock source
         */this._currentTime=0,this.isOffline=!0,i=arguments[0],this._duration=n$(i)?arguments[0].length/arguments[0].sampleRate:arguments[1]}/**
     * Override the now method to point to the internal clock time
     */now(){return this._currentTime}/**
     * Same as this.now()
     */get currentTime(){return this._currentTime}/**
     * Render just the clock portion of the audio context.
     */_renderClock(t){return ss(this,void 0,void 0,function*(){let r=0;for(;this._duration-this._currentTime>=0;){// invoke all the callbacks on that time
this.emit("tick"),// increment the clock in block-sized chunks
this._currentTime+=128/this.sampleRate,// yield once a second of audio
r++;let o=Math.floor(this.sampleRate/128);t&&r%o==0&&(yield new Promise(t=>setTimeout(t,1)))}})}/**
     * Render the output of the OfflineContext
     * @param asynchronous If the clock should be rendered asynchronously, which will not block the main thread, but be slightly slower.
     */render(t=!0){return ss(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);let r=yield this._context.startRendering();return new sE(r)})}/**
     * Close the context
     */close(){return Promise.resolve()}}/**
 * This dummy context is used to avoid throwing immediate errors when importing in Node.js
 */const sM=new class extends sj{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}//---------------------------
// BASE AUDIO CONTEXT METHODS
//---------------------------
createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,r,o){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,r){return{}}createPanner(){return{}}createPeriodicWave(t,r,o){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}//---------------------------
// TONE AUDIO CONTEXT METHODS
//---------------------------
createAudioWorkletNode(t,r){return{}}get rawContext(){return{}}addAudioWorkletModule(t,r){return ss(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,r){return 0}clearTimeout(t){return this}setInterval(t,r){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};/**
 * The global audio context which is getable and assignable through
 * getContext and setContext
 */let sC=sM;function sA(){var t;return sC===sM&&so&&(sC=nZ(t=new sw)?new sw(t):n$(t)?new sk(t):t),sC}function sO(){return sC.resume()}/**
 * Log Tone.js + version in the console.
 */if(sr&&!sr.TONE_SILENCE_LOGGING){let t=` * Tone.js v${tx} * `;// eslint-disable-next-line no-console
console.log(`%c${t}`,"background: #000; color: #fff")}function sR(t){return Math.pow(2,t/12)}/**
 * The Global [concert tuning pitch](https://en.wikipedia.org/wiki/Concert_pitch) which is used
 * to generate all the other pitch values from notes. A4's values in Hertz.
 */let sP=440;function sL(t){return Math.round(sI(t))}function sI(t){return 69+12*Math.log2(t/sP)}function sD(t){return sP*Math.pow(2,(t-69)/12)}class sF extends sh{/**
     * @param context The context associated with the time value. Used to compute
     * Transport and context-relative timing.
     * @param  value  The time value as a number, string or object
     * @param  units  Unit values
     */constructor(t,r,o){super(),/**
         * The default units
         */this.defaultUnits="s",this._val=r,this._units=o,this.context=t,this._expressions=this._getExpressions()}/**
     * All of the time encoding expressions
     */_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,r)=>{let o=parseInt(t,10),n="."===r?1.5:1;return 1===o?this._beatsToUnits(this._getTimeSignature())*n:this._beatsToUnits(4/o)*n},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{let r=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(r)))},regexp:/^(\d+)t$/i},tr:{method:(t,r,o)=>{let n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),r&&"0"!==r&&(n+=this._beatsToUnits(parseFloat(r))),o&&"0"!==o&&(n+=this._beatsToUnits(parseFloat(o)/4)),n},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}//-------------------------------------
// 	VALUE OF
//-------------------------------------
/**
     * Evaluate the time value. Returns the time in seconds.
     */valueOf(){if(this._val instanceof sF&&this.fromType(this._val),n5(this._val))return this._noArg();if(se(this._val)&&n5(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(n8(this._val)){let t=0;for(let r in this._val)if(n4(this._val[r])){let o=this._val[r],n=new this.constructor(this.context,r).valueOf()*o;t+=n}return t}if(n4(this._units)){let t=this._expressions[this._units],r=this._val.toString().trim().match(t.regexp);return r?t.method.apply(this,r.slice(1)):t.method.call(this,this._val)}return se(this._val)?parseFloat(this._val):this._val}//-------------------------------------
// 	UNIT CONVERSIONS
//-------------------------------------
/**
     * Returns the value of a frequency in the current units
     */_frequencyToUnits(t){return 1/t}/**
     * Return the value of the beats in the current units
     */_beatsToUnits(t){return 60/this._getBpm()*t}/**
     * Returns the value of a second in the current units
     */_secondsToUnits(t){return t}/**
     * Returns the value of a tick in the current time units
     */_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}/**
     * With no arguments, return 'now'
     */_noArg(){return this._now()}//-------------------------------------
// 	TEMPO CONVERSIONS
//-------------------------------------
/**
     * Return the bpm
     */_getBpm(){return this.context.transport.bpm.value}/**
     * Return the timeSignature
     */_getTimeSignature(){return this.context.transport.timeSignature}/**
     * Return the PPQ or 192 if Transport is not available
     */_getPPQ(){return this.context.transport.PPQ}//-------------------------------------
// 	CONVERSION INTERFACE
//-------------------------------------
/**
     * Coerce a time type into this units type.
     * @param type Any time type units
     */fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}/**
     * Return the value in hertz
     */toFrequency(){return 1/this.toSeconds()}/**
     * Return the time in samples
     */toSamples(){return this.toSeconds()*this.context.sampleRate}/**
     * Return the time in milliseconds.
     */toMilliseconds(){return 1e3*this.toSeconds()}}class sN extends sF{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{let r=new sN(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(r))},regexp:/^@(.+)/}})}/**
     * Quantize the time by the given subdivision. Optionally add a
     * percentage which will move the time value towards the ideal
     * quantized value by that percentage.
     * @param  subdiv    The subdivision to quantize to
     * @param  percent  Move the time value towards the quantized value by a percentage.
     * @example
     * Tone.Time(21).quantize(2); // returns 22
     * Tone.Time(0.6).quantize("4n", 0.5); // returns 0.55
     */quantize(t,r=1){let o=new this.constructor(this.context,t).valueOf(),n=this.valueOf();return n+(Math.round(n/o)*o-n)*r}//-------------------------------------
// CONVERSIONS
//-------------------------------------
/**
     * Convert a Time to Notation. The notation values are will be the
     * closest representation between 1m to 128th note.
     * @return {Notation}
     * @example
     * // if the Transport is at 120bpm:
     * Tone.Time(2).toNotation(); // returns "1m"
     */toNotation(){let t=this.toSeconds(),r=["1m"];for(let t=1;t<9;t++){let o=Math.pow(2,t);r.push(o+"n."),r.push(o+"n"),r.push(o+"t")}r.push("0");// find the closets notation representation
let o=r[0],n=new sN(this.context,r[0]).toSeconds();return r.forEach(r=>{let s=new sN(this.context,r).toSeconds();Math.abs(s-t)<Math.abs(n-t)&&(o=r,n=s)}),o}/**
     * Return the time encoded as Bars:Beats:Sixteenths.
     */toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),r=this.valueOf()/t;r=parseFloat(r.toFixed(4));let o=Math.floor(r/this._getTimeSignature()),n=r%1*4;r=Math.floor(r)%this._getTimeSignature();let s=n.toString();s.length>3&&(n=parseFloat(parseFloat(s).toFixed(3)));let i=[o,r,n];return i.join(":")}/**
     * Return the time in ticks.
     */toTicks(){let t=this._beatsToUnits(1),r=this.valueOf()/t;return Math.round(r*this._getPPQ())}/**
     * Return the time in seconds.
     */toSeconds(){return this.valueOf()}/**
     * Return the value as a midi note.
     */toMidi(){return sL(this.toFrequency())}_now(){return this.context.now()}}class sU extends sN{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}/**
     * The [concert tuning pitch](https://en.wikipedia.org/wiki/Concert_pitch) which is used
     * to generate all the other pitch values from notes. A4's values in Hertz.
     */static get A4(){return sP}static set A4(t){sP=t}//-------------------------------------
// 	AUGMENT BASE EXPRESSIONS
//-------------------------------------
_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:sU.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,r){let o=sB[t.toLowerCase()],n=o+(parseInt(r,10)+1)*12;return"midi"===this.defaultUnits?n:sU.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,r,o){let n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),r&&"0"!==r&&(n*=this._beatsToUnits(parseFloat(r))),o&&"0"!==o&&(n*=this._beatsToUnits(parseFloat(o)/4)),n}}})}//-------------------------------------
// 	EXPRESSIONS
//-------------------------------------
/**
     * Transposes the frequency by the given number of semitones.
     * @return  A new transposed frequency
     * @example
     * Tone.Frequency("A4").transpose(3); // "C5"
     */transpose(t){return new sU(this.context,this.valueOf()*sR(t))}/**
     * Takes an array of semitone intervals and returns
     * an array of frequencies transposed by those intervals.
     * @return  Returns an array of Frequencies
     * @example
     * Tone.Frequency("A4").harmonize([0, 3, 7]); // ["A4", "C5", "E5"]
     */harmonize(t){return t.map(t=>this.transpose(t))}//-------------------------------------
// 	UNIT CONVERSIONS
//-------------------------------------
/**
     * Return the value of the frequency as a MIDI note
     * @example
     * Tone.Frequency("C4").toMidi(); // 60
     */toMidi(){return sL(this.valueOf())}/**
     * Return the value of the frequency in Scientific Pitch Notation
     * @example
     * Tone.Frequency(69, "midi").toNote(); // "A4"
     */toNote(){let t=this.toFrequency(),r=Math.log2(t/sU.A4),o=Math.round(12*r)+57,n=Math.floor(o/12);n<0&&(o+=-12*n);let s=sV[o%12];return s+n.toString()}/**
     * Return the duration of one cycle in seconds.
     */toSeconds(){return 1/super.toSeconds()}/**
     * Return the duration of one cycle in ticks
     */toTicks(){let t=this._beatsToUnits(1),r=this.valueOf()/t;return Math.floor(r*this._getPPQ())}//-------------------------------------
// 	UNIT CONVERSIONS HELPERS
//-------------------------------------
/**
     * With no arguments, return 0
     */_noArg(){return 0}/**
     * Returns the value of a frequency in the current units
     */_frequencyToUnits(t){return t}/**
     * Returns the value of a tick in the current time units
     */_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}/**
     * Return the value of the beats in the current units
     */_beatsToUnits(t){return 1/super._beatsToUnits(t)}/**
     * Returns the value of a second in the current units
     */_secondsToUnits(t){return 1/t}/**
     * Convert a MIDI note to frequency value.
     * @param  midi The midi number to convert.
     * @return The corresponding frequency value
     */static mtof(t){return sD(t)}/**
     * Convert a frequency value to a MIDI note.
     * @param frequency The value to frequency value to convert.
     */static ftom(t){return sL(t)}}//-------------------------------------
// 	FREQUENCY CONVERSIONS
//-------------------------------------
/**
 * Note to scale index.
 * @hidden
 */const sB={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},sV=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function sG(t,r){return new sU(sA(),t,r)}class sH extends sN{constructor(){super(...arguments),this.name="TransportTime"}/**
     * Return the current time in whichever context is relevant
     */_now(){return this.context.transport.seconds}}class sz extends sh{constructor(){super();let t=su(sz.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:sA()}}/**
     * Return the current time of the Context clock plus the lookAhead.
     * @example
     * setInterval(() => {
     * 	console.log(Tone.now());
     * }, 100);
     */now(){return this.context.currentTime+this.context.lookAhead}/**
     * Return the current time of the Context clock without any lookAhead.
     * @example
     * setInterval(() => {
     * 	console.log(Tone.immediate());
     * }, 100);
     */immediate(){return this.context.currentTime}/**
     * The duration in seconds of one sample.
     * @example
     * console.log(Tone.Transport.sampleTime);
     */get sampleTime(){return 1/this.context.sampleRate}/**
     * The number of seconds of 1 processing block (128 samples)
     * @example
     * console.log(Tone.Destination.blockTime);
     */get blockTime(){return 128/this.context.sampleRate}/**
     * Convert the incoming time to seconds.
     * This is calculated against the current [[Tone.Transport]] bpm
     * @example
     * const gain = new Tone.Gain();
     * setInterval(() => console.log(gain.toSeconds("4n")), 100);
     * // ramp the tempo to 60 bpm over 30 seconds
     * Tone.getTransport().bpm.rampTo(60, 30);
     */toSeconds(t){return new sN(this.context,t).toSeconds()}/**
     * Convert the input to a frequency number
     * @example
     * const gain = new Tone.Gain();
     * console.log(gain.toFrequency("4n"));
     */toFrequency(t){return new sU(this.context,t).toFrequency()}/**
     * Convert the input time into ticks
     * @example
     * const gain = new Tone.Gain();
     * console.log(gain.toTicks("4n"));
     */toTicks(t){return new sH(this.context,t).toTicks()}//-------------------------------------
// 	GET/SET
//-------------------------------------
/**
     * Get a subset of the properties which are in the partial props
     */_getPartialProperties(t){let r=this.get();return(// remove attributes from the prop that are not in the partial
Object.keys(r).forEach(o=>{n5(t[o])&&delete r[o]}),r)}/**
     * Get the object's attributes.
     * @example
     * const osc = new Tone.Oscillator();
     * console.log(osc.get());
     */get(){let t=this.constructor.getDefaults();return Object.keys(t).forEach(r=>{if(Reflect.has(this,r)){let o=this[r];n4(o)&&n4(o.value)&&n4(o.setValueAtTime)?t[r]=o.value:o instanceof sz?t[r]=o._getPartialProperties(t[r]):n9(o)||n6(o)||se(o)||n7(o)?t[r]=o:delete t[r]}}),t}/**
     * Set multiple properties at once with an object.
     * @example
     * const filter = new Tone.Filter().toDestination();
     * // set values using an object
     * filter.set({
     * 	frequency: "C6",
     * 	type: "highpass"
     * });
     * const player = new Tone.Player("https://tonejs.github.io/audio/berklee/Analogsynth_octaves_highmid.mp3").connect(filter);
     * player.autostart = true;
     */set(t){return Object.keys(t).forEach(r=>{Reflect.has(this,r)&&n4(this[r])&&(this[r]&&n4(this[r].value)&&n4(this[r].setValueAtTime)?this[r].value!==t[r]&&(this[r].value=t[r]):this[r]instanceof sz?this[r].set(t[r]):this[r]=t[r])}),this}}class sq extends sy{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}/**
     * Returns the scheduled state scheduled before or at
     * the given time.
     * @param  time  The time to query.
     * @return  The name of the state input in setStateAtTime.
     */getValueAtTime(t){let r=this.get(t);return null!==r?r.state:this._initial}/**
     * Add a state to the timeline.
     * @param  state The name of the state to set.
     * @param  time  The time to query.
     * @param options Any additional options that are needed in the timeline.
     */setStateAtTime(t,r,o){return n0(r,0),this.add(Object.assign({},o,{state:t,time:r})),this}/**
     * Return the event before the time with the given state
     * @param  state The state to look for
     * @param  time  When to check before
     * @return  The event with the given state before the time
     */getLastState(t,r){// time = this.toSeconds(time);
let o=this._search(r);for(let r=o;r>=0;r--){let o=this._timeline[r];if(o.state===t)return o}}/**
     * Return the event after the time with the given state
     * @param  state The state to look for
     * @param  time  When to check from
     * @return  The event with the given state after the time
     */getNextState(t,r){// time = this.toSeconds(time);
let o=this._search(r);if(-1!==o)for(let r=o;r<this._timeline.length;r++){let o=this._timeline[r];if(o.state===t)return o}}}class sW extends sz{constructor(){super(su(sW.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,/**
         * The minimum output value
         */this._minOutput=1e-7;let t=su(sW.getDefaults(),arguments,["param","units","convert"]);for(nK(n4(t.param)&&(nJ(t.param)||t.param instanceof sW),"param must be an AudioParam");!nJ(t.param);)t.param=t.param._param;this._swappable=!!n4(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),// initialize
this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new sy(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,n4(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(sz.getDefaults(),{convert:!0,units:"number"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return(// if it's not the default minValue, return it
n4(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue)}get maxValue(){return n4(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}/**
     * Type guard based on the unit name
     */_is(t,r){return this.units===r}/**
     * Make sure the value is always in the defined range
     */_assertRange(t){return n4(this.maxValue)&&n4(this.minValue)&&n0(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}/**
     * Convert the given value from the type specified by Param.units
     * into the destination value (such as Gain or Frequency).
     */_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Math.pow(10,t/20):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}/**
     * Convert the parameters value into the units specified by Param.units.
     */_toType(t){return this.convert&&"decibels"===this.units?20*(Math.log(t)/Math.LN10):t}//-------------------------------------
// ABSTRACT PARAM INTERFACE
// all docs are generated from ParamInterface.ts
//-------------------------------------
setValueAtTime(t,r){let o=this.toSeconds(r),n=this._fromType(t);return nK(isFinite(n)&&isFinite(o),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(r)}`),this._assertRange(n),this.log(this.units,"setValueAtTime",t,o),this._events.add({time:o,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,o),this}getValueAtTime(t){let r=Math.max(this.toSeconds(t),0),o=this._events.getAfter(r),n=this._events.get(r),s=this._initialValue;// if it was set by
if(null===n)s=this._initialValue;else if("setTargetAtTime"===n.type&&(null===o||"setValueAtTime"===o.type)){let t;let o=this._events.getBefore(n.time);t=null===o?this._initialValue:o.value,"setTargetAtTime"===n.type&&(s=this._exponentialApproach(n.time,t,n.value,n.constant,r))}else if(null===o)s=n.value;else if("linearRampToValueAtTime"===o.type||"exponentialRampToValueAtTime"===o.type){let t=n.value;if("setTargetAtTime"===n.type){let r=this._events.getBefore(n.time);t=null===r?this._initialValue:r.value}s="linearRampToValueAtTime"===o.type?this._linearInterpolate(n.time,t,o.time,o.value,r):this._exponentialInterpolate(n.time,t,o.time,o.value,r)}else s=n.value;return this._toType(s)}setRampPoint(t){t=this.toSeconds(t);let r=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(r)&&(r=this._toType(this._minOutput)),this.setValueAtTime(r,t),this}linearRampToValueAtTime(t,r){let o=this._fromType(t),n=this.toSeconds(r);return nK(isFinite(o)&&isFinite(n),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(r)}`),this._assertRange(o),this._events.add({time:n,type:"linearRampToValueAtTime",value:o}),this.log(this.units,"linearRampToValueAtTime",t,n),this._param.linearRampToValueAtTime(o,n),this}exponentialRampToValueAtTime(t,r){let o=this._fromType(t);// the value can't be 0
o=sm(o,0)?this._minOutput:o,this._assertRange(o);let n=this.toSeconds(r);return nK(isFinite(o)&&isFinite(n),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(r)}`),// store the event
this._events.add({time:n,type:"exponentialRampToValueAtTime",value:o}),this.log(this.units,"exponentialRampToValueAtTime",t,n),this._param.exponentialRampToValueAtTime(o,n),this}exponentialRampTo(t,r,o){return o=this.toSeconds(o),this.setRampPoint(o),this.exponentialRampToValueAtTime(t,o+this.toSeconds(r)),this}linearRampTo(t,r,o){return o=this.toSeconds(o),this.setRampPoint(o),this.linearRampToValueAtTime(t,o+this.toSeconds(r)),this}targetRampTo(t,r,o){return o=this.toSeconds(o),this.setRampPoint(o),this.exponentialApproachValueAtTime(t,o,r),this}exponentialApproachValueAtTime(t,r,o){r=this.toSeconds(r),o=this.toSeconds(o);let n=Math.log(o+1)/Math.log(200);return this.setTargetAtTime(t,r,n),// at 90% start a linear ramp to the final value
this.cancelAndHoldAtTime(r+.9*o),this.linearRampToValueAtTime(t,r+o),this}setTargetAtTime(t,r,o){let n=this._fromType(t);nK(isFinite(o)&&o>0,"timeConstant must be a number greater than 0");let s=this.toSeconds(r);return this._assertRange(n),nK(isFinite(n)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(r)}`),this._events.add({constant:o,time:s,type:"setTargetAtTime",value:n}),this.log(this.units,"setTargetAtTime",t,s,o),this._param.setTargetAtTime(n,s,o),this}setValueCurveAtTime(t,r,o,n=1){o=this.toSeconds(o),r=this.toSeconds(r);let s=this._fromType(t[0])*n;this.setValueAtTime(this._toType(s),r);let i=o/(t.length-1);for(let o=1;o<t.length;o++){let s=this._fromType(t[o])*n;this.linearRampToValueAtTime(this._toType(s),r+o*i)}return this}cancelScheduledValues(t){let r=this.toSeconds(t);return nK(isFinite(r),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(r),this._param.cancelScheduledValues(r),this.log(this.units,"cancelScheduledValues",r),this}cancelAndHoldAtTime(t){let r=this.toSeconds(t),o=this._fromType(this.getValueAtTime(r));nK(isFinite(r),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",r,"value="+o);// if there is an event at the given computedTime
// and that even is not a "set"
let n=this._events.get(r),s=this._events.getAfter(r);return n&&sm(n.time,r)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(r),this._events.cancel(r+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),// cancel the next event(s)
this._events.cancel(s.time),"linearRampToValueAtTime"===s.type?this.linearRampToValueAtTime(this._toType(o),r):"exponentialRampToValueAtTime"===s.type&&this.exponentialRampToValueAtTime(this._toType(o),r)),// set the value at the given time
this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}rampTo(t,r=.1,o){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,r,o):this.linearRampTo(t,r,o),this}/**
     * Apply all of the previously scheduled events to the passed in Param or AudioParam.
     * The applied values will start at the context's current time and schedule
     * all of the events which are scheduled on this Param onto the passed in param.
     */apply(t){let r=this.context.currentTime;// set the param's value at the current time and schedule everything else
t.setValueAtTime(this.getValueAtTime(r),r);// if the previous event was a curve, then set the rest of it
let o=this._events.get(r);if(o&&"setTargetAtTime"===o.type){// approx it until the next event with linear ramps
let n=this._events.getAfter(o.time),s=n?n.time:r+2,i=(s-r)/10;for(let o=r;o<s;o+=i)t.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,r=>{"cancelScheduledValues"===r.type?t.cancelScheduledValues(r.time):"setTargetAtTime"===r.type?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}/**
     * Replace the Param's internal AudioParam. Will apply scheduled curves
     * onto the parameter and replace the connections.
     */setParam(t){nK(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let r=this.input;return r.disconnect(this._param),this.apply(t),this._param=t,r.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}//-------------------------------------
// 	AUTOMATION CURVE CALCULATIONS
// 	MIT License, copyright (c) 2014 Jordan Santell
//-------------------------------------
// Calculates the the value along the curve produced by setTargetAtTime
_exponentialApproach(t,r,o,n,s){return o+(r-o)*Math.exp(-(s-t)/n)}// Calculates the the value along the curve produced by linearRampToValueAtTime
_linearInterpolate(t,r,o,n,s){return r+(n-r)*((s-t)/(o-t))}// Calculates the the value along the curve produced by exponentialRampToValueAtTime
_exponentialInterpolate(t,r,o,n,s){return r*Math.pow(n/r,(s-t)/(o-t))}}class sX extends sz{constructor(){super(...arguments),/**
         * The name of the class
         */this.name="ToneAudioNode",/**
         * List all of the node that must be set to match the ChannelProperties
         */this._internalChannels=[]}/**
     * The number of inputs feeding into the AudioNode.
     * For source nodes, this will be 0.
     * @example
     * const node = new Tone.Gain();
     * console.log(node.numberOfInputs);
     */get numberOfInputs(){return n4(this.input)?nJ(this.input)||this.input instanceof sW?1:this.input.numberOfInputs:0}/**
     * The number of outputs of the AudioNode.
     * @example
     * const node = new Tone.Gain();
     * console.log(node.numberOfOutputs);
     */get numberOfOutputs(){return n4(this.output)?this.output.numberOfOutputs:0}//-------------------------------------
// AUDIO PROPERTIES
//-------------------------------------
/**
     * Used to decide which nodes to get/set properties on
     */_isAudioNode(t){return n4(t)&&(t instanceof sX||nQ(t))}/**
     * Get all of the audio nodes (either internal or input/output) which together
     * make up how the class node responds to channel input/output
     */_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}/**
     * Set the audio options for this node such as channelInterpretation
     * channelCount, etc.
     * @param options
     */_setChannelProperties(t){let r=this._getInternalNodes();r.forEach(r=>{r.channelCount=t.channelCount,r.channelCountMode=t.channelCountMode,r.channelInterpretation=t.channelInterpretation})}/**
     * Get the current audio options for this node such as channelInterpretation
     * channelCount, etc.
     */_getChannelProperties(){let t=this._getInternalNodes();nK(t.length>0,"ToneAudioNode does not have any internal nodes");// use the first node to get properties
// they should all be the same
let r=t[0];return{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation}}/**
     * channelCount is the number of channels used when up-mixing and down-mixing
     * connections to any inputs to the node. The default value is 2 except for
     * specific nodes where its value is specially determined.
     */get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let r=this._getChannelProperties();// merge it with the other properties
this._setChannelProperties(Object.assign(r,{channelCount:t}))}/**
     * channelCountMode determines how channels will be counted when up-mixing and
     * down-mixing connections to any inputs to the node.
     * The default value is "max". This attribute has no effect for nodes with no inputs.
     * * "max" - computedNumberOfChannels is the maximum of the number of channels of all connections to an input. In this mode channelCount is ignored.
     * * "clamped-max" - computedNumberOfChannels is determined as for "max" and then clamped to a maximum value of the given channelCount.
     * * "explicit" - computedNumberOfChannels is the exact value as specified by the channelCount.
     */get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let r=this._getChannelProperties();// merge it with the other properties
this._setChannelProperties(Object.assign(r,{channelCountMode:t}))}/**
     * channelInterpretation determines how individual channels will be treated
     * when up-mixing and down-mixing connections to any inputs to the node.
     * The default value is "speakers".
     */get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let r=this._getChannelProperties();// merge it with the other properties
this._setChannelProperties(Object.assign(r,{channelInterpretation:t}))}//-------------------------------------
// CONNECTIONS
//-------------------------------------
/**
     * connect the output of a ToneAudioNode to an AudioParam, AudioNode, or ToneAudioNode
     * @param destination The output to connect to
     * @param outputNum The output to connect from
     * @param inputNum The input to connect to
     */connect(t,r=0,o=0){return sZ(this,t,r,o),this}/**
     * Connect the output to the context's destination node.
     * @example
     * const osc = new Tone.Oscillator("C2").start();
     * osc.toDestination();
     */toDestination(){return this.connect(this.context.destination),this}/**
     * Connect the output to the context's destination node.
     * See [[toDestination]]
     * @deprecated
     */toMaster(){return n3("toMaster() has been renamed toDestination()"),this.toDestination()}/**
     * disconnect the output
     */disconnect(t,r=0,o=0){return function(t,r,o=0,n=0){// resolve the destination node
if(n4(r))for(;r instanceof sX;)r=r.input;// resolve the src node
for(;!nQ(t);)n4(t.output)&&(t=t.output);nJ(r)?t.disconnect(r,o):nQ(r)?t.disconnect(r,o,n):t.disconnect()}(this,t,r,o),this}/**
     * Connect the output of this node to the rest of the nodes in series.
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/drum-samples/handdrum-loop.mp3");
     * player.autostart = true;
     * const filter = new Tone.AutoFilter(4).start();
     * const distortion = new Tone.Distortion(0.5);
     * // connect the player to the filter, distortion and then to the master output
     * player.chain(filter, distortion, Tone.Destination);
     */chain(...t){return sY(this,...t),this}/**
     * connect the output of this node to the rest of the nodes in parallel.
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/drum-samples/conga-rhythm.mp3");
     * player.autostart = true;
     * const pitchShift = new Tone.PitchShift(4).toDestination();
     * const filter = new Tone.Filter("G5").toDestination();
     * // connect a node to the pitch shift and filter in parallel
     * player.fan(pitchShift, filter);
     */fan(...t){return t.forEach(t=>this.connect(t)),this}/**
     * Dispose and disconnect
     */dispose(){return super.dispose(),n4(this.input)&&(this.input instanceof sX?this.input.dispose():nQ(this.input)&&this.input.disconnect()),n4(this.output)&&(this.output instanceof sX?this.output.dispose():nQ(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function sY(...t){let r=t.shift();t.reduce((t,r)=>(t instanceof sX?t.connect(r):nQ(t)&&sZ(t,r),r),r)}function sZ(t,r,o=0,n=0){// resolve the input of the dstNode
for(nK(n4(t),"Cannot connect from undefined node"),nK(n4(r),"Cannot connect to undefined node"),(r instanceof sX||nQ(r))&&nK(r.numberOfInputs>0,"Cannot connect to node with no inputs"),nK(t.numberOfOutputs>0,"Cannot connect from node with no outputs");r instanceof sX||r instanceof sW;)n4(r.input)&&(r=r.input);for(;t instanceof sX;)n4(t.output)&&(t=t.output);nJ(r)?t.connect(r,o):t.connect(r,o,n)}class sQ extends sX{constructor(){super(su(sQ.getDefaults(),arguments,["gain","units"])),this.name="Gain",/**
         * The wrapped GainNode.
         */this._gainNode=this.context.createGain(),// input = output
this.input=this._gainNode,this.output=this._gainNode;let t=su(sQ.getDefaults(),arguments,["gain","units"]);this.gain=new sW({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),sS(this,"gain")}static getDefaults(){return Object.assign(sX.getDefaults(),{convert:!0,gain:1,units:"gain"})}/**
     * Clean up.
     */dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class sJ extends sX{constructor(t){super(t),/**
         * The callback to invoke after the
         * source is done playing.
         */this.onended=sT,/**
         * The start time
         */this._startTime=-1,/**
         * The stop time
         */this._stopTime=-1,/**
         * The id of the timeout
         */this._timeout=-1,/**
         * The public output node
         */this.output=new sQ({context:this.context,gain:0}),/**
         * The output gain node.
         */this._gainNode=this.output,/**
         * Get the playback state at the given time
         */this.getStateAtTime=function(t){let r=this.toSeconds(t);return -1!==this._startTime&&r>=this._startTime&&(-1===this._stopTime||r<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(sX.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:sT})}/**
     * Start the source at the given time
     * @param  time When to start the source
     */_startGain(t,r=1){nK(-1===this._startTime,"Source cannot be started more than once");// apply a fade in envelope
let o=this.toSeconds(this._fadeIn);return(// record the start time
this._startTime=t+o,this._startTime=Math.max(this._startTime,this.context.currentTime),o>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(r,t+o):this._gainNode.gain.exponentialApproachValueAtTime(r,t,o)):this._gainNode.gain.setValueAtTime(r,t),this)}/**
     * Stop the source node at the given time.
     * @param time When to stop the source
     */stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}/**
     * Stop the source at the given time
     * @param  time When to stop the source
     */_stopGain(t){nK(-1!==this._startTime,"'start' must be called before 'stop'"),// cancel the previous stop
this.cancelStop();// the fadeOut time
let r=this.toSeconds(this._fadeOut);return(// schedule the stop callback
this._stopTime=this.toSeconds(t)+r,this._stopTime=Math.max(this._stopTime,this.context.currentTime),r>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,r,t):this._gainNode.gain.targetRampTo(0,r,t):(// stop any ongoing ramps, and set the value to 0
this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{// allow additional time for the exponential curve to fully decay
let t="exponential"===this._curve?2*r:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this)}/**
     * Invoke the onended callback
     */_onended(){if(this.onended!==sT&&(this.onended(this),// overwrite onended to make sure it only is called once
this.onended=sT,!this.context.isOffline)){let t=()=>this.dispose();// @ts-ignore
void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}/**
     * Get the playback state at the current time
     */get state(){return this.getStateAtTime(this.now())}/**
     * Cancel a scheduled stop event
     */cancelStop(){return this.log("cancelStop"),nK(-1!==this._startTime,"Source is not started"),// cancel the stop envelope
this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class s$ extends sJ{constructor(){super(su(s$.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",/**
         * The signal generator
         */this._source=this.context.createConstantSource();let t=su(s$.getDefaults(),arguments,["offset"]);sZ(this._source,this._gainNode),this.offset=new sW({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(sJ.getDefaults(),{convert:!0,offset:1,units:"number"})}/**
     * Start the source node at the given time
     * @param  time When to start the source
     */start(t){let r=this.toSeconds(t);return this.log("start",r),this._startGain(r),this._source.start(r),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class sK extends sX{constructor(){super(su(sK.getDefaults(),arguments,["value","units"])),this.name="Signal",/**
         * Indicates if the value should be overridden on connection.
         */this.override=!0;let t=su(sK.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new s$({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(sX.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,r=0,o=0){return(// start it only when connected to something
s0(this,t,r,o),this)}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}//-------------------------------------
// ABSTRACT PARAM INTERFACE
// just a proxy for the ConstantSourceNode's offset AudioParam
// all docs are generated from AbstractParam.ts
//-------------------------------------
setValueAtTime(t,r){return this._param.setValueAtTime(t,r),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,r){return this._param.linearRampToValueAtTime(t,r),this}exponentialRampToValueAtTime(t,r){return this._param.exponentialRampToValueAtTime(t,r),this}exponentialRampTo(t,r,o){return this._param.exponentialRampTo(t,r,o),this}linearRampTo(t,r,o){return this._param.linearRampTo(t,r,o),this}targetRampTo(t,r,o){return this._param.targetRampTo(t,r,o),this}exponentialApproachValueAtTime(t,r,o){return this._param.exponentialApproachValueAtTime(t,r,o),this}setTargetAtTime(t,r,o){return this._param.setTargetAtTime(t,r,o),this}setValueCurveAtTime(t,r,o,n){return this._param.setValueCurveAtTime(t,r,o,n),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,r,o){return this._param.rampTo(t,r,o),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}/**
     * See [[Param.apply]].
     */apply(t){return this._param.apply(t),this}}function s0(t,r,o,n){(r instanceof sW||nJ(r)||r instanceof sK&&r.override)&&(// cancel changes
r.cancelScheduledValues(0),// reset the value
r.setValueAtTime(0,0),r instanceof sK&&(r.overridden=!0)),sZ(t,r,o,n)}class s1 extends sW{constructor(){super(su(s1.getDefaults(),arguments,["value"])),this.name="TickParam",/**
         * The timeline which tracks all of the automations.
         */this._events=new sy(1/0),/**
         * The internal holder for the multiplier value
         */this._multiplier=1;let t=su(s1.getDefaults(),arguments,["value"]);// set the multiplier
this._multiplier=t.multiplier,// clear the ticks from the beginning
this._events.cancel(0),// set an initial event
this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(sW.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,r,o){// approximate it with multiple linear ramps
r=this.toSeconds(r),this.setRampPoint(r);let n=this._fromType(t),s=this._events.get(r),i=Math.round(Math.max(1/o,1));for(let t=0;t<=i;t++){let i=o*t+r,a=this._exponentialApproach(s.time,s.value,n,o,i);this.linearRampToValueAtTime(this._toType(a),i)}return this}setValueAtTime(t,r){let o=this.toSeconds(r);super.setValueAtTime(t,r);let n=this._events.get(o),s=this._events.previousEvent(n),i=this._getTicksUntilEvent(s,o);return n.ticks=Math.max(i,0),this}linearRampToValueAtTime(t,r){let o=this.toSeconds(r);super.linearRampToValueAtTime(t,r);let n=this._events.get(o),s=this._events.previousEvent(n),i=this._getTicksUntilEvent(s,o);return n.ticks=Math.max(i,0),this}exponentialRampToValueAtTime(t,r){// aproximate it with multiple linear ramps
r=this.toSeconds(r);let o=this._fromType(t),n=this._events.get(r),s=Math.round(Math.max((r-n.time)*10,1)),i=(r-n.time)/s;for(let t=0;t<=s;t++){let s=i*t+n.time,a=this._exponentialInterpolate(n.time,n.value,r,o,s);this.linearRampToValueAtTime(this._toType(a),s)}return this}/**
     * Returns the tick value at the time. Takes into account
     * any automation curves scheduled on the signal.
     * @param  event The time to get the tick count at
     * @return The number of ticks which have elapsed at the time given any automations.
     */_getTicksUntilEvent(t,r){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(n5(t.ticks)){let r=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(r,t.time)}let o=this._fromType(this.getValueAtTime(t.time)),n=this._fromType(this.getValueAtTime(r)),s=this._events.get(r);return s&&s.time===r&&"setValueAtTime"===s.type&&(n=this._fromType(this.getValueAtTime(r-this.sampleTime))),.5*(r-t.time)*(o+n)+t.ticks}/**
     * Returns the tick value at the time. Takes into account
     * any automation curves scheduled on the signal.
     * @param  time The time to get the tick count at
     * @return The number of ticks which have elapsed at the time given any automations.
     */getTicksAtTime(t){let r=this.toSeconds(t),o=this._events.get(r);return Math.max(this._getTicksUntilEvent(o,r),0)}/**
     * Return the elapsed time of the number of ticks from the given time
     * @param ticks The number of ticks to calculate
     * @param  time The time to get the next tick from
     * @return The duration of the number of ticks from the given time in seconds
     */getDurationOfTicks(t,r){let o=this.toSeconds(r),n=this.getTicksAtTime(r);return this.getTimeOfTick(n+t)-o}/**
     * Given a tick, returns the time that tick occurs at.
     * @return The time that the tick occurs.
     */getTimeOfTick(t){let r=this._events.get(t,"ticks"),o=this._events.getAfter(t,"ticks");if(r&&r.ticks===t)return r.time;if(r&&o&&"linearRampToValueAtTime"===o.type&&r.value!==o.value){let n=this._fromType(this.getValueAtTime(r.time)),s=this._fromType(this.getValueAtTime(o.time)),i=(s-n)/(o.time-r.time),a=Math.sqrt(Math.pow(n,2)-2*i*(r.ticks-t)),l=(-n+a)/i;return(l>0?l:(-n-a)/i)+r.time}return r?0===r.value?1/0:r.time+(t-r.ticks)/r.value:t/this._initialValue}/**
     * Convert some number of ticks their the duration in seconds accounting
     * for any automation curves starting at the given time.
     * @param  ticks The number of ticks to convert to seconds.
     * @param  when  When along the automation timeline to convert the ticks.
     * @return The duration in seconds of the ticks.
     */ticksToTime(t,r){return this.getDurationOfTicks(t,r)}/**
     * The inverse of [[ticksToTime]]. Convert a duration in
     * seconds to the corresponding number of ticks accounting for any
     * automation curves starting at the given time.
     * @param  duration The time interval to convert to ticks.
     * @param  when When along the automation timeline to convert the ticks.
     * @return The duration in ticks.
     */timeToTicks(t,r){let o=this.toSeconds(r),n=this.toSeconds(t),s=this.getTicksAtTime(o),i=this.getTicksAtTime(o+n);return i-s}/**
     * Convert from the type when the unit value is BPM
     */_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}/**
     * Special case of type conversion where the units === "bpm"
     */_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}/**
     * A multiplier on the bpm value. Useful for setting a PPQ relative to the base frequency value.
     */get multiplier(){return this._multiplier}set multiplier(t){// get and reset the current value with the new multiplier
// might be necessary to clear all the previous values
let r=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(r,0)}}class s2 extends sK{constructor(){super(su(s2.getDefaults(),arguments,["value"])),this.name="TickSignal";let t=su(s2.getDefaults(),arguments,["value"]);this.input=this._param=new s1({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(sK.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,r){return this._param.ticksToTime(t,r)}timeToTicks(t,r){return this._param.timeToTicks(t,r)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,r){return this._param.getDurationOfTicks(t,r)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}/**
     * A multiplier on the bpm value. Useful for setting a PPQ relative to the base frequency value.
     */get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class s3 extends sz{constructor(){super(su(s3.getDefaults(),arguments,["frequency"])),this.name="TickSource",/**
         * The state timeline
         */this._state=new sq,/**
         * The offset values of the ticks
         */this._tickOffset=new sy;let t=su(s3.getDefaults(),arguments,["frequency"]);this.frequency=new s2({context:this.context,units:t.units,value:t.frequency}),sS(this,"frequency"),// set the initial state
this._state.setStateAtTime("stopped",0),// add the first event
this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},sz.getDefaults())}/**
     * Returns the playback state of the source, either "started", "stopped" or "paused".
     */get state(){return this.getStateAtTime(this.now())}/**
     * Start the clock at the given time. Optionally pass in an offset
     * of where to start the tick counter from.
     * @param  time    The time the clock should start
     * @param offset The number of ticks to start the source at
     */start(t,r){let o=this.toSeconds(t);return"started"!==this._state.getValueAtTime(o)&&(this._state.setStateAtTime("started",o),n4(r)&&this.setTicksAtTime(r,o)),this}/**
     * Stop the clock. Stopping the clock resets the tick counter to 0.
     * @param time The time when the clock should stop.
     */stop(t){let r=this.toSeconds(t);// cancel the previous stop
if("stopped"===this._state.getValueAtTime(r)){let t=this._state.get(r);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(r),this._state.setStateAtTime("stopped",r),this.setTicksAtTime(0,r),this}/**
     * Pause the clock. Pausing does not reset the tick counter.
     * @param time The time when the clock should stop.
     */pause(t){let r=this.toSeconds(t);return"started"===this._state.getValueAtTime(r)&&this._state.setStateAtTime("paused",r),this}/**
     * Cancel start/stop/pause and setTickAtTime events scheduled after the given time.
     * @param time When to clear the events after
     */cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}/**
     * Get the elapsed ticks at the given time
     * @param  time  When to get the tick value
     * @return The number of ticks
     */getTicksAtTime(t){let r=this.toSeconds(t),o=this._state.getLastState("stopped",r),n={state:"paused",time:r};this._state.add(n);// keep track of the previous offset event
let s=o,i=0;// return the ticks
return(// iterate through all the events since the last stop
this._state.forEachBetween(o.time,r+this.sampleTime,t=>{let r=s.time,o=this._tickOffset.get(t.time);o&&o.time>=s.time&&(i=o.ticks,r=o.time),"started"===s.state&&"started"!==t.state&&(i+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(r)),s=t}),// remove the temporary event
this._state.remove(n),i)}/**
     * The number of times the callback was invoked. Starts counting at 0
     * and increments after the callback was invoked. Returns -1 when stopped.
     */get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}/**
     * The time since ticks=0 that the TickSource has been running. Accounts
     * for tempo curves
     */get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let r=this.now(),o=this.frequency.timeToTicks(t,r);this.setTicksAtTime(o,r)}/**
     * Return the elapsed seconds at the given time.
     * @param  time  When to get the elapsed seconds
     * @return  The number of elapsed seconds
     */getSecondsAtTime(t){t=this.toSeconds(t);let r=this._state.getLastState("stopped",t),o={state:"paused",time:t};this._state.add(o);// keep track of the previous offset event
let n=r,s=0;// return the ticks
return(// iterate through all the events since the last stop
this._state.forEachBetween(r.time,t+this.sampleTime,t=>{let r=n.time,o=this._tickOffset.get(t.time);o&&o.time>=n.time&&(s=o.seconds,r=o.time),"started"===n.state&&"started"!==t.state&&(s+=t.time-r),n=t}),// remove the temporary event
this._state.remove(o),s)}/**
     * Set the clock's ticks at the given time.
     * @param  ticks The tick value to set
     * @param  time  When to set the tick value
     */setTicksAtTime(t,r){return r=this.toSeconds(r),this._tickOffset.cancel(r),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,r),ticks:t,time:r}),this}/**
     * Returns the scheduled state at the given time.
     * @param  time  The time to query.
     */getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}/**
     * Get the time of the given tick. The second argument
     * is when to test before. Since ticks can be set (with setTicksAtTime)
     * there may be multiple times for a given tick value.
     * @param  tick The tick number.
     * @param  before When to measure the tick value from.
     * @return The time of the tick
     */getTimeOfTick(t,r=this.now()){let o=this._tickOffset.get(r),n=this._state.get(r),s=Math.max(o.time,n.time),i=this.frequency.getTicksAtTime(s)+t-o.ticks;return this.frequency.getTimeOfTick(i)}/**
     * Invoke the callback event at all scheduled ticks between the
     * start time and the end time
     * @param  startTime  The beginning of the search range
     * @param  endTime    The end of the search range
     * @param  callback   The callback to invoke with each tick
     */forEachTickBetween(t,r,o){// only iterate through the sections where it is "started"
let n=this._state.get(t);this._state.forEachBetween(t,r,r=>{n&&"started"===n.state&&"started"!==r.state&&this.forEachTickBetween(Math.max(n.time,t),r.time-this.sampleTime,o),n=r});let s=null;if(n&&"started"===n.state){let i=Math.max(n.time,t),a=this.frequency.getTicksAtTime(i),l=this.frequency.getTicksAtTime(n.time),u=a-l,c=Math.ceil(u)-u;// guard against floating point issues
c=sm(c,1)?0:c;let d=this.frequency.getTimeOfTick(a+c);for(;d<r;){try{o(d,Math.round(this.getTicksAtTime(d)))}catch(t){s=t;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(s)throw s;return this}/**
     * Clean up
     */dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class s5 extends sz{constructor(){super(su(s5.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",/**
         * The callback function to invoke at the scheduled tick.
         */this.callback=sT,/**
         * The last time the loop callback was invoked
         */this._lastUpdate=0,/**
         * Keep track of the playback state
         */this._state=new sq("stopped"),/**
         * Context bound reference to the _loop method
         * This is necessary to remove the event in the end.
         */this._boundLoop=this._loop.bind(this);let t=su(s5.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new s3({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,sS(this,"frequency"),// add an initial state
this._state.setStateAtTime("stopped",0),// bind a callback to the worker thread
this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(sz.getDefaults(),{callback:sT,frequency:1,units:"hertz"})}/**
     * Returns the playback state of the source, either "started", "stopped" or "paused".
     */get state(){return this._state.getValueAtTime(this.now())}/**
     * Start the clock at the given time. Optionally pass in an offset
     * of where to start the tick counter from.
     * @param  time    The time the clock should start
     * @param offset  Where the tick counter starts counting from.
     */start(t,r){n1(this.context);// start the loop
let o=this.toSeconds(t);return this.log("start",o),"started"!==this._state.getValueAtTime(o)&&(this._state.setStateAtTime("started",o),this._tickSource.start(o,r),o<this._lastUpdate&&this.emit("start",o,r)),this}/**
     * Stop the clock. Stopping the clock resets the tick counter to 0.
     * @param time The time when the clock should stop.
     * @example
     * const clock = new Tone.Clock(time => {
     * 	console.log(time);
     * }, 1);
     * clock.start();
     * // stop the clock after 10 seconds
     * clock.stop("+10");
     */stop(t){let r=this.toSeconds(t);return this.log("stop",r),this._state.cancel(r),this._state.setStateAtTime("stopped",r),this._tickSource.stop(r),r<this._lastUpdate&&this.emit("stop",r),this}/**
     * Pause the clock. Pausing does not reset the tick counter.
     * @param time The time when the clock should stop.
     */pause(t){let r=this.toSeconds(t);return"started"===this._state.getValueAtTime(r)&&(this._state.setStateAtTime("paused",r),this._tickSource.pause(r),r<this._lastUpdate&&this.emit("pause",r)),this}/**
     * The number of times the callback was invoked. Starts counting at 0
     * and increments after the callback was invoked.
     */get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}/**
     * The time since ticks=0 that the Clock has been running. Accounts for tempo curves
     */get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}/**
     * Return the elapsed seconds at the given time.
     * @param  time  When to get the elapsed seconds
     * @return  The number of elapsed seconds
     */getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}/**
     * Set the clock's ticks at the given time.
     * @param  ticks The tick value to set
     * @param  time  When to set the tick value
     */setTicksAtTime(t,r){return this._tickSource.setTicksAtTime(t,r),this}/**
     * Get the time of the given tick. The second argument
     * is when to test before. Since ticks can be set (with setTicksAtTime)
     * there may be multiple times for a given tick value.
     * @param  tick The tick number.
     * @param  before When to measure the tick value from.
     * @return The time of the tick
     */getTimeOfTick(t,r=this.now()){return this._tickSource.getTimeOfTick(t,r)}/**
     * Get the clock's ticks at the given time.
     * @param  time  When to get the tick value
     * @return The tick value at the given time.
     */getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}/**
     * Get the time of the next tick
     * @param  offset The tick number.
     */nextTickTime(t,r){let o=this.toSeconds(r),n=this.getTicksAtTime(o);return this._tickSource.getTimeOfTick(n+t,o)}/**
     * The scheduling loop.
     */_loop(){let t=this._lastUpdate,r=this.now();this._lastUpdate=r,this.log("loop",t,r),t!==r&&(// the state change events
this._state.forEachBetween(t,r,t=>{switch(t.state){case"started":let r=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,r);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),// the tick callbacks
this._tickSource.forEachTickBetween(t,r,(t,r)=>{this.callback(t,r)}))}/**
     * Returns the scheduled state at the given time.
     * @param  time  The time to query.
     * @return  The name of the state input in setStateAtTime.
     * @example
     * const clock = new Tone.Clock();
     * clock.start("+0.1");
     * clock.getStateAtTime("+0.1"); // returns "started"
     */getStateAtTime(t){let r=this.toSeconds(t);return this._state.getValueAtTime(r)}/**
     * Clean up
     */dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}sx.mixin(s5);class s4 extends sh{constructor(){super(),this.name="ToneAudioBuffers",/**
         * All of the buffers
         */this._buffers=new Map,/**
         * Keep track of the number of loaded buffers
         */this._loadingCount=0;let t=su(s4.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,// add each one
Object.keys(t.urls).forEach(r=>{this._loadingCount++;let o=t.urls[r];this.add(r,o,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:sT,onload:sT,urls:{}}}/**
     * True if the buffers object has a buffer by that name.
     * @param  name  The key or index of the buffer.
     */has(t){return this._buffers.has(t.toString())}/**
     * Get a buffer by name. If an array was loaded,
     * then use the array index.
     * @param  name  The key or index of the buffer.
     */get(t){return nK(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}/**
     * A buffer was loaded. decrement the counter.
     */_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}/**
     * If the buffers are loaded or not
     */get loaded(){return Array.from(this._buffers).every(([t,r])=>r.loaded)}/**
     * Add a buffer by name and url to the Buffers
     * @param  name      A unique name to give the buffer
     * @param  url  Either the url of the bufer, or a buffer which will be added with the given name.
     * @param  callback  The callback to invoke when the url is loaded.
     * @param  onerror  Invoked if the buffer can't be loaded
     */add(t,r,o=sT,n=sT){return se(r)?this._buffers.set(t.toString(),new sE(this.baseUrl+r,o,n)):this._buffers.set(t.toString(),new sE(r,o,n)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class s6 extends sU{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}/**
     * Returns the value of a frequency in the current units
     */_frequencyToUnits(t){return sL(super._frequencyToUnits(t))}/**
     * Returns the value of a tick in the current time units
     */_ticksToUnits(t){return sL(super._ticksToUnits(t))}/**
     * Return the value of the beats in the current units
     */_beatsToUnits(t){return sL(super._beatsToUnits(t))}/**
     * Returns the value of a second in the current units
     */_secondsToUnits(t){return sL(super._secondsToUnits(t))}/**
     * Return the value of the frequency as a MIDI note
     * @example
     * Tone.Midi(60).toMidi(); // 60
     */toMidi(){return this.valueOf()}/**
     * Return the value of the frequency as a MIDI note
     * @example
     * Tone.Midi(60).toFrequency(); // 261.6255653005986
     */toFrequency(){return sD(this.toMidi())}/**
     * Transposes the frequency by the given number of semitones.
     * @return A new transposed MidiClass
     * @example
     * Tone.Midi("A4").transpose(3); // "C5"
     */transpose(t){return new s6(this.context,this.toMidi()+t)}}function s8(t,r){return new s6(sA(),t,r)}class s7 extends sH{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}/**
     * Get the current time in the given units
     */_now(){return this.context.transport.ticks}/**
     * Return the value of the beats in the current units
     */_beatsToUnits(t){return this._getPPQ()*t}/**
     * Returns the value of a second in the current units
     */_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}/**
     * Returns the value of a tick in the current time units
     */_ticksToUnits(t){return t}/**
     * Return the time in ticks
     */toTicks(){return this.valueOf()}/**
     * Return the time in seconds
     */toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class s9 extends sz{constructor(){super(...arguments),this.name="Draw",/**
         * The duration after which events are not invoked.
         */this.expiration=.25,/**
         * The amount of time before the scheduled time
         * that the callback can be invoked. Default is
         * half the time of an animation frame (0.008 seconds).
         */this.anticipation=.008,/**
         * All of the events.
         */this._events=new sy,/**
         * The draw loop
         */this._boundDrawLoop=this._drawLoop.bind(this),/**
         * The animation frame id
         */this._animationFrame=-1}/**
     * Schedule a function at the given time to be invoked
     * on the nearest animation frame.
     * @param  callback  Callback is invoked at the given time.
     * @param  time      The time relative to the AudioContext time to invoke the callback.
     * @example
     * Tone.Transport.scheduleRepeat(time => {
     * 	Tone.Draw.schedule(() => console.log(time), time);
     * }, 1);
     * Tone.Transport.start();
     */schedule(t,r){return this._events.add({callback:t,time:this.toSeconds(r)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}/**
     * Cancel events scheduled after the given time
     * @param  after  Time after which scheduled events will be removed from the scheduling timeline.
     */cancel(t){return this._events.cancel(this.toSeconds(t)),this}/**
     * The draw loop
     */_drawLoop(){let t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){let r=this._events.shift();r&&t-r.time<=this.expiration&&r.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}sv(t=>{t.draw=new s9({context:t})}),s_(t=>{t.draw.dispose()});class ie extends sh{constructor(){super(...arguments),this.name="IntervalTimeline",/**
         * The root node of the inteval tree
         */this._root=null,/**
         * Keep track of the length of the timeline.
         */this._length=0}/**
     * The event to add to the timeline. All events must
     * have a time and duration value
     * @param  event  The event to add to the timeline
     */add(t){nK(n4(t.time),"Events must have a time property"),nK(n4(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let r=new it(t.time,t.time+t.duration,t);// Restructure tree to be balanced
for(null===this._root?this._root=r:this._root.insert(r),this._length++;null!==r;)r.updateHeight(),r.updateMax(),this._rebalance(r),r=r.parent;return this}/**
     * Remove an event from the timeline.
     * @param  event  The event to remove from the timeline
     */remove(t){if(null!==this._root){let r=[];for(let o of(this._root.search(t.time,r),r))if(o.event===t){this._removeNode(o),this._length--;break}}return this}/**
     * The number of items in the timeline.
     * @readOnly
     */get length(){return this._length}/**
     * Remove events whose time time is after the given time
     * @param  after  The time to query.
     */cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}/**
     * Set the root node as the given node
     */_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}/**
     * Replace the references to the node in the node's parent
     * with the replacement node.
     */_replaceNodeInParent(t,r){null!==t.parent?(t.isLeftChild()?t.parent.left=r:t.parent.right=r,this._rebalance(t.parent)):this._setRoot(r)}/**
     * Remove the node from the tree and replace it with
     * a successor which follows the schema.
     */_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let r;let o=t.getBalance(),n=null;if(o>0){if(null===t.left.right)(r=t.left).right=t.right,n=r;else{for(r=t.left.right;null!==r.right;)r=r.right;r.parent&&(r.parent.right=r.left,n=r.parent,r.left=t.left,r.right=t.right)}}else if(null===t.right.left)(r=t.right).left=t.left,n=r;else{for(r=t.right.left;null!==r.left;)r=r.left;r.parent&&(r.parent.left=r.right,n=r.parent,r.left=t.left,r.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=r:t.parent.right=r:this._setRoot(r),n&&this._rebalance(n)}t.dispose()}/**
     * Rotate the tree to the left
     */_rotateLeft(t){let r=t.parent,o=t.isLeftChild(),n=t.right;n&&(t.right=n.left,n.left=t),null!==r?o?r.left=n:r.right=n:this._setRoot(n)}/**
     * Rotate the tree to the right
     */_rotateRight(t){let r=t.parent,o=t.isLeftChild(),n=t.left;n&&(t.left=n.right,n.right=t),null!==r?o?r.left=n:r.right=n:this._setRoot(n)}/**
     * Balance the BST
     */_rebalance(t){let r=t.getBalance();r>1&&t.left?0>t.left.getBalance()?this._rotateLeft(t.left):this._rotateRight(t):r<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}/**
     * Get an event whose time and duration span the give time. Will
     * return the match whose "time" value is closest to the given time.
     * @return  The event which spans the desired time
     */get(t){if(null!==this._root){let r=[];if(this._root.search(t,r),r.length>0){let t=r[0];for(let o=1;o<r.length;o++)r[o].low>t.low&&(t=r[o]);return t.event}}return null}/**
     * Iterate over everything in the timeline.
     * @param  callback The callback to invoke with every item
     */forEach(t){if(null!==this._root){let r=[];this._root.traverse(t=>r.push(t)),r.forEach(r=>{r.event&&t(r.event)})}return this}/**
     * Iterate over everything in the array in which the given time
     * overlaps with the time and duration time of the event.
     * @param  time The time to check if items are overlapping
     * @param  callback The callback to invoke with every item
     */forEachAtTime(t,r){if(null!==this._root){let o=[];this._root.search(t,o),o.forEach(t=>{t.event&&r(t.event)})}return this}/**
     * Iterate over everything in the array in which the time is greater
     * than or equal to the given time.
     * @param  time The time to check if items are before
     * @param  callback The callback to invoke with every item
     */forEachFrom(t,r){if(null!==this._root){let o=[];this._root.searchAfter(t,o),o.forEach(t=>{t.event&&r(t.event)})}return this}/**
     * Clean up
     */dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}//-------------------------------------
// 	INTERVAL NODE HELPER
//-------------------------------------
/**
 * Represents a node in the binary search tree, with the addition
 * of a "high" value which keeps track of the highest value of
 * its children.
 * References:
 * https://brooknovak.wordpress.com/2013/12/07/augmented-interval-tree-in-c/
 * http://www.mif.vu.lt/~valdas/ALGORITMAI/LITERATURA/Cormen/Cormen.pdf
 * @param low
 * @param high
 */class it{constructor(t,r,o){// the nodes to the left
this._left=null,// the nodes to the right
this._right=null,// the parent node
this.parent=null,// the number of child nodes
this.height=0,this.event=o,// the low value
this.low=t,// the high value
this.high=r,// the high value for this and all child nodes
this.max=this.high}/**
     * Insert a node into the correct spot in the tree
     */insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}/**
     * Search the tree for nodes which overlap
     * with the given point
     * @param  point  The point to query
     * @param  results  The array to put the results
     */search(t,r){// If p is to the right of the rightmost point of any interval
// in this node and all children, there won't be any matches.
!(t>this.max)&&(null!==this.left&&this.left.search(t,r),this.low<=t&&this.high>t&&r.push(this),this.low>t||null===this.right||this.right.search(t,r))}/**
     * Search the tree for nodes which are less
     * than the given point
     * @param  point  The point to query
     * @param  results  The array to put the results
     */searchAfter(t,r){this.low>=t&&(r.push(this),null!==this.left&&this.left.searchAfter(t,r)),null!==this.right&&this.right.searchAfter(t,r)}/**
     * Invoke the callback on this element and both it's branches
     * @param  {Function}  callback
     */traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}/**
     * Update the height of the node
     */updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}/**
     * Update the height of the node
     */updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}/**
     * The balance is how the leafs are distributed on the node
     * @return  Negative numbers are balanced to the right
     */getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}/**
     * @returns true if this node is the left child of its parent
     */isLeftChild(){return null!==this.parent&&this.parent.left===this}/**
     * get/set the left node
     */get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}/**
     * get/set the right node
     */get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}/**
     * null out references.
     */dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}// this file contains all of the valid note names for all pitches between C-4 and C11
class ir extends sX{constructor(){super(su(ir.getDefaults(),arguments,["volume"])),this.name="Volume";let t=su(ir.getDefaults(),arguments,["volume"]);this.input=this.output=new sQ({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,sS(this,"volume"),this._unmutedVolume=t.volume,// set the mute initially
this.mute=t.mute}static getDefaults(){return Object.assign(sX.getDefaults(),{mute:!1,volume:0})}/**
     * Mute the output.
     * @example
     * const vol = new Tone.Volume(-12).toDestination();
     * const osc = new Tone.Oscillator().connect(vol).start();
     * // mute the output
     * vol.mute = true;
     */get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,// maybe it should ramp here?
this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}/**
     * clean up
     */dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class io extends sX{constructor(){super(su(io.getDefaults(),arguments)),this.name="Destination",this.input=new ir({context:this.context}),this.output=new sQ({context:this.context}),/**
         * The volume of the master output in decibels. -Infinity is silent, and 0 is no change.
         * @example
         * const osc = new Tone.Oscillator().toDestination();
         * osc.start();
         * // ramp the volume down to silent over 10 seconds
         * Tone.getDestination().volume.rampTo(-Infinity, 10);
         */this.volume=this.input.volume;let t=su(io.getDefaults(),arguments);sY(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(sX.getDefaults(),{mute:!1,volume:0})}/**
     * Mute the output.
     * @example
     * const oscillator = new Tone.Oscillator().start().toDestination();
     * setTimeout(() => {
     * 	// mute the output
     * 	Tone.Destination.mute = true;
     * }, 1000);
     */get mute(){return this.input.mute}set mute(t){this.input.mute=t}/**
     * Add a master effects chain. NOTE: this will disconnect any nodes which were previously
     * chained in the master effects chain.
     * @param args All arguments will be connected in a row and the Master will be routed through it.
     * @example
     * // route all audio through a filter and compressor
     * const lowpass = new Tone.Filter(800, "lowpass");
     * const compressor = new Tone.Compressor(-18);
     * Tone.Destination.chain(lowpass, compressor);
     */chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),sY(...t),this}/**
     * The maximum number of channels the system can output
     * @example
     * console.log(Tone.Destination.maxChannelCount);
     */get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}/**
     * Clean up
     */dispose(){return super.dispose(),this.volume.dispose(),this}}sv(t=>{t.destination=new io({context:t})}),s_(t=>{t.destination.dispose()});class is extends sh{/**
     * @param initialValue The value to return if there is no scheduled values
     */constructor(t){super(),this.name="TimelineValue",/**
         * The timeline which stores the values
         */this._timeline=new sy({memory:10}),this._initialValue=t}/**
     * Set the value at the given time
     */set(t,r){return this._timeline.add({value:t,time:r}),this}/**
     * Get the value at the given time
     */get(t){let r=this._timeline.get(t);return r?r.value:this._initialValue}}class ii{/**
     * @param transport The transport object which the event belongs to
     */constructor(t,r){/**
         * The unique id of the event
         */this.id=ii._eventId++;let o=Object.assign(ii.getDefaults(),r);this.transport=t,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:sT,once:!1,time:0}}/**
     * Invoke the event callback.
     * @param  time  The AudioContext time in seconds of the event
     */invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}/**
     * Clean up
     */dispose(){return this.callback=void 0,this}}/**
 * Current ID counter
 */ii._eventId=0;class ia extends ii{/**
     * @param transport The transport object which the event belongs to
     */constructor(t,r){super(t,r),/**
         * The ID of the current timeline event
         */this._currentId=-1,/**
         * The ID of the next timeline event
         */this._nextId=-1,/**
         * The time of the next event
         */this._nextTick=this.time,/**
         * a reference to the bound start method
         */this._boundRestart=this._restart.bind(this);let o=Object.assign(ia.getDefaults(),r);this.duration=new s7(t.context,o.duration).valueOf(),this._interval=new s7(t.context,o.interval).valueOf(),this._nextTick=o.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ii.getDefaults(),{duration:1/0,interval:1,once:!1})}/**
     * Invoke the callback. Returns the tick time which
     * the next event should be scheduled at.
     * @param  time  The AudioContext time in seconds of the event
     */invoke(t){// create more events if necessary
this._createEvents(t),// call the super class
super.invoke(t)}/**
     * Push more events onto the timeline to keep up with the position of the timeline
     */_createEvents(t){// schedule the next event
let r=this.transport.getTicksAtTime(t);r>=this.time&&r>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new s7(this.context,this._nextTick).toSeconds()))}/**
     * Push more events onto the timeline to keep up with the position of the timeline
     */_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let r=this.transport.getTicksAtTime(t);r>this.time&&(this._nextTick=this.time+Math.ceil((r-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new s7(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new s7(this.context,this._nextTick).toSeconds())}/**
     * Clean up
     */dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class il extends sz{constructor(){super(su(il.getDefaults(),arguments)),this.name="Transport",//-------------------------------------
// 	LOOPING
//-------------------------------------
/**
         * If the transport loops or not.
         */this._loop=new is(!1),/**
         * The loop start position in ticks
         */this._loopStart=0,/**
         * The loop end position in ticks
         */this._loopEnd=0,//-------------------------------------
// 	TIMELINE EVENTS
//-------------------------------------
/**
         * All the events in an object to keep track by ID
         */this._scheduledEvents={},/**
         * The scheduled events.
         */this._timeline=new sy,/**
         * Repeated events
         */this._repeatedEvents=new ie,/**
         * All of the synced Signals
         */this._syncedSignals=[],/**
         * The swing amount
         */this._swingAmount=0;let t=su(il.getDefaults(),arguments);// CLOCK/TEMPO
this._ppq=t.ppq,this._clock=new s5({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),sS(this,"bpm"),this._timeSignature=t.timeSignature,// SWING
this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(sz.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}//-------------------------------------
// 	TICKS
//-------------------------------------
/**
     * called on every tick
     * @param  tickTime clock relative tick time
     */_processTick(t,r){// handle swing
if(this._loop.get(t)&&r>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),r=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&r%this._ppq!=0&&// not on a downbeat
r%(2*this._swingTicks)!=0){// add some swing
let o=r%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(o*Math.PI)*this._swingAmount;t+=new s7(this.context,2*this._swingTicks/3).toSeconds()*n}// invoke the timeline events scheduled on this tick
this._timeline.forEachAtTime(r,r=>r.invoke(t))}//-------------------------------------
// 	SCHEDULABLE EVENTS
//-------------------------------------
/**
     * Schedule an event along the timeline.
     * @param callback The callback to be invoked at the time.
     * @param time The time to invoke the callback at.
     * @return The id of the event which can be used for canceling the event.
     * @example
     * // schedule an event on the 16th measure
     * Tone.Transport.schedule((time) => {
     * 	// invoked on measure 16
     * 	console.log("measure 16!");
     * }, "16:0:0");
     */schedule(t,r){let o=new ii(this,{callback:t,time:new sH(this.context,r).toTicks()});return this._addEvent(o,this._timeline)}/**
     * Schedule a repeated event along the timeline. The event will fire
     * at the `interval` starting at the `startTime` and for the specified
     * `duration`.
     * @param  callback   The callback to invoke.
     * @param  interval   The duration between successive callbacks. Must be a positive number.
     * @param  startTime  When along the timeline the events should start being invoked.
     * @param  duration How long the event should repeat.
     * @return  The ID of the scheduled event. Use this to cancel the event.
     * @example
     * const osc = new Tone.Oscillator().toDestination().start();
     * // a callback invoked every eighth note after the first measure
     * Tone.Transport.scheduleRepeat((time) => {
     * 	osc.start(time).stop(time + 0.1);
     * }, "8n", "1m");
     */scheduleRepeat(t,r,o,n=1/0){let s=new ia(this,{callback:t,duration:new sN(this.context,n).toTicks(),interval:new sN(this.context,r).toTicks(),time:new sH(this.context,o).toTicks()});// kick it off if the Transport is started
// @ts-ignore
return this._addEvent(s,this._repeatedEvents)}/**
     * Schedule an event that will be removed after it is invoked.
     * @param callback The callback to invoke once.
     * @param time The time the callback should be invoked.
     * @returns The ID of the scheduled event.
     */scheduleOnce(t,r){let o=new ii(this,{callback:t,once:!0,time:new sH(this.context,r).toTicks()});return this._addEvent(o,this._timeline)}/**
     * Clear the passed in event id from the timeline
     * @param eventId The id of the event.
     */clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let r=this._scheduledEvents[t.toString()];r.timeline.remove(r.event),r.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}/**
     * Add an event to the correct timeline. Keep track of the
     * timeline it was added to.
     * @returns the event id which was just added
     */_addEvent(t,r){return this._scheduledEvents[t.id.toString()]={event:t,timeline:r},r.add(t),t.id}/**
     * Remove scheduled events from the timeline after
     * the given time. Repeated events will be removed
     * if their startTime is after the given time
     * @param after Clear all events after this time.
     */cancel(t=0){let r=this.toTicks(t);return this._timeline.forEachFrom(r,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(r,t=>this.clear(t.id)),this}//-------------------------------------
// 	START/STOP/PAUSE
//-------------------------------------
/**
     * Bind start/stop/pause events from the clock and emit them.
     */_bindClockEvents(){this._clock.on("start",(t,r)=>{r=new s7(this.context,r).toSeconds(),this.emit("start",t,r)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}/**
     * Returns the playback state of the source, either "started", "stopped", or "paused"
     */get state(){return this._clock.getStateAtTime(this.now())}/**
     * Start the transport and all sources synced to the transport.
     * @param  time The time when the transport should start.
     * @param  offset The timeline offset to start the transport.
     * @example
     * // start the transport in one second starting at beginning of the 5th measure.
     * Tone.Transport.start("+1", "4:0:0");
     */start(t,r){let o;return n4(r)&&(o=this.toTicks(r)),// start the clock
this._clock.start(t,o),this}/**
     * Stop the transport and all sources synced to the transport.
     * @param time The time when the transport should stop.
     * @example
     * Tone.Transport.stop();
     */stop(t){return this._clock.stop(t),this}/**
     * Pause the transport and all sources synced to the transport.
     */pause(t){return this._clock.pause(t),this}/**
     * Toggle the current state of the transport. If it is
     * started, it will stop it, otherwise it will start the Transport.
     * @param  time The time of the event
     */toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}//-------------------------------------
// 	SETTERS/GETTERS
//-------------------------------------
/**
     * The time signature as just the numerator over 4.
     * For example 4/4 would be just 4 and 6/8 would be 3.
     * @example
     * // common time
     * Tone.Transport.timeSignature = 4;
     * // 7/8
     * Tone.Transport.timeSignature = [7, 8];
     * // this will be reduced to a single number
     * Tone.Transport.timeSignature; // returns 3.5
     */get timeSignature(){return this._timeSignature}set timeSignature(t){n9(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}/**
     * When the Transport.loop = true, this is the starting position of the loop.
     */get loopStart(){return new sN(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}/**
     * When the Transport.loop = true, this is the ending position of the loop.
     */get loopEnd(){return new sN(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}/**
     * If the transport loops or not.
     */get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}/**
     * Set the loop start and stop at the same time.
     * @example
     * // loop over the first measure
     * Tone.Transport.setLoopPoints(0, "1m");
     * Tone.Transport.loop = true;
     */setLoopPoints(t,r){return this.loopStart=t,this.loopEnd=r,this}/**
     * The swing value. Between 0-1 where 1 equal to the note + half the subdivision.
     */get swing(){return this._swingAmount}set swing(t){// scale the values to a normal range
this._swingAmount=t}/**
     * Set the subdivision which the swing will be applied to.
     * The default value is an 8th note. Value must be less
     * than a quarter note.
     */get swingSubdivision(){return new s7(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}/**
     * The Transport's position in Bars:Beats:Sixteenths.
     * Setting the value will jump to that position right away.
     */get position(){let t=this.now(),r=this._clock.getTicksAtTime(t);return new s7(this.context,r).toBarsBeatsSixteenths()}set position(t){let r=this.toTicks(t);this.ticks=r}/**
     * The Transport's position in seconds
     * Setting the value will jump to that position right away.
     */get seconds(){return this._clock.seconds}set seconds(t){let r=this.now(),o=this._clock.frequency.timeToTicks(t,r);this.ticks=o}/**
     * The Transport's loop position as a normalized value. Always
     * returns 0 if the transport if loop is not true.
     */get progress(){if(!this.loop)return 0;{let t=this.now(),r=this._clock.getTicksAtTime(t);return(r-this._loopStart)/(this._loopEnd-this._loopStart)}}/**
     * The transports current tick position.
     */get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let r=this.now();// stop everything synced to the transport
if("started"===this.state){let o=this._clock.getTicksAtTime(r),n=this._clock.frequency.getDurationOfTicks(Math.ceil(o)-o,r),s=r+n;this.emit("stop",s),this._clock.setTicksAtTime(t,s),// restart it with the new time
this.emit("start",s,this._clock.getSecondsAtTime(s))}else this._clock.setTicksAtTime(t,r)}}/**
     * Get the clock's ticks at the given time.
     * @param  time  When to get the tick value
     * @return The tick value at the given time.
     */getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}/**
     * Return the elapsed seconds at the given time.
     * @param  time  When to get the elapsed seconds
     * @return  The number of elapsed seconds
     */getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}/**
     * Pulses Per Quarter note. This is the smallest resolution
     * the Transport timing supports. This should be set once
     * on initialization and not set again. Changing this value
     * after other objects have been created can cause problems.
     */get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}//-------------------------------------
// 	SYNCING
//-------------------------------------
/**
     * Returns the time aligned to the next subdivision
     * of the Transport. If the Transport is not started,
     * it will return 0.
     * Note: this will not work precisely during tempo ramps.
     * @param  subdivision  The subdivision to quantize to
     * @return  The context time of the next subdivision.
     * @example
     * // the transport must be started, otherwise returns 0
     * Tone.Transport.start();
     * Tone.Transport.nextSubdivision("4n");
     */nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{let r=this.now(),o=this.getTicksAtTime(r),n=t-o%t;return this._clock.nextTickTime(n,r)}}/**
     * Attaches the signal to the tempo control signal so that
     * any changes in the tempo will change the signal in the same
     * ratio.
     *
     * @param signal
     * @param ratio Optionally pass in the ratio between the two signals.
     * 			Otherwise it will be computed based on their current values.
     */syncSignal(t,r){if(!r){// get the sync ratio
let o=this.now();if(0!==t.getValueAtTime(o)){let n=this.bpm.getValueAtTime(o),s=1/(60/n/this.PPQ);r=t.getValueAtTime(o)/s}else r=0}let o=new sQ(r);return(// @ts-ignore
this.bpm.connect(o),// @ts-ignore
o.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:o,signal:t}),t.value=0,this)}/**
     * Unsyncs a previously synced signal from the transport's control.
     * See Transport.syncSignal.
     */unsyncSignal(t){for(let r=this._syncedSignals.length-1;r>=0;r--){let o=this._syncedSignals[r];o.signal===t&&(o.ratio.dispose(),o.signal.value=o.initial,this._syncedSignals.splice(r,1))}return this}/**
     * Clean up.
     */dispose(){return super.dispose(),this._clock.dispose(),!function t(r,o){n9(o)?o.forEach(o=>t(r,o)):Object.defineProperty(r,o,{writable:!0})}(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}sx.mixin(il),sv(t=>{t.transport=new il({context:t})}),s_(t=>{t.transport.dispose()});class iu extends sX{constructor(t){super(t),/**
         * Sources have no inputs
         */this.input=void 0,/**
         * Keep track of the scheduled state.
         */this._state=new sq("stopped"),/**
         * The synced `start` callback function from the transport
         */this._synced=!1,/**
         * Keep track of all of the scheduled event ids
         */this._scheduled=[],/**
         * Placeholder functions for syncing/unsyncing to transport
         */this._syncedStart=sT,this._syncedStop=sT,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ir({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,sS(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(sX.getDefaults(),{mute:!1,onstop:sT,volume:0})}/**
     * Returns the playback state of the source, either "started" or "stopped".
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/berklee/ahntone_c3.mp3", () => {
     * 	player.start();
     * 	console.log(player.state);
     * }).toDestination();
     */get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}/**
     * Mute the output.
     * @example
     * const osc = new Tone.Oscillator().toDestination().start();
     * // mute the output
     * osc.mute = true;
     */get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}/**
     * Ensure that the scheduled time is not before the current time.
     * Should only be used when scheduled unsynced.
     */_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}/**
     * Start the source at the specified time. If no time is given,
     * start the source now.
     * @param  time When the source should be started.
     * @example
     * const source = new Tone.Oscillator().toDestination();
     * source.start("+0.5"); // starts the source 0.5 seconds from now
     */start(t,r,o){let n=n5(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);// if it's started, stop it and restart it
if(n=this._clampToCurrentTime(n),this._synced||"started"!==this._state.getValueAtTime(n)){if(this.log("start",n),this._state.setStateAtTime("started",n),this._synced){// add the offset time to the event
let t=this._state.get(n);t&&(t.offset=this.toSeconds(sc(r,0)),t.duration=o?this.toSeconds(o):void 0);let s=this.context.transport.schedule(t=>{this._start(t,r,o)},n);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>n&&this._syncedStart(this.now(),this.context.transport.seconds)}else n1(this.context),this._start(n,r,o)}else nK(sf(n,this._state.get(n).time),"Start time must be strictly greater than previous start time"),this._state.cancel(n),this._state.setStateAtTime("started",n),this.log("restart",n),this.restart(n,r,o);return this}/**
     * Stop the source at the specified time. If no time is given,
     * stop the source now.
     * @param  time When the source should be stopped.
     * @example
     * const source = new Tone.Oscillator().toDestination();
     * source.start();
     * source.stop("+0.5"); // stops the source 0.5 seconds from now
     */stop(t){let r=n5(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),"started"===this._state.getValueAtTime(r)||n4(this._state.getNextState("started",r))){if(this.log("stop",r),this._synced){let t=this.context.transport.schedule(this._stop.bind(this),r);this._scheduled.push(t)}else this._stop(r);this._state.cancel(r),this._state.setStateAtTime("stopped",r)}return this}/**
     * Restart the source.
     */restart(t,r,o){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,r,o)),this}/**
     * Sync the source to the Transport so that all subsequent
     * calls to `start` and `stop` are synced to the TransportTime
     * instead of the AudioContext time.
     *
     * @example
     * const osc = new Tone.Oscillator().toDestination();
     * // sync the source so that it plays between 0 and 0.3 on the Transport's timeline
     * osc.sync().start(0).stop(0.3);
     * // start the transport.
     * Tone.Transport.start();
     * // set it to loop once a second
     * Tone.Transport.loop = true;
     * Tone.Transport.loopEnd = 1;
     */sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,r)=>{if(r>0){// get the playback state at that time
let o=this._state.get(r);// listen for start events which may occur in the middle of the sync'ed time
if(o&&"started"===o.state&&o.time!==r){let n;// get the offset
let s=r-this.toSeconds(o.time);o.duration&&(n=this.toSeconds(o.duration)-s),this._start(t,this.toSeconds(o.offset)+s,n)}}},this._syncedStop=t=>{let r=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(r)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}/**
     * Unsync the source to the Transport. See Source.sync
     */unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,// clear all of the scheduled ids
this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),// stop it also
this._stop(0),this}/**
     * Clean up.
     */dispose(){return super.dispose(),this.onstop=sT,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ic extends sJ{constructor(){super(su(ic.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",/**
         * The oscillator
         */this._source=this.context.createBufferSource(),this._internalChannels=[this._source],/**
         * indicators if the source has started/stopped
         */this._sourceStarted=!1,this._sourceStopped=!1;let t=su(ic.getDefaults(),arguments,["url","onload"]);sZ(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),/**
         * The playbackRate of the buffer
         */this.playbackRate=new sW({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),// set some values initially
this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new sE(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(sJ.getDefaults(),{url:new sE,loop:!1,loopEnd:0,loopStart:0,onload:sT,onerror:sT,playbackRate:1})}/**
     * The fadeIn time of the amplitude envelope.
     */get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}/**
     * The fadeOut time of the amplitude envelope.
     */get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}/**
     * The curve applied to the fades, either "linear" or "exponential"
     */get curve(){return this._curve}set curve(t){this._curve=t}/**
     * Start the buffer
     * @param  time When the player should start.
     * @param  offset The offset from the beginning of the sample to start at.
     * @param  duration How long the sample should play. If no duration is given, it will default to the full length of the sample (minus any offset)
     * @param  gain  The gain to play the buffer back at.
     */start(t,r,o,n=1){nK(this.buffer.loaded,"buffer is either not set or not loaded");let s=this.toSeconds(t);// apply the gain envelope
this._startGain(s,n),r=this.loop?sc(r,this.loopStart):sc(r,0);// make sure the offset is not less than 0
let i=Math.max(this.toSeconds(r),0);// start the buffer source
if(this.loop){// modify the offset if it's greater than the loop time
let t=this.toSeconds(this.loopEnd)||this.buffer.duration,r=this.toSeconds(this.loopStart),o=t-r;sp(i,t)&&(i=(i-r)%o+r),sm(i,this.buffer.duration)&&(i=0)}// if a duration is given, schedule a stop
if(// this.buffer.loaded would have return false if the AudioBuffer was undefined
this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,i+1e-6<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(s,i)),n4(o)){let t=this.toSeconds(o);// make sure it's never negative
t=Math.max(t,0),this.stop(s+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}/**
     * If loop is true, the loop will start at this position.
     */get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}/**
     * If loop is true, the loop will end at this position.
     */get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}/**
     * The audio buffer belonging to the player.
     */get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}/**
     * If the buffer should loop once it's over.
     */get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}/**
     * Clean up.
     */dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function id(t,r){return ss(this,void 0,void 0,function*(){let o=r/t.context.sampleRate,n=new sk(1,o,t.context.sampleRate),s=new t.constructor(Object.assign(t.get(),{// should do 2 iterations
frequency:2/o,// zero out the detune
detune:0,context:n})).toDestination();s.start(0);let i=yield n.render();return i.getChannelData(0)})}class ih extends sJ{constructor(){super(su(ih.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",/**
         * The oscillator
         */this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let t=su(ih.getDefaults(),arguments,["frequency","type"]);sZ(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new sW({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new sW({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),sS(this,["frequency","detune"])}static getDefaults(){return Object.assign(sJ.getDefaults(),{detune:0,frequency:440,type:"sine"})}/**
     * Start the oscillator node at the given time
     * @param  time When to start the oscillator
     */start(t){let r=this.toSeconds(t);return this.log("start",r),this._startGain(r),this._oscillator.start(r),this}_stopSource(t){this._oscillator.stop(t)}/**
     * Sets an arbitrary custom periodic waveform given a PeriodicWave.
     * @param  periodicWave PeriodicWave should be created with context.createPeriodicWave
     */setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}/**
     * The oscillator type. Either 'sine', 'sawtooth', 'square', or 'triangle'
     */get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}/**
     * Clean up.
     */dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ip extends iu{constructor(){super(su(ip.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",/**
         * the main oscillator
         */this._oscillator=null;let t=su(ip.getDefaults(),arguments,["frequency","type"]);this.frequency=new sK({context:this.context,units:"frequency",value:t.frequency}),sS(this,"frequency"),this.detune=new sK({context:this.context,units:"cents",value:t.detune}),sS(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(iu.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}/**
     * start the oscillator
     */_start(t){let r=this.toSeconds(t),o=new ih({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,// connect the control signal to the oscillator frequency & detune
this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),// start the oscillator
this._oscillator.start(r)}/**
     * stop the oscillator
     */_stop(t){let r=this.toSeconds(t);this._oscillator&&this._oscillator.stop(r)}/**
     * Restart the oscillator. Does not stop the oscillator, but instead
     * just cancels any scheduled 'stop' from being invoked.
     */_restart(t){let r=this.toSeconds(t);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}/**
     * Sync the signal to the Transport's bpm. Any changes to the transports bpm,
     * will also affect the oscillators frequency.
     * @example
     * const osc = new Tone.Oscillator().toDestination().start();
     * osc.frequency.value = 440;
     * // the ratio between the bpm and the frequency will be maintained
     * osc.syncFrequency();
     * // double the tempo
     * Tone.Transport.bpm.value *= 2;
     * // the frequency of the oscillator is doubled to 880
     */syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}/**
     * Unsync the oscillator's frequency from the Transport.
     * See Oscillator.syncFrequency
     */unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}/**
     * Get a cached periodic wave. Avoids having to recompute
     * the oscillator values when they have already been computed
     * with the same values.
     */_getCachedPeriodicWave(){if("custom"===this._type){let t=ip._periodicWaveCache.find(t=>{var r,o;return t.phase===this._phase&&(r=t.partials,o=this._partials,r.length===o.length&&r.every((t,r)=>o[r]===t))});return t}{let t=ip._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let r=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&r)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{// first check if the value is cached
let r=this._getCachedPeriodicWave();if(n4(r)){let{partials:t,wave:o}=r;this._wave=o,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{let[r,o]=this._getRealImaginary(t,this._phase),n=this.context.createPeriodicWave(r,o);this._wave=n,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),// set the cache
ip._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),ip._periodicWaveCache.length>100&&ip._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){n0(t,0);let r=this._type,o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(r=o[1]),"custom"!==this._type)0===t?this.type=r:this.type=r+t.toString();else{// extend or shorten the partials array
let r=new Float32Array(t);// copy over the partials array
this._partials.forEach((t,o)=>r[o]=t),this._partials=Array.from(r),this.type=this._type}}/**
     * Returns the real and imaginary components based
     * on the oscillator type.
     * @returns [real: Float32Array, imaginary: Float32Array]
     */_getRealImaginary(t,r){let o=2048,n=new Float32Array(o),s=new Float32Array(o),i=1;if("custom"===t)// if the partial count is 0, don't bother doing any computation
{if(i=this._partials.length+1,this._partialCount=this._partials.length,o=i,0===this._partials.length)return[n,s]}else{let r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);r?(i=parseInt(r[2],10)+1,this._partialCount=parseInt(r[2],10),t=r[1],o=i=Math.max(i,2)):this._partialCount=0,this._partials=[]}for(let a=1;a<o;++a){let o;let l=2/(a*Math.PI);switch(t){case"sine":o=a<=i?1:0,this._partials[a-1]=o;break;case"square":o=1&a?2*l:0,this._partials[a-1]=o;break;case"sawtooth":o=l*(1&a?1:-1),this._partials[a-1]=o;break;case"triangle":o=1&a?2*(l*l)*(a-1>>1&1?-1:1):0,this._partials[a-1]=o;break;case"custom":o=this._partials[a-1];break;default:throw TypeError("Oscillator: invalid type: "+t)}0!==o?(n[a]=-o*Math.sin(r*a),s[a]=o*Math.cos(r*a)):(n[a]=0,s[a]=0)}return[n,s]}/**
     * Compute the inverse FFT for a given phase.
     */_inverseFFT(t,r,o){let n=0,s=t.length;for(let i=0;i<s;i++)n+=t[i]*Math.cos(i*o)+r[i]*Math.sin(i*o);return n}/**
     * Returns the initial value of the oscillator when stopped.
     * E.g. a "sine" oscillator with phase = 90 would return an initial value of -1.
     */getInitialValue(){let[t,r]=this._getRealImaginary(this._type,0),o=0,n=2*Math.PI;// check for peaks in 16 places
for(let s=0;s<32;s++)o=Math.max(this._inverseFFT(t,r,s/32*n),o);return Math.max(Math.min(-this._inverseFFT(t,r,this._phase)/o,1),-1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,// reset the type
this.type=this._type}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}/**
 * Cache the periodic waves to avoid having to redo computations
 */ip._periodicWaveCache=[];class im extends sX{constructor(){super(Object.assign(su(im.getDefaults(),arguments,["context"])))}connect(t,r=0,o=0){return s0(this,t,r,o),this}}class iy extends im{constructor(){super(Object.assign(su(iy.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",/**
         * the waveshaper node
         */this._shaper=this.context.createWaveShaper(),/**
         * The input to the waveshaper node.
         */this.input=this._shaper,/**
         * The output from the waveshaper node
         */this.output=this._shaper;let t=su(iy.getDefaults(),arguments,["mapping","length"]);n9(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(sK.getDefaults(),{length:1024})}/**
     * Uses a mapping function to set the value of the curve.
     * @param mapping The function used to define the values.
     *                The mapping function take two arguments:
     *                the first is the value at the current position
     *                which goes from -1 to 1 over the number of elements
     *                in the curve array. The second argument is the array position.
     * @example
     * const shaper = new Tone.WaveShaper();
     * // map the input signal from [-1, 1] to [0, 10]
     * shaper.setMap((val, index) => (val + 1) * 5);
     */setMap(t,r=1024){let o=new Float32Array(r);for(let n=0;n<r;n++){let s=n/(r-1)*2-1;o[n]=t(s,n)}return this.curve=o,this}/**
     * The array to set as the waveshaper curve. For linear curves
     * array length does not make much difference, but for complex curves
     * longer arrays will provide smoother interpolation.
     */get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}/**
     * Specifies what type of oversampling (if any) should be used when
     * applying the shaping curve. Can either be "none", "2x" or "4x".
     */get oversample(){return this._shaper.oversample}set oversample(t){let r=["none","2x","4x"].some(r=>r.includes(t));nK(r,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}/**
     * Clean up.
     */dispose(){return super.dispose(),this._shaper.disconnect(),this}}class ig extends im{constructor(){super(...arguments),this.name="AudioToGain",/**
         * The node which converts the audio ranges
         */this._norm=new iy({context:this.context,mapping:t=>(t+1)/2}),/**
         * The AudioRange input [-1, 1]
         */this.input=this._norm,/**
         * The GainRange output [0, 1]
         */this.output=this._norm}/**
     * clean up
     */dispose(){return super.dispose(),this._norm.dispose(),this}}class iv extends sK{constructor(){super(Object.assign(su(iv.getDefaults(),arguments,["value"]))),this.name="Multiply",/**
         * Indicates if the value should be overridden on connection
         */this.override=!1;let t=su(iv.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new sQ({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(sK.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ib extends iu{constructor(){super(su(ib.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",/**
         * convert the -1,1 output to 0,1
         */this._modulationScale=new ig({context:this.context}),/**
         * the node where the modulation happens
         */this._modulationNode=new sQ({context:this.context});let t=su(ib.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ip({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ip({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new iv({context:this.context,units:"positive",value:t.harmonicity}),// connections
this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),sS(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ip.getDefaults(),{harmonicity:1,modulationType:"square"})}/**
     * start the oscillator
     */_start(t){this._modulator.start(t),this._carrier.start(t)}/**
     * stop the oscillator
     */_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}/**
     * The type of the carrier oscillator
     */get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}/**
     * The type of the modulator oscillator
     */get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}/**
     * Clean up.
     */dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class i_ extends iu{constructor(){super(su(i_.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",/**
         * the node where the modulation happens
         */this._modulationNode=new sQ({context:this.context,gain:0});let t=su(i_.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ip({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new sK({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new ip({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new iv({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new iv({context:this.context,units:"positive",value:t.modulationIndex}),// connections
this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),sS(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ip.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}/**
     * start the oscillator
     */_start(t){this._modulator.start(t),this._carrier.start(t)}/**
     * stop the oscillator
     */_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}/**
     * The type of the modulator oscillator
     */get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}/**
     * Clean up.
     */dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ix extends iu{constructor(){super(su(ix.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",/**
         * gate the width amount
         */this._widthGate=new sQ({context:this.context,gain:0}),/**
         * Threshold the signal to turn it into a square
         */this._thresh=new iy({context:this.context,mapping:t=>t<=0?-1:1});let t=su(ix.getDefaults(),arguments,["frequency","width"]);this.width=new sK({context:this.context,units:"audioRange",value:t.width}),this._triangle=new ip({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,// connections
this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),sS(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(iu.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}/**
     * start the oscillator
     */_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}/**
     * stop the oscillator
     */_stop(t){t=this.toSeconds(t),this._triangle.stop(t),// the width is still connected to the output.
// that needs to be stopped also
this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}/**
     * The phase of the oscillator in degrees.
     */get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}/**
     * The type of the oscillator. Always returns "pulse".
     */get type(){return"pulse"}/**
     * The baseType of the oscillator. Always returns "pulse".
     */get baseType(){return"pulse"}/**
     * The partials of the waveform. Cannot set partials for this waveform type
     */get partials(){return[]}/**
     * No partials for this waveform type.
     */get partialCount(){return 0}/**
     * *Internal use* The carrier oscillator type is fed through the
     * waveshaper node to create the pulse. Using different carrier oscillators
     * changes oscillator's behavior.
     */set carrierType(t){this._triangle.type=t}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}/**
     * Clean up method.
     */dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ij extends iu{constructor(){super(su(ij.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",/**
         * The array of oscillators
         */this._oscillators=[];let t=su(ij.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new sK({context:this.context,units:"frequency",value:t.frequency}),this.detune=new sK({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,// set the count initially
this.count=t.count,sS(this,["frequency","detune"])}static getDefaults(){return Object.assign(ip.getDefaults(),{count:3,spread:20,type:"sawtooth"})}/**
     * start the oscillator
     */_start(t){t=this.toSeconds(t),this._forEach(r=>r.start(t))}/**
     * stop the oscillator
     */_stop(t){t=this.toSeconds(t),this._forEach(r=>r.stop(t))}_restart(t){this._forEach(r=>r.restart(t))}/**
     * Iterate over all of the oscillators
     */_forEach(t){for(let r=0;r<this._oscillators.length;r++)t(this._oscillators[r],r)}/**
     * The type of the oscillator
     */get type(){return this._type}set type(t){this._type=t,this._forEach(r=>r.type=t)}/**
     * The detune spread between the oscillators. If "count" is
     * set to 3 oscillators and the "spread" is set to 40,
     * the three oscillators would be detuned like this: [-20, 0, 20]
     * for a total detune spread of 40 cents.
     * @example
     * const fatOsc = new Tone.FatOscillator().toDestination().start();
     * fatOsc.spread = 70;
     */get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){let r=-t/2,o=t/(this._oscillators.length-1);this._forEach((t,n)=>t.detune.value=r+o*n)}}/**
     * The number of detuned oscillators. Must be an integer greater than 1.
     * @example
     * const fatOsc = new Tone.FatOscillator("C#3", "sawtooth").toDestination().start();
     * // use 4 sawtooth oscillators
     * fatOsc.count = 4;
     */get count(){return this._oscillators.length}set count(t){if(n0(t,1),this._oscillators.length!==t){// dispose the previous oscillators
this._forEach(t=>t.dispose()),this._oscillators=[];for(let r=0;r<t;r++){let o=new ip({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+r/t*360,partialCount:this._partialCount,onstop:0===r?()=>this.onstop(this):sT});"custom"===this.type&&(o.partials=this._partials),this.frequency.connect(o.frequency),this.detune.connect(o.detune),o.detune.overridden=!1,o.connect(this.output),this._oscillators[r]=o}// set the spread
this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(r=>r.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(r=>r.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(r=>r.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}/**
     * Clean up.
     */dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class iw extends iu{constructor(){super(su(iw.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",/**
         * Scale the oscillator so it doesn't go silent
         * at the extreme values.
         */this._scale=new iv({context:this.context,value:2});let t=su(iw.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ix({context:this.context,frequency:t.modulationFrequency}),// change the pulse oscillator type
this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ip({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,// connections
this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),sS(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(iu.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}/**
     * start the oscillator
     */_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}/**
     * stop the oscillator
     */_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}/**
     * restart the oscillator
     */_restart(t){this._modulator.restart(t),this._pulse.restart(t)}/**
     * The type of the oscillator. Always returns "pwm".
     */get type(){return"pwm"}/**
     * The baseType of the oscillator. Always returns "pwm".
     */get baseType(){return"pwm"}/**
     * The partials of the waveform. Cannot set partials for this waveform type
     */get partials(){return[]}/**
     * No partials for this waveform type.
     */get partialCount(){return 0}/**
     * The phase of the oscillator in degrees.
     */get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}/**
     * Clean up.
     */dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const iS={am:ib,fat:ij,fm:i_,oscillator:ip,pulse:ix,pwm:iw};class iT extends iu{constructor(){super(su(iT.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";let t=su(iT.getDefaults(),arguments,["frequency","type"]);this.frequency=new sK({context:this.context,units:"frequency",value:t.frequency}),this.detune=new sK({context:this.context,units:"cents",value:t.detune}),sS(this,["frequency","detune"]),// set the options
this.set(t)}static getDefaults(){return Object.assign(ip.getDefaults(),i_.getDefaults(),ib.getDefaults(),ij.getDefaults(),ix.getDefaults(),iw.getDefaults())}/**
     * start the oscillator
     */_start(t){this._oscillator.start(t)}/**
     * start the oscillator
     */_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}/**
     * The type of the oscillator. Can be any of the basic types: sine, square, triangle, sawtooth. Or
     * prefix the basic types with "fm", "am", or "fat" to use the FMOscillator, AMOscillator or FatOscillator
     * types. The oscillator could also be set to "pwm" or "pulse". All of the parameters of the
     * oscillator's class are accessible when the oscillator is set to that type, but throws an error
     * when it's not.
     * @example
     * const omniOsc = new Tone.OmniOscillator().toDestination().start();
     * omniOsc.type = "pwm";
     * // modulationFrequency is parameter which is available
     * // only when the type is "pwm".
     * omniOsc.modulationFrequency.value = 0.5;
     */get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}/**
     * The value is an empty array when the type is not "custom".
     * This is not available on "pwm" and "pulse" oscillator types.
     * See [[Oscillator.partials]]
     */get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),// then set the rest
super.set(t),this}/**
     * connect the oscillator to the frequency and detune signals
     */_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let r=iS[t],o=this.now();if(this._oscillator){let t=this._oscillator;t.stop(o),// dispose the old one
this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new r({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(o)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}/**
     * The source type of the oscillator.
     * @example
     * const omniOsc = new Tone.OmniOscillator(440, "fmsquare");
     * console.log(omniOsc.sourceType); // 'fm'
     */get sourceType(){return this._sourceType}set sourceType(t){// the basetype defaults to sine
let r="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(r=this._oscillator.type),"fm"===t?this.type="fm"+r:"am"===t?this.type="am"+r:"fat"===t?this.type="fat"+r:"oscillator"===t?this.type=r:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,r){return t instanceof iS[r]}/**
     * The base type of the oscillator. See [[Oscillator.baseType]]
     * @example
     * const omniOsc = new Tone.OmniOscillator(440, "fmsquare4");
     * console.log(omniOsc.sourceType, omniOsc.baseType, omniOsc.partialCount);
     */get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}/**
     * The width of the oscillator when sourceType === "pulse".
     * See [[PWMOscillator.width]]
     */get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}/**
     * The number of detuned oscillators when sourceType === "fat".
     * See [[FatOscillator.count]]
     */get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&n6(t)&&(this._oscillator.count=t)}/**
     * The detune spread between the oscillators when sourceType === "fat".
     * See [[FatOscillator.count]]
     */get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&n6(t)&&(this._oscillator.spread=t)}/**
     * The type of the modulator oscillator. Only if the oscillator is set to "am" or "fm" types.
     * See [[AMOscillator]] or [[FMOscillator]]
     */get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&se(t)&&(this._oscillator.modulationType=t)}/**
     * The modulation index when the sourceType === "fm"
     * See [[FMOscillator]].
     */get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}/**
     * Harmonicity is the frequency ratio between the carrier and the modulator oscillators.
     * See [[AMOscillator]] or [[FMOscillator]]
     */get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}/**
     * The modulationFrequency Signal of the oscillator when sourceType === "pwm"
     * see [[PWMOscillator]]
     * @min 0.1
     * @max 5
     */get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return ss(this,void 0,void 0,function*(){return id(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function iE(t,r=1/0){let o=new WeakMap;return function(n,s){Reflect.defineProperty(n,s,{configurable:!0,enumerable:!0,get:function(){return o.get(this)},set:function(n){n0(n,t,r),o.set(this,n)}})}}function ik(t,r=1/0){let o=new WeakMap;return function(n,s){Reflect.defineProperty(n,s,{configurable:!0,enumerable:!0,get:function(){return o.get(this)},set:function(n){n0(this.toSeconds(n),t,r),o.set(this,n)}})}}class iM extends iu{constructor(){super(su(iM.getDefaults(),arguments,["url","onload"])),this.name="Player",/**
         * All of the active buffer source nodes
         */this._activeSources=new Set;let t=su(iM.getDefaults(),arguments,["url","onload"]);this._buffer=new sE({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(iu.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:sT,onerror:sT,playbackRate:1,reverse:!1})}/**
     * Load the audio file as an audio buffer.
     * Decodes the audio asynchronously and invokes
     * the callback once the audio buffer loads.
     * Note: this does not need to be called if a url
     * was passed in to the constructor. Only use this
     * if you want to manually load a new url.
     * @param url The url of the buffer to load. Filetype support depends on the browser.
     */load(t){return ss(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}/**
     * Internal callback when the buffer is loaded.
     */_onload(t=sT){t(),this.autostart&&this.start()}/**
     * Internal callback when the buffer is done playing.
     */_onSourceEnd(t){// invoke the onstop function
this.onstop(this),// delete the source from the active sources
this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(// remove the 'implicitEnd' event and replace with an explicit end
this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}/**
     * Play the buffer at the given startTime. Optionally add an offset
     * and/or duration which will play the buffer from a position
     * within the buffer for the given duration.
     *
     * @param  time When the player should start.
     * @param  offset The offset from the beginning of the sample to start at.
     * @param  duration How long the sample should play. If no duration is given, it will default to the full length of the sample (minus any offset)
     */start(t,r,o){return super.start(t,r,o),this}/**
     * Internal start method
     */_start(t,r,o){r=this._loop?sc(r,this._loopStart):sc(r,0);// compute the values in seconds
let n=this.toSeconds(r),s=o;o=sc(o,Math.max(this._buffer.duration-n,0));let i=this.toSeconds(o);// scale it by the playback rate
i/=this._playbackRate,// get the start time
t=this.toSeconds(t);// make the source
let a=new ic({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(// cancel the previous stop
this._state.cancel(t+i),// if it's not looping, set the state change at the end of the sample
this._state.setStateAtTime("stopped",t+i,{implicitEnd:!0})),// add it to the array of active sources
this._activeSources.add(a),this._loop&&n5(s)?a.start(t,n):a.start(t,n,i-this.toSeconds(this.fadeOut))}/**
     * Stop playback.
     */_stop(t){let r=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(r))}/**
     * Stop and then restart the player from the beginning (or offset)
     * @param  time When the player should start.
     * @param  offset The offset from the beginning of the sample to start at.
     * @param  duration How long the sample should play. If no duration is given,
     * 					it will default to the full length of the sample (minus any offset)
     */restart(t,r,o){return super.restart(t,r,o),this}_restart(t,r,o){this._stop(t),this._start(t,r,o)}/**
     * Seek to a specific time in the player's buffer. If the
     * source is no longer playing at that time, it will stop.
     * @param offset The time to seek to.
     * @param when The time for the seek event to occur.
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/berklee/gurgling_theremin_1.mp3", () => {
     * 	player.start();
     * 	// seek to the offset in 1 second from now
     * 	player.seek(0.4, "+1");
     * }).toDestination();
     */seek(t,r){let o=this.toSeconds(r);if("started"===this._state.getValueAtTime(o)){let r=this.toSeconds(t);// if it's currently playing, stop it
this._stop(o),// restart it at the given time
this._start(o,r)}return this}/**
     * Set the loop start and end. Will only loop if loop is set to true.
     * @param loopStart The loop start time
     * @param loopEnd The loop end time
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/berklee/malevoices_aa2_F3.mp3").toDestination();
     * // loop between the given points
     * player.setLoopPoints(0.2, 0.3);
     * player.loop = true;
     * player.autostart = true;
     */setLoopPoints(t,r){return this.loopStart=t,this.loopEnd=r,this}/**
     * If loop is true, the loop will start at this position.
     */get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&n0(this.toSeconds(t),0,this.buffer.duration),// get the current source
this._activeSources.forEach(r=>{r.loopStart=t})}/**
     * If loop is true, the loop will end at this position.
     */get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&n0(this.toSeconds(t),0,this.buffer.duration),// get the current source
this._activeSources.forEach(r=>{r.loopEnd=t})}/**
     * The audio buffer belonging to the player.
     */get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}/**
     * If the buffer should loop once it's over.
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/drum-samples/breakbeat.mp3").toDestination();
     * player.loop = true;
     * player.autostart = true;
     */get loop(){return this._loop}set loop(t){// if no change, do nothing
if(this._loop!==t&&(this._loop=t,// set the loop of all of the sources
this._activeSources.forEach(r=>{r.loop=t}),t)){// remove the next stopEvent
let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}/**
     * Normal speed is 1. The pitch will change with the playback rate.
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/berklee/femalevoices_aa2_A5.mp3").toDestination();
     * // play at 1/4 speed
     * player.playbackRate = 0.25;
     * // play as soon as the buffer is loaded
     * player.autostart = true;
     */get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let r=this.now(),o=this._state.getNextState("stopped",r);o&&o.implicitEnd&&(this._state.cancel(o.time),this._activeSources.forEach(t=>t.cancelStop())),// set all the sources
this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,r)})}/**
     * If the buffer should be reversed
     * @example
     * const player = new Tone.Player("https://tonejs.github.io/audio/berklee/chime_1.mp3").toDestination();
     * player.autostart = true;
     * player.reverse = true;
     */get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}/**
     * If the buffer is loaded
     */get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),// disconnect all of the players
this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}sn([ik(0)],iM.prototype,"fadeIn",void 0),sn([ik(0)],iM.prototype,"fadeOut",void 0);class iC extends sX{constructor(){super(su(iC.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",/**
         * the signal which is output.
         */this._sig=new sK({context:this.context,value:0}),/**
         * The output signal of the envelope
         */this.output=this._sig,/**
         * Envelope has no input
         */this.input=void 0;let t=su(iC.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(sX.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}/**
     * Read the current value of the envelope. Useful for
     * synchronizing visual output to the envelope.
     */get value(){return this.getValueAtTime(this.now())}/**
     * Get the curve
     * @param  curve
     * @param  direction  In/Out
     * @return The curve name
     */_getCurve(t,r){if(se(t))return t;{// look up the name in the curves array
let o;for(o in iA)if(iA[o][r]===t)return o;// return the custom curve
return t}}/**
     * Assign a the curve to the given name using the direction
     * @param  name
     * @param  direction In/Out
     * @param  curve
     */_setCurve(t,r,o){// check if it's a valid type
if(se(o)&&Reflect.has(iA,o)){let n=iA[o];n8(n)?"_decayCurve"!==t&&(this[t]=n[r]):this[t]=n}else if(n9(o)&&"_decayCurve"!==t)this[t]=o;else throw Error("Envelope: invalid curve: "+o)}/**
     * The shape of the attack.
     * Can be any of these strings:
     * * "linear"
     * * "exponential"
     * * "sine"
     * * "cosine"
     * * "bounce"
     * * "ripple"
     * * "step"
     *
     * Can also be an array which describes the curve. Values
     * in the array are evenly subdivided and linearly
     * interpolated over the duration of the attack.
     * @example
     * return Tone.Offline(() => {
     * 	const env = new Tone.Envelope(0.4).toDestination();
     * 	env.attackCurve = "linear";
     * 	env.triggerAttack();
     * }, 1, 1);
     */get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}/**
     * The shape of the release. See the attack curve types.
     * @example
     * return Tone.Offline(() => {
     * 	const env = new Tone.Envelope({
     * 		release: 0.8
     * 	}).toDestination();
     * 	env.triggerAttack();
     * 	// release curve could also be defined by an array
     * 	env.releaseCurve = [1, 0.3, 0.4, 0.2, 0.7, 0];
     * 	env.triggerRelease(0.2);
     * }, 1, 1);
     */get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}/**
     * The shape of the decay either "linear" or "exponential"
     * @example
     * return Tone.Offline(() => {
     * 	const env = new Tone.Envelope({
     * 		sustain: 0.1,
     * 		decay: 0.5
     * 	}).toDestination();
     * 	env.decayCurve = "linear";
     * 	env.triggerAttack();
     * }, 1, 1);
     */get decayCurve(){return this._decayCurve}set decayCurve(t){nK(["linear","exponential"].some(r=>r===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}/**
     * Trigger the attack/decay portion of the ADSR envelope.
     * @param  time When the attack should start.
     * @param velocity The velocity of the envelope scales the vales.
     *                             number between 0-1
     * @example
     * const env = new Tone.AmplitudeEnvelope().toDestination();
     * const osc = new Tone.Oscillator().connect(env).start();
     * // trigger the attack 0.5 seconds from now with a velocity of 0.2
     * env.triggerAttack("+0.5", 0.2);
     */triggerAttack(t,r=1){this.log("triggerAttack",t,r),t=this.toSeconds(t);let o=this.toSeconds(this.attack),n=o,s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0){// subtract the current value from the attack time
let t=1/n;// the attack is now the remaining time
n=(1-i)/t}// attack
if(n<this.sampleTime)this._sig.cancelScheduledValues(t),// case where the attack time is 0 should set instantly
this._sig.setValueAtTime(r,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(r,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(r,n,t);else{this._sig.cancelAndHoldAtTime(t);let o=this._attackCurve;// find the starting position in the curve
for(let t=1;t<o.length;t++)if(o[t-1]<=i&&i<=o[t]){// the first index is the current value
(o=this._attackCurve.slice(t))[0]=i;break}this._sig.setValueCurveAtTime(o,t,n,r)}// decay
if(s&&this.sustain<1){let o=r*this.sustain,i=t+n;this.log("decay",i),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(o,s+i):this._sig.exponentialApproachValueAtTime(o,i,s)}return this}/**
     * Triggers the release of the envelope.
     * @param  time When the release portion of the envelope should start.
     * @example
     * const env = new Tone.AmplitudeEnvelope().toDestination();
     * const osc = new Tone.Oscillator({
     * 	type: "sawtooth"
     * }).connect(env).start();
     * env.triggerAttack();
     * // trigger the release half a second after the attack
     * env.triggerRelease("+0.5");
     */triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);let r=this.getValueAtTime(t);if(r>0){let o=this.toSeconds(this.release);o<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,o,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,o,t):(nK(n9(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,o,r))}return this}/**
     * Get the scheduled value at the given time. This will
     * return the unconverted (raw) value.
     * @example
     * const env = new Tone.Envelope(0.5, 1, 0.4, 2);
     * env.triggerAttackRelease(2);
     * setInterval(() => console.log(env.getValueAtTime(Tone.now())), 100);
     */getValueAtTime(t){return this._sig.getValueAtTime(t)}/**
     * triggerAttackRelease is shorthand for triggerAttack, then waiting
     * some duration, then triggerRelease.
     * @param duration The duration of the sustain.
     * @param time When the attack should be triggered.
     * @param velocity The velocity of the envelope.
     * @example
     * const env = new Tone.AmplitudeEnvelope().toDestination();
     * const osc = new Tone.Oscillator().connect(env).start();
     * // trigger the release 0.5 seconds after the attack
     * env.triggerAttackRelease(0.5);
     */triggerAttackRelease(t,r,o=1){return r=this.toSeconds(r),this.triggerAttack(r,o),this.triggerRelease(r+this.toSeconds(t)),this}/**
     * Cancels all scheduled envelope changes after the given time.
     */cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}/**
     * Connect the envelope to a destination node.
     */connect(t,r=0,o=0){return s0(this,t,r,o),this}/**
     * Render the envelope curve to an array of the given length.
     * Good for visualizing the envelope curve. Rescales the duration of the
     * envelope to fit the length.
     */asArray(t=1024){return ss(this,void 0,void 0,function*(){let r=t/this.context.sampleRate,o=new sk(1,r,this.context.sampleRate),n=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=n+this.toSeconds(this.release),i=.1*s,a=s+i,l=new this.constructor(Object.assign(this.get(),{attack:r*this.toSeconds(this.attack)/a,decay:r*this.toSeconds(this.decay)/a,release:r*this.toSeconds(this.release)/a,context:o}));l._sig.toDestination(),l.triggerAttackRelease(r*(n+i)/a,0);let u=yield o.render();return u.getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}sn([ik(0)],iC.prototype,"attack",void 0),sn([ik(0)],iC.prototype,"decay",void 0),sn([iE(0,1)],iC.prototype,"sustain",void 0),sn([ik(0)],iC.prototype,"release",void 0);/**
 * Generate some complex envelope curves.
 */const iA=(()=>{let t,r;// cosine curve
let o=[];for(t=0;t<128;t++)o[t]=Math.sin(t/127*(Math.PI/2));// ripple curve
let n=[];for(t=0;t<127;t++){r=t/127;let o=Math.sin(r*(2*Math.PI)*6.4-Math.PI/2)+1;n[t]=o/10+.83*r}n[127]=1;// stairs curve
let s=[];for(t=0;t<128;t++)s[t]=Math.ceil(t/127*5)/5;// in-out easing curve
let i=[];for(t=0;t<128;t++)r=t/127,i[t]=.5*(1-Math.cos(Math.PI*r));// a bounce curve
let a=[];for(t=0;t<128;t++){r=t/127;let o=4*Math.pow(r,3)+.2,n=Math.cos(o*Math.PI*2*r);a[t]=Math.abs(n*(1-r))}/**
     * Invert a value curve to make it work for the release
     */function l(t){let r=Array(t.length);for(let o=0;o<t.length;o++)r[o]=1-t[o];return r}/**
     * attack and release curve arrays
     */return{bounce:{In:l(a),Out:a},cosine:{In:o,Out:o.slice(0).reverse()},exponential:"exponential",linear:"linear",ripple:{In:n,Out:l(n)},sine:{In:i,Out:l(i)},step:{In:s,Out:l(s)}}})();class iO extends sX{constructor(){super(su(iO.getDefaults(),arguments)),/**
         * Keep track of all events scheduled to the transport
         * when the instrument is 'synced'
         */this._scheduledEvents=[],/**
         * If the instrument is currently synced
         */this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let t=su(iO.getDefaults(),arguments);this._volume=this.output=new ir({context:this.context,volume:t.volume}),this.volume=this._volume.volume,sS(this,"volume")}static getDefaults(){return Object.assign(sX.getDefaults(),{volume:0})}/**
     * Sync the instrument to the Transport. All subsequent calls of
     * [[triggerAttack]] and [[triggerRelease]] will be scheduled along the transport.
     * @example
     * const fmSynth = new Tone.FMSynth().toDestination();
     * fmSynth.volume.value = -6;
     * fmSynth.sync();
     * // schedule 3 notes when the transport first starts
     * fmSynth.triggerAttackRelease("C4", "8n", 0);
     * fmSynth.triggerAttackRelease("E4", "8n", "8n");
     * fmSynth.triggerAttackRelease("G4", "8n", "4n");
     * // start the transport to hear the notes
     * Tone.Transport.start();
     */sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}/**
     * set _sync
     */_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}/**
     * Wrap the given method so that it can be synchronized
     * @param method Which method to wrap and sync
     * @param  timePosition What position the time argument appears in
     */_syncMethod(t,r){let o=this["_original_"+t]=this[t];this[t]=(...t)=>{let n=t[r],s=this.context.transport.schedule(n=>{t[r]=n,o.apply(this,t)},n);this._scheduledEvents.push(s)}}/**
     * Unsync the instrument from the Transport
     */unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}/**
     * Trigger the attack and then the release after the duration.
     * @param  note     The note to trigger.
     * @param  duration How long the note should be held for before
     *                         triggering the release. This value must be greater than 0.
     * @param time  When the note should be triggered.
     * @param  velocity The velocity the note should be triggered at.
     * @example
     * const synth = new Tone.Synth().toDestination();
     * // trigger "C4" for the duration of an 8th note
     * synth.triggerAttackRelease("C4", "8n");
     */triggerAttackRelease(t,r,o,n){let s=this.toSeconds(o),i=this.toSeconds(r);return this.triggerAttack(t,s,n),this.triggerRelease(s+i),this}/**
     * clean up
     * @returns {Instrument} this
     */dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class iR extends iO{constructor(){super(su(iR.getDefaults(),arguments));let t=su(iR.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(iO.getDefaults(),{detune:0,onsilence:sT,portamento:0})}/**
     * Trigger the attack of the note optionally with a given velocity.
     * @param  note The note to trigger.
     * @param  time When the note should start.
     * @param  velocity The velocity scaler determines how "loud" the note will be triggered.
     * @example
     * const synth = new Tone.Synth().toDestination();
     * // trigger the note a half second from now at half velocity
     * synth.triggerAttack("C4", "+0.5", 0.5);
     */triggerAttack(t,r,o=1){this.log("triggerAttack",t,r,o);let n=this.toSeconds(r);return this._triggerEnvelopeAttack(n,o),this.setNote(t,n),this}/**
     * Trigger the release portion of the envelope
     * @param  time If no time is given, the release happens immediatly
     * @example
     * const synth = new Tone.Synth().toDestination();
     * synth.triggerAttack("C4");
     * // trigger the release a second from now
     * synth.triggerRelease("+1");
     */triggerRelease(t){this.log("triggerRelease",t);let r=this.toSeconds(t);return this._triggerEnvelopeRelease(r),this}/**
     * Set the note at the given time. If no time is given, the note
     * will set immediately.
     * @param note The note to change to.
     * @param  time The time when the note should be set.
     * @example
     * const synth = new Tone.Synth().toDestination();
     * synth.triggerAttack("C4");
     * // change to F#6 in one quarter note from now.
     * synth.setNote("F#6", "+4n");
     */setNote(t,r){let o=this.toSeconds(r),n=t instanceof sU?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(o)>.05){let t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(n,t,o)}else this.frequency.setValueAtTime(n,o);return this}}sn([ik(0)],iR.prototype,"portamento",void 0);class iP extends iC{constructor(){super(su(iP.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new sQ({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}/**
     * Clean up
     */dispose(){return super.dispose(),this._gainNode.dispose(),this}}class iL extends iR{constructor(){super(su(iL.getDefaults(),arguments)),this.name="Synth";let t=su(iL.getDefaults(),arguments);this.oscillator=new iT(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new iP(Object.assign({context:this.context},t.envelope)),// connect the oscillators to the output
this.oscillator.chain(this.envelope,this.output),sS(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(iR.getDefaults(),{envelope:Object.assign(sd(iC.getDefaults(),Object.keys(sX.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(sd(iT.getDefaults(),[...Object.keys(iu.getDefaults()),"frequency","detune"]),{type:"triangle"})})}/**
     * start the attack portion of the envelope
     * @param time the time the attack should start
     * @param velocity the velocity of the note (0-1)
     */_triggerEnvelopeAttack(t,r){// if there is no release portion, stop the oscillator
if(// the envelopes
this.envelope.triggerAttack(t,r),this.oscillator.start(t),0===this.envelope.sustain){let r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+r+o)}}/**
     * start the release portion of the envelope
     * @param time the time the release should start
     */_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}/**
     * clean up
     */dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class iI extends iL{constructor(){super(su(iI.getDefaults(),arguments)),this.name="MembraneSynth",/**
         * Portamento is ignored in this synth. use pitch decay instead.
         */this.portamento=0;let t=su(iI.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,sS(this,["oscillator","envelope"])}static getDefaults(){return sl(iR.getDefaults(),iL.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,r){let o=this.toSeconds(r),n=this.toFrequency(t instanceof sU?t.toFrequency():t),s=n*this.octaves;return this.oscillator.frequency.setValueAtTime(s,o),this.oscillator.frequency.exponentialRampToValueAtTime(n,o+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}sn([iE(0)],iI.prototype,"octaves",void 0),sn([ik(0)],iI.prototype,"pitchDecay",void 0);/**
 * All of the classes or functions which are loaded into the AudioWorkletGlobalScope
 */const iD=new Set;function iF(t,r){let o=/* javascript */`registerProcessor("${t}", ${r})`;iD.add(o)}const iN=/* javascript */`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;iD.add(iN);const iU=/* javascript */`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;iD.add(iU);const iB=/* javascript */`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;iD.add(iB);const iV=/* javascript */`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;iF("feedback-comb-filter",iV);class iG extends iO{constructor(){super(su(iG.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",/**
         * The object of all currently playing BufferSources
         */this._activeSources=new Map;let t=su(iG.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),r={};Object.keys(t.urls).forEach(o=>{let n=parseInt(o,10);if(nK(st(o)||n6(n)&&isFinite(n),`url key is neither a note or midi pitch: ${o}`),st(o)){// convert the note name to MIDI
let n=new sU(this.context,o).toMidi();r[n]=t.urls[o]}else n6(n)&&isFinite(n)&&(r[n]=t.urls[n])}),this._buffers=new s4({urls:r,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(iO.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:sT,onerror:sT,release:.1,urls:{}})}/**
     * Returns the difference in steps between the given midi note at the closets sample.
     */_findClosest(t){let r=0;for(;r<96;){// check above and below
if(this._buffers.has(t+r))return-r;if(this._buffers.has(t-r))return r;r++}throw Error(`No available buffers for note: ${t}`)}/**
     * @param  notes	The note to play, or an array of notes.
     * @param  time     When to play the note
     * @param  velocity The velocity to play the sample back.
     */triggerAttack(t,r,o=1){return this.log("triggerAttack",t,r,o),Array.isArray(t)||(t=[t]),t.forEach(t=>{let n=sI(new sU(this.context,t).toFrequency()),s=Math.round(n),i=n-s,a=this._findClosest(s),l=s-a,u=this._buffers.get(l),c=sR(a+i),d=new ic({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);d.start(r,0,u.duration/c,o),n9(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(d),// remove it when it's done
d.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){let t=this._activeSources.get(s),r=t.indexOf(d);-1!==r&&t.splice(r,1)}}}),this}/**
     * @param  notes	The note to release, or an array of notes.
     * @param  time     	When to release the note.
     */triggerRelease(t,r){return this.log("triggerRelease",t,r),Array.isArray(t)||(t=[t]),t.forEach(t=>{let o=new sU(this.context,t).toMidi();// find the note
if(this._activeSources.has(o)&&this._activeSources.get(o).length){let t=this._activeSources.get(o);r=this.toSeconds(r),t.forEach(t=>{t.stop(r)}),this._activeSources.set(o,[])}}),this}/**
     * Release all currently active notes.
     * @param  time     	When to release the notes.
     */releaseAll(t){let r=this.toSeconds(t);return this._activeSources.forEach(t=>{for(;t.length;){let o=t.shift();o.stop(r)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}/**
     * Invoke the attack phase, then after the duration, invoke the release.
     * @param  notes	The note to play and release, or an array of notes.
     * @param  duration The time the note should be held
     * @param  time     When to start the attack
     * @param  velocity The velocity of the attack
     */triggerAttackRelease(t,r,o,n=1){let s=this.toSeconds(o);return this.triggerAttack(t,s,n),n9(r)?(nK(n9(t),"notes must be an array when duration is array"),t.forEach((t,o)=>{let n=r[Math.min(o,r.length-1)];this.triggerRelease(t,s+this.toSeconds(n))})):this.triggerRelease(t,s+this.toSeconds(r)),this}/**
     * Add a note to the sampler.
     * @param  note      The buffer's pitch.
     * @param  url  Either the url of the buffer, or a buffer which will be added with the given name.
     * @param  callback  The callback to invoke when the url is loaded.
     */add(t,r,o){if(nK(st(t)||isFinite(t),`note must be a pitch or midi: ${t}`),st(t)){// convert the note name to MIDI
let n=new sU(this.context,t).toMidi();this._buffers.add(n,r,o)}else this._buffers.add(t,r,o);return this}/**
     * If the buffers are loaded or not
     */get loaded(){return this._buffers.loaded}/**
     * Clean up
     */dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}sn([ik(0)],iG.prototype,"attack",void 0),sn([ik(0)],iG.prototype,"release",void 0);class iH extends sz{constructor(){super(su(iH.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",/**
         * Tracks the scheduled events
         */this._state=new sq("stopped"),/**
         * A delay time from when the event is scheduled to start
         */this._startOffset=0;let t=su(iH.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,// schedule the events for the first time
this._rescheduleEvents()}static getDefaults(){return Object.assign(sz.getDefaults(),{callback:sT,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}/**
     * Reschedule all of the events along the timeline
     * with the updated values.
     * @param after Only reschedules events after the given time.
     */_rescheduleEvents(t=-1){// if no argument is given, schedules all of the events
this._state.forEachFrom(t,t=>{let r;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);let o=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||n6(this._loop)&&this._loop>1){r=1/0,n6(this._loop)&&(r=this._loop*this._getLoopDuration());let n=this._state.getAfter(o);null!==n&&(r=Math.min(r,n.time-o)),r!==1/0&&(// schedule a stop since it's finite duration
this._state.setStateAtTime("stopped",o+r+1,{id:-1}),r=new s7(this.context,r));let s=new s7(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),s,new s7(this.context,o),r)}else t.id=this.context.transport.schedule(this._tick.bind(this),new s7(this.context,o))}})}/**
     * Returns the playback state of the note, either "started" or "stopped".
     */get state(){return this._state.getValueAtTime(this.context.transport.ticks)}/**
     * The start from the scheduled start time.
     */get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}/**
     * The probability of the notes being triggered.
     */get probability(){return this._probability}set probability(t){this._probability=t}/**
     * If set to true, will apply small random variation
     * to the callback time. If the value is given as a time, it will randomize
     * by that amount.
     * @example
     * const event = new Tone.ToneEvent();
     * event.humanize = true;
     */get humanize(){return this._humanize}set humanize(t){this._humanize=t}/**
     * Start the note at the given time.
     * @param  time  When the event should start.
     */start(t){let r=this.toTicks(t);return"stopped"===this._state.getValueAtTime(r)&&(this._state.add({id:-1,state:"started",time:r}),this._rescheduleEvents(r)),this}/**
     * Stop the Event at the given time.
     * @param  time  When the event should stop.
     */stop(t){this.cancel(t);let r=this.toTicks(t);if("started"===this._state.getValueAtTime(r)){this._state.setStateAtTime("stopped",r,{id:-1});let t=this._state.getBefore(r),o=r;null!==t&&(o=t.time),this._rescheduleEvents(o)}return this}/**
     * Cancel all scheduled events greater than or equal to the given time
     * @param  time  The time after which events will be cancel.
     */cancel(t){t=sc(t,-1/0);let r=this.toTicks(t);return this._state.forEachFrom(r,t=>{this.context.transport.clear(t.id)}),this._state.cancel(r),this}/**
     * The callback function invoker. Also
     * checks if the Event is done playing
     * @param  time  The time of the event in seconds
     */_tick(t){let r=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(r)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;n7(this.humanize)||(r=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*r}this.callback(t,this.value)}}/**
     * Get the duration of the loop.
     */_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}/**
     * If the note should loop or not
     * between ToneEvent.loopStart and
     * ToneEvent.loopEnd. If set to true,
     * the event will loop indefinitely,
     * if set to a number greater than 1
     * it will play a specific number of
     * times, if set to false, 0 or 1, the
     * part will only play once.
     */get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}/**
     * The playback rate of the note. Defaults to 1.
     * @example
     * const note = new Tone.ToneEvent();
     * note.loop = true;
     * // repeat the note twice as fast
     * note.playbackRate = 2;
     */get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}/**
     * The loopEnd point is the time the event will loop
     * if ToneEvent.loop is true.
     */get loopEnd(){return new s7(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}/**
     * The time when the loop should start.
     */get loopStart(){return new s7(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}/**
     * The current progress of the loop interval.
     * Returns 0 if the event is not started yet or
     * it is not set to loop.
     */get progress(){if(!this._loop)return 0;{let t=this.context.transport.ticks,r=this._state.get(t);if(null===r||"started"!==r.state)return 0;{let o=this._getLoopDuration(),n=(t-r.time)%o;return n/o}}}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class iz extends sz{constructor(){super(su(iz.getDefaults(),arguments,["callback","interval"])),this.name="Loop";let t=su(iz.getDefaults(),arguments,["callback","interval"]);this._event=new iH({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),this.callback=t.callback,// set the iterations
this.iterations=t.iterations}static getDefaults(){return Object.assign(sz.getDefaults(),{interval:"4n",callback:sT,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}/**
     * Start the loop at the specified time along the Transport's timeline.
     * @param  time  When to start the Loop.
     */start(t){return this._event.start(t),this}/**
     * Stop the loop at the given time.
     * @param  time  When to stop the Loop.
     */stop(t){return this._event.stop(t),this}/**
     * Cancel all scheduled events greater than or equal to the given time
     * @param  time  The time after which events will be cancel.
     */cancel(t){return this._event.cancel(t),this}/**
     * Internal function called when the notes should be called
     * @param time  The time the event occurs
     */_tick(t){this.callback(t)}/**
     * The state of the Loop, either started or stopped.
     */get state(){return this._event.state}/**
     * The progress of the loop as a value between 0-1. 0, when the loop is stopped or done iterating.
     */get progress(){return this._event.progress}/**
     * The time between successive callbacks.
     * @example
     * const loop = new Tone.Loop();
     * loop.interval = "8n"; // loop every 8n
     */get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}/**
     * The playback rate of the loop. The normal playback rate is 1 (no change).
     * A `playbackRate` of 2 would be twice as fast.
     */get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}/**
     * Random variation +/-0.01s to the scheduled time.
     * Or give it a time value which it will randomize by.
     */get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}/**
     * The probably of the callback being invoked.
     */get probability(){return this._event.probability}set probability(t){this._event.probability=t}/**
     * Muting the Loop means that no callbacks are invoked.
     */get mute(){return this._event.mute}set mute(t){this._event.mute=t}/**
     * The number of iterations of the loop. The default value is `Infinity` (loop forever).
     */get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}class iq extends sX{constructor(){super(Object.assign(su(iq.getDefaults(),arguments,["pan"]))),this.name="Panner",/**
         * the panner node
         */this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let t=su(iq.getDefaults(),arguments,["pan"]);this.pan=new sW({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),// this is necessary for standardized-audio-context
// doesn't make any difference for the native AudioContext
// https://github.com/chrisguttandin/standardized-audio-context/issues/647
this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",sS(this,"pan")}static getDefaults(){return Object.assign(sX.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const iW=/* javascript */`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;iF("bit-crusher",iW);class iX extends sX{constructor(){super(su(iX.getDefaults(),arguments,["solo"])),this.name="Solo";let t=su(iX.getDefaults(),arguments,["solo"]);this.input=this.output=new sQ({context:this.context}),iX._allSolos.has(this.context)||iX._allSolos.set(this.context,new Set),iX._allSolos.get(this.context).add(this),// set initially
this.solo=t.solo}static getDefaults(){return Object.assign(sX.getDefaults(),{solo:!1})}/**
     * Isolates this instance and mutes all other instances of Solo.
     * Only one instance can be soloed at a time. A soloed
     * instance will report `solo=false` when another instance is soloed.
     */get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),iX._allSolos.get(this.context).forEach(t=>t._updateSolo())}/**
     * If the current instance is muted, i.e. another instance is soloed
     */get muted(){return 0===this.input.gain.value}/**
     * Add this to the soloed array
     */_addSolo(){iX._soloed.has(this.context)||iX._soloed.set(this.context,new Set),iX._soloed.get(this.context).add(this)}/**
     * Remove this from the soloed array
     */_removeSolo(){iX._soloed.has(this.context)&&iX._soloed.get(this.context).delete(this)}/**
     * Is this on the soloed array
     */_isSoloed(){return iX._soloed.has(this.context)&&iX._soloed.get(this.context).has(this)}/**
     * Returns true if no one is soloed
     */_noSolos(){// either does not have any soloed added
return!iX._soloed.has(this.context)||// or has a solo set but doesn't include any items
iX._soloed.has(this.context)&&0===iX._soloed.get(this.context).size}/**
     * Solo the current instance and unsolo all other instances.
     */_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),iX._allSolos.get(this.context).delete(this),this._removeSolo(),this}}/**
 * Hold all of the solo'ed tracks belonging to a specific context
 */iX._allSolos=new Map,/**
 * Hold the currently solo'ed instance(s)
 */iX._soloed=new Map;class iY extends sX{constructor(){super(su(iY.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";let t=su(iY.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new iq({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ir({context:this.context,volume:t.volume}),this.volume=this._volume.volume,// connections
this._panner.connect(this._volume),this.mute=t.mute,sS(this,["pan","volume"])}static getDefaults(){return Object.assign(sX.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}/**
     * Mute/unmute the volume
     */get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class iZ extends sX{constructor(){super(su(iZ.getDefaults(),arguments,["volume","pan"])),this.name="Channel";let t=su(iZ.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new iX({solo:t.solo,context:this.context}),this._panVol=this.output=new iY({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),sS(this,["pan","volume"])}static getDefaults(){return Object.assign(sX.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}/**
     * Solo/unsolo the channel. Soloing is only relative to other [[Channels]] and [[Solo]] instances
     */get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}/**
     * If the current instance is muted, i.e. another instance is soloed,
     * or the channel is muted
     */get muted(){return this._solo.muted||this.mute}/**
     * Mute/unmute the volume
     */get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}/**
     * Get the gain node belonging to the bus name. Create it if
     * it doesn't exist
     * @param name The bus name
     */_getBus(t){return iZ.buses.has(t)||iZ.buses.set(t,new sQ({context:this.context})),iZ.buses.get(t)}/**
     * Send audio to another channel using a string. `send` is a lot like
     * [[connect]], except it uses a string instead of an object. This can
     * be useful in large applications to decouple sections since [[send]]
     * and [[receive]] can be invoked separately in order to connect an object
     * @param name The channel name to send the audio
     * @param volume The amount of the signal to send.
     * 	Defaults to 0db, i.e. send the entire signal
     * @returns Returns the gain node of this connection.
     */send(t,r=0){let o=this._getBus(t),n=new sQ({context:this.context,units:"decibels",gain:r});return this.connect(n),n.connect(o),n}/**
     * Receive audio from a channel which was connected with [[send]].
     * @param name The channel name to receive audio from.
     */receive(t){let r=this._getBus(t);return r.connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}/**
 * Store the send/receive channels by name.
 */iZ.buses=new Map;class iQ extends sX{constructor(){super(...arguments),this.name="Listener",this.positionX=new sW({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new sW({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new sW({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new sW({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new sW({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new sW({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new sW({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new sW({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new sW({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(sX.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}sv(t=>{t.listener=new iQ({context:t})}),s_(t=>{t.listener.dispose()});const iJ=sA().transport;sA().destination,sA().destination,sA().listener,sA().draw;const i$=sA(),iK={"closed-hihat":[tb("lw8Mu"),tb("1NuFb"),tb("e3CPn"),tb("j8xcP"),tb("dfk0E"),tb("1WnZU"),tb("1ITJB"),tb("570Mo"),tb("amPri"),tb("fAaYz"),tb("fPRLW"),tb("kwhgF")],"open-hihat":[tb("e0iWv"),tb("l6Y43"),tb("fBSj4"),tb("ajKwd"),tb("ck7JE"),tb("hnHVd"),tb("aA3m4"),tb("8a69x"),tb("dqHjm"),tb("jnTsG"),tb("c1zb3"),tb("26IF6")],crash:[tb("lbiIu"),tb("2NGyf"),tb("lABIk"),tb("3iUw5"),tb("274PA"),tb("7ehjG"),tb("9N1z7"),tb("71k2j"),tb("5Pvi2"),tb("2RFd4"),tb("1eKy2"),tb("8YECZ")],ride:[tb("5SxuK"),tb("ldQTA"),tb("f6Cx3"),tb("dWpbb"),tb("hhn9f"),tb("ZdGiJ"),tb("j9z4h"),tb("kiJCK"),tb("272cE"),tb("bTlbG"),tb("6CR9H"),tb("1Ltew")],kick:[tb("6bXMG"),tb("1v8uQ"),tb("1gWYQ"),tb("7GIzt"),tb("46MCu"),tb("56E5k"),tb("2nfIT"),tb("1vINS"),tb("feiA7"),tb("aQbil"),tb("624Hq"),tb("fYSwK")],snare:[tb("awcGy"),tb("3sfcn"),tb("9KbLN"),tb("bSyUS"),tb("8KIwk"),tb("kdpRC"),tb("hjY08"),tb("eM6M7"),tb("1SKcy"),tb("j9hxR"),tb("2NXPr"),tb("gAz4G")],"hi-tom":[tb("aD9Um"),tb("7IHL8"),tb("lhP3B"),tb("kqdlv"),tb("5YpTq"),tb("9d0yB"),tb("d38YH"),tb("hF6rJ"),tb("iQi5z"),tb("ifCLN"),tb("iRvZv"),tb("75iiO")],"mid-tom":[tb("6kBfN"),tb("8hpbe"),tb("iuitn"),tb("ekqSg"),tb("iULhj"),tb("5iX8l"),tb("8itDX"),tb("2eaI0"),tb("ls98q"),tb("euiK4"),tb("9HaM0"),tb("ge5lW")],"floor-tom":[tb("4OwOj"),tb("c29E2"),tb("aq3tN"),tb("brntc"),tb("gUGe5"),tb("awWFT"),tb("ftxH4"),tb("3yq6D"),tb("cwkqo"),tb("7lfO5"),tb("8ab0Q"),tb("6sqLW")]},i0={};["closed-hihat","open-hihat","crash","ride","kick","snare","hi-tom","mid-tom","floor-tom"].forEach(t=>{let r={};iK[t].forEach((t,o)=>{let n=sG(60+o,"midi").toNote();r[n]=t}),i0[t]=new iG({urls:r}).toDestination()});// Dict to map MIDI note number to the appropriate sample note
const i1={C1:"kick",D1:"snare",F1:"floor-tom",B1:"mid-tom",C2:"hi-tom","C#2":"crash","D#2":"ride","F#1":"closed-hihat","A#1":"open-hihat"};// When processing MIDI data in software, developers often use conditional statements like if (status === 144) to check the type of MIDI message received and to handle it accordingly. 
// In this particular case, the software would execute specific logic for "Note On" messages on channel 1.
// The MIDI message is an array of integers. The first integer is the status byte, which contains the message type and the MIDI channel.
function i2(t,r=!1){if(i3){let[o,n,s]=t.data,i=sG(n-12,"midi").toNote(),a=i1[i];if(r&&(// console.log(typeof noteName);
console.log(n,i,s),console.log("drumType: ",a)),144===o&&i1[i]){// const drumType = drumMappings[noteName];
let t=sG(60+Math.ceil(s/Math.ceil(10.666666666666666))-1,"midi").toNote();// assume `velocity` is provided by MIDI
// console.log(`Drum type and note to trigger: ${drumType} ${noteToTrigger}`);
if(a){// Lookup the appropriate sampler using the drumType
let r=i0[a];// Trigger the sound w/ a simple Attack-Release envelope TODO: Make better envelopes!
r.triggerAttackRelease(t,{"closed-hihat":"1n","open-hihat":"2n",crash:"1n",ride:"1n",kick:"8n",snare:"2n","hi-tom":"4n","mid-tom":"4n","floor-tom":"4n"}[a]);// sampler.chain(eq, delay, reverb); // EFX chain
}else console.error(`No mappings found for drum type: ${a}`)}}}// // WITH THE OLD UI:
//VARIABLES
// // Variable to keep track of the playback state
// let isListening = false;
// // Grab the button from the UI
// const toggleListeningButton = document.getElementById('togglePlaybackButton');
// //EVENT LISTENERS
// // Add an event listener to the button
// toggleListeningButton.addEventListener('click', toggleListening);
// // Handle button click
// function toggleListening() {
//     isListening = !isListening; // Toggle the listening state
//     // Update button text based on the current state // Note that we are not doing it anymore with the new GUI
//     // toggleListeningButton.textContent = isListening ? 'Stop Listening' : 'Start Listening';
//   }
//   if (navigator.requestMIDIAccess) { // request MIDI access
//     navigator.requestMIDIAccess().then(onMIDISuccess, onMIDIFailure);
//   } else {
//     console.error('WebMIDI is not supported in this browser.');
//   }
// WITH THE NEW UI:
// Instead of using the click event on the button, 
// we will use the change event on the checkbox (since that's what you have now).
// Instead of toggling button text (since there's no text now), 
// we'll toggle the checkbox's checked state.
// Variable to keep track of the playback state
let i3=!1;// Grab the checkbox from the UI
const i5=document.querySelector('#togglePlaybackButton input[type="checkbox"]');function i4(t){console.error("Could not access MIDI devices:",t)}// NOTES:
//EVENT LISTENERS
// Add an event listener to the checkbox
i5.addEventListener("change",// Handle checkbox state change
function(){i3=i5.checked;// Update listening state based on checkbox
}),navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(// Handle successful MIDI access
function t(r){let o=r.inputs.values();for(let t=o.next();t&&!t.done;t=o.next())t.value.onmidimessage=i2;r.onstatechange=function(r){"connected"===r.port.state?r.port.onmidimessage=i2:"disconnected"===r.port.state&&(r.port.onmidimessage=null,// Try to refresh MIDI connections after a short delay
setTimeout(()=>{navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(t,i4):console.error("WebMIDI is not supported in this browser.")},1e3))}},i4):console.error("WebMIDI is not supported in this browser.");// Uint8Array(3): This indicates the array contains three elements. MIDI messages typically consist of 1-3 bytes, so this is consistent with typical MIDI behavior.
// [128, 36, 0]: These are the actual values (in decimal) of the MIDI message:
// 128: This is the status byte. In MIDI, a value of 128 (0x80 in hexadecimal) typically corresponds to a "Note Off" message for channel 1.
// 36: This is the first data byte. For "Note On" and "Note Off" messages, this represents the MIDI note number. In this case, it's 36 which might correspond to a kick drum in a typical MIDI drum map.
// 0: This is the second data byte. For "Note On" and "Note Off" messages, this represents the velocity (or volume) of the note. A velocity of 0 for a "Note On" message is often treated as a "Note Off".
// buffer, byteLength, byteOffset, etc.: These are properties of the Uint8Array and provide information about the underlying buffer storage and the array's size. For most MIDI applications, you won't need to worry about these.
// For example, a MIDI message (128, 36, 0) can be interpreted as: "Note Off" for MIDI note 36 on channel 1 with a velocity of 0.
// Author: Çağrı Erdem, 2023
// Description: Defining a global state module to fetch MIDI (bytes) 
// data from the server and make it available to all modules of the 2groove web app.
const i6={midiData:null,midiReadyForProcessing:!1,setMidiData(t){console.log("MIDI data received in bytes!",t),this.midiData=t,this.midiReadyForProcessing=!0},getMidiData(){return this.midiData},isMidiReadyForProcessing(){return this.midiReadyForProcessing},midiProcessed(){this.midiReadyForProcessing=!1;// Close the gate
}},i8=new AudioContext,i7=document.getElementById("tempo"),i9=document.getElementById("metronomeVolume"),ae=document.querySelector('#toggleMetronome input[type="checkbox"]'),at=document.getElementById("recIndicator"),ar=document.getElementById("arrayList"),ao=[];let an=!1,as=[],ai=!1,aa=0,al=0,au=[],ac=!0,ad=!1,ah=.2,af=.3,ap=1,am=1e3,ay={strategy:["epsilon","softmax_temp"],tempRange:[[.01,10],[.1,2]],threshRange:[[.15,.35],[.1,.2]]},ag=0;//////////////////////
// GLOBAL METRONOME //
//////////////////////
// Play click sound
function av(t,r=1e3){let o=i8.createOscillator(),n=i8.createGain();n.gain.value=t,o.frequency.value=r,o.connect(n),n.connect(i8.destination),o.start(),o.stop(i8.currentTime+.05)}async function ab(){"suspended"===i8.state&&await i8.resume(),"running"!==i$.state&&(await sO(),console.log("Tone.js has started")),(ad=!ad)&&a_(i7.value)}async function a_(r){"running"!==i$.state&&await sO(),iJ.bpm.value=r,t||(t=new iz(t=>{ad&&av(i9.value,am),function(){console.log(`${ap}/4`),am=1==(ap=ap%4+1)?1500:1e3;// const event = new Event('metronomeTick');
// window.dispatchEvent(event);
let t=new CustomEvent("metronomeTick",{detail:{tick:ap}});window.dispatchEvent(t)}()},"4n")).start(0),iJ.start()}!//-------------------------------------
// Functions
//-------------------------------------
// startButton.addEventListener('click', function() {
//     initializeApp();
//     startButton.style.display = 'none'; // Hide the button after initialization
// });
async function(){// Set default BPM or retrieve it from a saved setting or slider
let t=i7.value;// Indicate that the metronome is running
ac=!0,console.log("App initialized!"),console.log("Default BPM:",t),console.log("Temperature value:",ah),console.log("Hit tolerance:",af),console.log("Sampling strategy:",ay.strategy[ag])}(),// Variety knob
// TODO: WOrk on it more!
document.getElementById("temp").addEventListener("input",function(){let t=this.value;ah=aE(t,[0,1],ay.tempRange[ag]),document.getElementById("knob3Value").textContent=t,// TODO: Check if it's a good idea to combine the two values. If yes, check better ways of combining.
console.log("tempVal:",ah)}),// Thresh knob
// TODO: WOrk on it more!
document.getElementById("tolerance").addEventListener("input",function(){let t=this.value;// tempVal = scaleValue(value, [0, 1], [0.01, 100]);
af=aE(t,[0,1],ay.threshRange[ag]),document.getElementById("knob4Value").textContent=t,// TODO: Check if it's a good idea to combine the two values. If yes, check better ways of combining.
console.log("threshVal:",af)});var ax={},aj={};aj=function(t,r,o){if(r===self.location.origin)// use the worker bundle's own url.
return t;// Otherwise, create a blob URL which loads the worker bundle with `importScripts`.
var n=o?"import "+JSON.stringify(t)+";":"importScripts("+JSON.stringify(t)+");";return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))};let aw=new URL("workerAjax.6b1dfd8f.js",import.meta.url);ax=aj(aw.toString(),aw.origin,!0);// New Web Worker setup for client-server communication
const aS=new Worker(ax);// Modify `sendArrayToServer` to post data to the worker:
function aT(t){aS.postMessage({cmd:"sendArray",array:t,bpm:parseFloat(document.getElementById("tempo").value),temperatureValue:ah,hitTolerance:af,isHttpConnected:!0,httpIp:"158.39.200.82",portInput:"5002",samplingStrategy:ay.strategy[ag]})}/// UTILS ///
// Scale a value from one range to another
function aE(t,r,o){let n=(o[1]-o[0])/(r[1]-r[0]);return(Math.min(r[1],Math.max(r[0],t))-r[0])*n+o[0]}// Listen to messages from the worker:
aS.addEventListener("message",function(t){let r=t.data;switch(console.log("Setting MIDI data, length:",r.length),r.type){case"arrayProcessed":// process the MIDI data as needed
console.log("MIDI data received in bytes!",r.data),i6.setMidiData(r.data),// tappedRhythms = [];
au.length=0;break;case"error":console.error("Error from worker:",r.error)}}),//-------------------------------------
// Event Listeners
//-------------------------------------
// WITH THE OLD UI:
// Event listeners for the metronome
// toggleMetronomeButton.addEventListener('click', () => {
//     toggleMetronomeButton.classList.toggle('toggled');
//     toggleMetronome();
// });
// WITH THE NEW UI
// TODO: Fix it because it doesn't work properly while generating 
ae.addEventListener("change",ab),// Event listener for the tempo and vol sliders
i7.addEventListener("input",function(){let t=this.value;document.getElementById("knob1Value").textContent=t,ac&&a_(t)}),i9.addEventListener("input",function(){let t=this.value;document.getElementById("knob2Value").textContent=t;// Update the knob value
}),// Record tapped rhythm -- event listener for when the key "A" is pressed to start recording
window.addEventListener("keydown",t=>{if("a"===t.key&&!ai){t.preventDefault(),an=!0,aa=Date.now(),at.innerText="REC ON!",at.classList.add("recording");let r=parseInt(8)*parseInt(4);//.value methods removed for new UI
as=Array(r).fill(0),ai=!0}if(" "===t.key&&an){//   playClick(tapVolumeSlider.value, 300);
av(i9.value,300)// If same knob is used for both metronome and tap volume
;let t=Date.now()-aa,r=parseInt(i7.value),o=parseInt(4),n=Math.round(t/(6e4/(r*o)));n<as.length&&(as[n]=1),lastTapTimestamp=Date.now()}if(" "===t.key){t.preventDefault();let r=document.getElementById("tapLight");r.classList.remove("light-off"),r.classList.add("light-on")}if("T"===t.key.toUpperCase()){let t=new Date().getTime(),r=t-al,o=document.getElementById("tapTempoLight");if(o.classList.remove("light-off"),o.classList.add("light-on"),// tapTempoLight.style.backgroundColor = 'red';
av(i9.value,1500),setTimeout(()=>{// tapLight.style.backgroundColor = '';
o.classList.remove("light-on"),o.classList.add("light-off")},100),0!==al){ao.push(r),ao.length>4&&ao.shift();let t=ao.reduce((t,r)=>t+r,0)/ao.length,o=parseInt(6e4/t),n=document.getElementById("tempo"),s=document.getElementById("knob1Value"),i=document.getElementById("tempoSlider");n&&(n.value=o.toFixed(2)),s&&(s.innerText=o.toFixed(0)),i&&(i.value=o.toFixed(0))}al=t}}),// evet listener for when key "A" is released
window.addEventListener("keyup",t=>{if("a"===t.key&&(an=!1,at.innerText="REC OFF",at.classList.remove("recording"),function(t){let r=document.createElement("li");r.textContent=t.map(t=>0!==t?"1":"0").join(""),ar.firstChild?ar.insertBefore(r,ar.firstChild):ar.appendChild(r)}(as),aT(as),ac&&(// Toggle the metronome off
// toggleMetronome();
ad=!1,ae.checked=!1),ai=!1)," "===t.key){let t=document.getElementById("tapLight");t.classList.remove("light-on"),t.classList.add("light-off")}}),// Incorporate the `change` action
// TODO: Make sure it works properly
document.getElementById("changeButton").addEventListener("click",function(){aT(editedArray=function(t,r=1){// TODO: Implement this function to `change` action
/**
     * Toggle values in the input array at random indices.
     *
     * Parameters:
     * - arr (array-like): The input array containing only 0s and 1s.
     * - numIndices (int): The number of random indices to toggle (default is 1).
     *
     * Returns:
     * - Edited array with toggled values.
     */// Check if the input array is valid (contains only 0s and 1s)
if(!t.every(t=>0===t||1===t))throw Error("Input array must consist of only 0s and 1s.");// Create a copy of the input array to avoid modifying the original
let o=[...t],n=[];for(let o=0;o<r;o++){let r=Math.floor(Math.random()*t.length);n.push(r)}return(// Toggle the values at the selected indices
n.forEach(t=>{o[t]=1-o[t]}),o)}(as,numIndices=1))}),resetButton.addEventListener("click",()=>{ar.innerHTML=""});var ak={};ak=new URL("A.1bc05b06.png",import.meta.url).toString();var aM={};aM=new URL("B.873f0259.png",import.meta.url).toString(),document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("modelChangeButton");t.addEventListener("click",function(){let t=this.querySelector("img");t.src.includes(ak)?(t.src=aM,ag=1,console.log("Sampling changed to (B) Softmax!")):(t.src=ak,ag=0,console.log("Model changed to (A) Epsilon!"))})});const aC=document.getElementById("midi-btn");aC.addEventListener("click",// Open the MIDI I/O popup
function(){window.open(src="","popup","width=450,height=450",sandbox="allow-popups")}//./../html/midi-io.html
);// Author: Çağrı Erdem, 2023
// Description: MIDI broadcasting script for 2groove web app.
// TODO: Perhaps combine with drumApp.js ???
const aA=new(window.AudioContext||window.webkitAudioContext);let aO=null,aR=[];// Start time for the MIDI playback
const aP=[];let aL=null,aI=!1;// Play next MIDI in the queue and set it for visualization
function aD(){// Only start playing the next MIDI if the current one has finished
!aI&&aP.length>0&&(aL=aP.shift(),iJ.start("@1m"),aF(aL))}// //Main function that is responsible of retrieving the MIDI bytes, converting them into a MIDI object, parsing it, and scheduling the notes
// //without Transport
async function aF(t){aI=!0,aR.forEach(clearTimeout),aR=[],currentNoteIndex=0,aO=aA.currentTime,currentTick=0;try{let n=new s8(t);// Convert the raw data into a Midi object
o=t,// Adjust negative delta values
n.tracks.forEach(t=>{let r=0;t.notes.forEach(t=>{if(t.ticks<0)r+=t.ticks,t.ticks=0;else if(r<0){let o=Math.min(t.ticks,-r);// Calculate the possible adjustment
t.ticks-=o,r+=o}})}),console.log("Parsed MIDI:",n);let s=n.tracks[0];if(iJ.start(),!r){console.warn("MIDI output not available");return}let i=n.header.tempos&&n.header.tempos[0]?n.header.tempos[0].bpm:120,a=n.header.ppq,l=6e4/i/a;// Fallback to a default tempo if not defined ???
s.notes.forEach((t,o)=>{let n=t.ticks*l;t.ticks,// // Schedule a note to be played
// // without Transport
function(t,o,n){var s;let i;let a=(s=t.velocity,i=(0,(127-0)/1),(Math.min(1,Math.max(0,s))-0)*i+0),l=aO+o/1e3,u=setTimeout(()=>{r.send([144,t.midi,a]),// console.log(`Note Number: ${note.midi}, Velocity: ${vel}, Scheduled Time: ${scheduledTime}`);
currentNoteIndex=n+1;// console.log(`${currentNoteIndex}: ${note.midi}, ${vel}`);
},(l-aA.currentTime)*1e3);aR.push(u)}(t,n,o)});let u=s.durationTicks*l;s.durationTicks,console.log(`Total time: ${u} ms`),console.log(`Total transport time: ${s.durationTicks*l/1e3} s`),setTimeout(()=>{// Tone.Transport.stop();
aI=!1,aP.length>0?aD():aF(aL)},u)}catch(t){console.error("Error processing MIDI data:",t.message)}}// TODO: play/pause button
// isPaused = false;
// const playPauseButton = document.getElementById('play-pause-btn');
// playPauseButton.addEventListener('click', () => {
//     isPaused = !isPaused;
//     if (isPaused) {
//         // If paused, clear all timeouts (stop all scheduled notes)
//         // timeouts.forEach(timeout => clearTimeout(timeout));
//     } else {
//         // When resumed, restart the MIDI playback from where we paused
//         // loadMidiData(currentMidiForVisuals);
//     }
// });
// TODO: Set up the main clock
// Set up an event listener for the tick event
window.addEventListener("metronomeTick",function(t){// currentTick++;
// console.log(`\rClick ${(currentTick%4)+1}/4`);
}),// MIDI initialization
navigator.requestMIDIAccess().then(function(t){let o=Array.from(t.outputs.values());if(0===o.length){console.warn("No MIDI outputs found");return}!function(t){let o=document.getElementById("midiOutputs");t.forEach((t,r)=>{let n=document.createElement("option");n.value=r,n.text=t.name,o.appendChild(n)}),o.addEventListener("change",o=>{r=t[o.target.value]}),r=t[0]}(o)},function(){console.error("Could not access your MIDI devices.")}),"suspended"===aA.state&&aA.resume(),// polling mechanism to regularly check globalFetch for new MIDI data:
setInterval(()=>{// Check for new MIDI data and enqueue it
(function(){if(i6.isMidiReadyForProcessing()){let t=i6.getMidiData().buffer;// convert to ArrayBuffer when fetching JSON
aP.push(t),i6.midiProcessed(),aI||aD()}})(),aD()},500);const aN=document.getElementById("download-btn");aN.addEventListener("click",// Check every 500 milliseconds. Adjust this value as necessary
//  document.getElementById('play-pause-btn').addEventListener('click', function() {
//     /// play pause button
//     console.log("Play/pause button clicked but not working yet :))");
// });
// Download the processed MIDI data
function(){if(!o){console.error("No MIDI data available for download.");return}let t=new Blob([o],{type:"audio/midi"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="2groove_gen.mid",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)});////////////////////////////
////////////////////////////
// // w Transport
// function scheduleNote(note, ticks, ticksPerBeat, bpm) {
//     const vel = scaleValue(note.velocity, [0, 1], [0, 127]);
//     const timeInSeconds = ticksToTime(ticks, ticksPerBeat, bpm);
//     Tone.Transport.schedule(time => {
//         midiOutput.send([0x90, note.midi, vel]);
//         console.log(`Note Number: ${note.midi}, Velocity: ${vel}, Scheduled Time: ${time}`);
//     }, timeInSeconds);
// }
// function scheduleNoteWithTone(note, timeInTicks, index, msPerTick) {
//     const timeInSeconds = timeInTicks * msPerTick / 1000;
//     const vel = scaleValue(note.velocity, [0, 1], [0, 127]);
//     Tone.Transport.schedule(time => {
//         midiOutput.send([0x90, note.midi, vel]);
//         console.log(`Note Number: ${note.midi}, Velocity: ${vel}`);
//     }, `+${timeInSeconds}`);
// }
// // w Transport
// async function loadMidiData(midiData) {
//     isPlaying = true;
//     const midi = new Midi(midiData);
//     const track = midi.tracks[0];
//     if (!midiOutput) {
//         console.warn("MIDI output not available");
//         return;
//     }
//     const tempo = (midi.header.tempos && midi.header.tempos[0]) ? midi.header.tempos[0].bpm : 120;
//     const ticksPerBeat = midi.header.ppq;
//     const msPerTick = (60 * 1000 / tempo) / ticksPerBeat;
//     // Reset any previous schedules on Tone.Transport
//     Tone.Transport.cancel();
//     track.notes.forEach((note, index) => {
//         const timeInTicks = note.ticks;
//         scheduleNoteWithTone(note, timeInTicks, index, msPerTick);
//     });
//     // Since you want it to loop indefinitely, let's schedule the re-loading of the MIDI data 
//     // at the end of its duration.
//     const totalTimeInTicks = track.durationTicks;
//     Tone.Transport.scheduleOnce(() => {
//         loopPlayback();
//     }, `+${totalTimeInTicks * msPerTick / 1000}`);
// }
// Author: Çağrı Erdem, 2023
// Description: Interactive "piano roll" visualization for 2groove web app.
// import { Midi } from '@tonejs/midi';
var aU={};// Run the sketch:
new((tm=(function t(r,o,n){function s(a,l){if(!o[a]){if(!r[a]){var u=void 0;if(!l&&u)return u(a,!0);if(i)return i(a,!0);throw(l=Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",l}u=o[a]={exports:{}},r[a][0].call(u.exports,function(t){return s(r[a][1][t]||t)},u,u.exports,t,r,o,n)}return o[a].exports}for(var i=void 0,a=0;a<n.length;a++)s(n[a]);return s})({1:[function(t,r,o){o.byteLength=function(t){var t=c(t),r=t[0],t=t[1];return 3*(r+t)/4-t},o.toByteArray=function(t){var r,o,n,a=c(t),l=a[0],a=a[1],u=new i(3*(l+(r=a))/4-r),d=0,h=0<a?l-4:l;for(n=0;n<h;n+=4)o=s[t.charCodeAt(n)]<<18|s[t.charCodeAt(n+1)]<<12|s[t.charCodeAt(n+2)]<<6|s[t.charCodeAt(n+3)],u[d++]=o>>16&255,u[d++]=o>>8&255,u[d++]=255&o;return 2===a&&(o=s[t.charCodeAt(n)]<<2|s[t.charCodeAt(n+1)]>>4,u[d++]=255&o),1===a&&(o=s[t.charCodeAt(n)]<<10|s[t.charCodeAt(n+1)]<<4|s[t.charCodeAt(n+2)]>>2,u[d++]=o>>8&255,u[d++]=255&o),u},o.fromByteArray=function(t){for(var r,o=t.length,s=o%3,i=[],a=0,l=o-s;a<l;a+=16383)i.push(function(t,r,o){for(var s,i=[],a=r;a<o;a+=3)i.push(n[(s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return i.join("")}(t,a,l<a+16383?l:a+16383));return 1==s?i.push(n[(r=t[o-1])>>2]+n[r<<4&63]+"=="):2==s&&i.push(n[(r=(t[o-2]<<8)+t[o-1])>>10]+n[r>>4&63]+n[r<<2&63]+"="),i.join("")};for(var n=[],s=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=a.length;l<u;++l)n[l]=a[l],s[a.charCodeAt(l)]=l;function c(t){var r=t.length;if(0<r%4)throw Error("Invalid string. Length must be a multiple of 4");return r=(t=-1===(t=t.indexOf("="))?r:t)===r?0:4-t%4,[t,r]}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],2:[function(t,r,o){},{}],3:[function(t,r,o){arguments[4][2][0].apply(o,arguments)},{dup:2}],4:[function(t,r,o){(function(r){var n=t("base64-js"),s=t("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,a=(o.Buffer=r,o.SlowBuffer=function(t){return+t!=t&&(t=0),r.alloc(+t)},o.INSPECT_MAX_BYTES=50,2147483647);function l(t){if(a<t)throw RangeError('The value "'+t+'" is invalid for option "size"');return Object.setPrototypeOf(t=new Uint8Array(t),r.prototype),t}function r(t,r,o){if("number"!=typeof t)return u(t,r,o);if("string"==typeof r)throw TypeError('The "string" argument must be of type string. Received type number');return d(t)}function u(t,o,n){if("string"==typeof t){var s=t,i=o;if(r.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return(s=(m=l(d=0|p(s,i))).write(s,i))!==d?m.slice(0,s):m;throw TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(t))return h(t);if(null!=t){if(O(t,ArrayBuffer)||t&&O(t.buffer,ArrayBuffer)){var a,u,c,d=t,s=o,m=n;if(s<0||d.byteLength<s)throw RangeError('"offset" is outside of buffer bounds');if(d.byteLength<s+(m||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===s&&void 0===m?new Uint8Array(d):void 0===m?new Uint8Array(d,s):new Uint8Array(d,s,m),r.prototype),d}if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');if(null!=(i=t.valueOf&&t.valueOf())&&i!==t)return r.from(i,o,n);var y=r.isBuffer(t)?(0!==(c=l(u=0|f(t.length))).length&&t.copy(c,0,0,u),c):void 0!==t.length?"number"!=typeof t.length||(a=t.length)!=a?l(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0;if(y)return y;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),o,n)}throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return c(t),l(t<0?0:0|f(t))}function h(t){for(var r=t.length<0?0:0|f(t.length),o=l(r),n=0;n<r;n+=1)o[n]=255&t[n];return o}function f(t){if(a<=t)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function p(t,o){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||O(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,s=2<arguments.length&&!0===arguments[2];if(!s&&0===n)return 0;for(var i=!1;;)switch(o){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(t).length;default:if(i)return s?-1:M(t).length;o=(""+o).toLowerCase(),i=!0}}function m(t,r,o){var s,i=!1;if((r=void 0===r||r<0?0:r)>this.length||(o=void 0===o||o>this.length?this.length:o)<=0||(o>>>=0)<=(r>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var a=r,l=o,u=this.length;(!l||l<0||u<l)&&(l=u);for(var c="",d=a=!a||a<0?0:a;d<l;++d)c+=R[this[d]];return c;case"utf8":case"utf-8":return b(this,r,o);case"ascii":var u=r,h=o,f="";h=Math.min(this.length,h);for(var p=u;p<h;++p)f+=String.fromCharCode(127&this[p]);return f;case"latin1":case"binary":var a=r,m=o,y="";m=Math.min(this.length,m);for(var g=a;g<m;++g)y+=String.fromCharCode(this[g]);return y;case"base64":return v=this,s=o,0===(x=r)&&s===v.length?n.fromByteArray(v):n.fromByteArray(v.slice(x,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=r,x=o,j=this.slice(v,x),w="",S=0;S<j.length;S+=2)w+=String.fromCharCode(j[S]+256*j[S+1]);return w;default:if(i)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,r,o){var n=t[r];t[r]=t[o],t[o]=n}function g(t,o,n,s,i){var a;if(0===t.length)return -1;if("string"==typeof n?(s=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=(a=n=+n)!=a?i?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof o&&(o=r.from(o,s)),r.isBuffer(o))return 0===o.length?-1:v(t,o,n,s,i);if("number"==typeof o)return o&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,o,n):v(t,[o],n,s,i);throw TypeError("val must be string, number or Buffer")}function v(t,r,o,n,s){var i=1,a=t.length,l=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return -1;a/=i=2,l/=2,o/=2}function u(t,r){return 1===i?t[r]:t.readUInt16BE(r*i)}if(s)for(var c=-1,d=o;d<a;d++)if(u(t,d)===u(r,-1===c?0:d-c)){if(d-(c=-1===c?d:c)+1===l)return c*i}else -1!==c&&(d-=d-c),c=-1;else for(d=o=a<o+l?a-l:o;0<=d;d--){for(var h=!0,f=0;f<l;f++)if(u(t,d+f)!==u(r,f)){h=!1;break}if(h)return d}return -1}function b(t,r,o){o=Math.min(t.length,o);for(var n=[],s=r;s<o;){var i,a,l,u,c=t[s],d=null,h=239<c?4:223<c?3:191<c?2:1;if(s+h<=o)switch(h){case 1:c<128&&(d=c);break;case 2:128==(192&(i=t[s+1]))&&127<(u=(31&c)<<6|63&i)&&(d=u);break;case 3:i=t[s+1],a=t[s+2],128==(192&i)&&128==(192&a)&&2047<(u=(15&c)<<12|(63&i)<<6|63&a)&&(u<55296||57343<u)&&(d=u);break;case 4:i=t[s+1],a=t[s+2],l=t[s+3],128==(192&i)&&128==(192&a)&&128==(192&l)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&l)&&u<1114112&&(d=u)}null===d?(d=65533,h=1):65535<d&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),s+=h}var f=n.length;if(f<=x)return String.fromCharCode.apply(String,n);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,n.slice(m,m+=x));return p}o.kMaxLength=a,(r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(t,r),42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=u,Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(t,r,o){return c(t),t<=0||void 0===r?l(t):"string"==typeof o?l(t).fill(r,o):l(t).fill(r)},r.allocUnsafe=d,r.allocUnsafeSlow=d,r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,o){if(O(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),O(o,Uint8Array)&&(o=r.from(o,o.offset,o.byteLength)),!r.isBuffer(t)||!r.isBuffer(o))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===o)return 0;for(var n=t.length,s=o.length,i=0,a=Math.min(n,s);i<a;++i)if(t[i]!==o[i]){n=t[i],s=o[i];break}return n<s?-1:s<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,o){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);if(void 0===o)for(i=o=0;i<t.length;++i)o+=t[i].length;for(var n=r.allocUnsafe(o),s=0,i=0;i<t.length;++i){var a=t[i];if(O(a,Uint8Array)&&(a=r.from(a)),!r.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(n,s),s+=a.length}return n},r.byteLength=p,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)y(this,r,r+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)y(this,r,r+3),y(this,r+1,r+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)y(this,r,r+7),y(this,r+1,r+6),y(this,r+2,r+5),y(this,r+3,r+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?b(this,0,t):m.apply(this,arguments)},r.prototype.equals=function(t){if(r.isBuffer(t))return this===t||0===r.compare(this,t);throw TypeError("Argument must be a Buffer")},r.prototype.inspect=function(){var t="",r=o.INSPECT_MAX_BYTES,t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim();return this.length>r&&(t+=" ... "),"<Buffer "+t+">"},i&&(r.prototype[i]=r.prototype.inspect),r.prototype.compare=function(t,o,n,s,i){if(O(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=t?t.length:0),void 0===s&&(s=0),void 0===i&&(i=this.length),(o=void 0===o?0:o)<0||n>t.length||s<0||i>this.length)throw RangeError("out of range index");if(i<=s&&n<=o)return 0;if(i<=s)return -1;if(n<=o)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(s>>>=0),l=(n>>>=0)-(o>>>=0),u=Math.min(a,l),c=this.slice(s,i),d=t.slice(o,n),h=0;h<u;++h)if(c[h]!==d[h]){a=c[h],l=d[h];break}return a<l?-1:l<a?1:0},r.prototype.includes=function(t,r,o){return -1!==this.indexOf(t,r,o)},r.prototype.indexOf=function(t,r,o){return g(this,t,r,o,!0)},r.prototype.lastIndexOf=function(t,r,o){return g(this,t,r,o,!1)},r.prototype.write=function(t,r,o,n){if(void 0===r)n="utf8",o=this.length,r=0;else if(void 0===o&&"string"==typeof r)n=r,o=this.length,r=0;else{if(!isFinite(r))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(o)?(o>>>=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var s,i,a,l,u=this.length-r;if((void 0===o||u<o)&&(o=u),0<t.length&&(o<0||r<0)||r>this.length)throw RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var c,d,h,f=!1;;)switch(n){case"hex":var p=r,m=o,y=(p=Number(p)||0,this.length-p);(!m||y<(m=Number(m)))&&(m=y),(y=t.length)/2<m&&(m=y/2);for(var g=0;g<m;++g){var v=parseInt(t.substr(2*g,2),16);if(v!=v)break;this[p+g]=v}return g;case"utf8":case"utf-8":return y=r,h=o,A(M(t,(d=this).length-y),d,y,h);case"ascii":case"latin1":case"binary":return s=r,i=o,A(function(t){for(var r=[],o=0;o<t.length;++o)r.push(255&t.charCodeAt(o));return r}(t),this,s,i);case"base64":return d=this,h=r,c=o,A(C(t),d,h,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=r,l=o,A(function(t,r){for(var o,n,s=[],i=0;i<t.length&&!((r-=2)<0);++i)o=(n=t.charCodeAt(i))>>8,s.push(n%=256),s.push(o);return s}(t,this.length-a),this,a,l);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function j(t,r,o){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(o<t+r)throw RangeError("Trying to access beyond buffer length")}function w(t,o,n,s,i,a){if(!r.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(i<o||o<a)throw RangeError('"value" argument is out of bounds');if(n+s>t.length)throw RangeError("Index out of range")}function S(t,r,o,n){if(o+n>t.length||o<0)throw RangeError("Index out of range")}function T(t,r,o,n,i){return r=+r,o>>>=0,i||S(t,0,o,4),s.write(t,r,o,n,23,4),o+4}function E(t,r,o,n,i){return r=+r,o>>>=0,i||S(t,0,o,8),s.write(t,r,o,n,52,8),o+8}r.prototype.slice=function(t,o){var n=this.length,n=((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(o=void 0===o?n:~~o)<0?(o+=n)<0&&(o=0):n<o&&(o=n),o<t&&(o=t),this.subarray(t,o));return Object.setPrototypeOf(n,r.prototype),n},r.prototype.readUIntLE=function(t,r,o){t>>>=0,r>>>=0,o||j(t,r,this.length);for(var n=this[t],s=1,i=0;++i<r&&(s*=256);)n+=this[t+i]*s;return n},r.prototype.readUIntBE=function(t,r,o){t>>>=0,r>>>=0,o||j(t,r,this.length);for(var n=this[t+--r],s=1;0<r&&(s*=256);)n+=this[t+--r]*s;return n},r.prototype.readUInt8=function(t,r){return t>>>=0,r||j(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,r){return t>>>=0,r||j(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,r){return t>>>=0,r||j(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,r){return t>>>=0,r||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,r){return t>>>=0,r||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,r,o){t>>>=0,r>>>=0,o||j(t,r,this.length);for(var n=this[t],s=1,i=0;++i<r&&(s*=256);)n+=this[t+i]*s;return(s*=128)<=n&&(n-=Math.pow(2,8*r)),n},r.prototype.readIntBE=function(t,r,o){t>>>=0,r>>>=0,o||j(t,r,this.length);for(var n=r,s=1,i=this[t+--n];0<n&&(s*=256);)i+=this[t+--n]*s;return(s*=128)<=i&&(i-=Math.pow(2,8*r)),i},r.prototype.readInt8=function(t,r){return t>>>=0,r||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,r){return t>>>=0,r||j(t,2,this.length),32768&(r=this[t]|this[t+1]<<8)?4294901760|r:r},r.prototype.readInt16BE=function(t,r){return t>>>=0,r||j(t,2,this.length),32768&(r=this[t+1]|this[t]<<8)?4294901760|r:r},r.prototype.readInt32LE=function(t,r){return t>>>=0,r||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,r){return t>>>=0,r||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,r){return t>>>=0,r||j(t,4,this.length),s.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,r){return t>>>=0,r||j(t,4,this.length),s.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,r){return t>>>=0,r||j(t,8,this.length),s.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,r){return t>>>=0,r||j(t,8,this.length),s.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,r,o,n){t=+t,r>>>=0,o>>>=0,n||w(this,t,r,o,Math.pow(2,8*o)-1,0);var s=1,i=0;for(this[r]=255&t;++i<o&&(s*=256);)this[r+i]=t/s&255;return r+o},r.prototype.writeUIntBE=function(t,r,o,n){t=+t,r>>>=0,o>>>=0,n||w(this,t,r,o,Math.pow(2,8*o)-1,0);var s=o-1,i=1;for(this[r+s]=255&t;0<=--s&&(i*=256);)this[r+s]=t/i&255;return r+o},r.prototype.writeUInt8=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,1,255,0),this[r]=255&t,r+1},r.prototype.writeUInt16LE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,2,65535,0),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeUInt16BE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeUInt32LE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t,r+4},r.prototype.writeUInt32BE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeIntLE=function(t,r,o,n){t=+t,r>>>=0,n||w(this,t,r,o,(n=Math.pow(2,8*o-1))-1,-n);var s=0,i=1,a=0;for(this[r]=255&t;++s<o&&(i*=256);)t<0&&0===a&&0!==this[r+s-1]&&(a=1),this[r+s]=(t/i>>0)-a&255;return r+o},r.prototype.writeIntBE=function(t,r,o,n){t=+t,r>>>=0,n||w(this,t,r,o,(n=Math.pow(2,8*o-1))-1,-n);var s=o-1,i=1,a=0;for(this[r+s]=255&t;0<=--s&&(i*=256);)t<0&&0===a&&0!==this[r+s+1]&&(a=1),this[r+s]=(t/i>>0)-a&255;return r+o},r.prototype.writeInt8=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,1,127,-128),this[r]=255&(t=t<0?255+t+1:t),r+1},r.prototype.writeInt16LE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,2,32767,-32768),this[r]=255&t,this[r+1]=t>>>8,r+2},r.prototype.writeInt16BE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=255&t,r+2},r.prototype.writeInt32LE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,4,2147483647,-2147483648),this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},r.prototype.writeInt32BE=function(t,r,o){return t=+t,r>>>=0,o||w(this,t,r,4,2147483647,-2147483648),this[r]=(t=t<0?4294967295+t+1:t)>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},r.prototype.writeFloatLE=function(t,r,o){return T(this,t,r,!0,o)},r.prototype.writeFloatBE=function(t,r,o){return T(this,t,r,!1,o)},r.prototype.writeDoubleLE=function(t,r,o){return E(this,t,r,!0,o)},r.prototype.writeDoubleBE=function(t,r,o){return E(this,t,r,!1,o)},r.prototype.copy=function(t,o,n,s){if(!r.isBuffer(t))throw TypeError("argument should be a Buffer");if(n=n||0,s||0===s||(s=this.length),o>=t.length&&(o=t.length),(s=0<s&&s<n?n:s)===n||0===t.length||0===this.length)return 0;if((o=o||0)<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(s<0)throw RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length);var i=(s=t.length-o<s-n?t.length-o+n:s)-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(o,n,s);else if(this===t&&n<o&&o<s)for(var a=i-1;0<=a;--a)t[a+o]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,s),o);return i},r.prototype.fill=function(t,o,n,s){if("string"==typeof t){if("string"==typeof o?(s=o,o=0,n=this.length):"string"==typeof n&&(s=n,n=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!r.isEncoding(s))throw TypeError("Unknown encoding: "+s);1===t.length&&(i=t.charCodeAt(0),("utf8"===s&&i<128||"latin1"===s)&&(t=i))}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(o<0||this.length<o||this.length<n)throw RangeError("Out of range index");if(!(n<=o)){if(o>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(a=o;a<n;++a)this[a]=t;else{var i,a,l=r.isBuffer(t)?t:r.from(t,s),u=l.length;if(0===u)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-o;++a)this[a+o]=l[a%u]}}return this};var k=/[^+/0-9A-Za-z-_]/g;function M(t,r){r=r||1/0;for(var o,n=t.length,s=null,i=[],a=0;a<n;++a){if(55295<(o=t.charCodeAt(a))&&o<57344){if(!s){if(56319<o||a+1===n){-1<(r-=3)&&i.push(239,191,189);continue}s=o;continue}if(o<56320){-1<(r-=3)&&i.push(239,191,189),s=o;continue}o=65536+(s-55296<<10|o-56320)}else s&&-1<(r-=3)&&i.push(239,191,189);if(s=null,o<128){if(--r<0)break;i.push(o)}else if(o<2048){if((r-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((r-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw Error("Invalid code point");if((r-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function C(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function A(t,r,o,n){for(var s=0;s<n&&!(s+o>=r.length||s>=t.length);++s)r[s+o]=t[s];return s}function O(t,r){return t instanceof r||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===r.name}var R=function(){for(var t="0123456789abcdef",r=Array(256),o=0;o<16;++o)for(var n=16*o,s=0;s<16;++s)r[n+s]=t[o]+t[s];return r}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:244}],5:[function(t,r,o){r.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},{}],6:[function(t,r,o){var n=t("../internals/is-object");r.exports=function(t){if(n(t)||null===t)return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},{"../internals/is-object":74}],7:[function(t,r,o){var n=t("../internals/well-known-symbol"),s=t("../internals/object-create"),t=t("../internals/object-define-property"),i=n("unscopables"),a=Array.prototype;null==a[i]&&t.f(a,i,{configurable:!0,value:s(null)}),r.exports=function(t){a[i][t]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(t,r,o){var n=t("../internals/string-multibyte").charAt;r.exports=function(t,r,o){return r+(o?n(t,r).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,r,o){r.exports=function(t,r,o){if(t instanceof r)return t;throw TypeError("Incorrect "+(o?o+" ":"")+"invocation")}},{}],10:[function(t,r,o){var n=t("../internals/is-object");r.exports=function(t){if(n(t))return t;throw TypeError(String(t)+" is not an object")}},{"../internals/is-object":74}],11:[function(t,r,o){r.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],12:[function(t,r,o){function n(t){return u(t)&&c(M,d(t))}var s,i=t("../internals/array-buffer-native"),a=t("../internals/descriptors"),l=t("../internals/global"),u=t("../internals/is-object"),c=t("../internals/has"),d=t("../internals/classof"),h=t("../internals/create-non-enumerable-property"),f=t("../internals/redefine"),p=t("../internals/object-define-property").f,m=t("../internals/object-get-prototype-of"),y=t("../internals/object-set-prototype-of"),g=t("../internals/well-known-symbol"),t=t("../internals/uid"),v=l.Int8Array,b=v&&v.prototype,x=l.Uint8ClampedArray,x=x&&x.prototype,j=v&&m(v),w=b&&m(b),S=Object.prototype,T=S.isPrototypeOf,g=g("toStringTag"),E=t("TYPED_ARRAY_TAG"),k=i&&!!y&&"Opera"!==d(l.opera),t=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(s in M)l[s]||(k=!1);if((!k||"function"!=typeof j||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},k))for(s in M)l[s]&&y(l[s],j);if((!k||!w||w===S)&&(w=j.prototype,k))for(s in M)l[s]&&y(l[s].prototype,w);if(k&&m(x)!==w&&y(x,w),a&&!c(w,g))for(s in t=!0,p(w,g,{get:function(){return u(this)?this[E]:void 0}}),M)l[s]&&h(l[s],E,s);r.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:t&&E,aTypedArray:function(t){if(n(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(y){if(T.call(j,t))return t}else for(var r in M)if(c(M,s)&&(r=l[r])&&(t===r||T.call(r,t)))return t;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,r,o){if(a){if(o)for(var n in M)(n=l[n])&&c(n.prototype,t)&&delete n.prototype[t];w[t]&&!o||f(w,t,!o&&k&&b[t]||r)}},exportTypedArrayStaticMethod:function(t,r,o){var n,s;if(a){if(y){if(o)for(n in M)(s=l[n])&&c(s,t)&&delete s[t];if(j[t]&&!o)return;try{return f(j,t,!o&&k&&v[t]||r)}catch(t){}}for(n in M)(s=l[n])&&(!s[t]||o)&&f(s,t,r)}},isView:function(t){return"DataView"===(t=d(t))||c(M,t)},isTypedArray:n,TypedArray:j,TypedArrayPrototype:w}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(t,r,o){function n(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function i(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function l(t){return G(t,23,4)}function u(t){return G(t,52,8)}function c(t,r){M(t[I],r,{get:function(){return O(this)[r]}})}function d(t,r,o,n){if((o=w(o))+r>(t=O(t)).byteLength)throw V(D);var s=O(t.buffer).bytes,o=o+t.byteOffset,t=s.slice(o,o+r);return n?t:t.reverse()}function h(t,r,o,n,s,i){if((o=w(o))+r>(t=O(t)).byteLength)throw V(D);for(var a=O(t.buffer).bytes,l=o+t.byteOffset,u=n(+s),c=0;c<r;c++)a[l+c]=u[i?c:r-c-1]}var f=t("../internals/global"),p=t("../internals/descriptors"),m=t("../internals/array-buffer-native"),y=t("../internals/create-non-enumerable-property"),g=t("../internals/redefine-all"),v=t("../internals/fails"),b=t("../internals/an-instance"),x=t("../internals/to-integer"),j=t("../internals/to-length"),w=t("../internals/to-index"),S=t("../internals/ieee754"),T=t("../internals/object-get-prototype-of"),E=t("../internals/object-set-prototype-of"),k=t("../internals/object-get-own-property-names").f,M=t("../internals/object-define-property").f,C=t("../internals/array-fill"),A=t("../internals/set-to-string-tag"),t=t("../internals/internal-state"),O=t.get,R=t.set,P="ArrayBuffer",L="DataView",I="prototype",D="Wrong index",F=f[P],N=F,U=f[L],t=U&&U[I],B=Object.prototype,V=f.RangeError,G=S.pack,H=S.unpack;if(m){if(!v(function(){F(1)})||!v(function(){new F(-1)})||v(function(){return new F,new F(1.5),new F(NaN),F.name!=P})){for(var z,f=(N=function(t){return b(this,N),new F(w(t))})[I]=F[I],q=k(F),W=0;q.length>W;)(z=q[W++])in N||y(N,z,F[z]);f.constructor=N}E&&T(t)!==B&&E(t,B);var S=new U(new N(2)),X=t.setInt8;S.setInt8(0,2147483648),S.setInt8(1,2147483649),!S.getInt8(0)&&S.getInt8(1)||g(t,{setInt8:function(t,r){X.call(this,t,r<<24>>24)},setUint8:function(t,r){X.call(this,t,r<<24>>24)}},{unsafe:!0})}else N=function(t){b(this,N,P),t=w(t),R(this,{bytes:C.call(Array(t),0),byteLength:t}),p||(this.byteLength=t)},U=function(t,r,o){b(this,U,L),b(t,N,L);var n=O(t).byteLength,r=x(r);if(r<0||n<r)throw V("Wrong offset");if(n<r+(o=void 0===o?n-r:j(o)))throw V("Wrong length");R(this,{buffer:t,byteLength:o,byteOffset:r}),p||(this.buffer=t,this.byteLength=o,this.byteOffset=r)},p&&(c(N,"byteLength"),c(U,"buffer"),c(U,"byteLength"),c(U,"byteOffset")),g(U[I],{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){return t=d(this,2,t,1<arguments.length?arguments[1]:void 0),(t[1]<<8|t[0])<<16>>16},getUint16:function(t){return t=d(this,2,t,1<arguments.length?arguments[1]:void 0),t[1]<<8|t[0]},getInt32:function(t){return a(d(this,4,t,1<arguments.length?arguments[1]:void 0))},getUint32:function(t){return a(d(this,4,t,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(t){return H(d(this,4,t,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(t){return H(d(this,8,t,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(t,r){h(this,1,t,n,r)},setUint8:function(t,r){h(this,1,t,n,r)},setInt16:function(t,r){h(this,2,t,s,r,2<arguments.length?arguments[2]:void 0)},setUint16:function(t,r){h(this,2,t,s,r,2<arguments.length?arguments[2]:void 0)},setInt32:function(t,r){h(this,4,t,i,r,2<arguments.length?arguments[2]:void 0)},setUint32:function(t,r){h(this,4,t,i,r,2<arguments.length?arguments[2]:void 0)},setFloat32:function(t,r){h(this,4,t,l,r,2<arguments.length?arguments[2]:void 0)},setFloat64:function(t,r){h(this,8,t,u,r,2<arguments.length?arguments[2]:void 0)}});A(N,P),A(U,L),r.exports={ArrayBuffer:N,DataView:U}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(t,r,o){var n=t("../internals/to-object"),s=t("../internals/to-absolute-index"),i=t("../internals/to-length"),a=Math.min;r.exports=[].copyWithin||function(t,r){var o=n(this),l=i(o.length),u=s(t,l),c=s(r,l),t=2<arguments.length?arguments[2]:void 0,d=a((void 0===t?l:s(t,l))-c,l-u),h=1;for(c<u&&u<c+d&&(h=-1,c+=d-1,u+=d-1);0<d--;)c in o?o[u]=o[c]:delete o[u],u+=h,c+=h;return o}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(t,r,o){var n=t("../internals/to-object"),s=t("../internals/to-absolute-index"),i=t("../internals/to-length");r.exports=function(t){for(var r=n(this),o=i(r.length),a=arguments.length,l=s(1<a?arguments[1]:void 0,o),a=2<a?arguments[2]:void 0,u=void 0===a?o:s(a,o);l<u;)r[l++]=t;return r}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(t,r,o){var n=t("../internals/array-iteration").forEach,s=t("../internals/array-method-is-strict"),t=t("../internals/array-method-uses-to-length"),s=s("forEach"),t=t("forEach");r.exports=s&&t?[].forEach:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,r,o){var n=t("../internals/function-bind-context"),s=t("../internals/to-object"),i=t("../internals/call-with-safe-iteration-closing"),a=t("../internals/is-array-iterator-method"),l=t("../internals/to-length"),u=t("../internals/create-property"),c=t("../internals/get-iterator-method");r.exports=function(t){var r,o,d,h,f,p,m=s(t),t="function"==typeof this?this:Array,y=arguments.length,g=1<y?arguments[1]:void 0,v=void 0!==g,b=c(m),x=0;if(v&&(g=n(g,2<y?arguments[2]:void 0,2)),null==b||t==Array&&a(b))for(o=new t(r=l(m.length));x<r;x++)p=v?g(m[x],x):m[x],u(o,x,p);else for(f=(h=b.call(m)).next,o=new t;!(d=f.call(h)).done;x++)p=v?i(h,g,[d.value,x],!0):d.value,u(o,x,p);return o.length=x,o}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(t,r,o){function n(t){return function(r,o,n){var l,u=s(r),c=i(u.length),d=a(n,c);if(t&&o!=o){for(;d<c;)if((l=u[d++])!=l)return!0}else for(;d<c;d++)if((t||d in u)&&u[d]===o)return t||d||0;return!t&&-1}}var s=t("../internals/to-indexed-object"),i=t("../internals/to-length"),a=t("../internals/to-absolute-index");r.exports={includes:n(!0),indexOf:n(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(t,r,o){function n(t){var r=1==t,o=2==t,n=3==t,d=4==t,h=6==t,f=5==t||h;return function(p,m,y,g){for(var v,b,x=a(p),j=i(x),w=s(m,y,3),S=l(j.length),T=0,m=g||u,E=r?m(p,S):o?m(p,0):void 0;T<S;T++)if((f||T in j)&&(b=w(v=j[T],T,x),t)){if(r)E[T]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return T;case 2:c.call(E,v)}else if(d)return!1}return h?-1:n||d?d:E}}var s=t("../internals/function-bind-context"),i=t("../internals/indexed-object"),a=t("../internals/to-object"),l=t("../internals/to-length"),u=t("../internals/array-species-create"),c=[].push;r.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(t,r,o){var n=t("../internals/to-indexed-object"),s=t("../internals/to-integer"),i=t("../internals/to-length"),a=t("../internals/array-method-is-strict"),t=t("../internals/array-method-uses-to-length"),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,a=a("lastIndexOf"),t=t("indexOf",{ACCESSORS:!0,1:0});r.exports=!c&&a&&t?u:function(t){if(c)return u.apply(this,arguments)||0;var r=n(this),o=i(r.length),a=o-1;for((a=1<arguments.length?l(a,s(arguments[1])):a)<0&&(a=o+a);0<=a;a--)if(a in r&&r[a]===t)return a||0;return -1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(t,r,o){var n=t("../internals/fails"),s=t("../internals/well-known-symbol"),i=t("../internals/engine-v8-version"),a=s("species");r.exports=function(t){return 51<=i||!n(function(){var r=[];return(r.constructor={})[a]=function(){return{foo:1}},1!==r[t](Boolean).foo})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(t,r,o){var n=t("../internals/fails");r.exports=function(t,r){var o=[][t];return!!o&&n(function(){o.call(null,r||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,r,o){function n(t){throw t}var s=t("../internals/descriptors"),i=t("../internals/fails"),a=t("../internals/has"),l=Object.defineProperty,u={};r.exports=function(t,r){var o,c,d,h;return a(u,t)?u[t]:(o=[][t],c=!!a(r=r||{},"ACCESSORS")&&r.ACCESSORS,d=a(r,0)?r[0]:n,h=a(r,1)?r[1]:void 0,u[t]=!!o&&!i(function(){if(c&&!s)return!0;var t={length:-1};c?l(t,1,{enumerable:!0,get:n}):t[1]=1,o.call(t,d,h)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(t,r,o){function n(t){return function(r,o,n,u){s(o);var c=i(r),d=a(c),h=l(c.length),f=t?h-1:0,p=t?-1:1;if(n<2)for(;;){if(f in d){u=d[f],f+=p;break}if(f+=p,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?0<=f:f<h;f+=p)f in d&&(u=o(u,d[f],f,c));return u}}var s=t("../internals/a-function"),i=t("../internals/to-object"),a=t("../internals/indexed-object"),l=t("../internals/to-length");r.exports={left:n(!1),right:n(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(t,r,o){var n=t("../internals/is-object"),s=t("../internals/is-array"),i=t("../internals/well-known-symbol")("species");r.exports=function(t,r){var o;return new(void 0===(o=s(t)&&("function"==typeof(o=t.constructor)&&(o===Array||s(o.prototype))||n(o)&&null===(o=o[i]))?void 0:o)?Array:o)(0===r?0:r)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(t,r,o){var n=t("../internals/an-object");r.exports=function(t,r,o,s){try{return s?r(n(o)[0],o[1]):r(o)}catch(r){throw void 0!==(s=t.return)&&n(s.call(t)),r}}},{"../internals/an-object":10}],27:[function(t,r,o){var n=t("../internals/well-known-symbol")("iterator"),s=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){s=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(t){}r.exports=function(t,r){if(!r&&!s)return!1;var o=!1;try{var i={};i[n]=function(){return{next:function(){return{done:o=!0}}}},t(i)}catch(t){}return o}},{"../internals/well-known-symbol":148}],28:[function(t,r,o){var n={}.toString;r.exports=function(t){return n.call(t).slice(8,-1)}},{}],29:[function(t,r,o){var n=t("../internals/to-string-tag-support"),s=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("toStringTag"),a="Arguments"==s(function(){return arguments}());r.exports=n?s:function(t){var r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,r){try{return t[r]}catch(t){}}(t=Object(t),i))?r:a?s(t):"Object"==(r=s(t))&&"function"==typeof t.callee?"Arguments":r}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(t,r,o){var n=t("../internals/object-define-property").f,s=t("../internals/object-create"),i=t("../internals/redefine-all"),a=t("../internals/function-bind-context"),l=t("../internals/an-instance"),u=t("../internals/iterate"),c=t("../internals/define-iterator"),d=t("../internals/set-species"),h=t("../internals/descriptors"),f=t("../internals/internal-metadata").fastKey,t=t("../internals/internal-state"),p=t.set,m=t.getterFor;r.exports={getConstructor:function(t,r,o,c){function d(t,r,o){var n,s=v(t),i=y(t,r);return i?i.value=o:(s.last=i={index:n=f(r,!0),key:r,value:o,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=i),r&&(r.next=i),h?s.size++:t.size++,"F"!==n&&(s.index[n]=i)),t}function y(t,r){var o,t=v(t),n=f(r);if("F"!==n)return t.index[n];for(o=t.first;o;o=o.next)if(o.key==r)return o}var g=t(function(t,n){l(t,g,r),p(t,{type:r,index:s(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=n&&u(n,t[c],t,o)}),v=m(r);return i(g.prototype,{clear:function(){for(var t=v(this),r=t.index,o=t.first;o;)o.removed=!0,o.previous&&(o.previous=o.previous.next=void 0),delete r[o.index],o=o.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var r,o,n=v(this),t=y(this,t);return t&&(r=t.next,o=t.previous,delete n.index[t.index],t.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==t&&(n.first=r),n.last==t&&(n.last=o),h?n.size--:this.size--),!!t},forEach:function(t){for(var r,o=v(this),n=a(t,1<arguments.length?arguments[1]:void 0,3);r=r?r.next:o.first;)for(n(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function(t){return!!y(this,t)}}),i(g.prototype,o?{get:function(t){return(t=y(this,t))&&t.value},set:function(t,r){return d(this,0===t?0:t,r)}}:{add:function(t){return d(this,t=0===t?0:t,t)}}),h&&n(g.prototype,"size",{get:function(){return v(this).size}}),g},setStrong:function(t,r,o){var n=r+" Iterator",s=m(r),i=m(n);c(t,r,function(t,r){p(this,{type:n,target:t,state:s(t),kind:r,last:void 0})},function(){for(var t=i(this),r=t.kind,o=t.last;o&&o.removed;)o=o.previous;return t.target&&(t.last=o=o?o.next:t.state.first)?"keys"==r?{value:o.key,done:!1}:"values"==r?{value:o.value,done:!1}:{value:[o.key,o.value],done:!1}:{value:t.target=void 0,done:!0}},o?"entries":"values",!o,!0),d(r)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(t,r,o){function n(t){return t.frozen||(t.frozen=new s)}function s(){this.entries=[]}function i(t,r){return g(t.entries,function(t){return t[0]===r})}var a=t("../internals/redefine-all"),l=t("../internals/internal-metadata").getWeakData,u=t("../internals/an-object"),c=t("../internals/is-object"),d=t("../internals/an-instance"),h=t("../internals/iterate"),f=t("../internals/array-iteration"),p=t("../internals/has"),t=t("../internals/internal-state"),m=t.set,y=t.getterFor,g=f.find,v=f.findIndex,b=0;s.prototype={get:function(t){if(t=i(this,t))return t[1]},has:function(t){return!!i(this,t)},set:function(t,r){var o=i(this,t);o?o[1]=r:this.entries.push([t,r])},delete:function(t){var r=v(this.entries,function(r){return r[0]===t});return~r&&this.entries.splice(r,1),!!~r}},r.exports={getConstructor:function(t,r,o,s){function i(t,r,o){var s=g(t),i=l(u(r),!0);return!0===i?n(s).set(r,o):i[s.id]=o,t}var f=t(function(t,n){d(t,f,r),m(t,{type:r,id:b++,frozen:void 0}),null!=n&&h(n,t[s],t,o)}),g=y(r);return a(f.prototype,{delete:function(t){var r,o=g(this);return!!c(t)&&(!0===(r=l(t))?n(o).delete(t):r&&p(r,o.id)&&delete r[o.id])},has:function(t){var r,o=g(this);return!!c(t)&&(!0===(r=l(t))?n(o).has(t):r&&p(r,o.id))}}),a(f.prototype,o?{get:function(t){var r,o=g(this);if(c(t))return!0===(r=l(t))?n(o).get(t):r?r[o.id]:void 0},set:function(t,r){return i(this,t,r)}}:{add:function(t){return i(this,t,!0)}}),f}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/global"),i=t("../internals/is-forced"),a=t("../internals/redefine"),l=t("../internals/internal-metadata"),u=t("../internals/iterate"),c=t("../internals/an-instance"),d=t("../internals/is-object"),h=t("../internals/fails"),f=t("../internals/check-correctness-of-iteration"),p=t("../internals/set-to-string-tag"),m=t("../internals/inherit-if-required");r.exports=function(t,r,o){function y(t){var r=k[t];a(k,t,"add"==t?function(t){return r.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(S&&!d(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return S&&!d(t)?void 0:r.call(this,0===t?0:t)}:"has"==t?function(t){return!(S&&!d(t))&&r.call(this,0===t?0:t)}:function(t,o){return r.call(this,0===t?0:t,o),this})}var g,v,b,x,j,w=-1!==t.indexOf("Map"),S=-1!==t.indexOf("Weak"),T=w?"set":"add",E=s[t],k=E&&E.prototype,M=E,C={};return i(t,"function"!=typeof E||!(S||k.forEach&&!h(function(){(new E).entries().next()})))?(M=o.getConstructor(r,t,w,T),l.REQUIRED=!0):i(t,!0)&&(v=(g=new M)[T](S?{}:-0,1)!=g,b=h(function(){g.has(1)}),x=f(function(t){new E(t)}),j=!S&&h(function(){for(var t=new E,r=5;r--;)t[T](r,r);return!t.has(-0)}),x||(((M=r(function(r,o){return c(r,M,t),r=m(new E,r,M),null!=o&&u(o,r[T],r,w),r})).prototype=k).constructor=M),(b||j)&&(y("delete"),y("has"),w&&y("get")),(j||v)&&y(T),S&&k.clear&&delete k.clear),C[t]=M,n({global:!0,forced:M!=E},C),p(M,t),S||o.setStrong(M,t,w),M}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(t,r,o){var n=t("../internals/has"),s=t("../internals/own-keys"),i=t("../internals/object-get-own-property-descriptor"),a=t("../internals/object-define-property");r.exports=function(t,r){for(var o=s(r),l=a.f,u=i.f,c=0;c<o.length;c++){var d=o[c];n(t,d)||l(t,d,u(r,d))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(t,r,o){var n=t("../internals/well-known-symbol")("match");r.exports=function(t){var r=/./;try{"/./"[t](r)}catch(o){try{return r[n]=!1,"/./"[t](r)}catch(t){}}return!1}},{"../internals/well-known-symbol":148}],35:[function(t,r,o){t=t("../internals/fails"),r.exports=!t(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},{"../internals/fails":51}],36:[function(t,r,o){var n=t("../internals/require-object-coercible"),s=/"/g;r.exports=function(t,r,o,i){var t=String(n(t)),a="<"+r;return""!==o&&(a+=" "+o+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+t+"</"+r+">"}},{"../internals/require-object-coercible":113}],37:[function(t,r,o){function n(){return this}var s=t("../internals/iterators-core").IteratorPrototype,i=t("../internals/object-create"),a=t("../internals/create-property-descriptor"),l=t("../internals/set-to-string-tag"),u=t("../internals/iterators");r.exports=function(t,r,o){return r+=" Iterator",t.prototype=i(s,{next:a(1,o)}),l(t,r,!1,!0),u[r]=n,t}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");r.exports=n?function(t,r,o){return s.f(t,r,i(1,o))}:function(t,r,o){return t[r]=o,t}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(t,r,o){r.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},{}],40:[function(t,r,o){var n=t("../internals/to-primitive"),s=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");r.exports=function(t,r,o){(r=n(r))in t?s.f(t,r,i(0,o)):t[r]=o}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(t,r,o){function n(){return this}var s=t("../internals/export"),i=t("../internals/create-iterator-constructor"),a=t("../internals/object-get-prototype-of"),l=t("../internals/object-set-prototype-of"),u=t("../internals/set-to-string-tag"),c=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),h=t("../internals/well-known-symbol"),f=t("../internals/is-pure"),p=t("../internals/iterators"),t=t("../internals/iterators-core"),m=t.IteratorPrototype,y=t.BUGGY_SAFARI_ITERATORS,g=h("iterator"),v="values",b="entries";r.exports=function(t,r,o,h,x,j,w){function S(t){if(t===x&&A)return A;if(!y&&t in M)return M[t];switch(t){case"keys":case v:case b:return function(){return new o(this,t)}}return function(){return new o(this)}}i(o,r,h);var T,E,h=r+" Iterator",k=!1,M=t.prototype,C=M[g]||M["@@iterator"]||x&&M[x],A=!y&&C||S(x),O="Array"==r&&M.entries||C;if(O&&(O=a(O.call(new t)),m!==Object.prototype&&O.next&&(f||a(O)===m||(l?l(O,m):"function"!=typeof O[g]&&c(O,g,n)),u(O,h,!0,!0),f&&(p[h]=n))),x==v&&C&&C.name!==v&&(k=!0,A=function(){return C.call(this)}),f&&!w||M[g]===A||c(M,g,A),p[r]=A,x){if(T={values:S(v),keys:j?A:S("keys"),entries:S(b)},w)for(E in T)!y&&!k&&E in M||d(M,E,T[E]);else s({target:r,proto:!0,forced:y||k},T)}return T}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(t,r,o){var n=t("../internals/path"),s=t("../internals/has"),i=t("../internals/well-known-symbol-wrapped"),a=t("../internals/object-define-property").f;r.exports=function(t){var r=n.Symbol||(n.Symbol={});s(r,t)||a(r,t,{value:i.f(t)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(t,r,o){t=t("../internals/fails"),r.exports=!t(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":51}],44:[function(t,r,o){var n=t("../internals/global"),t=t("../internals/is-object"),s=n.document,i=t(s)&&t(s.createElement);r.exports=function(t){return i?s.createElement(t):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(t,r,o){r.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,r,o){t=t("../internals/engine-user-agent"),r.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,r,o){t=t("../internals/get-built-in"),r.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(t,r,o){var n,s,i=t("../internals/global"),t=t("../internals/engine-user-agent"),i=i.process,i=i&&i.versions,i=i&&i.v8;i?s=(n=i.split("."))[0]+n[1]:t&&(!(n=t.match(/Edge\/(\d+)/))||74<=n[1])&&(n=t.match(/Chrome\/(\d+)/))&&(s=n[1]),r.exports=s&&+s},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(t,r,o){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,r,o){var n=t("../internals/global"),s=t("../internals/object-get-own-property-descriptor").f,i=t("../internals/create-non-enumerable-property"),a=t("../internals/redefine"),l=t("../internals/set-global"),u=t("../internals/copy-constructor-properties"),c=t("../internals/is-forced");r.exports=function(t,r){var o,d,h,f=t.target,p=t.global,m=t.stat,y=p?n:m?n[f]||l(f,{}):(n[f]||{}).prototype;if(y)for(o in r){if(d=r[o],h=t.noTargetGet?(h=s(y,o))&&h.value:y[o],!c(p?o:f+(m?".":"#")+o,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;u(d,h)}(t.sham||h&&h.sham)&&i(d,"sham",!0),a(y,o,d,t)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(t,r,o){r.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],52:[function(t,r,o){t("../modules/es.regexp.exec");var n=t("../internals/redefine"),s=t("../internals/fails"),i=t("../internals/well-known-symbol"),a=t("../internals/regexp-exec"),l=t("../internals/create-non-enumerable-property"),u=i("species"),c=!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d="$0"==="a".replace(/./,"$0"),t=i("replace"),h=!!/./[t]&&""===/./[t]("a","$0"),f=!s(function(){var t=/(?:)/,r=t.exec,t=(t.exec=function(){return r.apply(this,arguments)},"ab".split(t));return 2!==t.length||"a"!==t[0]||"b"!==t[1]});r.exports=function(t,r,o,p){var m,y,g=i(t),v=!s(function(){var r={};return r[g]=function(){return 7},7!=""[t](r)}),b=v&&!s(function(){var r=!1,o=/a/;return"split"===t&&((o={constructor:{}}).constructor[u]=function(){return o},o.flags="",o[g]=/./[g]),o.exec=function(){return r=!0,null},o[g](""),!r});v&&b&&("replace"!==t||c&&d&&!h)&&("split"!==t||f)||(m=/./[g],o=(b=o(g,""[t],function(t,r,o,n,s){return r.exec===a?v&&!s?{done:!0,value:m.call(r,o,n)}:{done:!0,value:t.call(o,r,n)}:{done:!1}},{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}))[0],y=b[1],n(String.prototype,t,o),n(RegExp.prototype,g,2==r?function(t,r){return y.call(t,this,r)}:function(t){return y.call(t,this)})),p&&l(RegExp.prototype[g],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":185}],53:[function(t,r,o){t=t("../internals/fails"),r.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(t,r,o){var n=t("../internals/a-function");r.exports=function(t,r,o){if(n(t),void 0===r)return t;switch(o){case 0:return function(){return t.call(r)};case 1:return function(o){return t.call(r,o)};case 2:return function(o,n){return t.call(r,o,n)};case 3:return function(o,n,s){return t.call(r,o,n,s)}}return function(){return t.apply(r,arguments)}}},{"../internals/a-function":5}],55:[function(t,r,o){var n=t("../internals/a-function"),s=t("../internals/is-object"),i=[].slice,a={};r.exports=Function.bind||function(t){var r=n(this),o=i.call(arguments,1),l=function(){var n=o.concat(i.call(arguments));if(this instanceof l){var s=n.length;if(!(s in a)){for(var u=[],c=0;c<s;c++)u[c]="a["+c+"]";a[s]=Function("C,a","return new C("+u.join(",")+")")}return a[s](r,n)}return r.apply(t,n)};return s(r.prototype)&&(l.prototype=r.prototype),l}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,r,o){function n(t){return"function"==typeof t?t:void 0}var s=t("../internals/path"),i=t("../internals/global");r.exports=function(t,r){return arguments.length<2?n(s[t])||n(i[t]):s[t]&&s[t][r]||i[t]&&i[t][r]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,r,o){var n=t("../internals/classof"),s=t("../internals/iterators"),i=t("../internals/well-known-symbol")("iterator");r.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||s[n(t)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(t,r,o){var n=t("../internals/an-object"),s=t("../internals/get-iterator-method");r.exports=function(t){var r=s(t);if("function"!=typeof r)throw TypeError(String(t)+" is not iterable");return n(r.call(t))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,r,o){(function(t){function o(t){return t&&t.Math==Math&&t}r.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||Function("return this")()}).call(this,void 0!==ty?ty:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(t,r,o){var n={}.hasOwnProperty;r.exports=function(t,r){return n.call(t,r)}},{}],61:[function(t,r,o){r.exports={}},{}],62:[function(t,r,o){var n=t("../internals/global");r.exports=function(t,r){var o=n.console;o&&o.error&&(1==arguments.length?o.error(t):o.error(t,r))}},{"../internals/global":59}],63:[function(t,r,o){t=t("../internals/get-built-in"),r.exports=t("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/fails"),i=t("../internals/document-create-element");r.exports=!n&&!s(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(t,r,o){var n=Math.abs,s=Math.pow,i=Math.floor,a=Math.log,l=Math.LN2;r.exports={pack:function(t,r,o){var u,c,d,h=Array(o),f=8*o-r-1,o=(1<<f)-1,p=o>>1,m=23===r?s(2,-24)-s(2,-77):0,y=t<0||0===t&&1/t<0?1:0,g=0;for((t=n(t))!=t||t===1/0?(c=t!=t?1:0,u=o):(u=i(a(t)/l),t*(d=s(2,-u))<1&&(u--,d*=2),2<=(t+=1<=u+p?m/d:m*s(2,1-p))*d&&(u++,d/=2),o<=u+p?(c=0,u=o):1<=u+p?(c=(t*d-1)*s(2,r),u+=p):(c=t*s(2,p-1)*s(2,r),u=0));8<=r;h[g++]=255&c,c/=256,r-=8);for(u=u<<r|c,f+=r;0<f;h[g++]=255&u,u/=256,f-=8);return h[--g]|=128*y,h},unpack:function(t,r){var o,n=t.length,i=8*n-r-1,a=(1<<i)-1,l=a>>1,u=i-7,c=n-1,i=t[c--],d=127&i;for(i>>=7;0<u;d=256*d+t[c],c--,u-=8);for(o=d&(1<<-u)-1,d>>=-u,u+=r;0<u;o=256*o+t[c],c--,u-=8);if(0===d)d=1-l;else{if(d===a)return o?NaN:i?-1/0:1/0;o+=s(2,r),d-=l}return(i?-1:1)*o*s(2,d-r)}}},{}],66:[function(t,r,o){var n=t("../internals/fails"),s=t("../internals/classof-raw"),i="".split;r.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==s(t)?i.call(t,""):Object(t)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(t,r,o){var n=t("../internals/is-object"),s=t("../internals/object-set-prototype-of");r.exports=function(t,r,o){return s&&"function"==typeof(r=r.constructor)&&r!==o&&n(r=r.prototype)&&r!==o.prototype&&s(t,r),t}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(t,r,o){var t=t("../internals/shared-store"),n=Function.toString;"function"!=typeof t.inspectSource&&(t.inspectSource=function(t){return n.call(t)}),r.exports=t.inspectSource},{"../internals/shared-store":119}],69:[function(t,r,o){function n(t){l(t,d,{value:{objectID:"O"+ ++h,weakData:{}}})}var s=t("../internals/hidden-keys"),i=t("../internals/is-object"),a=t("../internals/has"),l=t("../internals/object-define-property").f,u=t("../internals/uid"),c=t("../internals/freezing"),d=u("meta"),h=0,f=Object.isExtensible||function(){return!0},p=r.exports={REQUIRED:!1,fastKey:function(t,r){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,d)){if(!f(t))return"F";if(!r)return"E";n(t)}return t[d].objectID},getWeakData:function(t,r){if(!a(t,d)){if(!f(t))return!0;if(!r)return!1;n(t)}return t[d].weakData},onFreeze:function(t){return c&&p.REQUIRED&&f(t)&&!a(t,d)&&n(t),t}};s[d]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(t,r,o){var n,s,i,a,l,u,c,d,h=t("../internals/native-weak-map"),f=t("../internals/global"),p=t("../internals/is-object"),m=t("../internals/create-non-enumerable-property"),y=t("../internals/has"),g=t("../internals/shared-key"),t=t("../internals/hidden-keys"),f=f.WeakMap;c=h?(s=(n=new f).get,i=n.has,a=n.set,l=function(t,r){return a.call(n,t,r),r},u=function(t){return s.call(n,t)||{}},function(t){return i.call(n,t)}):(t[d=g("state")]=!0,l=function(t,r){return m(t,d,r),r},u=function(t){return y(t,d)?t[d]:{}},function(t){return y(t,d)}),r.exports={set:l,get:u,has:c,enforce:function(t){return c(t)?u(t):l(t,{})},getterFor:function(t){return function(r){if(p(r)&&(r=u(r)).type===t)return r;throw TypeError("Incompatible receiver, "+t+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,r,o){var n=t("../internals/well-known-symbol"),s=t("../internals/iterators"),i=n("iterator"),a=Array.prototype;r.exports=function(t){return void 0!==t&&(s.Array===t||a[i]===t)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(t,r,o){var n=t("../internals/classof-raw");r.exports=Array.isArray||function(t){return"Array"==n(t)}},{"../internals/classof-raw":28}],73:[function(t,r,o){function n(t,r){return(t=l[a(t)])==c||t!=u&&("function"==typeof r?s(r):!!r)}var s=t("../internals/fails"),i=/#|\.prototype\./,a=n.normalize=function(t){return String(t).replace(i,".").toLowerCase()},l=n.data={},u=n.NATIVE="N",c=n.POLYFILL="P";r.exports=n},{"../internals/fails":51}],74:[function(t,r,o){r.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],75:[function(t,r,o){r.exports=!1},{}],76:[function(t,r,o){var n=t("../internals/is-object"),s=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("match");r.exports=function(t){var r;return n(t)&&(void 0!==(r=t[i])?!!r:"RegExp"==s(t))}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(t,r,o){function n(t,r){this.stopped=t,this.result=r}var s=t("../internals/an-object"),i=t("../internals/is-array-iterator-method"),a=t("../internals/to-length"),l=t("../internals/function-bind-context"),u=t("../internals/get-iterator-method"),c=t("../internals/call-with-safe-iteration-closing");(r.exports=function(t,r,o,d,h){var f,p,m,y,g,v,b=l(r,o,d?2:1);if(h)f=t;else{if("function"!=typeof(r=u(t)))throw TypeError("Target is not iterable");if(i(r)){for(p=0,m=a(t.length);p<m;p++)if((y=d?b(s(v=t[p])[0],v[1]):b(t[p]))&&y instanceof n)return y;return new n(!1)}f=r.call(t)}for(g=f.next;!(v=g.call(f)).done;)if("object"==typeof(y=c(f,b,v.value,d))&&y&&y instanceof n)return y;return new n(!1)}).stop=function(t){return new n(!0,t)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(t,r,o){var n,s,i=t("../internals/object-get-prototype-of"),a=t("../internals/create-non-enumerable-property"),l=t("../internals/has"),u=t("../internals/well-known-symbol"),t=t("../internals/is-pure"),u=u("iterator"),c=!1;[].keys&&("next"in(s=[].keys())?(i=i(i(s)))!==Object.prototype&&(n=i):c=!0),null==n&&(n={}),t||l(n,u)||a(n,u,function(){return this}),r.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:c}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(t,r,o){r.exports={}},{}],80:[function(t,r,o){r.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],81:[function(t,r,o){var n,s,i,a,l,u,c,d,h=t("../internals/global"),f=t("../internals/object-get-own-property-descriptor").f,p=t("../internals/classof-raw"),m=t("../internals/task").set,t=t("../internals/engine-is-ios"),y=h.MutationObserver||h.WebKitMutationObserver,g=h.process,v=h.Promise,b="process"==p(g),p=f(h,"queueMicrotask"),f=p&&p.value;f||(n=function(){var t,r;for(b&&(t=g.domain)&&t.exit();s;){r=s.fn,s=s.next;try{r()}catch(t){throw s?a():i=void 0,t}}i=void 0,t&&t.enter()},a=b?function(){g.nextTick(n)}:y&&!t?(l=!0,u=document.createTextNode(""),new y(n).observe(u,{characterData:!0}),function(){u.data=l=!l}):v&&v.resolve?(d=(c=v.resolve(void 0)).then,function(){d.call(c,n)}):function(){m.call(h,n)}),r.exports=f||function(t){t={fn:t,next:void 0},i&&(i.next=t),s||(s=t,a()),i=t}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(t,r,o){t=t("../internals/global"),r.exports=t.Promise},{"../internals/global":59}],83:[function(t,r,o){t=t("../internals/fails"),r.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(t,r,o){var n=t("../internals/fails"),s=t("../internals/well-known-symbol"),i=t("../internals/is-pure"),a=s("iterator");r.exports=!n(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),r=t.searchParams,o="";return t.pathname="c%20d",r.forEach(function(t,n){r.delete("b"),o+=n+t}),i&&!t.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(t,r,o){var n=t("../internals/global"),t=t("../internals/inspect-source"),n=n.WeakMap;r.exports="function"==typeof n&&/native code/.test(t(n))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,r,o){function n(t){var r,o;this.promise=new t(function(t,n){if(void 0!==r||void 0!==o)throw TypeError("Bad Promise constructor");r=t,o=n}),this.resolve=s(r),this.reject=s(o)}var s=t("../internals/a-function");r.exports.f=function(t){return new n(t)}},{"../internals/a-function":5}],87:[function(t,r,o){var n=t("../internals/is-regexp");r.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},{"../internals/is-regexp":76}],88:[function(t,r,o){var n=t("../internals/global").isFinite;r.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},{"../internals/global":59}],89:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/fails"),i=t("../internals/object-keys"),a=t("../internals/object-get-own-property-symbols"),l=t("../internals/object-property-is-enumerable"),u=t("../internals/to-object"),c=t("../internals/indexed-object"),d=Object.assign,h=Object.defineProperty;r.exports=!d||s(function(){var t,r,o,s;return!(!n||1===d({b:1},d(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(r={},s="abcdefghijklmnopqrst",(t={})[o=Symbol()]=7,s.split("").forEach(function(t){r[t]=t}),7!=d({},t)[o]||i(d({},r)).join("")!=s)})?function(t,r){for(var o=u(t),s=arguments.length,d=1,h=a.f,f=l.f;d<s;)for(var p,m=c(arguments[d++]),y=h?i(m).concat(h(m)):i(m),g=y.length,v=0;v<g;)p=y[v++],n&&!f.call(m,p)||(o[p]=m[p]);return o}:d},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(t,r,o){function n(){}var s,i=t("../internals/an-object"),a=t("../internals/object-define-properties"),l=t("../internals/enum-bug-keys"),u=t("../internals/hidden-keys"),c=t("../internals/html"),d=t("../internals/document-create-element"),t=t("../internals/shared-key"),h="prototype",f="script",p=t("IE_PROTO"),m=function(t){return"<"+f+">"+t+"</"+f+">"},y=function(){try{s=document.domain&&new ActiveXObject("htmlfile")}catch(t){}y=s?((t=s).write(m("")),t.close(),r=t.parentWindow.Object,t=null,r):(t=d("iframe"),r="java"+f+":",t.style.display="none",c.appendChild(t),t.src=String(r),(r=t.contentWindow.document).open(),r.write(m("document.F=Object")),r.close(),r.F);for(var r,o=l.length;o--;)delete y[h][l[o]];return y()};u[p]=!0,r.exports=Object.create||function(t,r){var o;return null!==t?(n[h]=i(t),o=new n,n[h]=null,o[p]=t):o=y(),void 0===r?o:a(o,r)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/object-define-property"),i=t("../internals/an-object"),a=t("../internals/object-keys");r.exports=n?Object.defineProperties:function(t,r){i(t);for(var o,n=a(r),l=n.length,u=0;u<l;)s.f(t,o=n[u++],r[o]);return t}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/ie8-dom-define"),i=t("../internals/an-object"),a=t("../internals/to-primitive"),l=Object.defineProperty;o.f=n?l:function(t,r,o){if(i(t),r=a(r,!0),i(o),s)try{return l(t,r,o)}catch(t){}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(t[r]=o.value),t}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/object-property-is-enumerable"),i=t("../internals/create-property-descriptor"),a=t("../internals/to-indexed-object"),l=t("../internals/to-primitive"),u=t("../internals/has"),c=t("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;o.f=n?d:function(t,r){if(t=a(t),r=l(r,!0),c)try{return d(t,r)}catch(t){}if(u(t,r))return i(!s.f.call(t,r),t[r])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(t,r,o){var n=t("../internals/to-indexed-object"),s=t("../internals/object-get-own-property-names").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(t){if(!a||"[object Window]"!=i.call(t))return s(n(t));try{return s(t)}catch(t){return a.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(t,r,o){var n=t("../internals/object-keys-internal"),s=t("../internals/enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(t,r,o){o.f=Object.getOwnPropertySymbols},{}],97:[function(t,r,o){var n=t("../internals/has"),s=t("../internals/to-object"),i=t("../internals/shared-key"),t=t("../internals/correct-prototype-getter"),a=i("IE_PROTO"),l=Object.prototype;r.exports=t?Object.getPrototypeOf:function(t){return n(t=s(t),a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(t,r,o){var n=t("../internals/has"),s=t("../internals/to-indexed-object"),i=t("../internals/array-includes").indexOf,a=t("../internals/hidden-keys");r.exports=function(t,r){var o,l=s(t),u=0,c=[];for(o in l)!n(a,o)&&n(l,o)&&c.push(o);for(;r.length>u;)!n(l,o=r[u++])||~i(c,o)||c.push(o);return c}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(t,r,o){var n=t("../internals/object-keys-internal"),s=t("../internals/enum-bug-keys");r.exports=Object.keys||function(t){return n(t,s)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(t,r,o){var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!n.call({1:2},1);o.f=i?function(t){return!!(t=s(this,t))&&t.enumerable}:n},{}],101:[function(t,r,o){var n=t("../internals/an-object"),s=t("../internals/a-possible-prototype");r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,o={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(o,[]),r=o instanceof Array}catch(t){}return function(o,i){return n(o),s(i),r?t.call(o,i):o.__proto__=i,o}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,r,o){var n=t("../internals/to-string-tag-support"),s=t("../internals/classof");r.exports=n?({}).toString:function(){return"[object "+s(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(t,r,o){var n=t("../internals/get-built-in"),s=t("../internals/object-get-own-property-names"),i=t("../internals/object-get-own-property-symbols"),a=t("../internals/an-object");r.exports=n("Reflect","ownKeys")||function(t){var r=s.f(a(t)),o=i.f;return o?r.concat(o(t)):r}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,r,o){t=t("../internals/global"),r.exports=t},{"../internals/global":59}],105:[function(t,r,o){r.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},{}],106:[function(t,r,o){var n=t("../internals/an-object"),s=t("../internals/is-object"),i=t("../internals/new-promise-capability");r.exports=function(t,r){return n(t),s(r)&&r.constructor===t?r:((0,(t=i.f(t)).resolve)(r),t.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,r,o){var n=t("../internals/redefine");r.exports=function(t,r,o){for(var s in r)n(t,s,r[s],o);return t}},{"../internals/redefine":108}],108:[function(t,r,o){var n=t("../internals/global"),s=t("../internals/create-non-enumerable-property"),i=t("../internals/has"),a=t("../internals/set-global"),l=t("../internals/inspect-source"),t=t("../internals/internal-state"),u=t.get,c=t.enforce,d=String(String).split("String");(r.exports=function(t,r,o,l){var u=!!l&&!!l.unsafe,h=!!l&&!!l.enumerable,l=!!l&&!!l.noTargetGet;"function"==typeof o&&("string"!=typeof r||i(o,"name")||s(o,"name",r),c(o).source=d.join("string"==typeof r?r:"")),t===n?h?t[r]=o:a(r,o):(u?!l&&t[r]&&(h=!0):delete t[r],h?t[r]=o:s(t,r,o))})(Function.prototype,"toString",function(){return"function"==typeof this&&u(this).source||l(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,r,o){var n=t("./classof-raw"),s=t("./regexp-exec");r.exports=function(t,r){var o=t.exec;if("function"==typeof o){if("object"!=typeof(o=o.call(t,r)))throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(t,r)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(t,r,o){var n,s,i=t("./regexp-flags"),t=t("./regexp-sticky-helpers"),a=RegExp.prototype.exec,l=String.prototype.replace,u=(n=/a/,s=/b*/g,a.call(n,"a"),a.call(s,"a"),0!==n.lastIndex||0!==s.lastIndex),c=t.UNSUPPORTED_Y||t.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];r.exports=u||d||c?function(t){var r,o,n,s,h=c&&this.sticky,f=i.call(this),p=this.source,m=0,y=t;return h&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),y=String(t).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==t[this.lastIndex-1])&&(p="(?: "+p+")",y=" "+y,m++),o=RegExp("^(?:"+p+")",f)),d&&(o=RegExp("^"+p+"$(?!\\s)",f)),u&&(r=this.lastIndex),n=a.call(h?o:this,y),h?n?(n.input=n.input.slice(m),n[0]=n[0].slice(m),n.index=this.lastIndex,this.lastIndex+=n[0].length):this.lastIndex=0:u&&n&&(this.lastIndex=this.global?n.index+n[0].length:r),d&&n&&1<n.length&&l.call(n[0],o,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)}),n}:a},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,r,o){var n=t("../internals/an-object");r.exports=function(){var t=n(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.dotAll&&(r+="s"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r}},{"../internals/an-object":10}],112:[function(t,r,o){t=t("./fails"),o.UNSUPPORTED_Y=t(function(){var t=RegExp("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),o.BROKEN_CARET=t(function(){var t=RegExp("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},{"./fails":51}],113:[function(t,r,o){r.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},{}],114:[function(t,r,o){r.exports=Object.is||function(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r}},{}],115:[function(t,r,o){var n=t("../internals/global"),s=t("../internals/create-non-enumerable-property");r.exports=function(t,r){try{s(n,t,r)}catch(o){n[t]=r}return r}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(t,r,o){var n=t("../internals/get-built-in"),s=t("../internals/object-define-property"),i=t("../internals/well-known-symbol"),a=t("../internals/descriptors"),l=i("species");r.exports=function(t){var t=n(t),r=s.f;a&&t&&!t[l]&&r(t,l,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(t,r,o){var n=t("../internals/object-define-property").f,s=t("../internals/has"),i=t("../internals/well-known-symbol")("toStringTag");r.exports=function(t,r,o){t&&!s(t=o?t:t.prototype,i)&&n(t,i,{configurable:!0,value:r})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(t,r,o){var n=t("../internals/shared"),s=t("../internals/uid"),i=n("keys");r.exports=function(t){return i[t]||(i[t]=s(t))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(t,r,o){var n=t("../internals/global"),t=t("../internals/set-global"),s="__core-js_shared__",n=n[s]||t(s,{});r.exports=n},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,r,o){var n=t("../internals/is-pure"),s=t("../internals/shared-store");(r.exports=function(t,r){return s[t]||(s[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,r,o){var n=t("../internals/an-object"),s=t("../internals/a-function"),i=t("../internals/well-known-symbol")("species");r.exports=function(t,r){var t=n(t).constructor;return void 0===t||null==(t=n(t)[i])?r:s(t)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(t,r,o){var n=t("../internals/fails");r.exports=function(t){return n(function(){var r=""[t]('"');return r!==r.toLowerCase()||3<r.split('"').length})}},{"../internals/fails":51}],123:[function(t,r,o){function n(t){return function(r,o){var n,r=String(i(r)),o=s(o),a=r.length;return o<0||a<=o?t?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(a=r.charCodeAt(o+1))<56320||57343<a?t?r.charAt(o):n:t?r.slice(o,o+2):a-56320+(n-55296<<10)+65536}}var s=t("../internals/to-integer"),i=t("../internals/require-object-coercible");r.exports={codeAt:n(!1),charAt:n(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(t,r,o){t=t("../internals/engine-user-agent"),r.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],125:[function(t,r,o){function n(t){return function(r,o,n){var r=String(a(r)),u=r.length,n=void 0===n?" ":String(n),o=s(o);return o<=u||""==n?r:((u=i.call(n,l((o-=u)/n.length))).length>o&&(u=u.slice(0,o)),t?r+u:u+r)}}var s=t("../internals/to-length"),i=t("../internals/string-repeat"),a=t("../internals/require-object-coercible"),l=Math.ceil;r.exports={start:n(!1),end:n(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(t,r,o){function n(t){return t+22+75*(t<26)}var s=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",l=Math.floor,u=String.fromCharCode;r.exports=function(t){for(var r,o=[],c=t.toLowerCase().replace(i,".").split("."),d=0;d<c.length;d++)r=c[d],o.push(s.test(r)?"xn--"+function(t){var r,o=[],s=(t=function(t){for(var r=[],o=0,n=t.length;o<n;){var s,i=t.charCodeAt(o++);55296<=i&&i<=56319&&o<n?56320==(64512&(s=t.charCodeAt(o++)))?r.push(((1023&i)<<10)+(1023&s)+65536):(r.push(i),o--):r.push(i)}return r}(t)).length,i=128,c=0,d=72;for(m=0;m<t.length;m++)(r=t[m])<128&&o.push(u(r));var h=o.length,f=h;for(h&&o.push("-");f<s;){for(var p=2147483647,m=0;m<t.length;m++)i<=(r=t[m])&&r<p&&(p=r);var y=f+1;if(p-i>l((2147483647-c)/y))throw RangeError(a);for(c+=(p-i)*y,i=p,m=0;m<t.length;m++){if((r=t[m])<i&&++c>2147483647)throw RangeError(a);if(r==i){for(var g=c,v=36;;v+=36){var b=v<=d?1:d+26<=v?26:v-d;if(g<b)break;var x=g-b,j=36-b;o.push(u(n(b+x%j))),g=l(x/j)}o.push(u(n(g))),d=function(t,r,o){var n=0;for(t=o?l(t/700):t>>1,t+=l(t/r);455<t;n+=36)t=l(t/35);return l(n+36*t/(t+38))}(c,y,f==h),c=0,++f}}++c,++i}return o.join("")}(r):r);return o.join(".")}},{}],127:[function(t,r,o){var n=t("../internals/to-integer"),s=t("../internals/require-object-coercible");r.exports="".repeat||function(t){var r=String(s(this)),o="",i=n(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;0<i;(i>>>=1)&&(r+=r))1&i&&(o+=r);return o}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(t,r,o){var n=t("../internals/fails"),s=t("../internals/whitespaces");r.exports=function(t){return n(function(){return!!s[t]()||"​\x85᠎"!="​\x85᠎"[t]()||s[t].name!==t})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(t,r,o){function n(t){return function(r){return r=String(s(r)),1&t&&(r=r.replace(i,"")),r=2&t?r.replace(a,""):r}}var s=t("../internals/require-object-coercible"),t="["+t("../internals/whitespaces")+"]",i=RegExp("^"+t+t+"*"),a=RegExp(t+t+"*$");r.exports={start:n(1),end:n(2),trim:n(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(t,r,o){function n(t){return function(){S(t)}}function s(t){S(t.data)}function i(t){l.postMessage(t+"",p.protocol+"//"+p.host)}var a,l=t("../internals/global"),u=t("../internals/fails"),c=t("../internals/classof-raw"),d=t("../internals/function-bind-context"),h=t("../internals/html"),f=t("../internals/document-create-element"),t=t("../internals/engine-is-ios"),p=l.location,m=l.setImmediate,y=l.clearImmediate,g=l.process,v=l.MessageChannel,b=l.Dispatch,x=0,j={},w="onreadystatechange",S=function(t){var r;j.hasOwnProperty(t)&&(r=j[t],delete j[t],r())};m&&y||(m=function(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);return j[++x]=function(){("function"==typeof t?t:Function(t)).apply(void 0,r)},a(x),x},y=function(t){delete j[t]},"process"==c(g)?a=function(t){g.nextTick(n(t))}:b&&b.now?a=function(t){b.now(n(t))}:v&&!t?(t=(c=new v).port2,c.port1.onmessage=s,a=d(t.postMessage,t,1)):!l.addEventListener||"function"!=typeof postMessage||l.importScripts||u(i)||"file:"===p.protocol?a=w in f("script")?function(t){h.appendChild(f("script"))[w]=function(){h.removeChild(this),S(t)}}:function(t){setTimeout(n(t),0)}:(a=i,l.addEventListener("message",s,!1))),r.exports={set:m,clear:y}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(t,r,o){var n=t("../internals/classof-raw");r.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},{"../internals/classof-raw":28}],132:[function(t,r,o){var n=t("../internals/to-integer"),s=Math.max,i=Math.min;r.exports=function(t,r){return(t=n(t))<0?s(t+r,0):i(t,r)}},{"../internals/to-integer":135}],133:[function(t,r,o){var n=t("../internals/to-integer"),s=t("../internals/to-length");r.exports=function(t){if(void 0===t)return 0;var t=n(t),r=s(t);if(t!==r)throw RangeError("Wrong length or index");return r}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(t,r,o){var n=t("../internals/indexed-object"),s=t("../internals/require-object-coercible");r.exports=function(t){return n(s(t))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(t,r,o){var n=Math.ceil,s=Math.floor;r.exports=function(t){return isNaN(t=+t)?0:(0<t?s:n)(t)}},{}],136:[function(t,r,o){var n=t("../internals/to-integer"),s=Math.min;r.exports=function(t){return 0<t?s(n(t),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(t,r,o){var n=t("../internals/require-object-coercible");r.exports=function(t){return Object(n(t))}},{"../internals/require-object-coercible":113}],138:[function(t,r,o){var n=t("../internals/to-positive-integer");r.exports=function(t,r){if((t=n(t))%r)throw RangeError("Wrong offset");return t}},{"../internals/to-positive-integer":139}],139:[function(t,r,o){var n=t("../internals/to-integer");r.exports=function(t){if((t=n(t))<0)throw RangeError("The argument can't be less than 0");return t}},{"../internals/to-integer":135}],140:[function(t,r,o){var n=t("../internals/is-object");r.exports=function(t,r){var o,s;if(!n(t))return t;if(r&&"function"==typeof(o=t.toString)&&!n(s=o.call(t))||"function"==typeof(o=t.valueOf)&&!n(s=o.call(t))||!r&&"function"==typeof(o=t.toString)&&!n(s=o.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(t,r,o){var n={};n[t("../internals/well-known-symbol")("toStringTag")]="z",r.exports="[object z]"===String(n)},{"../internals/well-known-symbol":148}],142:[function(t,r,o){function n(t,r){for(var o=0,n=r.length,s=new(Z(t))(n);o<n;)s[o]=r[o++];return s}function s(t,r){U(t,r,{get:function(){return F(this)[r]}})}function i(t){return t instanceof H||"ArrayBuffer"==(t=T(t))||"SharedArrayBuffer"==t}function a(t,r){return Q(t)&&"symbol"!=typeof r&&r in t&&String(+r)==String(r)}function l(t,r){return a(t,r=w(r,!0))?g(2,t[r]):B(t,r)}function u(t,r,o){return!(a(t,r=w(r,!0))&&E(o)&&S(o,"value"))||S(o,"get")||S(o,"set")||o.configurable||S(o,"writable")&&!o.writable||S(o,"enumerable")&&!o.enumerable?U(t,r,o):(t[r]=o.value,t)}var c=t("../internals/export"),d=t("../internals/global"),h=t("../internals/descriptors"),f=t("../internals/typed-array-constructors-require-wrappers"),p=t("../internals/array-buffer-view-core"),m=t("../internals/array-buffer"),y=t("../internals/an-instance"),g=t("../internals/create-property-descriptor"),v=t("../internals/create-non-enumerable-property"),b=t("../internals/to-length"),x=t("../internals/to-index"),j=t("../internals/to-offset"),w=t("../internals/to-primitive"),S=t("../internals/has"),T=t("../internals/classof"),E=t("../internals/is-object"),k=t("../internals/object-create"),M=t("../internals/object-set-prototype-of"),C=t("../internals/object-get-own-property-names").f,A=t("../internals/typed-array-from"),O=t("../internals/array-iteration").forEach,R=t("../internals/set-species"),P=t("../internals/object-define-property"),L=t("../internals/object-get-own-property-descriptor"),I=t("../internals/internal-state"),D=t("../internals/inherit-if-required"),F=I.get,N=I.set,U=P.f,B=L.f,V=Math.round,G=d.RangeError,H=m.ArrayBuffer,z=m.DataView,q=p.NATIVE_ARRAY_BUFFER_VIEWS,W=p.TYPED_ARRAY_TAG,X=p.TypedArray,Y=p.TypedArrayPrototype,Z=p.aTypedArrayConstructor,Q=p.isTypedArray,J="BYTES_PER_ELEMENT",$="Wrong length";h?(q||(L.f=l,P.f=u,s(Y,"buffer"),s(Y,"byteOffset"),s(Y,"byteLength"),s(Y,"length")),c({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:l,defineProperty:u}),r.exports=function(t,r,o){var s=t.match(/\d+$/)[0]/8,a=t+(o?"Clamped":"")+"Array",l="get"+t,u="set"+t,h=d[a],p=h,t=p&&p.prototype,m={};q?f&&(p=r(function(t,r,o,l){return y(t,p,a),D(E(r)?i(r)?void 0!==l?new h(r,j(o,s),l):void 0!==o?new h(r,j(o,s)):new h(r):Q(r)?n(p,r):A.call(p,r):new h(x(r)),t,p)}),M&&M(p,X),O(C(h),function(t){t in p||v(p,t,h[t])}),p.prototype=t):(p=r(function(t,r,c,d){y(t,p,a);var h,f,m=0,g=0;if(E(r)){if(!i(r))return Q(r)?n(p,r):A.call(p,r);var v=r,g=j(c,s),c=r.byteLength;if(void 0===d){if(c%s||(h=c-g)<0)throw G($)}else if(c<(h=b(d)*s)+g)throw G($);f=h/s}else v=new H(h=(f=x(r))*s);for(N(t,{buffer:v,byteOffset:g,byteLength:h,length:f,view:new z(v)});m<f;)(function(t,r){U(t,r,{get:function(){var t=this;return(t=F(t)).view[l](r*s+t.byteOffset,!0)},set:function(t){var n=this;n=F(n),o&&(t=(t=V(t))<0?0:255<t?255:255&t),n.view[u](r*s+n.byteOffset,t,!0)},enumerable:!0})})(t,m++)}),M&&M(p,X),t=p.prototype=k(Y)),t.constructor!==p&&v(t,"constructor",p),W&&v(t,W,a),m[a]=p,c({global:!0,forced:p!=h,sham:!q},m),J in p||v(p,J,s),J in t||v(t,J,s),R(a)}):r.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(t,r,o){var n=t("../internals/global"),s=t("../internals/fails"),i=t("../internals/check-correctness-of-iteration"),t=t("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,l=n.Int8Array;r.exports=!t||!s(function(){l(1)})||!s(function(){new l(-1)})||!i(function(t){new l,new l(null),new l(1.5),new l(t)},!0)||s(function(){return 1!==new l(new a(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(t,r,o){var n=t("../internals/to-object"),s=t("../internals/to-length"),i=t("../internals/get-iterator-method"),a=t("../internals/is-array-iterator-method"),l=t("../internals/function-bind-context"),u=t("../internals/array-buffer-view-core").aTypedArrayConstructor;r.exports=function(t){var r,o,c,d,h,f,p=n(t),m=arguments.length,y=1<m?arguments[1]:void 0,g=void 0!==y,v=i(p);if(null!=v&&!a(v))for(f=(h=v.call(p)).next,p=[];!(d=f.call(h)).done;)p.push(d.value);for(g&&2<m&&(y=l(y,arguments[2],2)),o=s(p.length),c=new(u(this))(o),r=0;r<o;r++)c[r]=g?y(p[r],r):p[r];return c}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(t,r,o){var n=0,s=Math.random();r.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+s).toString(36)}},{}],146:[function(t,r,o){t=t("../internals/native-symbol"),r.exports=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":83}],147:[function(t,r,o){t=t("../internals/well-known-symbol"),o.f=t},{"../internals/well-known-symbol":148}],148:[function(t,r,o){var n=t("../internals/global"),s=t("../internals/shared"),i=t("../internals/has"),a=t("../internals/uid"),l=t("../internals/native-symbol"),t=t("../internals/use-symbol-as-uid"),u=s("wks"),c=n.Symbol,d=t?c:c&&c.withoutSetter||a;r.exports=function(t){return i(u,t)||(l&&i(c,t)?u[t]=c[t]:u[t]=d("Symbol."+t)),u[t]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(t,r,o){r.exports="	\n\v\f\r \xa0              　\u2028\u2029\uFEFF"},{}],150:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/global"),i=t("../internals/array-buffer"),t=t("../internals/set-species"),a="ArrayBuffer",i=i[a];n({global:!0,forced:s[a]!==i},{ArrayBuffer:i}),t(a)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/fails"),i=t("../internals/is-array"),a=t("../internals/is-object"),l=t("../internals/to-object"),u=t("../internals/to-length"),c=t("../internals/create-property"),d=t("../internals/array-species-create"),h=t("../internals/array-method-has-species-support"),f=t("../internals/well-known-symbol"),t=t("../internals/engine-v8-version"),p=f("isConcatSpreadable"),m="Maximum allowed index exceeded",f=51<=t||!s(function(){var t=[];return t[p]=!1,t.concat()[0]!==t}),t=h("concat");n({target:"Array",proto:!0,forced:!f||!t},{concat:function(t){for(var r,o,n,s,h,f=l(this),y=d(f,0),g=0,v=-1,b=arguments.length;v<b;v++)if(h=void 0,a(s=n=-1===v?f:arguments[v])&&(void 0!==(h=s[p])?h:i(s))){if(9007199254740991<g+(o=u(n.length)))throw TypeError(m);for(r=0;r<o;r++,g++)r in n&&c(y,g,n[r])}else{if(9007199254740991<=g)throw TypeError(m);c(y,g++,n)}return y.length=g,y}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-copy-within"),t=t("../internals/add-to-unscopables");n({target:"Array",proto:!0},{copyWithin:s}),t("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-iteration").every,i=t("../internals/array-method-is-strict"),t=t("../internals/array-method-uses-to-length"),i=i("every"),t=t("every");n({target:"Array",proto:!0,forced:!i||!t},{every:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-fill"),t=t("../internals/add-to-unscopables");n({target:"Array",proto:!0},{fill:s}),t("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-iteration").filter,i=t("../internals/array-method-has-species-support"),t=t("../internals/array-method-uses-to-length"),i=i("filter"),t=t("filter");n({target:"Array",proto:!0,forced:!i||!t},{filter:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(t,r,o){var n=t("../internals/export"),t=t("../internals/array-for-each");n({target:"Array",proto:!0,forced:[].forEach!=t},{forEach:t})},{"../internals/array-for-each":16,"../internals/export":50}],157:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-from");n({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(t){Array.from(t)})},{from:s})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],158:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-includes").includes,i=t("../internals/add-to-unscopables");n({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-includes").indexOf,i=t("../internals/array-method-is-strict"),t=t("../internals/array-method-uses-to-length"),a=[].indexOf,l=!!a&&1/[1].indexOf(1,-0)<0,i=i("indexOf"),t=t("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!i||!t},{indexOf:function(t){return l?a.apply(this,arguments)||0:s(this,t,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(t,r,o){var n=t("../internals/to-indexed-object"),s=t("../internals/add-to-unscopables"),i=t("../internals/iterators"),a=t("../internals/internal-state"),t=t("../internals/define-iterator"),l="Array Iterator",u=a.set,c=a.getterFor(l);r.exports=t(Array,"Array",function(t,r){u(this,{type:l,target:n(t),index:0,kind:r})},function(){var t=c(this),r=t.target,o=t.kind,n=t.index++;return!r||n>=r.length?{value:t.target=void 0,done:!0}:"keys"==o?{value:n,done:!1}:"values"==o?{value:r[n],done:!1}:{value:[n,r[n]],done:!1}},"values"),i.Arguments=i.Array,s("keys"),s("values"),s("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],161:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/indexed-object"),i=t("../internals/to-indexed-object"),t=t("../internals/array-method-is-strict"),a=[].join,s=s!=Object,t=t("join",",");n({target:"Array",proto:!0,forced:s||!t},{join:function(t){return a.call(i(this),void 0===t?",":t)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],162:[function(t,r,o){var n=t("../internals/export"),t=t("../internals/array-last-index-of");n({target:"Array",proto:!0,forced:t!==[].lastIndexOf},{lastIndexOf:t})},{"../internals/array-last-index-of":20,"../internals/export":50}],163:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-iteration").map,i=t("../internals/array-method-has-species-support"),t=t("../internals/array-method-uses-to-length"),i=i("map"),t=t("map");n({target:"Array",proto:!0,forced:!i||!t},{map:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/is-object"),i=t("../internals/is-array"),a=t("../internals/to-absolute-index"),l=t("../internals/to-length"),u=t("../internals/to-indexed-object"),c=t("../internals/create-property"),d=t("../internals/well-known-symbol"),h=t("../internals/array-method-has-species-support"),t=t("../internals/array-method-uses-to-length"),h=h("slice"),t=t("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),p=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!h||!t},{slice:function(t,r){var o,n,d,h=u(this),y=l(h.length),g=a(t,y),v=a(void 0===r?y:r,y);if(i(h)&&((o="function"==typeof(o=h.constructor)&&(o===Array||i(o.prototype))||s(o)&&null===(o=o[f])?void 0:o)===Array||void 0===o))return p.call(h,g,v);for(n=new(void 0===o?Array:o)(m(v-g,0)),d=0;g<v;g++,d++)g in h&&c(n,d,h[g]);return n.length=d,n}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],165:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/array-iteration").some,i=t("../internals/array-method-is-strict"),t=t("../internals/array-method-uses-to-length"),i=i("some"),t=t("some");n({target:"Array",proto:!0,forced:!i||!t},{some:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],166:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/to-absolute-index"),i=t("../internals/to-integer"),a=t("../internals/to-length"),l=t("../internals/to-object"),u=t("../internals/array-species-create"),c=t("../internals/create-property"),d=t("../internals/array-method-has-species-support"),t=t("../internals/array-method-uses-to-length"),d=d("splice"),t=t("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min;n({target:"Array",proto:!0,forced:!d||!t},{splice:function(t,r){var o,n,d,p,m,y,g=l(this),v=a(g.length),b=s(t,v),t=arguments.length;if(0===t?o=n=0:n=1===t?(o=0,v-b):(o=t-2,f(h(i(r),0),v-b)),9007199254740991<v+o-n)throw TypeError("Maximum allowed length exceeded");for(d=u(g,n),p=0;p<n;p++)(m=b+p)in g&&c(d,p,g[m]);if(o<(d.length=n)){for(p=b;p<v-n;p++)y=p+o,(m=p+n)in g?g[y]=g[m]:delete g[y];for(p=v;v-n+o<p;p--)delete g[p-1]}else if(n<o)for(p=v-n;b<p;p--)y=p+o-1,(m=p+n-1)in g?g[y]=g[m]:delete g[y];for(p=0;p<o;p++)g[p+b]=arguments[p+2];return g.length=v-n+o,d}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],167:[function(t,r,o){var n=t("../internals/descriptors"),t=t("../internals/object-define-property").f,s=Function.prototype,i=s.toString,a=/^\s*function ([^ (]*)/;!n||"name"in s||t(s,"name",{configurable:!0,get:function(){try{return i.call(this).match(a)[1]}catch(t){return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],168:[function(t,r,o){var n=t("../internals/collection"),t=t("../internals/collection-strong");r.exports=n("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},t)},{"../internals/collection":32,"../internals/collection-strong":30}],169:[function(t,r,o){var t=t("../internals/export"),n=Math.hypot,s=Math.abs,i=Math.sqrt;t({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(t,r){for(var o,n,a=0,l=0,u=arguments.length,c=0;l<u;)c<(o=s(arguments[l++]))?(a=a*(n=c/o)*n+1,c=o):a+=0<o?(n=o/c)*n:o;return c===1/0?1/0:c*i(a)}})},{"../internals/export":50}],170:[function(t,r,o){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],171:[function(t,r,o){function n(t){var r,o,n,s,i,a,l,u=h(t,!1);if("string"==typeof u&&2<u.length){if(43===(t=(u=v(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+u}for(i=(s=u.slice(2)).length,a=0;a<i;a++)if((l=s.charCodeAt(a))<48||n<l)return NaN;return parseInt(s,o)}}return+u}var s=t("../internals/descriptors"),i=t("../internals/global"),a=t("../internals/is-forced"),l=t("../internals/redefine"),u=t("../internals/has"),c=t("../internals/classof-raw"),d=t("../internals/inherit-if-required"),h=t("../internals/to-primitive"),f=t("../internals/fails"),p=t("../internals/object-create"),m=t("../internals/object-get-own-property-names").f,y=t("../internals/object-get-own-property-descriptor").f,g=t("../internals/object-define-property").f,v=t("../internals/string-trim").trim,b="Number",x=i[b],j=x.prototype,w=c(p(j))==b;if(a(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var S,T=function(t){var t=arguments.length<1?0:t,r=this;return r instanceof T&&(w?f(function(){j.valueOf.call(r)}):c(r)!=b)?d(new x(n(t)),r,T):n(t)},E=s?m(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;E.length>k;k++)u(x,S=E[k])&&!u(T,S)&&g(T,S,y(x,S));(T.prototype=j).constructor=T,l(i,b,T)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],172:[function(t,r,o){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],173:[function(t,r,o){function n(t,r,o){return 0===r?o:r%2==1?n(t,r-1,o*t):n(t*t,r/2,o)}var s=t("../internals/export"),i=t("../internals/to-integer"),a=t("../internals/this-number-value"),l=t("../internals/string-repeat"),t=t("../internals/fails"),u=1..toFixed,c=Math.floor;s({target:"Number",proto:!0,forced:!t(function(){u.call({})})},{toFixed:function(t){function r(t,r){for(var o=-1,n=r;++o<6;)n+=t*f[o],f[o]=n%1e7,n=c(n/1e7)}function o(t){for(var r=6,o=0;0<=--r;)o+=f[r],f[r]=c(o/t),o=o%t*1e7}function s(){for(var t,r=6,o="";0<=--r;)""===o&&0!==r&&0===f[r]||(t=String(f[r]),o=""===o?t:o+l.call("0",7-t.length)+t);return o}var u,d,h=a(this),t=i(t),f=[0,0,0,0,0,0],p="",m="0";if(t<0||20<t)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||1e21<=h)return String(h);if(h<0&&(p="-",h=-h),1e-21<h){if(h=((u=function(t){for(var r=0,o=t;4096<=o;)r+=12,o/=4096;for(;2<=o;)r+=1,o/=2;return r}(h*n(2,69,1))-69)<0?h*n(2,-u,1):h/n(2,u,1))*4503599627370496,0<(u=52-u)){for(r(0,h),d=t;7<=d;)r(1e7,0),d-=7;for(r(n(10,d,1),0),d=u-1;23<=d;)o(8388608),d-=23;o(1<<d),r(1,1),o(2),m=s()}else r(0,h),r(1<<-u,0),m=s()+l.call("0",t)}return 0<t?p+((h=m.length)<=t?"0."+l.call("0",t-h)+m:m.slice(0,h-t)+"."+m.slice(h-t)):p+m}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],174:[function(t,r,o){var n=t("../internals/export"),t=t("../internals/object-assign");n({target:"Object",stat:!0,forced:Object.assign!==t},{assign:t})},{"../internals/export":50,"../internals/object-assign":89}],175:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/iterate"),i=t("../internals/create-property");n({target:"Object",stat:!0},{fromEntries:function(t){var r={};return s(t,function(t,o){i(r,t,o)},void 0,!0),r}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],176:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/fails"),i=t("../internals/to-indexed-object"),a=t("../internals/object-get-own-property-descriptor").f,t=t("../internals/descriptors"),s=s(function(){a(1)});n({target:"Object",stat:!0,forced:!t||s,sham:!t},{getOwnPropertyDescriptor:function(t,r){return a(i(t),r)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],177:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/fails"),t=t("../internals/object-get-own-property-names-external").f;n({target:"Object",stat:!0,forced:s(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:t})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],178:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/fails"),i=t("../internals/to-object"),a=t("../internals/object-get-prototype-of"),t=t("../internals/correct-prototype-getter");n({target:"Object",stat:!0,forced:s(function(){a(1)}),sham:!t},{getPrototypeOf:function(t){return a(i(t))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],179:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/to-object"),i=t("../internals/object-keys");n({target:"Object",stat:!0,forced:t("../internals/fails")(function(){i(1)})},{keys:function(t){return i(s(t))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],180:[function(t,r,o){var n=t("../internals/to-string-tag-support"),s=t("../internals/redefine"),t=t("../internals/object-to-string");n||s(Object.prototype,"toString",t,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],181:[function(t,r,o){var n,s,i,a,l=t("../internals/export"),u=t("../internals/is-pure"),c=t("../internals/global"),d=t("../internals/get-built-in"),h=t("../internals/native-promise-constructor"),f=t("../internals/redefine"),p=t("../internals/redefine-all"),m=t("../internals/set-to-string-tag"),y=t("../internals/set-species"),g=t("../internals/is-object"),v=t("../internals/a-function"),b=t("../internals/an-instance"),x=t("../internals/classof-raw"),j=t("../internals/inspect-source"),w=t("../internals/iterate"),S=t("../internals/check-correctness-of-iteration"),T=t("../internals/species-constructor"),E=t("../internals/task").set,k=t("../internals/microtask"),M=t("../internals/promise-resolve"),C=t("../internals/host-report-errors"),A=t("../internals/new-promise-capability"),O=t("../internals/perform"),R=t("../internals/internal-state"),P=t("../internals/is-forced"),L=t("../internals/well-known-symbol"),I=t("../internals/engine-v8-version"),D=L("species"),F="Promise",N=R.get,U=R.set,B=R.getterFor(F),V=h,G=c.TypeError,H=c.document,z=c.process,q=d("fetch"),W=A.f,X=W,Y="process"==x(z),Z=!!(H&&H.createEvent&&c.dispatchEvent),Q="unhandledrejection",t=P(F,function(){var t,r;return j(V)===String(V)&&(66===I||!Y&&"function"!=typeof PromiseRejectionEvent)||!(!u||V.prototype.finally)||!(51<=I&&/native code/.test(V))&&(r=function(t){t(function(){},function(){})},((t=V.resolve(1)).constructor={})[D]=r,!(t.then(function(){}) instanceof r))}),L=t||!S(function(t){V.all(t).catch(function(){})}),J=function(t){var r;return!(!g(t)||"function"!=typeof(r=t.then))&&r},$=function(t,r,o){var n;r.notified||(r.notified=!0,n=r.reactions,k(function(){for(var s=r.value,i=1==r.state,a=0;n.length>a;){var l,u,d,h=n[a++],f=i?h.ok:h.fail,p=h.resolve,m=h.reject,y=h.domain;try{f?(i||(2===r.rejection&&function(t,r){E.call(c,function(){Y?z.emit("rejectionHandled",t):K("rejectionhandled",t,r.value)})}(t,r),r.rejection=1),!0===f?l=s:(y&&y.enter(),l=f(s),y&&(y.exit(),d=!0)),l===h.promise?m(G("Promise-chain cycle")):(u=J(l))?u.call(l,p,m):p(l)):m(s)}catch(t){y&&!d&&y.exit(),m(t)}}r.reactions=[],r.notified=!1,o&&!r.rejection&&E.call(c,function(){var o=r.value,n=ee(r);if(n&&(n=O(function(){Y?z.emit("unhandledRejection",o,t):K(Q,t,o)}),r.rejection=Y||ee(r)?2:1,n.error))throw n.value})}))},K=function(t,r,o){var n;Z?((n=H.createEvent("Event")).promise=r,n.reason=o,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:r,reason:o},(r=c["on"+t])?r(n):t===Q&&C("Unhandled promise rejection",o)},ee=function(t){return 1!==t.rejection&&!t.parent},et=function(t,r,o,n){return function(s){t(r,o,s,n)}},er=function(t,r,o,n){r.done||(r.done=!0,(r=n||r).value=o,r.state=2,$(t,r,!0))},eo=function(t,r,o,n){if(!r.done){r.done=!0,n&&(r=n);try{if(t===o)throw G("Promise can't be resolved itself");var s=J(o);s?k(function(){var n={done:!1};try{s.call(o,et(eo,t,n,r),et(er,t,n,r))}catch(o){er(t,n,o,r)}}):(r.value=o,r.state=1,$(t,r,!1))}catch(o){er(t,{done:!1},o,r)}}};t&&(V=function(t){b(this,V,F),v(t),n.call(this);var r=N(this);try{t(et(eo,this,r),et(er,this,r))}catch(t){er(this,r,t)}},(n=function(t){U(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(V.prototype,{then:function(t,r){var o=B(this),n=W(T(this,V));return n.ok="function"!=typeof t||t,n.fail="function"==typeof r&&r,n.domain=Y?z.domain:void 0,o.parent=!0,o.reactions.push(n),0!=o.state&&$(this,o,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new n,r=N(t);this.promise=t,this.resolve=et(eo,t,r),this.reject=et(er,t,r)},A.f=W=function(t){return t===V||t===i?new s:X(t)},u||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",function(t,r){var o=this;return new V(function(t,r){a.call(o,t,r)}).then(t,r)},{unsafe:!0}),"function"==typeof q&&l({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return M(V,q.apply(c,arguments))}}))),l({global:!0,wrap:!0,forced:t},{Promise:V}),m(V,F,!1,!0),y(F),i=d(F),l({target:F,stat:!0,forced:t},{reject:function(t){var r=W(this);return r.reject.call(void 0,t),r.promise}}),l({target:F,stat:!0,forced:u||t},{resolve:function(t){return M(u&&this===i?V:this,t)}}),l({target:F,stat:!0,forced:L},{all:function(t){var r=this,o=W(r),n=o.resolve,s=o.reject,i=O(function(){var o=v(r.resolve),i=[],a=0,l=1;w(t,function(t){var u=a++,c=!1;i.push(void 0),l++,o.call(r,t).then(function(t){c||(c=!0,i[u]=t,--l||n(i))},s)}),--l||n(i)});return i.error&&s(i.value),o.promise},race:function(t){var r=this,o=W(r),n=o.reject,s=O(function(){var s=v(r.resolve);w(t,function(t){s.call(r,t).then(o.resolve,n)})});return s.error&&n(s.value),o.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],182:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/get-built-in"),i=t("../internals/a-function"),a=t("../internals/an-object"),l=t("../internals/is-object"),u=t("../internals/object-create"),c=t("../internals/function-bind"),t=t("../internals/fails"),d=s("Reflect","construct"),h=t(function(){function t(){}return!(d(function(){},[],t) instanceof t)}),f=!t(function(){d(function(){})}),s=h||f;n({target:"Reflect",stat:!0,forced:s,sham:s},{construct:function(t,r){i(t),a(r);var o=arguments.length<3?t:i(arguments[2]);if(f&&!h)return d(t,r,o);if(t==o){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var n=[null];return n.push.apply(n,r),new(c.apply(t,n))}return o=u(l(n=o.prototype)?n:Object.prototype),l(n=Function.apply.call(t,o,r))?n:o}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],183:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/is-object"),i=t("../internals/an-object"),a=t("../internals/has"),l=t("../internals/object-get-own-property-descriptor"),u=t("../internals/object-get-prototype-of");n({target:"Reflect",stat:!0},{get:function t(r,o){var n,c=arguments.length<3?r:arguments[2];return i(r)===c?r[o]:(n=l.f(r,o))?a(n,"value")?n.value:void 0===n.get?void 0:n.get.call(c):s(n=u(r))?t(n,o,c):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],184:[function(t,r,o){var n=t("../internals/descriptors"),s=t("../internals/global"),i=t("../internals/is-forced"),a=t("../internals/inherit-if-required"),l=t("../internals/object-define-property").f,u=t("../internals/object-get-own-property-names").f,c=t("../internals/is-regexp"),d=t("../internals/regexp-flags"),h=t("../internals/regexp-sticky-helpers"),f=t("../internals/redefine"),p=t("../internals/fails"),m=t("../internals/internal-state").set,y=t("../internals/set-species"),g=t("../internals/well-known-symbol")("match"),v=s.RegExp,b=v.prototype,x=/a/g,j=/a/g,w=new v(x)!==x,S=h.UNSUPPORTED_Y;if(n&&i("RegExp",!w||S||p(function(){return j[g]=!1,v(x)!=x||v(j)==j||"/a/i"!=v(x,"i")}))){for(var T=function(t,r){var o,n=this instanceof T,s=c(t),i=void 0===r;return!n&&s&&t.constructor===T&&i?t:(w?s&&!i&&(t=t.source):t instanceof T&&(i&&(r=d.call(t)),t=t.source),S&&(o=!!r&&-1<r.indexOf("y"))&&(r=r.replace(/y/g,"")),s=a(w?new v(t,r):v(t,r),n?this:b,T),S&&o&&m(s,{sticky:o}),s)},E=u(v),k=0;E.length>k;)!function(t){t in T||l(T,t,{configurable:!0,get:function(){return v[t]},set:function(r){v[t]=r}})}(E[k++]);(b.constructor=T).prototype=b,f(s,"RegExp",T)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],185:[function(t,r,o){var n=t("../internals/export"),t=t("../internals/regexp-exec");n({target:"RegExp",proto:!0,forced:/./.exec!==t},{exec:t})},{"../internals/export":50,"../internals/regexp-exec":110}],186:[function(t,r,o){var n=t("../internals/redefine"),s=t("../internals/an-object"),i=t("../internals/fails"),a=t("../internals/regexp-flags"),t="toString",l=RegExp.prototype,u=l[t],i=i(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),c=u.name!=t;(i||c)&&n(RegExp.prototype,t,function(){var t=s(this),r=String(t.source),o=t.flags;return"/"+r+"/"+String(void 0===o&&t instanceof RegExp&&!("flags"in l)?a.call(t):o)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],187:[function(t,r,o){var n=t("../internals/collection"),t=t("../internals/collection-strong");r.exports=n("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},t)},{"../internals/collection":32,"../internals/collection-strong":30}],188:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/object-get-own-property-descriptor").f,i=t("../internals/to-length"),a=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible"),u=t("../internals/correct-is-regexp-logic"),t=t("../internals/is-pure"),c="".endsWith,d=Math.min,u=u("endsWith");n({target:"String",proto:!0,forced:!!(t||u||!(n=s(String.prototype,"endsWith"))||n.writable)&&!u},{endsWith:function(t){var r=String(l(this)),o=(a(t),1<arguments.length?arguments[1]:void 0),n=i(r.length),o=void 0===o?n:d(i(o),n),n=String(t);return c?c.call(r,n,o):r.slice(o-n.length,o)===n}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],189:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/not-a-regexp"),i=t("../internals/require-object-coercible");n({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(t){return!!~String(i(this)).indexOf(s(t),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],190:[function(t,r,o){var n=t("../internals/string-multibyte").charAt,s=t("../internals/internal-state"),t=t("../internals/define-iterator"),i="String Iterator",a=s.set,l=s.getterFor(i);t(String,"String",function(t){a(this,{type:i,string:String(t),index:0})},function(){var t=l(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(r=n(r,o),t.index+=r.length,{value:r,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],191:[function(t,r,o){var n=t("../internals/fix-regexp-well-known-symbol-logic"),s=t("../internals/an-object"),i=t("../internals/to-length"),a=t("../internals/require-object-coercible"),l=t("../internals/advance-string-index"),u=t("../internals/regexp-exec-abstract");n("match",1,function(t,r,o){return[function(r){var o=a(this),n=null==r?void 0:r[t];return void 0!==n?n.call(r,o):new RegExp(r)[t](String(o))},function(t){var n=o(r,t,this);if(n.done)return n.value;var a=s(t),c=String(this);if(!a.global)return u(a,c);for(var d=a.unicode,h=[],f=a.lastIndex=0;null!==(p=u(a,c));){var p=String(p[0]);""===(h[f]=p)&&(a.lastIndex=l(c,i(a.lastIndex),d)),f++}return 0===f?null:h}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],192:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/string-pad").start;n({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],193:[function(t,r,o){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],194:[function(t,r,o){var n=t("../internals/fix-regexp-well-known-symbol-logic"),s=t("../internals/an-object"),i=t("../internals/to-object"),a=t("../internals/to-length"),l=t("../internals/to-integer"),u=t("../internals/require-object-coercible"),c=t("../internals/advance-string-index"),d=t("../internals/regexp-exec-abstract"),h=Math.max,f=Math.min,p=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;n("replace",2,function(t,r,o,n){var g=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(o,n){var s=u(this),i=null==o?void 0:o[t];return void 0!==i?i.call(o,s,n):r.call(String(s),o,n)},function(t,n){if(!g&&v||"string"==typeof n&&-1===n.indexOf(b)){var u=o(r,t,this,n);if(u.done)return u.value}for(var x,j=s(t),w=String(this),S="function"==typeof n,T=(S||(n=String(n)),j.global),E=(T&&(x=j.unicode,j.lastIndex=0),[]);null!==(O=d(j,w))&&(E.push(O),T);)""===String(O[0])&&(j.lastIndex=c(w,a(j.lastIndex),x));for(var k,M="",C=0,A=0;A<E.length;A++){for(var O=E[A],R=String(O[0]),P=h(f(l(O.index),w.length),0),L=[],I=1;I<O.length;I++)L.push(void 0===(k=O[I])?k:String(k));var D=O.groups,F=S?(F=[R].concat(L,P,w),void 0!==D&&F.push(D),String(n.apply(void 0,F))):function(t,o,n,s,a,l){var u=n+t.length,c=s.length,d=y;return void 0!==a&&(a=i(a),d=m),r.call(l,d,function(r,i){var l;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return o.slice(0,n);case"'":return o.slice(u);case"<":l=a[i.slice(1,-1)];break;default:var d,h=+i;if(0==h)return r;if(c<h)return 0!==(d=p(h/10))&&d<=c?void 0===s[d-1]?i.charAt(1):s[d-1]+i.charAt(1):r;l=s[h-1]}return void 0===l?"":l})}(R,w,P,L,D,n);C<=P&&(M+=w.slice(C,P)+F,C=P+R.length)}return M+w.slice(C)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],195:[function(t,r,o){var n=t("../internals/fix-regexp-well-known-symbol-logic"),s=t("../internals/an-object"),i=t("../internals/require-object-coercible"),a=t("../internals/same-value"),l=t("../internals/regexp-exec-abstract");n("search",1,function(t,r,o){return[function(r){var o=i(this),n=null==r?void 0:r[t];return void 0!==n?n.call(r,o):new RegExp(r)[t](String(o))},function(t){var n,i=o(r,t,this);return i.done?i.value:(i=s(t),t=String(this),a(n=i.lastIndex,0)||(i.lastIndex=0),t=l(i,t),a(i.lastIndex,n)||(i.lastIndex=n),null===t?-1:t.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],196:[function(t,r,o){var n=t("../internals/fix-regexp-well-known-symbol-logic"),s=t("../internals/is-regexp"),i=t("../internals/an-object"),a=t("../internals/require-object-coercible"),l=t("../internals/species-constructor"),u=t("../internals/advance-string-index"),c=t("../internals/to-length"),d=t("../internals/regexp-exec-abstract"),h=t("../internals/regexp-exec"),t=t("../internals/fails"),f=[].push,p=Math.min,m=!t(function(){return!RegExp(4294967295,"y")});n("split",2,function(t,r,o){var n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,o){var n=String(a(this)),i=void 0===o?4294967295:o>>>0;if(0==i)return[];if(void 0===t)return[n];if(!s(t))return r.call(n,t,i);for(var l,u,c,d=[],o=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=RegExp(t.source,o+"g");(l=h.call(m,n))&&!(p<(u=m.lastIndex)&&(d.push(n.slice(p,l.index)),1<l.length&&l.index<n.length&&f.apply(d,l.slice(1)),c=l[0].length,p=u,d.length>=i));)m.lastIndex===l.index&&m.lastIndex++;return p===n.length?!c&&m.test("")||d.push(""):d.push(n.slice(p)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(t,o){return void 0===t&&0===o?[]:r.call(this,t,o)}:r;return[function(r,o){var s=a(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,s,o):n.call(String(s),r,o)},function(t,s){var a=o(n,t,this,s,n!==r);if(a.done)return a.value;var a=i(t),h=String(this),t=l(a,RegExp),f=a.unicode,y=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(m?"y":"g"),g=new t(m?a:"^(?:"+a.source+")",y),v=void 0===s?4294967295:s>>>0;if(0==v)return[];if(0===h.length)return null===d(g,h)?[h]:[];for(var b=0,x=0,j=[];x<h.length;){g.lastIndex=m?x:0;var w,S=d(g,m?h:h.slice(x));if(null===S||(w=p(c(g.lastIndex+(m?0:x)),h.length))===b)x=u(h,x,f);else{if(j.push(h.slice(b,x)),j.length===v)return j;for(var T=1;T<=S.length-1;T++)if(j.push(S[T]),j.length===v)return j;x=b=w}}return j.push(h.slice(b)),j}]},!m)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],197:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/object-get-own-property-descriptor").f,i=t("../internals/to-length"),a=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible"),u=t("../internals/correct-is-regexp-logic"),t=t("../internals/is-pure"),c="".startsWith,d=Math.min,u=u("startsWith");n({target:"String",proto:!0,forced:!!(t||u||!(n=s(String.prototype,"startsWith"))||n.writable)&&!u},{startsWith:function(t){var r=String(l(this)),o=(a(t),i(d(1<arguments.length?arguments[1]:void 0,r.length))),t=String(t);return c?c.call(r,t,o):r.slice(o,o+t.length)===t}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],198:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/create-html");n({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return s(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],199:[function(t,r,o){var n=t("../internals/export"),s=t("../internals/string-trim").trim;n({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return s(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],200:[function(t,r,o){var n,s,i,a,l,u=t("../internals/export"),c=t("../internals/descriptors"),d=t("../internals/global"),h=t("../internals/has"),f=t("../internals/is-object"),p=t("../internals/object-define-property").f,t=t("../internals/copy-constructor-properties"),m=d.Symbol;!c||"function"!=typeof m||"description"in m.prototype&&void 0===m().description||(n={},t(s=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),r=this instanceof s?new m(t):void 0===t?m():m(t);return""===t&&(n[r]=!0),r},m),(d=s.prototype=m.prototype).constructor=s,i=d.toString,a="Symbol(test)"==String(m("test")),l=/^Symbol\((.*)\)[^)]+$/,p(d,"description",{configurable:!0,get:function(){var t=f(this)?this.valueOf():this,r=i.call(t);return h(n,t)?"":""===(t=a?r.slice(7,-1):r.replace(l,"$1"))?void 0:t}}),u({global:!0,forced:!0},{Symbol:s}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],201:[function(t,r,o){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],202:[function(t,r,o){function n(t,r){var o=eo[t]=T(J[X]);return Y(o,{type:W,tag:t,description:r}),h||(o.description=r),o}function s(t,r){b(t);var o=j(r),r=E(o).concat(eh(o));return z(r,function(r){h&&!ed.call(o,r)||ec(t,r,o[r])}),t}function i(t,r){var o,t=j(t),r=w(r,!0);if(t!==Q||!y(eo,r)||y(en,r))return!(!(o=K(t,r))||!y(eo,r)||y(t,q)&&t[q][r])&&(o.enumerable=!0),o}function a(t){var t=et(j(t)),r=[];return z(t,function(t){y(eo,t)||y(F,t)||r.push(t)}),r}var l=t("../internals/export"),u=t("../internals/global"),c=t("../internals/get-built-in"),d=t("../internals/is-pure"),h=t("../internals/descriptors"),f=t("../internals/native-symbol"),p=t("../internals/use-symbol-as-uid"),m=t("../internals/fails"),y=t("../internals/has"),g=t("../internals/is-array"),v=t("../internals/is-object"),b=t("../internals/an-object"),x=t("../internals/to-object"),j=t("../internals/to-indexed-object"),w=t("../internals/to-primitive"),S=t("../internals/create-property-descriptor"),T=t("../internals/object-create"),E=t("../internals/object-keys"),k=t("../internals/object-get-own-property-names"),M=t("../internals/object-get-own-property-names-external"),C=t("../internals/object-get-own-property-symbols"),A=t("../internals/object-get-own-property-descriptor"),O=t("../internals/object-define-property"),R=t("../internals/object-property-is-enumerable"),P=t("../internals/create-non-enumerable-property"),L=t("../internals/redefine"),I=t("../internals/shared"),D=t("../internals/shared-key"),F=t("../internals/hidden-keys"),N=t("../internals/uid"),U=t("../internals/well-known-symbol"),B=t("../internals/well-known-symbol-wrapped"),V=t("../internals/define-well-known-symbol"),G=t("../internals/set-to-string-tag"),H=t("../internals/internal-state"),z=t("../internals/array-iteration").forEach,q=D("hidden"),W="Symbol",X="prototype",t=U("toPrimitive"),Y=H.set,Z=H.getterFor(W),Q=Object[X],J=u.Symbol,$=c("JSON","stringify"),K=A.f,ee=O.f,et=M.f,er=R.f,eo=I("symbols"),en=I("op-symbols"),es=I("string-to-symbol-registry"),ei=I("symbol-to-string-registry"),D=I("wks"),H=u.QObject,ea=!H||!H[X]||!H[X].findChild,el=h&&m(function(){return 7!=T(ee({},"a",{get:function(){return ee(this,"a",{value:7}).a}})).a})?function(t,r,o){var n=K(Q,r);n&&delete Q[r],ee(t,r,o),n&&t!==Q&&ee(Q,r,n)}:ee,eu=p?function(t){return"symbol"==typeof t}:function(t){return Object(t) instanceof J},ec=function(t,r,o){return t===Q&&ec(en,r,o),b(t),r=w(r,!0),b(o),(y(eo,r)?(o.enumerable?(y(t,q)&&t[q][r]&&(t[q][r]=!1),o=T(o,{enumerable:S(0,!1)})):(y(t,q)||ee(t,q,S(1,{})),t[q][r]=!0),el):ee)(t,r,o)},ed=function(t){var t=w(t,!0),r=er.call(this,t);return!(this===Q&&y(eo,t)&&!y(en,t))&&(!(r||!y(this,t)||!y(eo,t)||y(this,q)&&this[q][t])||r)},eh=function(t){var r=t===Q,t=et(r?en:j(t)),o=[];return z(t,function(t){y(eo,t)&&(!r||y(Q,t))&&o.push(eo[t])}),o};f||(L((J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,r=N(t),o=function(t){this===Q&&o.call(en,t),y(this,q)&&y(this[q],r)&&(this[q][r]=!1),el(this,r,S(1,t))};return h&&ea&&el(Q,r,{configurable:!0,set:o}),n(r,t)})[X],"toString",function(){return Z(this).tag}),L(J,"withoutSetter",function(t){return n(N(t),t)}),R.f=ed,O.f=ec,A.f=i,k.f=M.f=a,C.f=eh,B.f=function(t){return n(U(t),t)},h&&(ee(J[X],"description",{configurable:!0,get:function(){return Z(this).description}}),d||L(Q,"propertyIsEnumerable",ed,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:J}),z(E(D),function(t){V(t)}),l({target:W,stat:!0,forced:!f},{for:function(t){var r,t=String(t);return y(es,t)?es[t]:(r=J(t),es[t]=r,ei[r]=t,r)},keyFor:function(t){if(!eu(t))throw TypeError(t+" is not a symbol");if(y(ei,t))return ei[t]},useSetter:function(){ea=!0},useSimple:function(){ea=!1}}),l({target:"Object",stat:!0,forced:!f,sham:!h},{create:function(t,r){return void 0===r?T(t):s(T(t),r)},defineProperty:ec,defineProperties:s,getOwnPropertyDescriptor:i}),l({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:a,getOwnPropertySymbols:eh}),l({target:"Object",stat:!0,forced:m(function(){C.f(1)})},{getOwnPropertySymbols:function(t){return C.f(x(t))}}),$&&l({target:"JSON",stat:!0,forced:!f||m(function(){var t=J();return"[null]"!=$([t])||"{}"!=$({a:t})||"{}"!=$(Object(t))})},{stringify:function(t,r,o){for(var n,s=[t],i=1;i<arguments.length;)s.push(arguments[i++]);if((v(n=r)||void 0!==t)&&!eu(t))return g(r)||(r=function(t,r){if("function"==typeof n&&(r=n.call(this,t,r)),!eu(r))return r}),s[1]=r,$.apply(null,s)}}),J[X][t]||P(J[X],t,J[X].valueOf),G(J,W),F[q]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],203:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-copy-within"),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",function(t,r){return s.call(i(this),t,r,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],204:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").every,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",function(t){return s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],205:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-fill"),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",function(t){return s.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],206:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").filter,i=t("../internals/species-constructor"),a=n.aTypedArray,l=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("filter",function(t){for(var r=s(a(this),t,1<arguments.length?arguments[1]:void 0),t=i(this,this.constructor),o=0,n=r.length,u=new(l(t))(n);o<n;)u[o]=r[o++];return u})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],207:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").findIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",function(t){return s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],208:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").find,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",function(t){return s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],209:[function(t,r,o){t("../internals/typed-array-constructor")("Float32",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],210:[function(t,r,o){t("../internals/typed-array-constructor")("Float64",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],211:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").forEach,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",function(t){s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-includes").includes,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",function(t){return s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],213:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-includes").indexOf,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",function(t){return s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],214:[function(t,r,o){t("../internals/typed-array-constructor")("Int16",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],215:[function(t,r,o){t("../internals/typed-array-constructor")("Int32",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],216:[function(t,r,o){function n(){return l.call(d(this))}var s=t("../internals/global"),i=t("../internals/array-buffer-view-core"),a=t("../modules/es.array.iterator"),t=t("../internals/well-known-symbol")("iterator"),s=s.Uint8Array,l=a.values,u=a.keys,c=a.entries,d=i.aTypedArray,a=i.exportTypedArrayMethod,i=s&&s.prototype[t],s=!!i&&("values"==i.name||null==i.name);a("entries",function(){return c.call(d(this))}),a("keys",function(){return u.call(d(this))}),a("values",n,!s),a(t,n,!s)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],217:[function(t,r,o){var t=t("../internals/array-buffer-view-core"),n=t.aTypedArray,t=t.exportTypedArrayMethod,s=[].join;t("join",function(t){return s.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12}],218:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-last-index-of"),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",function(t){return s.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],219:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").map,i=t("../internals/species-constructor"),a=n.aTypedArray,l=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",function(t){return s(a(this),t,1<arguments.length?arguments[1]:void 0,function(t,r){return new(l(i(t,t.constructor)))(r)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],220:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-reduce").right,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",function(t){return s(i(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],221:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-reduce").left,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(t){return s(i(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],222:[function(t,r,o){var t=t("../internals/array-buffer-view-core"),n=t.aTypedArray,t=t.exportTypedArrayMethod,s=Math.floor;t("reverse",function(){for(var t,r=n(this).length,o=s(r/2),i=0;i<o;)t=this[i],this[i++]=this[--r],this[r]=t;return this})},{"../internals/array-buffer-view-core":12}],223:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/to-length"),i=t("../internals/to-offset"),a=t("../internals/to-object"),t=t("../internals/fails"),l=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",function(t){l(this);var r=i(1<arguments.length?arguments[1]:void 0,1),o=this.length,n=a(t),u=s(n.length),c=0;if(o<u+r)throw RangeError("Wrong length");for(;c<u;)this[r+c]=n[c++]},t(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],224:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/species-constructor"),t=t("../internals/fails"),i=n.aTypedArray,a=n.aTypedArrayConstructor,n=n.exportTypedArrayMethod,l=[].slice;n("slice",function(t,r){for(var o=l.call(i(this),t,r),t=s(this,this.constructor),n=0,u=o.length,c=new(a(t))(u);n<u;)c[n]=o[n++];return c},t(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],225:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/array-iteration").some,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",function(t){return s(i(this),t,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],226:[function(t,r,o){var t=t("../internals/array-buffer-view-core"),n=t.aTypedArray,t=t.exportTypedArrayMethod,s=[].sort;t("sort",function(t){return s.call(n(this),t)})},{"../internals/array-buffer-view-core":12}],227:[function(t,r,o){var n=t("../internals/array-buffer-view-core"),s=t("../internals/to-length"),i=t("../internals/to-absolute-index"),a=t("../internals/species-constructor"),l=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",function(t,r){var o=l(this),n=o.length,t=i(t,n);return new(a(o,o.constructor))(o.buffer,o.byteOffset+t*o.BYTES_PER_ELEMENT,s((void 0===r?n:i(r,n))-t))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],228:[function(t,r,o){var n=t("../internals/global"),s=t("../internals/array-buffer-view-core"),t=t("../internals/fails"),i=n.Int8Array,a=s.aTypedArray,n=s.exportTypedArrayMethod,l=[].toLocaleString,u=[].slice,c=!!i&&t(function(){l.call(new i(1))});n("toLocaleString",function(){return l.apply(c?u.call(a(this)):a(this),arguments)},t(function(){return[1,2].toLocaleString()!=new i([1,2]).toLocaleString()})||!t(function(){i.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],229:[function(t,r,o){var n=t("../internals/array-buffer-view-core").exportTypedArrayMethod,s=t("../internals/fails"),t=t("../internals/global").Uint8Array,t=t&&t.prototype||{},i=[].toString,a=[].join,s=(s(function(){i.call({})})&&(i=function(){return a.call(this)}),t.toString!=i);n("toString",i,s)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],230:[function(t,r,o){t("../internals/typed-array-constructor")("Uint16",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],231:[function(t,r,o){t("../internals/typed-array-constructor")("Uint32",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],232:[function(t,r,o){t("../internals/typed-array-constructor")("Uint8",function(t){return function(r,o,n){return t(this,r,o,n)}})},{"../internals/typed-array-constructor":142}],233:[function(t,r,o){t("../internals/typed-array-constructor")("Uint8",function(t){return function(r,o,n){return t(this,r,o,n)}},!0)},{"../internals/typed-array-constructor":142}],234:[function(t,r,o){function n(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}var s,i,a,l,u,c=t("../internals/global"),d=t("../internals/redefine-all"),h=t("../internals/internal-metadata"),f=t("../internals/collection"),p=t("../internals/collection-weak"),m=t("../internals/is-object"),y=t("../internals/internal-state").enforce,t=t("../internals/native-weak-map"),c=!c.ActiveXObject&&"ActiveXObject"in c,g=Object.isExtensible,r=r.exports=f("WeakMap",n,p);t&&c&&(s=p.getConstructor(n,"WeakMap",!0),h.REQUIRED=!0,i=(f=r.prototype).delete,a=f.has,l=f.get,u=f.set,d(f,{delete:function(t){var r;return m(t)&&!g(t)?((r=y(this)).frozen||(r.frozen=new s),i.call(this,t)||r.frozen.delete(t)):i.call(this,t)},has:function(t){var r;return m(t)&&!g(t)?((r=y(this)).frozen||(r.frozen=new s),a.call(this,t)||r.frozen.has(t)):a.call(this,t)},get:function(t){var r;return!m(t)||g(t)||((r=y(this)).frozen||(r.frozen=new s),a.call(this,t))?l.call(this,t):r.frozen.get(t)},set:function(t,r){var o;return!m(t)||g(t)||((o=y(this)).frozen||(o.frozen=new s),a.call(this,t))?u.call(this,t,r):o.frozen.set(t,r),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],235:[function(t,r,o){var n,s=t("../internals/global"),i=t("../internals/dom-iterables"),a=t("../internals/array-for-each"),l=t("../internals/create-non-enumerable-property");for(n in i){var u=s[n],u=u&&u.prototype;if(u&&u.forEach!==a)try{l(u,"forEach",a)}catch(t){u.forEach=a}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],236:[function(t,r,o){var n,s=t("../internals/global"),i=t("../internals/dom-iterables"),a=t("../modules/es.array.iterator"),l=t("../internals/create-non-enumerable-property"),t=t("../internals/well-known-symbol"),u=t("iterator"),c=t("toStringTag"),d=a.values;for(n in i){var h=s[n],f=h&&h.prototype;if(f){if(f[u]!==d)try{l(f,u,d)}catch(t){f[u]=d}if(f[c]||l(f,c,n),i[n]){for(var p in a)if(f[p]!==a[p])try{l(f,p,a[p])}catch(t){f[p]=a[p]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],237:[function(t,r,o){function n(t){try{return decodeURIComponent(t)}catch(r){return t}}function s(t){return B[t]}function i(t){return encodeURIComponent(t).replace(U,s)}function a(t){this.entries.length=0,V(this.entries,t)}function l(t,r){if(t<r)throw TypeError("Not enough arguments")}function u(){v(this,u,O);var t,r,o,n,s,i,l,c,d=0<arguments.length?arguments[0]:void 0,h=[];if(P(this,{type:O,entries:h,updateURL:function(){},updateSearchParams:a}),void 0!==d){if(S(d)){if("function"==typeof(t=M(d)))for(o=(r=t.call(d)).next;!(n=o.call(r)).done;){if((i=(s=(n=k(w(n.value))).next).call(n)).done||(l=s.call(n)).done||!s.call(n).done)throw TypeError("Expected sequence with length 2");h.push({key:i.value+"",value:l.value+""})}else for(c in d)b(d,c)&&h.push({key:c,value:d[c]+""})}else V(h,"string"==typeof d?"?"===d.charAt(0)?d.slice(1):d:d+"")}}t("../modules/es.array.iterator");var c=t("../internals/export"),d=t("../internals/get-built-in"),h=t("../internals/native-url"),f=t("../internals/redefine"),p=t("../internals/redefine-all"),m=t("../internals/set-to-string-tag"),y=t("../internals/create-iterator-constructor"),g=t("../internals/internal-state"),v=t("../internals/an-instance"),b=t("../internals/has"),x=t("../internals/function-bind-context"),j=t("../internals/classof"),w=t("../internals/an-object"),S=t("../internals/is-object"),T=t("../internals/object-create"),E=t("../internals/create-property-descriptor"),k=t("../internals/get-iterator"),M=t("../internals/get-iterator-method"),t=t("../internals/well-known-symbol"),C=d("fetch"),A=d("Headers"),d=t("iterator"),O="URLSearchParams",R=O+"Iterator",P=g.set,L=g.getterFor(O),I=g.getterFor(R),D=/\+/g,F=[,,,,],N=function(t){var r,o=t.replace(D," "),s=4;try{return decodeURIComponent(o)}catch(t){for(;s;)o=o.replace(F[(r=s--)-1]||(F[r-1]=RegExp("((?:%[\\da-f]{2}){"+r+"})","gi")),n);return o}},U=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},V=function(t,r){if(r)for(var o,n=r.split("&"),s=0;s<n.length;)(o=n[s++]).length&&(o=o.split("="),t.push({key:N(o.shift()),value:N(o.join("="))}))},G=y(function(t,r){P(this,{type:R,iterator:k(L(t).entries),kind:r})},"Iterator",function(){var t=I(this),r=t.kind,t=t.iterator.next(),o=t.value;return t.done||(t.value="keys"===r?o.key:"values"===r?o.value:[o.key,o.value]),t}),t=u.prototype;p(t,{append:function(t,r){l(arguments.length,2);var o=L(this);o.entries.push({key:t+"",value:r+""}),o.updateURL()},delete:function(t){l(arguments.length,1);for(var r=L(this),o=r.entries,n=t+"",s=0;s<o.length;)o[s].key===n?o.splice(s,1):s++;r.updateURL()},get:function(t){l(arguments.length,1);for(var r=L(this).entries,o=t+"",n=0;n<r.length;n++)if(r[n].key===o)return r[n].value;return null},getAll:function(t){l(arguments.length,1);for(var r=L(this).entries,o=t+"",n=[],s=0;s<r.length;s++)r[s].key===o&&n.push(r[s].value);return n},has:function(t){l(arguments.length,1);for(var r=L(this).entries,o=t+"",n=0;n<r.length;)if(r[n++].key===o)return!0;return!1},set:function(t,r){l(arguments.length,1);for(var o,n=L(this),s=n.entries,i=!1,a=t+"",u=r+"",c=0;c<s.length;c++)(o=s[c]).key===a&&(i?s.splice(c--,1):(i=!0,o.value=u));i||s.push({key:a,value:u}),n.updateURL()},sort:function(){for(var t,r,o=L(this),n=o.entries,s=n.slice(),i=n.length=0;i<s.length;i++){for(t=s[i],r=0;r<i;r++)if(n[r].key>t.key){n.splice(r,0,t);break}r===i&&n.push(t)}o.updateURL()},forEach:function(t){for(var r,o=L(this).entries,n=x(t,1<arguments.length?arguments[1]:void 0,3),s=0;s<o.length;)n((r=o[s++]).value,r.key,this)},keys:function(){return new G(this,"keys")},values:function(){return new G(this,"values")},entries:function(){return new G(this,"entries")}},{enumerable:!0}),f(t,d,t.entries),f(t,"toString",function(){for(var t,r=L(this).entries,o=[],n=0;n<r.length;)o.push(i((t=r[n++]).key)+"="+i(t.value));return o.join("&")},{enumerable:!0}),m(u,O),c({global:!0,forced:!h},{URLSearchParams:u}),h||"function"!=typeof C||"function"!=typeof A||c({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var r,o,n,t=[t];return 1<arguments.length&&(S(r=arguments[1])&&j(o=r.body)===O&&((n=r.headers?new A(r.headers):new A).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),r=T(r,{body:E(0,String(o)),headers:E(0,n)})),t.push(r)),C.apply(this,t)}}),r.exports={URLSearchParams:u,getState:L}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],238:[function(t,r,o){function n(t){var r,o,n,s;if("number"==typeof t){for(r=[],o=0;o<4;o++)r.unshift(t%256),t=R(t/256);return r.join(".")}if("object"!=typeof t)return t;for(r="",n=Q(t),o=0;o<8;o++)s&&0===t[o]||(s=s&&!1,n===o?(r+=o?":":"::",s=!0):(r+=t[o].toString(16),o<7&&(r+=":")));return"["+r+"]"}function s(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme}function i(t,r,o,n){var s,i,a,l=o||ec,c=0,d="",h=!1,f=!1,p=!1;for(o||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,r=r.replace(X,"")),s=j(r=r.replace(Y,""));c<=s.length;){switch(i=s[c],l){case ec:if(!i||!N.test(i)){if(o)return I;l=eh;continue}d+=i.toLowerCase(),l=ed;break;case ed:if(i&&(U.test(i)||"+"==i||"-"==i||"."==i))d+=i.toLowerCase();else{if(":"!=i){if(o)return I;d="",l=eh,c=0;continue}if(o&&(eo(t)!=b(er,d)||"file"==d&&(en(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,o)return void(eo(t)&&er[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?l=ew:eo(t)&&n&&n.scheme==t.scheme?l=ef:eo(t)?l=eg:"/"==s[c+1]?(l=ep,c++):(t.cannotBeABaseURL=!0,t.path.push(""),l=eM)}break;case eh:if(!n||n.cannotBeABaseURL&&"#"!=i)return I;if(n.cannotBeABaseURL&&"#"==i){t.scheme=n.scheme,t.path=n.path.slice(),t.query=n.query,t.fragment="",t.cannotBeABaseURL=!0,l=eA;break}l="file"==n.scheme?ew:em;continue;case ef:if("/"!=i||"/"!=s[c+1]){l=em;continue}l=ev,c++;break;case ep:if("/"==i){l=eb;break}l=ek;continue;case em:if(t.scheme=n.scheme,i==u)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query;else if("/"==i||"\\"==i&&eo(t))l=ey;else if("?"==i)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query="",l=eC;else{if("#"!=i){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.path.pop(),l=ek;continue}t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query,t.fragment="",l=eA}break;case ey:if(eo(t)&&("/"==i||"\\"==i))l=ev;else{if("/"!=i){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,l=ek;continue}l=eb}break;case eg:if(l=ev,"/"!=i||"/"!=d.charAt(c+1))continue;c++;break;case ev:if("/"==i||"\\"==i)break;l=eb;continue;case eb:if("@"==i){h&&(d="%40"+d);for(var h=!0,m=j(d),y=0;y<m.length;y++){var g=m[y];":"!=g||p?(g=et(g,ee),p?t.password+=g:t.username+=g):p=!0}d=""}else if(i==u||"/"==i||"?"==i||"#"==i||"\\"==i&&eo(t)){if(h&&""==d)return L;c-=j(d).length+1,d="",l=e_}else d+=i;break;case e_:case ex:if(o&&"file"==t.scheme){l=eT;continue}if(":"!=i||f){if(i==u||"/"==i||"?"==i||"#"==i||"\\"==i&&eo(t)){if(eo(t)&&""==d)return D;if(o&&""==d&&(en(t)||null!==t.port))return;if(a=Z(t,d))return a;if(d="",l=eE,o)return;continue}"["==i?f=!0:"]"==i&&(f=!1),d+=i}else{if(""==d)return D;if(a=Z(t,d))return a;if(d="",l=ej,o==ex)return}break;case ej:if(!B.test(i)){if(i==u||"/"==i||"?"==i||"#"==i||"\\"==i&&eo(t)||o){if(""!=d){var v=parseInt(d,10);if(65535<v)return F;t.port=eo(t)&&v===er[t.scheme]?null:v,d=""}if(o)return;l=eE;continue}return F}d+=i;break;case ew:if(t.scheme="file","/"==i||"\\"==i)l=eS;else{if(!n||"file"!=n.scheme){l=ek;continue}if(i==u)t.host=n.host,t.path=n.path.slice(),t.query=n.query;else if("?"==i)t.host=n.host,t.path=n.path.slice(),t.query="",l=eC;else{if("#"!=i){ei(s.slice(c).join(""))||(t.host=n.host,t.path=n.path.slice(),ea(t)),l=ek;continue}t.host=n.host,t.path=n.path.slice(),t.query=n.query,t.fragment="",l=eA}}break;case eS:if("/"==i||"\\"==i){l=eT;break}n&&"file"==n.scheme&&!ei(s.slice(c).join(""))&&(es(n.path[0],!0)?t.path.push(n.path[0]):t.host=n.host),l=ek;continue;case eT:if(i==u||"/"==i||"\\"==i||"?"==i||"#"==i){if(!o&&es(d))l=ek;else{if(""==d){if(t.host="",o)return}else{if(a=Z(t,d))return a;if("localhost"==t.host&&(t.host=""),o)return;d=""}l=eE}continue}d+=i;break;case eE:if(eo(t)){if(l=ek,"/"!=i&&"\\"!=i)continue}else if(o||"?"!=i){if(o||"#"!=i){if(i!=u&&(l=ek,"/"!=i))continue}else t.fragment="",l=eA}else t.query="",l=eC;break;case ek:if(i==u||"/"==i||"\\"==i&&eo(t)||!o&&("?"==i||"#"==i)){if(eu(d)?(ea(t),"/"==i||"\\"==i&&eo(t)||t.path.push("")):el(d)?"/"==i||"\\"==i&&eo(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&es(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(i==u||"?"==i||"#"==i))for(;1<t.path.length&&""===t.path[0];)t.path.shift();"?"==i?(t.query="",l=eC):"#"==i&&(t.fragment="",l=eA)}else d+=et(i,K);break;case eM:"?"==i?(t.query="",l=eC):"#"==i?(t.fragment="",l=eA):i!=u&&(t.path[0]+=et(i,J));break;case eC:o||"#"!=i?i!=u&&("'"==i&&eo(t)?t.query+="%27":t.query+="#"==i?"%23":et(i,J)):(t.fragment="",l=eA);break;case eA:i!=u&&(t.fragment+=et(i,$))}c++}}function a(t){var r,o,n=v(this,a,"URL"),s=1<arguments.length?arguments[1]:void 0,t=String(t),l=A(n,{type:"URL"});if(void 0!==s){if(s instanceof a)r=O(s);else if(o=i(r={},String(s)))throw TypeError(o)}if(o=i(l,t,null,r))throw TypeError(o);var u=l.searchParams=new M;(s=C(u)).updateSearchParams(l.query),s.updateURL=function(){l.query=String(u)||null},f||(n.href=eO.call(n),n.origin=eR.call(n),n.protocol=eP.call(n),n.username=eL.call(n),n.password=eI.call(n),n.host=eD.call(n),n.hostname=eF.call(n),n.port=eN.call(n),n.pathname=eU.call(n),n.search=eB.call(n),n.searchParams=eV.call(n),n.hash=eG.call(n))}function l(t,r){return{get:t,set:r,configurable:!0,enumerable:!0}}t("../modules/es.string.iterator");var u,c,d,h=t("../internals/export"),f=t("../internals/descriptors"),p=t("../internals/native-url"),m=t("../internals/global"),y=t("../internals/object-define-properties"),g=t("../internals/redefine"),v=t("../internals/an-instance"),b=t("../internals/has"),x=t("../internals/object-assign"),j=t("../internals/array-from"),w=t("../internals/string-multibyte").codeAt,S=t("../internals/string-punycode-to-ascii"),T=t("../internals/set-to-string-tag"),E=t("../modules/web.url-search-params"),t=t("../internals/internal-state"),k=m.URL,M=E.URLSearchParams,C=E.getState,A=t.set,O=t.getterFor("URL"),R=Math.floor,P=Math.pow,L="Invalid authority",I="Invalid scheme",D="Invalid host",F="Invalid port",N=/[A-Za-z]/,U=/[\d+-.A-Za-z]/,B=/\d/,V=/^(0x|0X)/,G=/^[0-7]+$/,H=/^\d+$/,z=/^[\dA-Fa-f]+$/,q=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,W=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,X=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Y=/[\u0009\u000A\u000D]/g,Z=function(t,r){var o,n,s;if("["==r.charAt(0))return"]"==r.charAt(r.length-1)&&(o=function(t){var r,o,n,s,i,a,l,u=[0,0,0,0,0,0,0,0],c=0,d=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,d=++c}for(;f();){if(8==c)return;if(":"==f()){if(null!==d)return;h++,d=++c;continue}for(r=o=0;o<4&&z.test(f());)r=16*r+parseInt(f(),16),h++,o++;if("."==f()){if(0==o||(h-=o,c>6))return;for(n=0;f();){if(s=null,n>0){if("."!=f()||!(n<4))return;h++}if(!B.test(f()))return;for(;B.test(f());){if(i=parseInt(f(),10),null===s)s=i;else{if(0==s)return;s=10*s+i}if(s>255)return;h++}u[c]=256*u[c]+s,(2==++n||4==n)&&c++}if(4!=n)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=r}if(null!==d)for(a=c-d,c=7;0!=c&&a>0;)l=u[c],u[c--]=u[d+a-1],u[d+--a]=l;else if(8!=c)return;return u}(r.slice(1,-1)))?void(t.host=o):D;if(eo(t))return r=S(r),q.test(r)||null===(o=function(t){var r,o,n,s,i,a,l,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(r=u.length)>4)return t;for(o=[],n=0;n<r;n++){if(""==(s=u[n]))return t;if(i=10,s.length>1&&"0"==s.charAt(0)&&(i=V.test(s)?16:8,s=s.slice(8==i?1:2)),""===s)a=0;else{if(!(10==i?H:8==i?G:z).test(s))return t;a=parseInt(s,i)}o.push(a)}for(n=0;n<r;n++)if(a=o[n],n==r-1){if(a>=P(256,5-r))return null}else if(a>255)return null;for(l=o.pop(),n=0;n<o.length;n++)l+=o[n]*P(256,3-n);return l}(r))?D:void(t.host=o);if(W.test(r))return D;for(o="",n=j(r),s=0;s<n.length;s++)o+=et(n[s],J);t.host=o},Q=function(t){for(var r=null,o=1,n=null,s=0,i=0;i<8;i++)0!==t[i]?(o<s&&(r=n,o=s),n=null,s=0):(null===n&&(n=i),++s);return o<s&&(r=n,o=s),r},J={},$=x({},J,{" ":1,'"':1,"<":1,">":1,"`":1}),K=x({},$,{"#":1,"?":1,"{":1,"}":1}),ee=x({},K,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),et=function(t,r){var o=w(t,0);return 32<o&&o<127&&!b(r,t)?t:encodeURIComponent(t)},er={ftp:21,file:null,http:80,https:443,ws:80,wss:443},eo=function(t){return b(er,t.scheme)},en=function(t){return""!=t.username||""!=t.password},es=function(t,r){return 2==t.length&&N.test(t.charAt(0))&&(":"==(t=t.charAt(1))||!r&&"|"==t)},ei=function(t){return 1<t.length&&es(t.slice(0,2))&&(2==t.length||"/"===(t=t.charAt(2))||"\\"===t||"?"===t||"#"===t)},ea=function(t){var r=t.path,o=r.length;!o||"file"==t.scheme&&1==o&&es(r[0],!0)||r.pop()},el=function(t){return"."===t||"%2e"===t.toLowerCase()},eu=function(t){return".."===(t=t.toLowerCase())||"%2e."===t||".%2e"===t||"%2e%2e"===t},ec={},ed={},eh={},ef={},ep={},em={},ey={},eg={},ev={},eb={},e_={},ex={},ej={},ew={},eS={},eT={},eE={},ek={},eM={},eC={},eA={},m=a.prototype,eO=function(){var t=O(this),r=t.scheme,o=t.username,s=t.password,i=t.host,a=t.port,l=t.path,u=t.query,c=t.fragment,d=r+":";return null!==i?(d+="//",en(t)&&(d+=o+(s?":"+s:"")+"@"),d+=n(i),null!==a&&(d+=":"+a)):"file"==r&&(d+="//"),d+=t.cannotBeABaseURL?l[0]:l.length?"/"+l.join("/"):"",null!==u&&(d+="?"+u),null!==c&&(d+="#"+c),d},eR=function(){var t=O(this),r=t.scheme,o=t.port;if("blob"==r)try{return new URL(r.path[0]).origin}catch(t){return"null"}return"file"!=r&&eo(t)?r+"://"+n(t.host)+(null!==o?":"+o:""):"null"},eP=function(){return O(this).scheme+":"},eL=function(){return O(this).username},eI=function(){return O(this).password},eD=function(){var t=O(this),r=t.host,t=t.port;return null===r?"":null===t?n(r):n(r)+":"+t},eF=function(){var t=O(this).host;return null===t?"":n(t)},eN=function(){var t=O(this).port;return null===t?"":String(t)},eU=function(){var t=O(this),r=t.path;return t.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):""},eB=function(){var t=O(this).query;return t?"?"+t:""},eV=function(){return O(this).searchParams},eG=function(){var t=O(this).fragment;return t?"#"+t:""};f&&y(m,{href:l(eO,function(t){var r=O(this),t=String(t),t=i(r,t);if(t)throw TypeError(t);C(r.searchParams).updateSearchParams(r.query)}),origin:l(eR),protocol:l(eP,function(t){i(O(this),String(t)+":",ec)}),username:l(eL,function(t){var r=O(this),o=j(String(t));if(!s(r)){r.username="";for(var n=0;n<o.length;n++)r.username+=et(o[n],ee)}}),password:l(eI,function(t){var r=O(this),o=j(String(t));if(!s(r)){r.password="";for(var n=0;n<o.length;n++)r.password+=et(o[n],ee)}}),host:l(eD,function(t){var r=O(this);r.cannotBeABaseURL||i(r,String(t),e_)}),hostname:l(eF,function(t){var r=O(this);r.cannotBeABaseURL||i(r,String(t),ex)}),port:l(eN,function(t){var r=O(this);s(r)||(""==(t=String(t))?r.port=null:i(r,t,ej))}),pathname:l(eU,function(t){var r=O(this);r.cannotBeABaseURL||(r.path=[],i(r,t+"",eE))}),search:l(eB,function(t){var r=O(this);""==(t=String(t))?r.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),r.query="",i(r,t,eC)),C(r.searchParams).updateSearchParams(r.query)}),searchParams:l(eV),hash:l(eG,function(t){var r=O(this);""==(t=String(t))?r.fragment=null:("#"==t.charAt(0)&&(t=t.slice(1)),r.fragment="",i(r,t,eA))})}),g(m,"toJSON",function(){return eO.call(this)},{enumerable:!0}),g(m,"toString",function(){return eO.call(this)},{enumerable:!0}),k&&(c=k.createObjectURL,d=k.revokeObjectURL,c&&g(a,"createObjectURL",function(t){return c.apply(k,arguments)}),d&&g(a,"revokeObjectURL",function(t){return d.apply(k,arguments)})),T(a,"URL"),h({global:!0,forced:!p,sham:!f},{URL:a})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":190,"../modules/web.url-search-params":237}],239:[function(t,r,o){r.exports=t("./").polyfill()},{"./":240}],240:[function(t,r,o){(function(n,s){var i;i=function(){function r(t){return"function"==typeof t}var o,i,a,l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=0,c=void 0,d=void 0,h=function(t,r){v[u]=t,v[u+1]=r,2===(u+=2)&&(d?d(b):w())},f="undefined"!=typeof window?window:void 0,p=f||{},p=p.MutationObserver||p.WebKitMutationObserver,m="undefined"==typeof self&&void 0!==n&&"[object process]"===({}).toString.call(n),y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function g(){var t=setTimeout;return function(){return t(b,1)}}var v=Array(1e3);function b(){for(var t=0;t<u;t+=2)(0,v[t])(v[t+1]),v[t]=void 0,v[t+1]=void 0;u=0}function x(t,r){var o,n=this,s=new this.constructor(T),i=(void 0===s[S]&&D(s),n._state);return i?(o=arguments[i-1],h(function(){return L(i,s,o,n._result)})):R(n,s,t,r),s}function j(t){var r;return t&&"object"==typeof t&&t.constructor===this?t:(M(r=new this(T),t),r)}var w=m?function(){return n.nextTick(b)}:p?(i=0,m=new p(b),a=document.createTextNode(""),m.observe(a,{characterData:!0}),function(){a.data=i=++i%2}):y?((o=new MessageChannel).port1.onmessage=b,function(){return o.port2.postMessage(0)}):(void 0===f&&"function"==typeof t?function(){try{var t=Function("return this")().require("vertx");return void 0!==(c=t.runOnLoop||t.runOnContext)?function(){c(b)}:g()}catch(t){return g()}}:g)(),S=Math.random().toString(36).substring(2);function T(){}var E=void 0;function k(t,o,n){o.constructor===t.constructor&&n===x&&o.constructor.resolve===j?1===o._state?A(t,o._result):2===o._state?O(t,o._result):R(o,void 0,function(r){return M(t,r)},function(r){return O(t,r)}):void 0!==n&&r(n)?h(function(t){var r=!1,s=function(t,r,o,n){try{t.call(r,o,n)}catch(t){return t}}(n,o,function(n){r||(r=!0,(o!==n?M:A)(t,n))},function(o){r||(r=!0,O(t,o))},t._label);!r&&s&&(r=!0,O(t,s))},t):A(t,o)}function M(t,r){var o;if(t===r)O(t,TypeError("You cannot resolve a promise with itself"));else if(o=typeof r,null===r||"object"!=o&&"function"!=o)A(t,r);else{o=void 0;try{o=r.then}catch(r){return void O(t,r)}k(t,r,o)}}function C(t){t._onerror&&t._onerror(t._result),P(t)}function A(t,r){t._state===E&&(t._result=r,t._state=1,0!==t._subscribers.length&&h(P,t))}function O(t,r){t._state===E&&(t._state=2,t._result=r,h(C,t))}function R(t,r,o,n){var s=t._subscribers,i=s.length;t._onerror=null,s[i]=r,s[i+1]=o,s[i+2]=n,0===i&&t._state&&h(P,t)}function P(t){var r=t._subscribers,o=t._state;if(0!==r.length){for(var n,s=void 0,i=t._result,a=0;a<r.length;a+=3)n=r[a],s=r[a+o],n?L(o,n,s,i):s(i);t._subscribers.length=0}}function L(t,o,n,s){var i=r(n),a=void 0,l=void 0,u=!0;if(i){try{a=n(s)}catch(t){u=!1,l=t}if(o===a)return void O(o,TypeError("A promises callback cannot return that same promise."))}else a=s;o._state===E&&(i&&u?M(o,a):!1===u?O(o,l):1===t?A(o,a):2===t&&O(o,a))}var I=0;function D(t){t[S]=I++,t._state=void 0,t._result=void 0,t._subscribers=[]}function F(t,r){this._instanceConstructor=t,this.promise=new t(T),this.promise[S]||D(this.promise),l(r)?(this.length=r.length,this._remaining=r.length,this._result=Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(r),0!==this._remaining)||A(this.promise,this._result)):O(this.promise,Error("Array Methods must be provided an Array"))}F.prototype._enumerate=function(t){for(var r=0;this._state===E&&r<t.length;r++)this._eachEntry(t[r],r)},F.prototype._eachEntry=function(t,r){var o=this._instanceConstructor,n=o.resolve;if(n===j){var s,i=void 0,a=void 0,l=!1;try{i=t.then}catch(t){l=!0,a=t}i===x&&t._state!==E?this._settledAt(t._state,r,t._result):"function"!=typeof i?(this._remaining--,this._result[r]=t):o===N?(s=new o(T),l?O(s,a):k(s,t,i),this._willSettleAt(s,r)):this._willSettleAt(new o(function(r){return r(t)}),r)}else this._willSettleAt(n(t),r)},F.prototype._settledAt=function(t,r,o){var n=this.promise;n._state===E&&(this._remaining--,2===t?O(n,o):this._result[r]=o),0===this._remaining&&A(n,this._result)},F.prototype._willSettleAt=function(t,r){var o=this;R(t,void 0,function(t){return o._settledAt(1,r,t)},function(t){return o._settledAt(2,r,t)})},U.prototype.catch=function(t){return this.then(null,t)},U.prototype.finally=function(t){var o=this.constructor;return r(t)?this.then(function(r){return o.resolve(t()).then(function(){return r})},function(r){return o.resolve(t()).then(function(){throw r})}):this.then(t,t)};var N=U;function U(t){if(this[S]=I++,this._result=this._state=void 0,this._subscribers=[],T!==t){if("function"!=typeof t)throw TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof U))throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var r=this;try{t(function(t){M(r,t)},function(t){O(r,t)})}catch(t){O(r,t)}}}return N.prototype.then=x,N.all=function(t){return new F(this,t).promise},N.race=function(t){var r=this;return new r(l(t)?function(o,n){for(var s=t.length,i=0;i<s;i++)r.resolve(t[i]).then(o,n)}:function(t,r){return r(TypeError("You must pass an array to race."))})},N.resolve=j,N.reject=function(t){var r=new this(T);return O(r,t),r},N._setScheduler=function(t){d=t},N._setAsap=function(t){h=t},N._asap=h,N.polyfill=function(){var t=void 0;if(void 0!==s)t=s;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var o=null;try{o=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===o&&!r.cast)return}t.Promise=N},N.Promise=N},"object"==typeof o&&void 0!==r?r.exports=i():"function"==typeof O&&O.amd?O(i):this.ES6Promise=i()}).call(this,t("_process"),void 0!==ty?ty:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:249}],241:[function(t,r,o){var n;n=function(t,r){function o(t){try{delete window[t]}catch(r){window[t]=void 0}}function n(t){(t=document.getElementById(t))&&document.getElementsByTagName("head")[0].removeChild(t)}r.exports=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=t,i=r.timeout||5e3,a=r.jsonpCallback||"callback",l=void 0;return new Promise(function(u,c){var d=r.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),h=a+"_"+d,f=(window[d]=function(t){u({ok:!0,json:function(){return Promise.resolve(t)}}),l&&clearTimeout(l),n(h),o(d)},s+=-1===s.indexOf("?")?"?":"&",document.createElement("script"));f.setAttribute("src",""+s+a+"="+d),r.charset&&f.setAttribute("charset",r.charset),f.id=h,document.getElementsByTagName("head")[0].appendChild(f),l=setTimeout(function(){c(Error("JSONP request to "+t+" timed out")),o(d),n(h),window[d]=function(){o(d)}},i),f.onerror=function(){c(Error("JSONP request to "+t+" failed")),o(d),n(h),l&&clearTimeout(l)}})}},"function"==typeof O&&O.amd?O(["exports","module"],n):void 0!==o&&void 0!==r?n(0,r):(n(n={exports:{}},n),this.fetchJsonp=n.exports)},{}],242:[function(t,r,o){var n=function(t){var r,o,n,s,i,a,l,u,c,d;if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)))return d=t.document,r=function(){return t.URL||t.webkitURL||t},n="download"in(o=d.createElementNS("http://www.w3.org/1999/xhtml","a")),s=/constructor/i.test(t.HTMLElement)||t.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(r){(t.setImmediate||t.setTimeout)(function(){throw r},0)},l=function(t){setTimeout(function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()},4e4)},u=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},d=(c=function(c,d,h){h||(c=u(c));var f,p,m=this,h="application/octet-stream"===c.type,y=function(){for(var t="writestart progress write writeend".split(" "),r=void 0,o=(t=[].concat(t)).length;o--;){var n=m["on"+t[o]];if("function"==typeof n)try{n.call(m,r||m)}catch(t){a(t)}}};m.readyState=m.INIT,n?(f=r().createObjectURL(c),setTimeout(function(){var t;o.href=f,o.download=d,t=new MouseEvent("click"),o.dispatchEvent(t),y(),l(f),m.readyState=m.DONE})):(i||h&&s)&&t.FileReader?((p=new FileReader).onloadend=function(){var r=i?p.result:p.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(r,"_blank")||(t.location.href=r),r=void 0,m.readyState=m.DONE,y()},p.readAsDataURL(c),m.readyState=m.INIT):(f=f||r().createObjectURL(c),!h&&t.open(f,"_blank")||(t.location.href=f),m.readyState=m.DONE,y(),l(f))}).prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,r,o){return r=r||t.name||"download",o||(t=u(t)),navigator.msSaveOrOpenBlob(t,r)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,r,o){return new c(t,r||t.name||"download",o)})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==r&&r.exports?r.exports.saveAs=n:null!=O&&null!==O.amd&&O("FileSaver.js",function(){return n})},{}],243:[function(t,r,o){var n,s=Object.defineProperty,i=(s(o,"__esModule",{value:!0}),o),a={GIFEncoder:()=>j,applyPalette:()=>function(t,r,o="rgb565"){if(!t||!t.buffer||!(t instanceof Uint8Array||t instanceof Uint8ClampedArray))throw Error("quantize() expected RGBA Uint8Array data");if(256<r.length)throw Error("applyPalette() only works with 256 colors or less");let n=new Uint32Array(t.buffer),s=n.length,i=new Uint8Array(s),a=Array("rgb444"===o?4096:65536);if("rgba4444"===o)for(let t=0;t<s;t++){var l=n[t],u=l>>24&255,c=l>>16&255,p=l>>8&255,l=255&l,m=h(l,p,c,u),m=m in a?a[m]:a[m]=function(t,r,o,n,s){let i=0,a=1e100;for(let p=0;p<s.length;p++){var l,u,c,d,h=s[p],f=(d=h[3]-n)*d;f>a||(f+=(l=h[0]-t)*l)>a||(f+=(u=h[1]-r)*u)>a||(f+=(c=h[2]-o)*c)>a||(a=f,i=p)}return i}(l,p,c,u,r);i[t]=m}else{let t="rgb444"===o?f:d;for(let o=0;o<s;o++){var y=n[o],g=y>>16&255,v=y>>8&255,y=255&y,b=t(y,v,g),b=b in a?a[b]:a[b]=function(t,r,o,n){let s=0,i=1e100;for(let h=0;h<n.length;h++){var a,l,u,c=n[h],d=(u=c[0]-t)*u;d>i||(d+=(a=c[1]-r)*a)>i||(d+=(l=c[2]-o)*l)>i||(i=d,s=h)}return s}(y,v,g,r);i[o]=b}}return i},default:()=>k,nearestColor:()=>function(t,r,o=g){return t[b(t,r,o)]},nearestColorIndex:()=>b,nearestColorIndexWithDistance:()=>x,prequantize:()=>function(t,{roundRGB:r=5,roundAlpha:o=10,oneBitAlpha:n=null}={}){let s=new Uint32Array(t.buffer);for(let t=0;t<s.length;t++){var i=s[t];let u=i>>24&255;var a=i>>16&255,l=i>>8&255,i=255&i;u=v(u,o),n&&(u=u<=("number"==typeof n?n:127)?0:255),i=v(i,r),l=v(l,r),a=v(a,r),s[t]=u<<24|a<<16|l<<8|i<<0}},quantize:()=>function(t,r,o={}){var{format:n="rgb565",clearAlpha:s=!0,clearAlphaColor:i=0,clearAlphaThreshold:a=0,oneBitAlpha:l=!1}=o;if(!t||!t.buffer||!(t instanceof Uint8Array||t instanceof Uint8ClampedArray))throw Error("quantize() expected RGBA Uint8Array data");t=new Uint32Array(t.buffer);let u=!1!==o.useSqrt,c="rgba4444"===n,g=function(t,r){let o=Array("rgb444"===r?4096:65536),n=t.length;if("rgba4444"===r)for(let r=0;r<n;++r){var s=t[r],i=s>>24&255,a=s>>16&255,l=s>>8&255,s=255&s,u=h(s,l,a,i);let n=u in o?o[u]:o[u]=y();n.rc+=s,n.gc+=l,n.bc+=a,n.ac+=i,n.cnt++}else if("rgb444"===r)for(let r=0;r<n;++r){var c=t[r],p=c>>16&255,m=c>>8&255,c=255&c,g=f(c,m,p);let n=g in o?o[g]:o[g]=y();n.rc+=c,n.gc+=m,n.bc+=p,n.cnt++}else for(let r=0;r<n;++r){var v=t[r],b=v>>16&255,x=v>>8&255,v=255&v,j=d(v,x,b);let n=j in o?o[j]:o[j]=y();n.rc+=v,n.gc+=x,n.bc+=b,n.cnt++}return o}(t,n),v=g.length,b=v-1,x=new Uint32Array(v+1);for(var j=0,w=0;w<v;++w){let t=g[w];null!=t&&(L=1/t.cnt,c&&(t.ac*=L),t.rc*=L,t.gc*=L,t.bc*=L,g[j++]=t)}r*r/j<.022&&(u=!1);for(var S,T,E,w=0;w<j-1;++w)g[w].fw=w+1,g[w+1].bk=w,u&&(g[w].cnt=Math.sqrt(g[w].cnt));for(u&&(g[w].cnt=Math.sqrt(g[w].cnt)),w=0;w<j;++w){m(g,w,!1);var k=g[w].err;for(T=++x[0];1<T&&!(g[S=x[E=T>>1]].err<=k);T=E)x[T]=S;x[T]=w}var M,C=j-r;for(w=0;w<C;){for(;;){var A=x[1];if((M=g[A]).tm>=M.mtm&&g[M.nn].mtm<=M.tm)break;for(M.mtm==b?A=x[1]=x[x[0]--]:(m(g,A,!1),M.tm=w),k=g[A].err,T=1;(E=T+T)<=x[0]&&(E<x[0]&&g[x[E]].err>g[x[E+1]].err&&E++,!(k<=g[S=x[E]].err));T=E)x[T]=S;x[T]=A}var O=g[M.nn],R=M.cnt,P=O.cnt,L=1/(R+P);c&&(M.ac=L*(R*M.ac+P*O.ac)),M.rc=L*(R*M.rc+P*O.rc),M.gc=L*(R*M.gc+P*O.gc),M.bc=L*(R*M.bc+P*O.bc),M.cnt+=O.cnt,M.mtm=++w,g[O.bk].fw=O.fw,g[O.fw].bk=O.bk,O.mtm=b}let I=[];for(w=0;;){let t=p(Math.round(g[w].rc),0,255),r=p(Math.round(g[w].gc),0,255),o=p(Math.round(g[w].bc),0,255),n=255;c&&(n=p(Math.round(g[w].ac),0,255),l&&(n=n<=(D="number"==typeof l?l:127)?0:255),s&&n<=a&&(t=r=o=i,n=0));var D=c?[t,r,o,n]:[t,r,o];if(function(t,r){for(let s=0;s<t.length;s++){var o=t[s],n=o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2],o=!(4<=o.length&&4<=r.length)||o[3]===r[3];if(n&&o)return!0}return!1}(I,D)||I.push(D),0==(w=g[w].fw))break}return I},snapColorsToPalette:()=>function(t,r,o=5){if(t.length&&r.length){var n=t.map(t=>t.slice(0,3)),s=o*o,i=t[0].length;for(let o=0;o<r.length;o++){let u=r[o];var a=x(n,(u=u.length<i?[u[0],u[1],u[2],255]:u.length>i?u.slice(0,3):u.slice()).slice(0,3),g),l=a[0],a=a[1];0<a&&a<=s&&(t[l]=u)}}}};for(n in a)s(i,n,{get:a[n],enumerable:!0});function l(t=256){let r=0,o=new Uint8Array(t);return{get buffer(){return o.buffer},reset(){r=0},bytesView:()=>o.subarray(0,r),bytes:()=>o.slice(0,r),writeByte(t){n(r+1),o[r]=t,r++},writeBytes(t,s=0,i=t.length){n(r+i);for(let n=0;n<i;n++)o[r++]=t[n+s]},writeBytesView(t,s=0,i=t.byteLength){n(r+i),o.set(t.subarray(s,s+i),r),r+=i}};function n(t){var n=o.length;if(!(t<=n)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));let s=o;o=new Uint8Array(t),0<r&&o.set(s.subarray(0,r),0)}}}var u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],c=function(t,r,o,n,s=l(512),i=new Uint8Array(256),a=new Int32Array(5003),c=new Int32Array(5003)){var d=a.length,n=Math.max(2,n);i.fill(0),c.fill(0),a.fill(-1);let h=0,f=0;var p=n+1;let m=!1,y=p,g=(1<<y)-1;var v=1<<p-1;let b=1+v,x=2+v,j=0,w=o[0],S=0;for(let t=d;t<65536;t*=2)++S;S=8-S,s.writeByte(n),C(v);var T=o.length;for(let t=1;t<T;t++)e:{var E=o[t],k=(E<<12)+w;let r=E<<S^w;if(a[r]===k)w=c[r];else{for(var M=0===r?1:d-r;0<=a[r];)if((r-=M)<0&&(r+=d),a[r]===k){w=c[r];break e}C(w),w=E,x<4096?(c[r]=x++,a[r]=k):(a.fill(-1),x=2+v,m=!0,C(v))}}return C(w),C(b),s.writeByte(0),s.bytesView();function C(t){for(h&=u[f],0<f?h|=t<<f:h=t,f+=y;8<=f;)i[j++]=255&h,254<=j&&(s.writeByte(j),s.writeBytesView(i,0,j),j=0),h>>=8,f-=8;if((x>g||m)&&(m?(g=(1<<(y=p))-1,m=!1):g=12==++y?1<<y:(1<<y)-1),t==b){for(;0<f;)i[j++]=255&h,254<=j&&(s.writeByte(j),s.writeBytesView(i,0,j),j=0),h>>=8,f-=8;0<j&&(s.writeByte(j),s.writeBytesView(i,0,j),j=0)}}};function d(t,r,o){return t<<8&63488|r<<2&992|o>>3}function h(t,r,o,n){return t>>4|240&r|(240&o)<<4|(240&n)<<8}function f(t,r,o){return t>>4<<8|240&r|o>>4}function p(t,r,o){return t<r?r:o<t?o:t}function m(t,r,o){var n=0,s=1e100;let i=t[r];for(var a=i.cnt,l=i.ac,u=i.rc,c=i.gc,d=i.bc,h=i.fw;0!=h;h=t[h].fw){var f,p,m,y,g,v=t[h],b=v.cnt,b=a*b/(a+b);s<=b||(g=0,o&&s<=(g+=b*((f=v.ac-l)*f))||s<=(g+=b*((p=v.rc-u)*p))||s<=(g+=b*((m=v.gc-c)*m))||s<=(g+=b*((y=v.bc-d)*y))||(s=g,n=h))}i.err=s,i.nn=n}function y(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function g(t,r){for(var o=0,n=0;n<t.length;n++){var s=t[n]-r[n];o+=s*s}return o}function v(t,r){return 1<r?Math.round(t/r)*r:t}function b(t,r,o=g){let n=1/0,s=-1;for(let a=0;a<t.length;a++){var i=o(r,t[a]);i<n&&(n=i,s=a)}return s}function x(t,r,o=g){let n=1/0,s=-1;for(let a=0;a<t.length;a++){var i=o(r,t[a]);i<n&&(n=i,s=a)}return[s,n]}function j(t={}){let{initialCapacity:r=4096,auto:o=!0}=t,n=l(r),s=new Uint8Array(256),i=new Int32Array(5003),a=new Int32Array(5003),u=!1;return{reset(){n.reset(),u=!1},finish(){n.writeByte(59)},bytes:()=>n.bytes(),bytesView:()=>n.bytesView(),get buffer(){return n.buffer},get stream(){return n},writeHeader:d,writeFrame(t,r,l,h={}){var{transparent:f=!1,transparentIndex:p=0,delay:m=0,palette:y=null,repeat:g=0,colorDepth:v=8,dispose:b=-1}=h;let x=!1;if(o?u||(x=!0,d(),u=!0):x=!!h.first,r=Math.max(0,Math.floor(r)),l=Math.max(0,Math.floor(l)),x){if(!y)throw Error("First frame must include a { palette } option");var[h,j,k,M,C=8]=[n,r,l,y,v];C=128|C-1<<4|(M=E(M.length)-1),S(h,j),S(h,k),h.writeBytes([C,0,0]),w(n,y),0<=g&&(M=n,j=g,M.writeByte(33),M.writeByte(255),M.writeByte(11),T(M,"NETSCAPE2.0"),M.writeByte(3),M.writeByte(1),S(M,j),M.writeByte(0))}var A,k=Math.round(m/10),h=n,C=b,g=k,j=f,M=p,m=(h.writeByte(33),h.writeByte(249),h.writeByte(4),M<0&&(M=0,j=!1),j=j?(A=1,2):A=0,0<=C&&(j=7&C),j<<=2,h.writeByte(0|j|A),S(h,g),h.writeByte(M||0),h.writeByte(0),!!y&&!x);b=n,f=r,p=l,A=m?y:null,b.writeByte(44),S(b,0),S(b,0),S(b,f),S(b,p),A?(f=E(A.length)-1,b.writeByte(128|f)):b.writeByte(0),m&&w(n,y),[g,h,p,f,b=8,m,y,t]=[n,t,r,l,v,s,i,a],c(p,f,h,b,g,m,y,t)}};function d(){T(n,"GIF89a")}}function w(t,r){var o=1<<E(r.length);for(let n=0;n<o;n++){let o=[0,0,0];n<r.length&&(o=r[n]),t.writeByte(o[0]),t.writeByte(o[1]),t.writeByte(o[2])}}function S(t,r){t.writeByte(255&r),t.writeByte(r>>8&255)}function T(t,r){for(var o=0;o<r.length;o++)t.writeByte(r.charCodeAt(o))}function E(t){return Math.max(Math.ceil(Math.log2(t)),1)}var k=j},{}],244:[function(t,r,o){o.read=function(t,r,o,n,s){var i,a,l=8*s-n-1,u=(1<<l)-1,c=u>>1,d=-7,h=o?s-1:0,f=o?-1:1,s=t[r+h];for(h+=f,i=s&(1<<-d)-1,s>>=-d,d+=l;0<d;i=256*i+t[r+h],h+=f,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=n;0<d;a=256*a+t[r+h],h+=f,d-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(s?-1:1);a+=Math.pow(2,n),i-=c}return(s?-1:1)*a*Math.pow(2,i-n)},o.write=function(t,r,o,n,s,i){var a,l,u=8*i-s-1,c=(1<<u)-1,d=c>>1,h=23===s?5960464477539062e-23:0,f=n?0:i-1,p=n?1:-1,i=r<0||0===r&&1/r<0?1:0;for(isNaN(r=Math.abs(r))||r===1/0?(l=isNaN(r)?1:0,a=c):(a=Math.floor(Math.log(r)/Math.LN2),r*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(r+=1<=a+d?h/n:h*Math.pow(2,1-d))*n&&(a++,n/=2),c<=a+d?(l=0,a=c):1<=a+d?(l=(r*n-1)*Math.pow(2,s),a+=d):(l=r*Math.pow(2,d-1)*Math.pow(2,s),a=0));8<=s;t[o+f]=255&l,f+=p,l/=256,s-=8);for(a=a<<s|l,u+=s;0<u;t[o+f]=255&a,f+=p,a/=256,u-=8);t[o+f-p]|=128*i}},{}],245:[function(t,r,o){var n;function s(t,r){return t.b===r.b&&t.a===r.a}function i(t,r){return t.b<r.b||t.b===r.b&&t.a<=r.a}function a(t,r,o){var n=r.b-t.b,s=o.b-r.b;return 0<n+s?n<s?r.a-t.a+n/(n+s)*(t.a-o.a):r.a-o.a+s/(n+s)*(o.a-t.a):0}function l(t,r,o){var n=r.b-t.b,s=o.b-r.b;return 0<n+s?(r.a-o.a)*n+(r.a-t.a)*s:0}function u(t,r){return t.a<r.a||t.a===r.a&&t.b<=r.b}function c(t,r,o){var n=r.a-t.a,s=o.a-r.a;return 0<n+s?n<s?r.b-t.b+n/(n+s)*(t.b-o.b):r.b-o.b+s/(n+s)*(o.b-t.b):0}function d(t,r,o){var n=r.a-t.a,s=o.a-r.a;return 0<n+s?(r.b-o.b)*n+(r.b-t.b)*s:0}function h(t,r,o,n){return(t=t<0?0:t)<=(o=o<0?0:o)?0===o?(r+n)/2:r+t/(t+o)*(n-r):n+o/(t+o)*(r-n)}function f(t){var r=v(t.b);return x(r,t.c),x(r.b,t.c),j(r,t.a),r}function p(t,r){var o=!1,n=!1;t!==r&&(r.a!==t.a&&(n=!0,S(r.a,t.a)),r.d!==t.d&&(o=!0,T(r.d,t.d)),b(r,t),n||(x(r,t.a),t.a.c=t),o||(j(r,t.d),t.d.a=t))}function m(t){var r=t.b,o=!1;t.d!==t.b.d&&(o=!0,T(t.d,t.b.d)),t.c===t?S(t.a,null):(t.b.d.a=t.b.e,t.a.c=t.c,b(t,t.b.e),o||j(t,t.d)),r.c===r?(S(r.a,null),T(r.d,null)):(t.d.a=r.b.e,r.a.c=r.c,b(r,r.b.e)),w(t)}function y(t){var r=v(t),o=r.b;return b(r,t.e),r.a=t.b.a,x(o,r.a),r.d=o.d=t.d,r=r.b,b(t.b,t.b.b.e),b(t.b,r),t.b.a=r.a,r.b.a.c=r.b,r.b.d=t.b.d,r.f=t.f,r.b.f=t.b.f,r}function g(t,r){var o=!1,n=v(t),s=n.b;return r.d!==t.d&&(o=!0,T(r.d,t.d)),b(n,t.e),b(s,r),n.a=t.b.a,s.a=r.a,n.d=s.d=t.d,t.d.a=s,o||j(n,t.d),n}function v(t){var r=new J,o=new J,n=t.b.h;return(((o.h=n).b.h=r).h=t).b.h=o,r.b=o,((r.c=r).e=o).b=r,(o.c=o).e=r}function b(t,r){var o=t.c,n=r.c;o.b.e=r,(n.b.e=t).c=n,r.c=o}function x(t,r){var o=r.f,n=new K(r,o);for(o.e=n,o=(r.f=n).c=t;o.a=n,(o=o.c)!==t;);}function j(t,r){var o=r.d,n=new Q(r,o);for(o.b=n,(r.d=n).a=t,n.c=r.c,o=t;o.d=n,(o=o.e)!==t;);}function w(t){var r=t.h;t=t.b.h,(r.b.h=t).b.h=r}function S(t,r){for(var o=t.c,n=o;n.a=r,(n=n.c)!==o;);o=t.f,((n=t.e).f=o).e=n}function T(t,r){for(var o=t.a,n=o;n.d=r,(n=n.e)!==o;);o=t.d,((n=t.b).d=o).b=n}function E(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),r=Math.abs(t[2])>Math.abs(t[r])?2:r}function k(t,r){t.f+=r.f,t.b.f+=r.b.f}function M(t,r,o){return t=t.a,r=r.a,o=o.a,r.b.a===t?o.b.a===t?i(r.a,o.a)?0>=l(o.b.a,r.a,o.a):0<=l(r.b.a,o.a,r.a):0>=l(o.b.a,t,o.a):o.b.a===t?0<=l(r.b.a,t,r.a):(r=a(r.b.a,t,r.a),(t=a(o.b.a,t,o.a))<=r)}function C(t){t.a.i=null;var r=t.e;r.a.c=r.c,r.c.a=r.a,t.e=null}function A(t,r){m(t.a),t.c=!1,(t.a=r).i=t}function O(t){for(var r=t.a.a;(t=ed(t)).a.a===r;);return t.c&&(A(t,r=g(ec(t).a.b,t.a.e)),t=ed(t)),t}function R(t,r,o){var n=new eu;return n.a=o,n.e=q(t.f,r.e,n),o.i=n}function P(t,r){switch(t.s){case 100130:return 0!=(1&r);case 100131:return 0!==r;case 100132:return 0<r;case 100133:return r<0;case 100134:return 2<=r||r<=-2}return!1}function L(t){var r=t.a,o=r.d;o.c=t.d,o.a=r,C(t)}function I(t,r,o){for(r=(t=r).a;t!==o;){t.c=!1;var n=ec(t),s=n.a;if(s.a!==r.a){if(!n.c){L(t);break}A(n,s=g(r.c.b,s.b))}r.c!==s&&(p(s.b.e,s),p(r,s)),L(t),r=n.a,t=n}return r}function D(t,r,o,n,s,i){for(var a=!0;R(t,r,o.b),(o=o.c)!==n;);for(null===s&&(s=ec(r).a.b.c);(o=(n=ec(r)).a.b).a===s.a;)o.c!==s&&(p(o.b.e,o),p(s.b.e,o)),n.f=r.f-o.f,n.d=P(t,n.f),r.b=!0,!a&&B(t,r)&&(k(o,s),C(r),m(s)),a=!1,r=n,s=o;r.b=!0,i&&G(t,r)}function F(t,r,o,n,s){var i=[r.g[0],r.g[1],r.g[2]];r.d=null,r.d=t.o&&t.o(i,o,n,t.c)||null,null===r.d&&(s?t.n||(Z(t,100156),t.n=!0):r.d=o[0])}function N(t,r,o){var n=[null,null,null,null];n[0]=r.a.d,n[1]=o.a.d,F(t,r.a,n,[.5,.5,0,0],!1),p(r,o)}function U(t,r,o,n,s){var i=Math.abs(r.b-t.b)+Math.abs(r.a-t.a),a=Math.abs(o.b-t.b)+Math.abs(o.a-t.a),l=s+1;n[s]=.5*a/(i+a),n[l]=.5*i/(i+a),t.g[0]+=n[s]*r.g[0]+n[l]*o.g[0],t.g[1]+=n[s]*r.g[1]+n[l]*o.g[1],t.g[2]+=n[s]*r.g[2]+n[l]*o.g[2]}function B(t,r){var o=ec(r),n=r.a,a=o.a;if(i(n.a,a.a)){if(0<l(a.b.a,n.a,a.a))return;if(s(n.a,a.a)){if(n.a!==a.a){var o=t.e,u=n.a.h;if(0<=u){var c=(o=o.b).d,d=o.e,h=o.c,f=h[u];c[f]=c[o.a],(h[c[f]]=f)<=--o.a&&(f<=1||i(d[c[f>>1]],d[c[f]])?ea:el)(o,f),d[u]=null,h[u]=o.b,o.b=u}else for(o.c[-(u+1)]=null;0<o.a&&null===o.c[o.d[o.a-1]];)--o.a;N(t,a.b.e,n)}}else y(a.b),p(n,a.b.e),r.b=o.b=!0}else{if(0>l(n.b.a,a.a,n.a))return;ed(r).b=r.b=!0,y(n.b),p(a.b.e,n)}return 1}function V(t,r){var o=ec(r),n=r.a,f=o.a,m=n.a,g=f.a,v=n.b.a,b=f.b.a,x=new K;if(l(v,t.a,m),l(b,t.a,g),!(m===g||Math.min(m.a,v.a)>Math.max(g.a,b.a))){if(i(m,g)){if(0<l(b,m,g))return}else if(0>l(v,g,m))return;var j,w,S=v,T=m,E=b,k=g;if(i(S,T)||(j=S,S=T,T=j),i(E,k)||(j=E,E=k,k=j),i(S,E)||(j=S,S=E,E=j,j=T,T=k,k=j),i(E,T)?i(T,k)?((j=a(S,E,T))+(w=a(E,T,k))<0&&(j=-j,w=-w),x.b=h(j,E.b,w,T.b)):((j=l(S,E,T))+(w=-l(S,k,T))<0&&(j=-j,w=-w),x.b=h(j,E.b,w,k.b)):x.b=(E.b+T.b)/2,u(S,T)||(j=S,S=T,T=j),u(E,k)||(j=E,E=k,k=j),u(S,E)||(j=S,S=E,E=j,j=T,T=k,k=j),u(E,T)?u(T,k)?((j=c(S,E,T))+(w=c(E,T,k))<0&&(j=-j,w=-w),x.a=h(j,E.a,w,T.a)):((j=d(S,E,T))+(w=-d(S,k,T))<0&&(j=-j,w=-w),x.a=h(j,E.a,w,k.a)):x.a=(E.a+T.a)/2,i(x,t.a)&&(x.b=t.a.b,x.a=t.a.a),S=i(m,g)?m:g,i(S,x)&&(x.b=S.b,x.a=S.a),s(x,m)||s(x,g))return B(t,r),0;if(!s(v,t.a)&&0<=l(v,t.a,x)||!s(b,t.a)&&0>=l(b,t.a,x)){if(b===t.a)y(n.b),p(f.b,n),n=ec(r=O(r)).a,I(t,ec(r),o),D(t,r,n.b.e,n,n,!0);else{if(v!==t.a)return 0<=l(v,t.a,x)&&(ed(r).b=r.b=!0,y(n.b),n.a.b=t.a.b,n.a.a=t.a.a),void(0>=l(b,t.a,x)&&(r.b=o.b=!0,y(f.b),f.a.b=t.a.b,f.a.a=t.a.a));for(y(f.b),p(n.e,f.b.e),g=(m=o=r).a.b.a;(m=ed(m)).a.b.a===g;);m=ec(r=m).a.b.c,o.a=f.b.e,D(t,r,(f=I(t,o,null)).c,n.b.c,m,!0)}return 1}y(n.b),y(f.b),p(f.b.e,n),n.a.b=x.b,n.a.a=x.a,n.a.h=et(t.e,n.a),n=n.a,f=[0,0,0,0],x=[m.d,v.d,g.d,b.d],n.g[0]=n.g[1]=n.g[2]=0,U(n,m,v,f,0),U(n,g,b,f,2),F(t,n,x,f,!0),ed(r).b=r.b=o.b=!0}}function G(t,r){for(var o=ec(r);;){for(;o.b;)o=ec(r=o);if(!r.b&&(null===(r=ed(o=r))||!r.b))break;r.b=!1;var n=r.a,s=o.a;if(a=n.b.a!==s.b.a)e:{var a,u=ec(a=r),c=a.a,d=u.a,h=void 0;if(i(c.b.a,d.b.a)){if(0>l(c.b.a,d.b.a,c.a)){a=!1;break e}ed(a).b=a.b=!0,h=y(c),p(d.b,h),h.d.c=a.d}else{if(0<l(d.b.a,c.b.a,d.a)){a=!1;break e}a.b=u.b=!0,h=y(d),p(c.e,d.b),h.b.d.c=a.d}a=!0}if(a&&(o.c?(C(o),m(s),s=(o=ec(r)).a):r.c&&(C(r),m(n),n=(r=ed(o)).a)),n.a!==s.a){if(n.b.a===s.b.a||r.c||o.c||n.b.a!==t.a&&s.b.a!==t.a)B(t,r);else if(V(t,r))break}n.a===s.a&&n.b.a===s.b.a&&(k(s,n),C(r),m(n),r=ed(o))}}function H(t,r){var o=new eu,n=f(t.b);n.a.b=4e150,n.a.a=r,n.b.a.b=-4e150,n.b.a.a=r,t.a=n.b.a,o.a=n,o.f=0,o.d=!1,o.c=!1,o.h=!0,o.b=!1,n=q(n=t.f,n.a,o),o.e=n}function z(t){this.a=new W,this.b=t,this.c=M}function q(t,r,o){for(;null!==(r=r.c).b&&!t.c(t.b,r.b,o););return t=new W(o,r.a,r),r.a.c=t,r.a=t}function W(t,r,o){this.b=t||null,this.a=r||this,this.c=o||this}function X(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Y(t,r){if(t.d!==r)for(;t.d!==r;)if(t.d<r)switch(t.d){case 0:Z(t,100151),t.u(null);break;case 1:Z(t,100152),t.t()}else switch(t.d){case 2:Z(t,100154),t.v();break;case 1:Z(t,100153),t.w()}}function Z(t,r){t.p&&t.p(r,t.c)}function Q(t,r){this.b=t||this,this.d=r||this,this.a=null,this.c=!1}function J(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function $(){this.c=new K,this.a=new Q,this.b=new J,this.d=new J,this.b.b=this.d,this.d.b=this.b}function K(t,r){this.e=t||this,this.f=r||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function ee(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new eo}function et(t,r){var o,n,s;return t.e?(2*(n=++(o=t.b).a)>o.f&&(o.f*=2,o.c=en(o.c,o.f+1)),0===o.b?s=n:(s=o.b,o.b=o.c[o.b]),o.e[s]=r,o.c[s]=n,o.d[n]=s,o.h&&el(o,n),s):(o=t.a++,t.c[o]=r,-(o+1))}function er(t){if(0===t.a)return ei(t.b);var r=t.c[t.d[t.a-1]];if(0!==t.b.a&&i(es(t.b),r))return ei(t.b);for(;--t.a,0<t.a&&null===t.c[t.d[t.a-1]];);return r}function eo(){this.d=en([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function en(t,r){for(var o=Array(r),n=0;n<t.length;n++)o[n]=t[n];for(;n<r;n++)o[n]=0;return o}function es(t){return t.e[t.d[1]]}function ei(t){var r=t.d,o=t.e,n=t.c,s=r[1],i=o[s];return 0<t.a&&(r[1]=r[t.a],n[r[1]]=1,o[s]=null,n[s]=t.b,t.b=s,0<--t.a&&ea(t,1)),i}function ea(t,r){for(var o=t.d,n=t.e,s=t.c,a=r,l=o[a];;){var u=a<<1,c=(u<t.a&&i(n[o[u+1]],n[o[u]])&&(u+=1),o[u]);if(u>t.a||i(n[l],n[c])){s[o[a]=l]=a;break}s[o[a]=c]=a,a=u}}function el(t,r){for(var o=t.d,n=t.e,s=t.c,a=r,l=o[a];;){var u=a>>1,c=o[u];if(0==u||i(n[c],n[l])){s[o[a]=l]=a;break}s[o[a]=c]=a,a=u}}function eu(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ec(t){return t.e.c.b}function ed(t){return t.e.a.b}(n=X.prototype).x=function(){Y(this,0)},n.B=function(t,r){switch(t){case 100142:return;case 100140:switch(r){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=r)}break;case 100141:return void(this.m=!!r);default:return void Z(this,100900)}Z(this,100901)},n.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Z(this,100900)}return!1},n.A=function(t,r,o){this.j[0]=t,this.j[1]=r,this.j[2]=o},n.z=function(t,r){var o=r||null;switch(t){case 100100:case 100106:this.h=o;break;case 100104:case 100110:this.l=o;break;case 100101:case 100107:this.k=o;break;case 100102:case 100108:this.i=o;break;case 100103:case 100109:this.p=o;break;case 100105:case 100111:this.o=o;break;case 100112:this.r=o;break;default:Z(this,100900)}},n.C=function(t,r){var o=!1,n=[0,0,0];Y(this,2);for(var s=0;s<3;++s){var i=t[s];i<-1e150&&(i=-1e150,o=!0),1e150<i&&(i=1e150,o=!0),n[s]=i}o&&Z(this,100155),null===(o=this.q)?p(o=f(this.b),o.b):(y(o),o=o.e),o.a.d=r,o.a.g[0]=n[0],o.a.g[1]=n[1],o.a.g[2]=n[2],o.f=1,o.b.f=-1,this.q=o},n.u=function(t){Y(this,0),this.d=1,this.b=new $,this.c=t},n.t=function(){Y(this,1),this.d=2,this.q=null},n.v=function(){Y(this,2),this.d=1},n.w=function(){Y(this,1),this.d=0;var t,r,o,n=this.j[0],a=this.j[1],u=this.j[2],c=!1,d=[n,a,u];if(0===n&&0===a&&0===u){for(var a=[-2e150,-2e150,-2e150],h=[2e150,2e150,2e150],u=[],f=[],n=(c=this.b.c).e;n!==c;n=n.e)for(var v=0;v<3;++v){var x=n.g[v];x<h[v]&&(h[v]=x,f[v]=n),x>a[v]&&(a[v]=x,u[v]=n)}if(a[1]-h[1]>a[n=0]-h[0]&&(n=1),h[n=a[2]-h[2]>a[n]-h[n]?2:n]>=a[n])d[0]=0,d[1]=0,d[2]=1;else{for(h=f[n],u=u[n],f=[a=0,0,0],h=[h.g[0]-u.g[0],h.g[1]-u.g[1],h.g[2]-u.g[2]],v=[0,0,0],n=c.e;n!==c;n=n.e)v[0]=n.g[0]-u.g[0],v[1]=n.g[1]-u.g[1],v[2]=n.g[2]-u.g[2],f[0]=h[1]*v[2]-h[2]*v[1],f[1]=h[2]*v[0]-h[0]*v[2],f[2]=h[0]*v[1]-h[1]*v[0],a<(x=f[0]*f[0]+f[1]*f[1]+f[2]*f[2])&&(a=x,d[0]=f[0],d[1]=f[1],d[2]=f[2]);a<=0&&(d[0]=d[1]=d[2]=0,d[E(h)]=1)}c=!0}for(f=E(d),n=this.b.c,a=(f+1)%3,u=(f+2)%3,f=0<d[f]?1:-1,d=n.e;d!==n;d=d.e)d.b=d.g[a],d.a=f*d.g[u];if(c){for(d=0,n=(c=this.b.a).b;n!==c;n=n.b)if(!((a=n.a).f<=0))for(;d+=(a.a.b-a.b.a.b)*(a.a.a+a.b.a.a),(a=a.e)!==n.a;);if(d<0)for(c=(d=this.b.c).e;c!==d;c=c.e)c.a=-c.a}for(this.n=!1,n=(d=this.b.b).h;n!==d;n=c)c=n.h,a=n.e,s(n.a,n.b.a)&&n.e.e!==n&&(N(this,a,n),m(n),a=(n=a).e),a.e===n&&(a!==n&&(a!==c&&a!==c.b||(c=c.h),m(a)),n!==c&&n!==c.b||(c=c.h),m(n));for(this.e=d=new ee,n=(c=this.b.c).e;n!==c;n=n.e)n.h=et(d,n);var j=d;j.d=[];for(var T=0;T<j.a;T++)j.d[T]=T;j.d.sort((t=j.c,function(r,o){return i(t[r],t[o])?1:-1})),j.e=!0;for(var M=j.b,L=M.a;1<=L;--L)ea(M,L);for(M.h=!0,this.f=new z(this),H(this,-4e150),H(this,4e150);null!==(d=er(this.e));){for(;;){e:if(0===(n=this.e).a)c=es(n.b);else if(c=n.c[n.d[n.a-1]],0!==n.b.a&&i(n=es(n.b),c)){c=n;break e}if(null===c||!s(c,d))break;c=er(this.e),N(this,d.c,c.c)}!function t(r,o){for(var n,a=(r.a=o).c;null===a.i;)if((a=a.c)===o.c){var a=r,u=o;(v=new eu).a=u.c.b;for(var c=(d=a.f).a;null!==(c=c.a).b&&!d.c(d.b,v,c.b););var d,h,f=ec(d=c.b),v=d.a,c=f.a;return void(0===l(v.b.a,u,v.a)?s((v=d.a).a,u)||s(v.b.a,u)||(y(v.b),d.c&&(m(v.c),d.c=!1),p(u.c,v),t(a,u)):(h=i(c.b.a,v.b.a)?d:f,f=void 0,d.d||h.c?(f=h===d?g(u.c.b,v.e):g(c.b.c.b,u.c).b,h.c?A(h,f):((d=R(v=a,d,f)).f=ed(d).f+d.a.f,d.d=P(v,d.f)),t(a,u)):D(a,d,u.c,u.c,null,!0)))}d=(v=ec(a=O(a.i))).a,(v=I(r,v,null)).c===d?(v=(d=v).c,c=ec(a),f=a.a,h=c.a,n=!1,f.b.a!==h.b.a&&V(r,a),s(f.a,r.a)&&(p(v.b.e,f),v=ec(a=O(a)).a,I(r,ec(a),c),n=!0),s(h.a,r.a)&&(p(d,h.b.e),d=I(r,c,null),n=!0),n?D(r,a,d.c,v,v,!0):(u=i(h.a,f.a)?h.b.e:f,D(r,a,u=g(d.c.b,u),u.c,u.c,!1),u.b.i.c=!0,G(r,a))):D(r,a,v.c,d,d,!0)}(this,d)}for(this.a=this.f.a.a.b.a.a,d=0;null!==(c=this.f.a.a.b);)c.h||++d,C(c);for(this.f=null,(d=this.e).b=null,d.d=null,this.e=d.c=null,n=(d=this.b).a.b;n!==d.a;n=c)c=n.b,(n=n.a).e.e===n&&(k(n.c,n),m(n));if(!this.n){if(d=this.b,this.m)for(n=d.b.h;n!==d.b;n=c)c=n.h,n.b.d.c!==n.d.c?n.f=n.d.c?1:-1:m(n);else for(n=d.a.b;n!==d.a;n=c)if(c=n.b,n.c){for(n=n.a;i(n.b.a,n.a);n=n.c.b);for(;i(n.a,n.b.a);n=n.e);for(a=n.c.b,u=void 0;n.e!==a;)if(i(n.b.a,a.a)){for(;a.e!==n&&(i((o=a.e).b.a,o.a)||0>=l(a.a,a.b.a,a.e.b.a));)a=(u=g(a.e,a)).b;a=a.c.b}else{for(;a.e!==n&&(i((r=n.c.b).a,r.b.a)||0<=l(n.b.a,n.a,n.c.b.a));)n=(u=g(n,n.c.b)).b;n=n.e}for(;a.e.e!==n;)a=(u=g(a.e,a)).b}if(this.h||this.i||this.k||this.l){if(this.m){for(c=(d=this.b).a.b;c!==d.a;c=c.b)if(c.c){for(this.h&&this.h(2,this.c),n=c.a;this.k&&this.k(n.a.d,this.c),(n=n.e)!==c.a;);this.i&&this.i(this.c)}}else{for(d=this.b,c=!!this.l,n=!1,a=-1,u=d.a.d;u!==d.a;u=u.d)if(u.c)for(n||(this.h&&this.h(4,this.c),n=!0),f=u.a;c&&a!==(h=f.b.d.c?0:1)&&(a=h,this.l&&this.l(!!a,this.c)),this.k&&this.k(f.a.d,this.c),(f=f.e)!==u.a;);n&&this.i&&this.i(this.c)}}if(this.r){for(n=(d=this.b).a.b;n!==d.a;n=c)if(c=n.b,!n.c){for(u=(a=n.a).e,f=void 0;u=(f=u).e,(f.d=null)===f.b.d&&(f.c===f?S(f.a,null):(f.a.c=f.c,b(f,f.b.e)),(h=f.b).c===h?S(h.a,null):(h.a.c=h.c,b(h,h.b.e)),w(f)),f!==a;);a=n.d,((n=n.b).d=a).b=n}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,void 0!==r&&(r.exports=this.libtess)},{}],246:[function(t,r,o){function n(t,r,o,n){for(var s=t[r++],i=1<<s,a=1+i,l=1+a,u=s+1,c=(1<<u)-1,d=0,h=0,f=0,p=t[r++],m=new Int32Array(4096),y=null;;){for(;d<16&&0!==p;)h|=t[r++]<<d,d+=8,1===p?p=t[r++]:--p;if(d<u)break;var g=h&c;if(h>>=u,d-=u,g==i)l=1+a,c=(1<<(u=s+1))-1,y=null;else{if(g==a)break;for(var v=g<l?g:y,b=0,x=v;i<x;)x=m[x]>>8,++b;var j=x;if(n<f+b+(v!==g?1:0))return void console.log("Warning, gif stream longer than expected.");o[f++]=j;var w=f+=b;for(v!==g&&(o[f++]=j),x=v;b--;)x=m[x],o[--w]=255&x,x>>=8;null!==y&&l<4096&&(m[l++]=y<<8|j,c+1<=l&&u<12&&(++u,c=c<<1|1)),y=g}}f!==n&&console.log("Warning, gif stream shorter than expected.")}try{o.GifWriter=function(t,r,o,n){var s=0,i=void 0===(n=void 0===n?{}:n).loop?null:n.loop,a=void 0===n.palette?null:n.palette;if(r<=0||o<=0||65535<r||65535<o)throw Error("Width/Height invalid.");function l(t){if((t=t.length)<2||256<t||t&t-1)throw Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}t[s++]=71,t[s++]=73,t[s++]=70,t[s++]=56,t[s++]=57,t[s++]=97;var u=0,c=0;if(null!==a){for(var d=l(a);d>>=1;)++u;if(d=1<<u,--u,void 0!==n.background){if(d<=(c=n.background))throw Error("Background index out of range.");if(0===c)throw Error("Background index explicitly passed as 0.")}}if(t[s++]=255&r,t[s++]=r>>8&255,t[s++]=255&o,t[s++]=o>>8&255,t[s++]=(null!==a?128:0)|u,t[s++]=c,t[s++]=0,null!==a)for(var h=0,f=a.length;h<f;++h){var p=a[h];t[s++]=p>>16&255,t[s++]=p>>8&255,t[s++]=255&p}if(null!==i){if(i<0||65535<i)throw Error("Loop count invalid.");t[s++]=33,t[s++]=255,t[s++]=11,t[s++]=78,t[s++]=69,t[s++]=84,t[s++]=83,t[s++]=67,t[s++]=65,t[s++]=80,t[s++]=69,t[s++]=50,t[s++]=46,t[s++]=48,t[s++]=3,t[s++]=1,t[s++]=255&i,t[s++]=i>>8&255,t[s++]=0}var m=!1;this.addFrame=function(r,o,n,i,u,c){if(!0===m&&(--s,m=!1),c=void 0===c?{}:c,r<0||o<0||65535<r||65535<o)throw Error("x/y invalid.");if(n<=0||i<=0||65535<n||65535<i)throw Error("Width/Height invalid.");if(u.length<n*i)throw Error("Not enough pixels for the frame size.");var d=!0,h=c.palette;if(null==h&&(d=!1,h=a),null==h)throw Error("Must supply either a local or global palette.");for(var f=l(h),p=0;f>>=1;)++p;var f=1<<p,y=void 0===c.delay?0:c.delay,g=void 0===c.disposal?0:c.disposal;if(g<0||3<g)throw Error("Disposal out of range.");var v=!1,b=0;if(void 0!==c.transparent&&null!==c.transparent&&(v=!0,(b=c.transparent)<0||f<=b))throw Error("Transparent color index.");if((0!==g||v||0!==y)&&(t[s++]=33,t[s++]=249,t[s++]=4,t[s++]=g<<2|(!0===v?1:0),t[s++]=255&y,t[s++]=y>>8&255,t[s++]=b,t[s++]=0),t[s++]=44,t[s++]=255&r,t[s++]=r>>8&255,t[s++]=255&o,t[s++]=o>>8&255,t[s++]=255&n,t[s++]=n>>8&255,t[s++]=255&i,t[s++]=i>>8&255,t[s++]=!0===d?128|p-1:0,!0===d)for(var x=0,j=h.length;x<j;++x){var w=h[x];t[s++]=w>>16&255,t[s++]=w>>8&255,t[s++]=255&w}return s=function(t,r,o,n){t[r++]=o;var s=r++,i=1<<o,a=i-1,l=1+i,u=1+l,c=o+1,d=0,h=0;function f(o){for(;o<=d;)t[r++]=255&h,h>>=8,d-=8,r===s+256&&(t[s]=255,s=r++)}function p(t){h|=t<<d,d+=c,f(8)}var m=n[0]&a,y={};p(i);for(var g=1,v=n.length;g<v;++g){var b=n[g]&a,x=m<<8|b,j=y[x];if(void 0===j){for(h|=m<<d,d+=c;8<=d;)t[r++]=255&h,h>>=8,d-=8,r===s+256&&(t[s]=255,s=r++);4096===u?(p(i),u=1+l,c=o+1,y={}):(1<<c<=u&&++c,y[x]=u++),m=b}else m=j}return p(m),p(l),f(1),s+1===r?t[s]=0:(t[s]=r-s-1,t[r++]=0),r}(t,s,p<2?2:p,u)},this.end=function(){return!1===m&&(t[s++]=59,m=!0),s},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(r){t=r},this.getOutputBufferPosition=function(){return s},this.setOutputBufferPosition=function(t){s=t}},o.GifReader=function(t){var r=0;if(71!==t[r++]||73!==t[r++]||70!==t[r++]||56!==t[r++]||56!=(t[r++]+1&253)||97!==t[r++])throw Error("Invalid GIF 87a/89a header.");var o=t[r++]|t[r++]<<8,s=t[r++]|t[r++]<<8,i=t[r++],a=1<<1+(7&i),l=(t[r++],t[r++],null),u=null,c=(i>>7&&(l=r,r+=3*(u=a)),!0),d=[],h=0,f=null,p=0,m=null;for(this.width=o,this.height=s;c&&r<t.length;)switch(t[r++]){case 33:switch(t[r++]){case 255:if(11!==t[r]||78==t[r+1]&&69==t[r+2]&&84==t[r+3]&&83==t[r+4]&&67==t[r+5]&&65==t[r+6]&&80==t[r+7]&&69==t[r+8]&&50==t[r+9]&&46==t[r+10]&&48==t[r+11]&&3==t[r+12]&&1==t[r+13]&&0==t[r+16])r+=14,m=t[r++]|t[r++]<<8,r++;else for(r+=12;;){if(!(0<=(g=t[r++])))throw Error("Invalid block size");if(0===g)break;r+=g}break;case 249:if(4!==t[r++]||0!==t[r+4])throw Error("Invalid graphics extension block.");var y=t[r++],h=t[r++]|t[r++]<<8,f=t[r++];0==(1&y)&&(f=null),p=y>>2&7,r++;break;case 254:for(;;){if(!(0<=(g=t[r++])))throw Error("Invalid block size");if(0===g)break;r+=g}break;default:throw Error("Unknown graphic control label: 0x"+t[r-1].toString(16))}break;case 44:var g,v=t[r++]|t[r++]<<8,b=t[r++]|t[r++]<<8,x=t[r++]|t[r++]<<8,j=t[r++]|t[r++]<<8,w=t[r++],S=w>>6&1,T=1<<1+(7&w),E=l,k=u,M=!1,w=(w>>7&&(M=!0,E=r,r+=3*(k=T)),r);for(r++;;){if(!(0<=(g=t[r++])))throw Error("Invalid block size");if(0===g)break;r+=g}d.push({x:v,y:b,width:x,height:j,has_local_palette:M,palette_offset:E,palette_size:k,data_offset:w,data_length:r-w,transparent_index:f,interlaced:!!S,delay:h,disposal:p});break;case 59:c=!1;break;default:throw Error("Unknown gif block: 0x"+t[r-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(t){if(t<0||t>=d.length)throw Error("Frame index out of range.");return d[t]},this.decodeAndBlitFrameBGRA=function(r,s){for(var r=this.frameInfo(r),i=r.width*r.height,a=new Uint8Array(i),l=(n(t,r.data_offset,a,i),r.palette_offset),u=r.transparent_index,c=(null===u&&(u=256),r.width),d=o-c,h=c,f=4*(r.y*o+r.x),p=4*((r.y+r.height)*o+r.x),m=f,y=4*d,g=(!0===r.interlaced&&(y+=4*o*7),8),v=0,b=a.length;v<b;++v){var x,j,w=a[v];0===h&&(h=c,p<=(m+=y)&&(y=4*d+4*o*(g-1),m=f+(c+d)*(g<<1),g>>=1)),w===u?m+=4:(x=t[l+3*w],j=t[l+3*w+1],w=t[l+3*w+2],s[m++]=w,s[m++]=j,s[m++]=x,s[m++]=255),--h}},this.decodeAndBlitFrameRGBA=function(r,s){for(var r=this.frameInfo(r),i=r.width*r.height,a=new Uint8Array(i),l=(n(t,r.data_offset,a,i),r.palette_offset),u=r.transparent_index,c=(null===u&&(u=256),r.width),d=o-c,h=c,f=4*(r.y*o+r.x),p=4*((r.y+r.height)*o+r.x),m=f,y=4*d,g=(!0===r.interlaced&&(y+=4*o*7),8),v=0,b=a.length;v<b;++v){var x,j,w=a[v];0===h&&(h=c,p<=(m+=y)&&(y=4*d+4*o*(g-1),m=f+(c+d)*(g<<1),g>>=1)),w===u?m+=4:(x=t[l+3*w],j=t[l+3*w+1],w=t[l+3*w+2],s[m++]=x,s[m++]=j,s[m++]=w,s[m++]=255),--h}}}}catch(t){}},{}],247:[function(t,r,o){(function(n){var s;s=function(r){function o(t){if(null==this)throw TypeError();var r,o=String(this),n=o.length,t=t?Number(t):0;if(!((t=t!=t?0:t)<0||n<=t))return 55296<=(r=o.charCodeAt(t))&&r<=56319&&t+1<n&&56320<=(n=o.charCodeAt(t+1))&&n<=57343?1024*(r-55296)+n-56320+65536:r}function s(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function i(t,r){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new s,this.dtree=new s}String.prototype.codePointAt||((I=function(){try{var t={},r=Object.defineProperty,o=r(t,t,t)&&r}catch(t){}return o}())?I(String.prototype,"codePointAt",{value:o,configurable:!0,writable:!0}):String.prototype.codePointAt=o);var a=new s,l=new s,u=new Uint8Array(30),c=new Uint16Array(30),d=new Uint8Array(30),h=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=new s,m=new Uint8Array(320);function y(t,r,o,n){for(var s,i=0;i<o;++i)t[i]=0;for(i=0;i<30-o;++i)t[i+o]=i/o|0;for(s=n,i=0;i<30;++i)r[i]=s,s+=1<<t[i]}var g=new Uint16Array(16);function v(t,r,o,n){for(var s,i=0;i<16;++i)t.table[i]=0;for(i=0;i<n;++i)t.table[r[o+i]]++;for(i=s=t.table[0]=0;i<16;++i)g[i]=s,s+=t.table[i];for(i=0;i<n;++i)r[o+i]&&(t.trans[g[r[o+i]]++]=i)}function b(t,r,o){if(!r)return o;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=t.tag&65535>>>16-r;return t.tag>>>=r,t.bitcount-=r,n+o}function x(t,r){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;for(var o=0,n=0,s=0,i=t.tag;n=2*n+(1&i),i>>>=1,o+=r.table[++s],0<=(n-=r.table[s]););return t.tag=i,t.bitcount-=s,r.trans[o+n]}function j(t,r,o){for(;;){var n=x(t,r);if(256===n)return 0;if(n<256)t.dest[t.destLen++]=n;else for(var s,i=b(t,u[n-=257],c[n]),n=x(t,o),a=s=t.destLen-b(t,d[n],h[n]);a<s+i;++a)t.dest[t.destLen++]=t.dest[a]}}for(var w=0;w<7;++w)a.table[w]=0;for(a.table[7]=24,a.table[8]=152,a.table[9]=112,w=0;w<24;++w)a.trans[w]=256+w;for(w=0;w<144;++w)a.trans[24+w]=w;for(w=0;w<8;++w)a.trans[168+w]=280+w;for(w=0;w<112;++w)a.trans[176+w]=144+w;for(w=0;w<5;++w)l.table[w]=0;for(l.table[5]=32,w=0;w<32;++w)l.trans[w]=w;y(u,c,4,3),y(d,h,2,1),u[28]=0,c[28]=258;var S=function(t,r){var o,n,s,u=new i(t,r);do{switch(s=void 0,(n=u).bitcount--||(n.tag=n.source[n.sourceIndex++],n.bitcount=7),s=1&n.tag,n.tag>>>=1,n=s,b(u,2,0)){case 0:o=function(t){for(var r,o;8<t.bitcount;)t.sourceIndex--,t.bitcount-=8;if((r=256*t.source[t.sourceIndex+1]+t.source[t.sourceIndex])!==(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return -3;for(t.sourceIndex+=4,o=r;o;--o)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,0}(u);break;case 1:o=j(u,a,l);break;case 2:M=k=E=C=c=T=S=w=g=y=h=d=void 0;for(var c,d=u,h=u.ltree,y=u.dtree,g=b(d,5,257),w=b(d,5,1),S=b(d,4,4),T=0;T<19;++T)m[T]=0;for(T=0;T<S;++T){var E=b(d,3,0);m[f[T]]=E}for(v(p,m,0,19),c=0;c<g+w;){var k=x(d,p);switch(k){case 16:for(var M=m[c-1],C=b(d,2,3);C;--C)m[c++]=M;break;case 17:for(C=b(d,3,3);C;--C)m[c++]=0;break;case 18:for(C=b(d,7,11);C;--C)m[c++]=0;break;default:m[c++]=k}}v(h,m,0,g),v(y,m,g,w),o=j(u,u.ltree,u.dtree);break;default:o=-3}if(0!==o)throw Error("Data error")}while(!n)return u.destLen<u.dest.length?"function"==typeof u.dest.slice?u.dest.slice(0,u.destLen):u.dest.subarray(0,u.destLen):u.dest};function T(t,r,o,n,s){return Math.pow(1-s,3)*t+3*Math.pow(1-s,2)*s*r+3*(1-s)*Math.pow(s,2)*o+Math.pow(s,3)*n}function E(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function k(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function M(t){throw Error(t)}function C(t,r){t||M(r)}E.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},E.prototype.addPoint=function(t,r){"number"==typeof t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),"number"==typeof r&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=r,this.y2=r),r<this.y1&&(this.y1=r),r>this.y2&&(this.y2=r))},E.prototype.addX=function(t){this.addPoint(t,null)},E.prototype.addY=function(t){this.addPoint(null,t)},E.prototype.addBezier=function(t,r,o,n,s,i,a,l){var u=[t,r],c=[o,n],d=[s,i],h=[a,l];this.addPoint(t,r),this.addPoint(a,l);for(var f=0;f<=1;f++){var p,m=6*u[f]-12*c[f]+6*d[f],y=-3*u[f]+9*c[f]-9*d[f]+3*h[f],g=3*c[f]-3*u[f];0==y?0==m||0<(p=-g/m)&&p<1&&(0===f&&this.addX(T(u[f],c[f],d[f],h[f],p)),1===f&&this.addY(T(u[f],c[f],d[f],h[f],p))):(p=Math.pow(m,2)-4*g*y)<0||(0<(g=(-m+Math.sqrt(p))/(2*y))&&g<1&&(0===f&&this.addX(T(u[f],c[f],d[f],h[f],g)),1===f&&this.addY(T(u[f],c[f],d[f],h[f],g))),0<(g=(-m-Math.sqrt(p))/(2*y))&&g<1&&(0===f&&this.addX(T(u[f],c[f],d[f],h[f],g)),1===f&&this.addY(T(u[f],c[f],d[f],h[f],g))))}},E.prototype.addQuad=function(t,r,o,n,s,i){o=t+2/3*(o-t),n=r+2/3*(n-r),this.addBezier(t,r,o,n,o+1/3*(s-t),n+1/3*(i-r),s,i)},k.prototype.moveTo=function(t,r){this.commands.push({type:"M",x:t,y:r})},k.prototype.lineTo=function(t,r){this.commands.push({type:"L",x:t,y:r})},k.prototype.curveTo=k.prototype.bezierCurveTo=function(t,r,o,n,s,i){this.commands.push({type:"C",x1:t,y1:r,x2:o,y2:n,x:s,y:i})},k.prototype.quadTo=k.prototype.quadraticCurveTo=function(t,r,o,n){this.commands.push({type:"Q",x1:t,y1:r,x:o,y:n})},k.prototype.close=k.prototype.closePath=function(){this.commands.push({type:"Z"})},k.prototype.extend=function(t){var r;if(t.commands)t=t.commands;else if(t instanceof E)return r=t,this.moveTo(r.x1,r.y1),this.lineTo(r.x2,r.y1),this.lineTo(r.x2,r.y2),this.lineTo(r.x1,r.y2),void this.close();Array.prototype.push.apply(this.commands,t)},k.prototype.getBoundingBox=function(){for(var t=new E,r=0,o=0,n=0,s=0,i=0;i<this.commands.length;i++){var a=this.commands[i];switch(a.type){case"M":t.addPoint(a.x,a.y),r=n=a.x,o=s=a.y;break;case"L":t.addPoint(a.x,a.y),n=a.x,s=a.y;break;case"Q":t.addQuad(n,s,a.x1,a.y1,a.x,a.y),n=a.x,s=a.y;break;case"C":t.addBezier(n,s,a.x1,a.y1,a.x2,a.y2,a.x,a.y),n=a.x,s=a.y;break;case"Z":n=r,s=o;break;default:throw Error("Unexpected path command "+a.type)}}return t.isEmpty()&&t.addPoint(0,0),t},k.prototype.draw=function(t){t.beginPath();for(var r=0;r<this.commands.length;r+=1){var o=this.commands[r];"M"===o.type?t.moveTo(o.x,o.y):"L"===o.type?t.lineTo(o.x,o.y):"C"===o.type?t.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?t.quadraticCurveTo(o.x1,o.y1,o.x,o.y):"Z"===o.type&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},k.prototype.toPathData=function(t){function r(){for(var r=arguments,o="",n=0;n<arguments.length;n+=1){var s=r[n];0<=s&&0<n&&(o+=" "),o+=Math.round(s)===s?""+Math.round(s):s.toFixed(t)}return o}t=void 0!==t?t:2;for(var o="",n=0;n<this.commands.length;n+=1){var s=this.commands[n];"M"===s.type?o+="M"+r(s.x,s.y):"L"===s.type?o+="L"+r(s.x,s.y):"C"===s.type?o+="C"+r(s.x1,s.y1,s.x2,s.y2,s.x,s.y):"Q"===s.type?o+="Q"+r(s.x1,s.y1,s.x,s.y):"Z"===s.type&&(o+="Z")}return o},k.prototype.toSVG=function(t){var r=(r='<path d="')+this.toPathData(t)+'"';return this.fill&&"black"!==this.fill&&(null===this.fill?r+=' fill="none"':r+=' fill="'+this.fill+'"'),this.stroke&&(r+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),r+="/>"},k.prototype.toDOMElement=function(t){var t=this.toPathData(t),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var A={fail:M,argument:C,assert:C},O={},R={},P={};function L(t){return function(){return t}}R.BYTE=function(t){return A.argument(0<=t&&t<=255,"Byte value should be between 0 and 255."),[t]},P.BYTE=L(1),R.CHAR=function(t){return[t.charCodeAt(0)]},P.CHAR=L(1),R.CHARARRAY=function(t){for(var r=[],o=0;o<t.length;o+=1)r[o]=t.charCodeAt(o);return r},P.CHARARRAY=function(t){return t.length},R.USHORT=function(t){return[t>>8&255,255&t]},P.USHORT=L(2),R.SHORT=function(t){return[(t=32768<=t?-(65536-t):t)>>8&255,255&t]},P.SHORT=L(2),R.UINT24=function(t){return[t>>16&255,t>>8&255,255&t]},P.UINT24=L(3),R.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},P.ULONG=L(4),R.LONG=function(t){return[(t=2147483648<=t?-(4294967296-t):t)>>24&255,t>>16&255,t>>8&255,255&t]},P.LONG=L(4),R.FIXED=R.ULONG,P.FIXED=P.ULONG,R.FWORD=R.SHORT,P.FWORD=P.SHORT,R.UFWORD=R.USHORT,P.UFWORD=P.USHORT,R.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t]},P.LONGDATETIME=L(8),R.TAG=function(t){return A.argument(4===t.length,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]},P.TAG=L(4),R.Card8=R.BYTE,P.Card8=P.BYTE,R.Card16=R.USHORT,P.Card16=P.USHORT,R.OffSize=R.BYTE,P.OffSize=P.BYTE,R.SID=R.USHORT,P.SID=P.USHORT,R.NUMBER=function(t){return -107<=t&&t<=107?[t+139]:108<=t&&t<=1131?[247+((t-=108)>>8),255&t]:-1131<=t&&t<=-108?[251+((t=-t-108)>>8),255&t]:-32768<=t&&t<=32767?R.NUMBER16(t):R.NUMBER32(t)},P.NUMBER=function(t){return R.NUMBER(t).length},R.NUMBER16=function(t){return[28,t>>8&255,255&t]},P.NUMBER16=L(3),R.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,255&t]},P.NUMBER32=L(5),R.REAL=function(t){for(var r=t.toString(),o=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(r),n=(o&&(r=(Math.round(t*(o=parseFloat("1e"+((o[2]?+o[2]:0)+o[1].length))))/o).toString()),""),s=0,i=r.length;s<i;s+=1){var a=r[s];n+="e"===a?"-"===r[++s]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var l=[30],u=0,c=(n+=1&n.length?"f":"ff").length;u<c;u+=2)l.push(parseInt(n.substr(u,2),16));return l},P.REAL=function(t){return R.REAL(t).length},R.NAME=R.CHARARRAY,P.NAME=P.CHARARRAY,R.STRING=R.CHARARRAY,P.STRING=P.CHARARRAY,O.UTF8=function(t,r,o){for(var n=[],s=0;s<o;s++,r+=1)n[s]=t.getUint8(r);return String.fromCharCode.apply(null,n)},O.UTF16=function(t,r,o){for(var n=[],s=o/2,i=0;i<s;i++,r+=2)n[i]=t.getUint16(r);return String.fromCharCode.apply(null,n)},R.UTF16=function(t){for(var r=[],o=0;o<t.length;o+=1){var n=t.charCodeAt(o);r[r.length]=n>>8&255,r[r.length]=255&n}return r},P.UTF16=function(t){return 2*t.length};var I,D,F={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc†\xb0\xa2\xa3\xa7•\xb6\xdf\xaeŠ™\xb4\xa8≠Ž\xd8∞\xb1≤≥∆\xb5∂∑∏š∫\xaa\xbaΩž\xf8\xbf\xa1\xac√ƒ≈Ć\xabČ…\xa0\xc0\xc3\xd5ŒœĐ—“”‘’\xf7◊\xa9⁄€‹›\xc6\xbb–\xb7‚„‰\xc2ć\xc1č\xc8\xcd\xce\xcf\xcc\xd3\xd4đ\xd2\xda\xdb\xd9ıˆ˜\xafπ\xcb˚\xb8\xca\xe6ˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†\xb0Ґ\xa3\xa7•\xb6І\xae\xa9™Ђђ≠Ѓѓ∞\xb1≤≥і\xb5ґЈЄєЇїЉљЊњјЅ\xac√ƒ≈∆\xab\xbb…\xa0ЋћЌќѕ–—“”‘’\xf7„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc†\xb0\xa2\xa3\xa7•\xb6\xdf\xae\xa9™\xb4\xa8≠\xc6\xd8Ḃ\xb1≤≥ḃĊċḊḋḞḟĠġṀ\xe6\xf8ṁṖṗɼƒſṠ\xab\xbb…\xa0\xc0\xc3\xd5Œœ–—“”‘’ṡẛ\xffŸṪ€‹›Ŷŷṫ\xb7Ỳỳ⁊\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4♣\xd2\xda\xdb\xd9ı\xdd\xfdŴŵẄẅẀẁẂẃ","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc΅\xe0\xe2\xe4΄\xa8\xe7\xe9\xe8\xea\xeb\xa3™\xee\xef•\xbd‰\xf4\xf6\xa6€\xf9\xfb\xfc†ΓΔΘΛΞΠ\xdf\xae\xa9ΣΪ\xa7≠\xb0\xb7Α\xb1≤≥\xa5ΒΕΖΗΙΚΜΦΫΨΩάΝ\xacΟΡ≈Τ\xab\xbb…\xa0ΥΧΆΈœ–―“”‘’\xf7ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7•\xb6\xdf\xae\xa9™\xb4\xa8≠\xc6\xd8∞\xb1≤≥\xa5\xb5∂∑∏π∫\xaa\xbaΩ\xe6\xf8\xbf\xa1\xac√ƒ≈∆\xab\xbb…\xa0\xc0\xc3\xd5Œœ–—“”‘’\xf7◊\xffŸ⁄€\xd0\xf0\xde\xfe\xfd\xb7‚„‰\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\xd2\xda\xdb\xd9ıˆ˜\xaf˘˙˚\xb8˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ\xb0ᒡᒥᒦ•\xb6ᒧ\xae\xa9™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ…\xa0ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"\xc4Āā\xc9Ą\xd6\xdc\xe1ąČ\xe4čĆć\xe9ŹźĎ\xedďĒēĖ\xf3ė\xf4\xf6\xf5\xfaĚě\xfc†\xb0Ę\xa3\xa7•\xb6\xdf\xae\xa9™ę\xa8≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ\xac√ńŇ∆\xab\xbb…\xa0ňŐ\xd5őŌ–—“”‘’\xf7◊ōŔŕŘ‹›řŖŗŠ‚„šŚś\xc1Ťť\xcdŽžŪ\xd3\xd4ūŮ\xdaůŰűŲų\xdd\xfdķŻŁżĢˇ",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc†\xb0\xa2\xa3\xa7•\xb6\xdf\xae\xa9™\xb4\xa8≠\xc6\xd8∞\xb1≤≥\xa5\xb5∂∑∏π∫\xaa\xbaΩ\xe6\xf8\xbf\xa1\xac√ƒ≈∆\xab\xbb…\xa0\xc0\xc3\xd5Œœ–—“”‘’\xf7◊\xffŸ⁄€‹›ﬁﬂ‡\xb7‚„‰\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\xd2\xda\xdb\xd9ıˆ˜\xaf˘˙˚\xb8˝˛ˇ","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc†\xb0\xa2\xa3\xa7•\xb6\xdf\xae\xa9™\xb4\xa8≠ĂȘ∞\xb1≤≥\xa5\xb5∂∑∏π∫\xaa\xbaΩăș\xbf\xa1\xac√ƒ≈∆\xab\xbb…\xa0\xc0\xc3\xd5Œœ–—“”‘’\xf7◊\xffŸ⁄€‹›Țț‡\xb7‚„‰\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\xd2\xda\xdb\xd9ıˆ˜\xaf˘˙˚\xb8˝˛ˇ","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc†\xb0\xa2\xa3\xa7•\xb6\xdf\xae\xa9™\xb4\xa8≠\xc6\xd8∞\xb1≤≥\xa5\xb5∂∑∏π∫\xaa\xbaΩ\xe6\xf8\xbf\xa1\xac√ƒ≈∆\xab\xbb…\xa0\xc0\xc3\xd5Œœ–—“”‘’\xf7◊\xffŸĞğİıŞş‡\xb7‚„‰\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\xd2\xda\xdb\xd9ˆ˜\xaf˘˙˚\xb8˝˛ˇ"},N=(O.MACSTRING=function(t,r,o,n){var s=F[n];if(void 0!==s){for(var i="",a=0;a<o;a++){var l=t.getUint8(r+a);i+=l<=127?String.fromCharCode(l):s[127&l]}return i}},"function"==typeof WeakMap&&new WeakMap);function U(t){return -128<=t&&t<=127}R.MACSTRING=function(t,r){var o=function(t){if(!D)for(var r in D={},F)D[r]=new String(r);var o=D[t];if(void 0!==o){if(N){var n=N.get(o);if(void 0!==n)return n}var s=F[t];if(void 0!==s){for(var i={},a=0;a<s.length;a++)i[s.charCodeAt(a)]=a+128;return N&&N.set(o,i),i}}}(r);if(void 0!==o){for(var n=[],s=0;s<t.length;s++){var i=t.charCodeAt(s);if(128<=i&&void 0===(i=o[i]))return;n[s]=i}return n}},P.MACSTRING=function(t,r){return void 0!==(t=R.MACSTRING(t,r))?t.length:0},R.VARDELTAS=function(t){for(var r=0,o=[];r<t.length;)var n=t[r],r=(0===n?function(t,r,o){for(var n=0,s=t.length;r<s&&n<64&&0===t[r];)++r,++n;return o.push(128|n-1),r}:-128<=n&&n<=127?function(t,r,o){for(var n=0,s=t.length,i=r;i<s&&n<64;){var a=t[i];if(!U(a)||0===a&&i+1<s&&0===t[i+1])break;++i,++n}o.push(n-1);for(var l=r;l<i;++l)o.push(t[l]+256&255);return i}:function(t,r,o){for(var n=0,s=t.length,i=r;i<s&&n<64;){var a=t[i];if(0===a||U(a)&&i+1<s&&U(t[i+1]))break;++i,++n}o.push(64|n-1);for(var l=r;l<i;++l){var u=t[l];o.push(u+65536>>8&255,u+256&255)}return i})(t,r,o);return o},R.INDEX=function(t){for(var r=1,o=[r],n=[],s=0;s<t.length;s+=1){var i=R.OBJECT(t[s]);Array.prototype.push.apply(n,i),r+=i.length,o.push(r)}if(0===n.length)return[0,0];for(var a=[],l=1+Math.floor(Math.log(r)/Math.log(2))/8|0,u=[void 0,R.BYTE,R.USHORT,R.UINT24,R.ULONG][l],c=0;c<o.length;c+=1){var d=u(o[c]);Array.prototype.push.apply(a,d)}return Array.prototype.concat(R.Card16(t.length),R.OffSize(l),a,n)},P.INDEX=function(t){return R.INDEX(t).length},R.DICT=function(t){for(var r=[],o=Object.keys(t),n=o.length,s=0;s<n;s+=1){var i=parseInt(o[s],0),a=t[i];r=(r=r.concat(R.OPERAND(a.value,a.type))).concat(R.OPERATOR(i))}return r},P.DICT=function(t){return R.DICT(t).length},R.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]},R.OPERAND=function(t,r){var o=[];if(Array.isArray(r))for(var n=0;n<r.length;n+=1)A.argument(t.length===r.length,"Not enough arguments given for type"+r),o=o.concat(R.OPERAND(t[n],r[n]));else if("SID"===r)o=o.concat(R.NUMBER(t));else if("offset"===r)o=o.concat(R.NUMBER32(t));else if("number"===r)o=o.concat(R.NUMBER(t));else{if("real"!==r)throw Error("Unknown operand type "+r);o=o.concat(R.REAL(t))}return o},R.OP=R.BYTE,P.OP=P.BYTE;var B="function"==typeof WeakMap&&new WeakMap;function V(t,r,o){for(var n=0;n<r.length;n+=1){var s=r[n];this[s.name]=s.value}if(this.tableName=t,this.fields=r,o)for(var i=Object.keys(o),a=0;a<i.length;a+=1){var l=i[a],u=o[l];void 0!==this[l]&&(this[l]=u)}}function G(t,r,o){void 0===o&&(o=r.length);var n=Array(r.length+1);n[0]={name:t+"Count",type:"USHORT",value:o};for(var s=0;s<r.length;s++)n[s+1]={name:t+s,type:"USHORT",value:r[s]};return n}function H(t,r,o){var n=r.length,s=Array(n+1);s[0]={name:t+"Count",type:"USHORT",value:n};for(var i=0;i<n;i++)s[i+1]={name:t+i,type:"TABLE",value:o(r[i],i)};return s}function z(t,r,o){var n=r.length,s=[];s[0]={name:t+"Count",type:"USHORT",value:n};for(var i=0;i<n;i++)s=s.concat(o(r[i],i));return s}function q(t){1===t.format?V.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(G("glyph",t.glyphs))):A.assert(!1,"Can't create coverage table format 2 yet.")}function W(t){V.call(this,"scriptListTable",z("scriptRecord",t,function(t,r){var o=t.script,n=o.defaultLangSys;return A.assert(!!n,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+r,type:"TAG",value:t.tag},{name:"script"+r,type:"TABLE",value:new V("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new V("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(G("featureIndex",n.featureIndexes)))}].concat(z("langSys",o.langSysRecords,function(t,r){var o=t.langSys;return[{name:"langSysTag"+r,type:"TAG",value:t.tag},{name:"langSys"+r,type:"TABLE",value:new V("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:o.reqFeatureIndex}].concat(G("featureIndex",o.featureIndexes)))}]})))}]}))}function X(t){V.call(this,"featureListTable",z("featureRecord",t,function(t,r){var o=t.feature;return[{name:"featureTag"+r,type:"TAG",value:t.tag},{name:"feature"+r,type:"TABLE",value:new V("featureTable",[{name:"featureParams",type:"USHORT",value:o.featureParams}].concat(G("lookupListIndex",o.lookupListIndexes)))}]}))}function Y(t,r){V.call(this,"lookupListTable",H("lookup",t,function(t){var o=r[t.lookupType];return A.assert(!!o,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new V("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(H("subtable",t.subtables,o)))}))}R.CHARSTRING=function(t){if(B){var r=B.get(t);if(void 0!==r)return r}for(var o=[],n=t.length,s=0;s<n;s+=1)var i=t[s],o=o.concat(R[i.type](i.value));return B&&B.set(t,o),o},P.CHARSTRING=function(t){return R.CHARSTRING(t).length},R.OBJECT=function(t){var r=R[t.type];return A.argument(void 0!==r,"No encoding function for type "+t.type),r(t.value)},P.OBJECT=function(t){var r=P[t.type];return A.argument(void 0!==r,"No sizeOf function for type "+t.type),r(t.value)},R.TABLE=function(t){for(var r=[],o=t.fields.length,n=[],s=[],i=0;i<o;i+=1){var a=t.fields[i],l=R[a.type],u=(A.argument(void 0!==l,"No encoding function for field type "+a.type+" ("+a.name+")"),t[a.name]),l=l(u=void 0===u?a.value:u);"TABLE"===a.type?(s.push(r.length),r=r.concat([0,0]),n.push(l)):r=r.concat(l)}for(var c=0;c<n.length;c+=1){var d=s[c],h=r.length;A.argument(h<65536,"Table "+t.tableName+" too big."),r[d]=h>>8,r[d+1]=255&h,r=r.concat(n[c])}return r},P.TABLE=function(t){for(var r=0,o=t.fields.length,n=0;n<o;n+=1){var s=t.fields[n],i=P[s.type],a=(A.argument(void 0!==i,"No sizeOf function for field type "+s.type+" ("+s.name+")"),t[s.name]);r+=i(a=void 0===a?s.value:a),"TABLE"===s.type&&(r+=2)}return r},R.RECORD=R.TABLE,P.RECORD=P.TABLE,R.LITERAL=function(t){return t},P.LITERAL=function(t){return t.length},V.prototype.encode=function(){return R.TABLE(this)},V.prototype.sizeOf=function(){return P.TABLE(this)};var Z={Table:V,Record:V,Coverage:(q.prototype=Object.create(V.prototype)).constructor=q,ScriptList:(W.prototype=Object.create(V.prototype)).constructor=W,FeatureList:(X.prototype=Object.create(V.prototype)).constructor=X,LookupList:(Y.prototype=Object.create(V.prototype)).constructor=Y,ushortList:G,tableList:H,recordList:z};function Q(t,r){return t.getUint8(r)}function J(t,r){return t.getUint16(r,!1)}function $(t,r){return t.getUint32(r,!1)}function K(t,r){return t.getInt16(r,!1)+t.getUint16(r+2,!1)/65535}var ee={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function et(t,r){this.data=t,this.offset=r,this.relativeOffset=0}et.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},et.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},et.prototype.parseCard8=et.prototype.parseByte,et.prototype.parseCard16=et.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},et.prototype.parseSID=et.prototype.parseUShort,et.prototype.parseOffset16=et.prototype.parseUShort,et.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},et.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},et.prototype.parseOffset32=et.prototype.parseULong=function(){var t=$(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},et.prototype.parseFixed=function(){var t=K(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},et.prototype.parseString=function(t){var r=this.data,o=this.offset+this.relativeOffset,n="";this.relativeOffset+=t;for(var s=0;s<t;s++)n+=String.fromCharCode(r.getUint8(o+s));return n},et.prototype.parseTag=function(){return this.parseString(4)},et.prototype.parseLongDateTime=function(){var t=$(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t},et.prototype.parseVersion=function(t){var r=J(this.data,this.offset+this.relativeOffset),o=J(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,r+o/(t=void 0===t?4096:t)/10},et.prototype.skip=function(t,r){this.relativeOffset+=ee[t]*(r=void 0===r?1:r)},et.prototype.parseULongList=function(t){void 0===t&&(t=this.parseULong());for(var r=Array(t),o=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)r[s]=o.getUint32(n),n+=4;return this.relativeOffset+=4*t,r},et.prototype.parseOffset16List=et.prototype.parseUShortList=function(t){void 0===t&&(t=this.parseUShort());for(var r=Array(t),o=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)r[s]=o.getUint16(n),n+=2;return this.relativeOffset+=2*t,r},et.prototype.parseShortList=function(t){for(var r=Array(t),o=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)r[s]=o.getInt16(n),n+=2;return this.relativeOffset+=2*t,r},et.prototype.parseByteList=function(t){for(var r=Array(t),o=this.data,n=this.offset+this.relativeOffset,s=0;s<t;s++)r[s]=o.getUint8(n++);return this.relativeOffset+=t,r},et.prototype.parseList=function(t,r){r||(r=t,t=this.parseUShort());for(var o=Array(t),n=0;n<t;n++)o[n]=r.call(this);return o},et.prototype.parseList32=function(t,r){r||(r=t,t=this.parseULong());for(var o=Array(t),n=0;n<t;n++)o[n]=r.call(this);return o},et.prototype.parseRecordList=function(t,r){r||(r=t,t=this.parseUShort());for(var o=Array(t),n=Object.keys(r),s=0;s<t;s++){for(var i={},a=0;a<n.length;a++){var l=n[a],u=r[l];i[l]=u.call(this)}o[s]=i}return o},et.prototype.parseRecordList32=function(t,r){r||(r=t,t=this.parseULong());for(var o=Array(t),n=Object.keys(r),s=0;s<t;s++){for(var i={},a=0;a<n.length;a++){var l=n[a],u=r[l];i[l]=u.call(this)}o[s]=i}return o},et.prototype.parseStruct=function(t){if("function"==typeof t)return t.call(this);for(var r=Object.keys(t),o={},n=0;n<r.length;n++){var s=r[n],i=t[s];o[s]=i.call(this)}return o},et.prototype.parseValueRecord=function(t){var r;if(0!==(t=void 0===t?this.parseUShort():t))return r={},1&t&&(r.xPlacement=this.parseShort()),2&t&&(r.yPlacement=this.parseShort()),4&t&&(r.xAdvance=this.parseShort()),8&t&&(r.yAdvance=this.parseShort()),16&t&&(r.xPlaDevice=void 0,this.parseShort()),32&t&&(r.yPlaDevice=void 0,this.parseShort()),64&t&&(r.xAdvDevice=void 0,this.parseShort()),128&t&&(r.yAdvDevice=void 0,this.parseShort()),r},et.prototype.parseValueRecordList=function(){for(var t=this.parseUShort(),r=this.parseUShort(),o=Array(r),n=0;n<r;n++)o[n]=this.parseValueRecord(t);return o},et.prototype.parsePointer=function(t){var r=this.parseOffset16();if(0<r)return new et(this.data,this.offset+r).parseStruct(t)},et.prototype.parsePointer32=function(t){var r=this.parseOffset32();if(0<r)return new et(this.data,this.offset+r).parseStruct(t)},et.prototype.parseListOfLists=function(t){for(var r=this.parseOffset16List(),o=r.length,n=this.relativeOffset,s=Array(o),i=0;i<o;i++){var a=r[i];if(0===a)s[i]=void 0;else if(this.relativeOffset=a,t){for(var l=this.parseOffset16List(),u=Array(l.length),c=0;c<l.length;c++)this.relativeOffset=a+l[c],u[c]=t.call(this);s[i]=u}else s[i]=this.parseUShortList()}return this.relativeOffset=n,s},et.prototype.parseCoverage=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort(),o=this.parseUShort();if(1===r)return{format:1,glyphs:this.parseUShortList(o)};if(2!==r)throw Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.");for(var n=Array(o),s=0;s<o;s++)n[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}},et.prototype.parseClassDef=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(1===r)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===r)return{format:2,ranges:this.parseRecordList({start:et.uShort,end:et.uShort,classId:et.uShort})};throw Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")},et.list=function(t,r){return function(){return this.parseList(t,r)}},et.list32=function(t,r){return function(){return this.parseList32(t,r)}},et.recordList=function(t,r){return function(){return this.parseRecordList(t,r)}},et.recordList32=function(t,r){return function(){return this.parseRecordList32(t,r)}},et.pointer=function(t){return function(){return this.parsePointer(t)}},et.pointer32=function(t){return function(){return this.parsePointer32(t)}},et.tag=et.prototype.parseTag,et.byte=et.prototype.parseByte,et.uShort=et.offset16=et.prototype.parseUShort,et.uShortList=et.prototype.parseUShortList,et.uLong=et.offset32=et.prototype.parseULong,et.uLongList=et.prototype.parseULongList,et.struct=et.prototype.parseStruct,et.coverage=et.prototype.parseCoverage,et.classDef=et.prototype.parseClassDef;var er={reserved:et.uShort,reqFeatureIndex:et.uShort,featureIndexes:et.uShortList},eo=(et.prototype.parseScriptList=function(){return this.parsePointer(et.recordList({tag:et.tag,script:et.pointer({defaultLangSys:et.pointer(er),langSysRecords:et.recordList({tag:et.tag,langSys:et.pointer(er)})})}))||[]},et.prototype.parseFeatureList=function(){return this.parsePointer(et.recordList({tag:et.tag,feature:et.pointer({featureParams:et.offset16,lookupListIndexes:et.uShortList})}))||[]},et.prototype.parseLookupList=function(t){return this.parsePointer(et.list(et.pointer(function(){var r=this.parseUShort(),o=(A.argument(1<=r&&r<=9,"GPOS/GSUB lookup type "+r+" unknown."),this.parseUShort());return{lookupType:r,lookupFlag:o,subtables:this.parseList(et.pointer(t[r])),markFilteringSet:16&o?this.parseUShort():void 0}})))||[]},et.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var t=this.parseUShort(),r=this.parseUShort();return A.argument(1===t&&r<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:et.offset32,featureTableSubstitutionOffset:et.offset32})})||[]},{getByte:Q,getCard8:Q,getUShort:J,getCard16:J,getShort:function(t,r){return t.getInt16(r,!1)},getULong:$,getFixed:K,getTag:function(t,r){for(var o="",n=r;n<r+4;n+=1)o+=String.fromCharCode(t.getInt8(n));return o},getOffset:function(t,r,o){for(var n=0,s=0;s<o;s+=1)n=(n<<=8)+t.getUint8(r+s);return n},getBytes:function(t,r,o){for(var n=[],s=r;s<o;s+=1)n.push(t.getUint8(s));return n},bytesToString:function(t){for(var r="",o=0;o<t.length;o+=1)r+=String.fromCharCode(t[o]);return r},Parser:et}),en={parse:function(t,r){for(var o={},n=(o.version=eo.getUShort(t,r),A.argument(0===o.version,"cmap table version should be 0."),o.numTables=eo.getUShort(t,r+2),-1),s=o.numTables-1;0<=s;--s){var i=eo.getUShort(t,r+4+8*s),a=eo.getUShort(t,r+4+8*s+2);if(3===i&&(0===a||1===a||10===a)||0===i&&(0===a||1===a||2===a||3===a||4===a)){n=eo.getULong(t,r+4+8*s+4);break}}if(-1===n)throw Error("No valid cmap sub-tables found.");var l=new eo.Parser(t,r+n);if(o.format=l.parseUShort(),12===o.format){l.parseUShort(),o.length=l.parseULong(),o.language=l.parseULong(),o.groupCount=m=l.parseULong(),o.glyphIndexMap={};for(var u=0;u<m;u+=1)for(var c=l.parseULong(),d=l.parseULong(),h=l.parseULong(),f=c;f<=d;f+=1)o.glyphIndexMap[f]=h,h++}else{if(4!==o.format)throw Error("Only format 4 and 12 cmap tables are supported (found format "+o.format+").");var p=n;o.length=l.parseUShort(),o.language=l.parseUShort(),o.segCount=y=l.parseUShort()>>1,l.skip("uShort",3),o.glyphIndexMap={};for(var m,y,g=new eo.Parser(t,r+p+14),v=new eo.Parser(t,r+p+16+2*y),b=new eo.Parser(t,r+p+16+4*y),x=new eo.Parser(t,r+p+16+6*y),j=r+p+16+8*y,w=0;w<y-1;w+=1)for(var S=void 0,T=g.parseUShort(),E=v.parseUShort(),k=b.parseShort(),M=x.parseUShort(),C=E;C<=T;C+=1)0!==M?(j=(j=x.offset+x.relativeOffset-2)+M+2*(C-E),0!==(S=eo.getUShort(t,j))&&(S=S+k&65535)):S=C+k&65535,o.glyphIndexMap[C]=S}return o},make:function(t){for(var r=!0,o=t.length-1;0<o;--o)if(65535<t.get(o).unicode){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}var n,s,i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}],a=(i=(i=r?i:i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Z.Table("cmap",i));for(a.segments=[],o=0;o<t.length;o+=1){for(var l=t.get(o),u=0;u<l.unicodes.length;u+=1)n=l.unicodes[u],s=o,a.segments.push({end:n,start:n,delta:-(n-s),offset:0,glyphIndex:s});a.segments=a.segments.sort(function(t,r){return t.start-r.start})}a.segments.push({end:65535,start:65535,delta:1,offset:0});var c=a.segments.length,d=0,h=[],f=[],p=[],m=[],y=[],g=[];for(o=0;o<c;o+=1){var v=a.segments[o];v.end<=65535&&v.start<=65535?(h=h.concat({name:"end_"+o,type:"USHORT",value:v.end}),f=f.concat({name:"start_"+o,type:"USHORT",value:v.start}),p=p.concat({name:"idDelta_"+o,type:"SHORT",value:v.delta}),m=m.concat({name:"idRangeOffset_"+o,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(y=y.concat({name:"glyph_"+o,type:"USHORT",value:v.glyphId}))):d+=1,r||void 0===v.glyphIndex||(g=(g=(g=g.concat({name:"cmap12Start_"+o,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+o,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+o,type:"ULONG",value:v.glyphIndex}))}return a.segCountX2=2*(c-d),a.searchRange=2*Math.pow(2,Math.floor(Math.log(c-d)/Math.log(2))),a.entrySelector=Math.log(a.searchRange/2)/Math.log(2),a.rangeShift=a.segCountX2-a.searchRange,a.fields=a.fields.concat(h),a.fields.push({name:"reservedPad",type:"USHORT",value:0}),a.fields=a.fields.concat(f),a.fields=a.fields.concat(p),a.fields=a.fields.concat(m),a.fields=a.fields.concat(y),a.cmap4Length=14+2*h.length+2+2*f.length+2*p.length+2*m.length+2*y.length,r||(i=16+4*g.length,a.cmap12Offset=20+a.cmap4Length,a.fields=a.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:i},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),a.fields=a.fields.concat(g)),a}},es=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ei=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ea=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],el=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function eu(t){this.font=t}function ec(t){this.cmap=t}function ed(t,r){this.encoding=t,this.charset=r}function eh(t){switch(t.version){case 1:this.names=el.slice();break;case 2:this.names=Array(t.numberOfGlyphs);for(var r=0;r<t.numberOfGlyphs;r++)t.glyphNameIndex[r]<el.length?this.names[r]=el[t.glyphNameIndex[r]]:this.names[r]=t.names[t.glyphNameIndex[r]-el.length];break;case 2.5:this.names=Array(t.numberOfGlyphs);for(var o=0;o<t.numberOfGlyphs;o++)this.names[o]=el[o+t.glyphNameIndex[o]];break;default:this.names=[]}}eu.prototype.charToGlyphIndex=function(t){var r=t.codePointAt(0),o=this.font.glyphs;if(o){for(var n=0;n<o.length;n+=1)for(var s=o.get(n),i=0;i<s.unicodes.length;i+=1)if(s.unicodes[i]===r)return n}return null},ec.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.codePointAt(0)]||0},ed.prototype.charToGlyphIndex=function(t){return t=t.codePointAt(0),t=this.encoding[t],this.charset.indexOf(t)},eh.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)},eh.prototype.glyphIndexToName=function(t){return this.names[t]};var ef={line:function(t,r,o,n,s){t.beginPath(),t.moveTo(r,o),t.lineTo(n,s),t.stroke()}};function ep(t){this.bindConstructorValues(t)}function em(t,r,o){Object.defineProperty(t,r,{get:function(){return t.path,t[o]},set:function(r){t[o]=r},enumerable:!0,configurable:!0})}function ey(t,r){if(this.font=t,this.glyphs={},Array.isArray(r))for(var o=0;o<r.length;o++)this.glyphs[o]=r[o];this.length=r&&r.length||0}ep.prototype.bindConstructorValues=function(t){var r;this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||void 0!==t.unicode?[t.unicode]:[],t.xMin&&(this.xMin=t.xMin),t.yMin&&(this.yMin=t.yMin),t.xMax&&(this.xMax=t.xMax),t.yMax&&(this.yMax=t.yMax),t.advanceWidth&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",(r=(t=t.path)||new k,{configurable:!0,get:function(){return r="function"==typeof r?r():r},set:function(t){r=t}}))},ep.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},ep.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ep.prototype.getPath=function(t,r,o,n,s){t=void 0!==t?t:0,r=void 0!==r?r:0,o=void 0!==o?o:72;for(var i,a,l=(n=n||{}).xScale,u=n.yScale,c=((i=n.hinting&&s&&s.hinting?this.path&&s.hinting.exec(this,o):i)?(a=s.hinting.getCommands(i),t=Math.round(t),r=Math.round(r),l=u=1):(a=this.path.commands,n=1/this.path.unitsPerEm*o,void 0===l&&(l=n),void 0===u&&(u=n)),new k),d=0;d<a.length;d+=1){var h=a[d];"M"===h.type?c.moveTo(t+h.x*l,r+-h.y*u):"L"===h.type?c.lineTo(t+h.x*l,r+-h.y*u):"Q"===h.type?c.quadraticCurveTo(t+h.x1*l,r+-h.y1*u,t+h.x*l,r+-h.y*u):"C"===h.type?c.curveTo(t+h.x1*l,r+-h.y1*u,t+h.x2*l,r+-h.y2*u,t+h.x*l,r+-h.y*u):"Z"===h.type&&c.closePath()}return c},ep.prototype.getContours=function(){if(void 0===this.points)return[];for(var t=[],r=[],o=0;o<this.points.length;o+=1){var n=this.points[o];r.push(n),n.lastPointOfContour&&(t.push(r),r=[])}return A.argument(0===r.length,"There are still points left in the current contour."),t},ep.prototype.getMetrics=function(){for(var t=this.path.commands,r=[],o=[],n=0;n<t.length;n+=1){var s=t[n];"Z"!==s.type&&(r.push(s.x),o.push(s.y)),"Q"!==s.type&&"C"!==s.type||(r.push(s.x1),o.push(s.y1)),"C"===s.type&&(r.push(s.x2),o.push(s.y2))}var i={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,o),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,o),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},ep.prototype.draw=function(t,r,o,n,s){this.getPath(r,o,n,s).draw(t)},ep.prototype.drawPoints=function(t,r,o,n){function s(r,o,n,s){var i=2*Math.PI;t.beginPath();for(var a=0;a<r.length;a+=1)t.moveTo(o+r[a].x*s,n+r[a].y*s),t.arc(o+r[a].x*s,n+r[a].y*s,2,0,i,!1);t.closePath(),t.fill()}r=void 0!==r?r:0,o=void 0!==o?o:0;for(var n=1/this.path.unitsPerEm*(n=void 0!==n?n:24),i=[],a=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];void 0!==c.x&&i.push({x:c.x,y:-c.y}),void 0!==c.x1&&a.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&a.push({x:c.x2,y:-c.y2})}t.fillStyle="blue",s(i,r,o,n),t.fillStyle="red",s(a,r,o,n)},ep.prototype.drawMetrics=function(t,r,o,n){r=void 0!==r?r:0,o=void 0!==o?o:0,n=1/this.path.unitsPerEm*(n=void 0!==n?n:24),t.lineWidth=1,t.strokeStyle="black",ef.line(t,r,-1e4,r,1e4),ef.line(t,-1e4,o,1e4,o);var s=this.xMin||0,i=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;t.strokeStyle="blue",ef.line(t,r+s*n,-1e4,r+s*n,1e4),ef.line(t,r+a*n,-1e4,r+a*n,1e4),ef.line(t,-1e4,o+-i*n,1e4,o+-i*n),ef.line(t,-1e4,o+-l*n,1e4,o+-l*n),t.strokeStyle="green",ef.line(t,r+u*n,-1e4,r+u*n,1e4)},ey.prototype.get=function(t){return"function"==typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]()),this.glyphs[t]},ey.prototype.push=function(t,r){this.glyphs[t]=r,this.length++};var eg={GlyphSet:ey,glyphLoader:function(t,r){return new ep({index:r,font:t})},ttfGlyphLoader:function(t,r,o,n,s,i){return function(){var a=new ep({index:r,font:t});return a.path=function(){o(a,n,s);var r=i(t.glyphs,a);return r.unitsPerEm=t.unitsPerEm,r},em(a,"xMin","_xMin"),em(a,"xMax","_xMax"),em(a,"yMin","_yMin"),em(a,"yMax","_yMax"),a}},cffGlyphLoader:function(t,r,o,n){return function(){var s=new ep({index:r,font:t});return s.path=function(){var r=o(t,s,n);return r.unitsPerEm=t.unitsPerEm,r},s}}};function ev(t){return t=t.length<1240?107:t.length<33900?1131:32768}function eb(t,r,o){var n,s=[],i=[],a=eo.getCard16(t,r);if(0!==a){for(var l=eo.getByte(t,r+2),u=r+(a+1)*l+2,c=r+3,d=0;d<a+1;d+=1)s.push(eo.getOffset(t,c,l)),c+=l;n=u+s[a]}else n=r+2;for(var h=0;h<s.length-1;h+=1){var f=eo.getBytes(t,u+s[h],u+s[h+1]);o&&(f=o(f)),i.push(f)}return{objects:i,startOffset:r,endOffset:n}}function e_(t,r,o){var n=new eo.Parser(t,r=void 0!==r?r:0),s=[],i=[];for(o=void 0!==o?o:t.length;n.relativeOffset<o;){var a=n.parseByte();a<=21?(12===a&&(a=1200+n.parseByte()),s.push([a,i]),i=[]):i.push(function(t,r){if(28===r)return t.parseByte()<<8|t.parseByte();if(29===r)return t.parseByte()<<24|t.parseByte()<<16|t.parseByte()<<8|t.parseByte();if(30===r){for(var o="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var s=t.parseByte(),i=s>>4,s=15&s;if(15==i||(o+=n[i],15==s))break;o+=n[s]}return parseFloat(o)}if(32<=r&&r<=246)return r-139;if(247<=r&&r<=250)return 256*(r-247)+t.parseByte()+108;if(251<=r&&r<=254)return-(256*(r-251))-t.parseByte()-108;throw Error("Invalid b0 "+r)}(n,a))}for(var l={},u=0;u<s.length;u+=1){var c=s[u][0],d=s[u][1],h=1===d.length?d[0]:d;if(l.hasOwnProperty(c)&&!isNaN(l[c]))throw Error("Object "+l+" already has key "+c);l[c]=h}return l}function ex(t,r){return r=r<=390?es[r]:t[r-391]}function ej(t,r,o){for(var n,s={},i=0;i<r.length;i+=1){var a=r[i];if(Array.isArray(a.type)){var l=[];l.length=a.type.length;for(var u=0;u<a.type.length;u++)void 0===(n=void 0!==t[a.op]?t[a.op][u]:void 0)&&(n=void 0!==a.value&&void 0!==a.value[u]?a.value[u]:null),"SID"===a.type[u]&&(n=ex(o,n)),l[u]=n;s[a.name]=l}else void 0===(n=t[a.op])&&(n=void 0!==a.value?a.value:null),"SID"===a.type&&(n=ex(o,n)),s[a.name]=n}return s}var ew=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],eS=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function eT(t,r,o,n){for(var s=[],i=0;i<o.length;i+=1){var a=new DataView(new Uint8Array(o[i]).buffer),a=(l=n,ej(e_(a,0,a.byteLength),ew,l)),l=(a._subrs=[],a._subrsBias=0,a.private[0]),u=a.private[1];0!==l&&0!==u&&(l=ej(e_(t,u+r,l),eS,n),a._defaultWidthX=l.defaultWidthX,a._nominalWidthX=l.nominalWidthX,0!==l.subrs&&(u=eb(t,u+l.subrs+r),a._subrs=u.objects,a._subrsBias=ev(a._subrs)),a._privateDict=l),s.push(a)}return s}function eE(t,r,o){var n,s,i,a,l,u,c,d,h,f=new k,p=[],m=0,y=!1,g=!1,v=0,b=0,x=(h=(t.isCIDFont?(l=t.tables.cff.topDict._fdSelect[r.index],u=(l=t.tables.cff.topDict._fdArray[l])._subrs,c=l._subrsBias,d=l._defaultWidthX,l):(u=t.tables.cff.topDict._subrs,c=t.tables.cff.topDict._subrsBias,d=t.tables.cff.topDict._defaultWidthX,t.tables.cff.topDict))._nominalWidthX,d);function j(t,r){g&&f.closePath(),f.moveTo(t,r),g=!0}function w(){p.length%2==0||y||(x=p.shift()+h),m+=p.length>>1,p.length=0,y=!0}return function o(l){for(var d,S,T,E,k,M,C,A,O,R,P,L,I=0;I<l.length;){var D=l[I];switch(I+=1,D){case 1:case 3:case 18:case 23:w();break;case 4:1<p.length&&!y&&(x=p.shift()+h,y=!0),b+=p.pop(),j(v,b);break;case 5:for(;0<p.length;)v+=p.shift(),b+=p.shift(),f.lineTo(v,b);break;case 6:for(;0<p.length&&(v+=p.shift(),f.lineTo(v,b),0!==p.length);)b+=p.shift(),f.lineTo(v,b);break;case 7:for(;0<p.length&&(b+=p.shift(),f.lineTo(v,b),0!==p.length);)v+=p.shift(),f.lineTo(v,b);break;case 8:for(;0<p.length;)n=v+p.shift(),s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),v=i+p.shift(),b=a+p.shift(),f.curveTo(n,s,i,a,v,b);break;case 10:(M=u[k=p.pop()+c])&&o(M);break;case 11:return;case 12:switch(D=l[I],I+=1,D){case 35:n=v+p.shift(),s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),C=i+p.shift(),A=a+p.shift(),O=C+p.shift(),R=A+p.shift(),P=O+p.shift(),L=R+p.shift(),v=P+p.shift(),b=L+p.shift(),p.shift(),f.curveTo(n,s,i,a,C,A),f.curveTo(O,R,P,L,v,b);break;case 34:n=v+p.shift(),s=b,i=n+p.shift(),a=s+p.shift(),C=i+p.shift(),A=a,O=C+p.shift(),R=a,P=O+p.shift(),L=b,v=P+p.shift(),f.curveTo(n,s,i,a,C,A),f.curveTo(O,R,P,L,v,b);break;case 36:n=v+p.shift(),s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),C=i+p.shift(),A=a,O=C+p.shift(),R=a,P=O+p.shift(),L=R+p.shift(),v=P+p.shift(),f.curveTo(n,s,i,a,C,A),f.curveTo(O,R,P,L,v,b);break;case 37:n=v+p.shift(),s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),C=i+p.shift(),A=a+p.shift(),O=C+p.shift(),R=A+p.shift(),P=O+p.shift(),L=R+p.shift(),Math.abs(P-v)>Math.abs(L-b)?v=P+p.shift():b=L+p.shift(),f.curveTo(n,s,i,a,C,A),f.curveTo(O,R,P,L,v,b);break;default:console.log("Glyph "+r.index+": unknown operator 1200"+D),p.length=0}break;case 14:0<p.length&&!y&&(x=p.shift()+h,y=!0),g&&(f.closePath(),g=!1);break;case 19:case 20:w(),I+=m+7>>3;break;case 21:2<p.length&&!y&&(x=p.shift()+h,y=!0),b+=p.pop(),j(v+=p.pop(),b);break;case 22:1<p.length&&!y&&(x=p.shift()+h,y=!0),j(v+=p.pop(),b);break;case 24:for(;2<p.length;)n=v+p.shift(),s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),v=i+p.shift(),b=a+p.shift(),f.curveTo(n,s,i,a,v,b);v+=p.shift(),b+=p.shift(),f.lineTo(v,b);break;case 25:for(;6<p.length;)v+=p.shift(),b+=p.shift(),f.lineTo(v,b);n=v+p.shift(),s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),v=i+p.shift(),b=a+p.shift(),f.curveTo(n,s,i,a,v,b);break;case 26:for(p.length%2&&(v+=p.shift());0<p.length;)n=v,s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),v=i,b=a+p.shift(),f.curveTo(n,s,i,a,v,b);break;case 27:for(p.length%2&&(b+=p.shift());0<p.length;)n=v+p.shift(),s=b,i=n+p.shift(),a=s+p.shift(),v=i+p.shift(),b=a,f.curveTo(n,s,i,a,v,b);break;case 28:d=l[I],S=l[I+1],p.push((d<<24|S<<16)>>16),I+=2;break;case 29:k=p.pop()+t.gsubrsBias,(M=t.gsubrs[k])&&o(M);break;case 30:for(;0<p.length&&(n=v,s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),v=i+p.shift(),b=a+(1===p.length?p.shift():0),f.curveTo(n,s,i,a,v,b),0!==p.length);)n=v+p.shift(),s=b,i=n+p.shift(),b=(a=s+p.shift())+p.shift(),v=i+(1===p.length?p.shift():0),f.curveTo(n,s,i,a,v,b);break;case 31:for(;0<p.length&&(n=v+p.shift(),s=b,i=n+p.shift(),b=(a=s+p.shift())+p.shift(),v=i+(1===p.length?p.shift():0),f.curveTo(n,s,i,a,v,b),0!==p.length);)n=v,s=b+p.shift(),i=n+p.shift(),a=s+p.shift(),v=i+p.shift(),b=a+(1===p.length?p.shift():0),f.curveTo(n,s,i,a,v,b);break;default:D<32?console.log("Glyph "+r.index+": unknown operator "+D):D<247?p.push(D-139):D<251?(d=l[I],I+=1,p.push(256*(D-247)+d+108)):D<255?(d=l[I],I+=1,p.push(-(256*(D-251))-d-108)):(d=l[I],S=l[I+1],T=l[I+2],E=l[I+3],I+=4,p.push((d<<24|S<<16|T<<8|E)/65536))}}}(o),r.advanceWidth=x,f}function ek(t,r){var o,n=es.indexOf(t);return 0<=n&&(o=n),0<=(n=r.indexOf(t))?o=n+es.length:(o=es.length+r.length,r.push(t)),o}function eM(t,r,o){for(var n={},s=0;s<t.length;s+=1){var i=t[s],a=r[i.name];void 0===a||function t(r,o){if(r===o)return 1;if(Array.isArray(r)&&Array.isArray(o)&&r.length===o.length){for(var n=0;n<r.length;n+=1)if(!t(r[n],o[n]))return;return 1}}(a,i.value)||("SID"===i.type&&(a=ek(a,o)),n[i.op]={name:i.name,type:i.type,value:a})}return n}function eC(t,r){var o=new Z.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return o.dict=eM(ew,t,r),o}function eA(t){var r=new Z.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return r.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],r}var eO={parse:function(t,r,o){o.tables.cff={},a=t,l=r,(u={}).formatMajor=eo.getCard8(a,l),u.formatMinor=eo.getCard8(a,l+1),u.size=eo.getCard8(a,l+2),u.offsetSize=eo.getCard8(a,l+3),u.startOffset=l,u.endOffset=l+4;var n,s,i,a=eb(t,u.endOffset,eo.bytesToString),l=eb(t,a.endOffset),u=eb(t,l.endOffset,eo.bytesToString),a=eb(t,u.endOffset);if(o.gsubrs=a.objects,o.gsubrsBias=ev(o.gsubrs),1!==(a=eT(t,r,l.objects,u.objects)).length)throw Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+a.length);if(l=a[0],(o.tables.cff.topDict=l)._privateDict&&(o.defaultWidthX=l._privateDict.defaultWidthX,o.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(o.isCIDFont=!0),o.isCIDFont){var a=l.fdArray,c=l.fdSelect;if(0===a||0===c)throw Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");a=eT(t,r,eb(t,a+=r).objects,u.objects),l._fdArray=a,l._fdSelect=function(t,r,o,n){var s,i=[],a=new eo.Parser(t,r);if(0===(t=a.parseCard8()))for(var l=0;l<o;l++){if(n<=(s=a.parseCard8()))throw Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+n+")");i.push(s)}else{if(3!==t)throw Error("CFF Table CID Font FDSelect table has unsupported format "+t);var u,c=a.parseCard16(),d=a.parseCard16();if(0!==d)throw Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var h=0;h<c;h++){if(s=a.parseCard8(),u=a.parseCard16(),n<=s)throw Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+n+")");if(o<u)throw Error("CFF Table CID Font FDSelect format 3 range has bad GID "+u);for(;d<u;d++)i.push(s);d=u}if(u!==o)throw Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+u)}return i}(t,c+=r,o.numGlyphs,a.length)}var c=r+l.private[1],a=(n=c,s=l.private[0],i=u.objects,ej(e_(t,n,s),eS,i)),d=(o.defaultWidthX=a.defaultWidthX,o.nominalWidthX=a.nominalWidthX,0!==a.subrs?(c=eb(t,c+a.subrs),o.subrs=c.objects,o.subrsBias=ev(o.subrs)):(o.subrs=[],o.subrsBias=0),eb(t,r+l.charStrings)),a=(o.nGlyphs=d.objects.length,function(t,r,o,n){var s=new eo.Parser(t,r),i=(--o,[".notdef"]);if(0===(t=s.parseCard8()))for(var a=0;a<o;a+=1)l=s.parseSID(),i.push(ex(n,l));else if(1===t)for(;i.length<=o;)for(var l=s.parseSID(),u=s.parseCard8(),c=0;c<=u;c+=1)i.push(ex(n,l)),l+=1;else{if(2!==t)throw Error("Unknown charset format "+t);for(;i.length<=o;){l=s.parseSID(),u=s.parseCard16();for(var d=0;d<=u;d+=1)i.push(ex(n,l)),l+=1}}return i}(t,r+l.charset,o.nGlyphs,u.objects));0===l.encoding?o.cffEncoding=new ed(ei,a):1===l.encoding?o.cffEncoding=new ed(ea,a):o.cffEncoding=function(t,r,o){var n={},s=new eo.Parser(t,r);if(0===(t=s.parseCard8()))for(var i=s.parseCard8(),a=0;a<i;a+=1)n[u=s.parseCard8()]=a;else{if(1!==t)throw Error("Unknown encoding format "+t);for(var l=s.parseCard8(),u=1,c=0;c<l;c+=1)for(var d=s.parseCard8(),h=s.parseCard8(),f=d;f<=d+h;f+=1)n[f]=u,u+=1}return new ed(n,o)}(t,r+l.encoding,a),o.encoding=o.encoding||o.cffEncoding,o.glyphs=new eg.GlyphSet(o);for(var h=0;h<o.nGlyphs;h+=1){var f=d.objects[h];o.glyphs.push(h,eg.cffGlyphLoader(o,h,eE,f))}},make:function(t,r){for(var o,n=new Z.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),s=1/r.unitsPerEm,s={version:r.version,fullName:r.fullName,familyName:r.familyName,weight:r.weightName,fontBBox:r.fontBBox||[0,0,0,0],fontMatrix:[s,0,0,s,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},i=[],a=1;a<t.length;a+=1)o=t.get(a),i.push(o.name);var l,u=[],r=(n.header=new Z.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),n.nameIndex=function(t){var r=new Z.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);r.names=[];for(var o=0;o<t.length;o+=1)r.names.push({name:"name_"+o,type:"NAME",value:t[o]});return r}([r.postScriptName]),eC(s,u)),c=(n.topDictIndex=eA(r),n.globalSubrIndex=new Z.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),n.charsets=function(t,r){for(var o=new Z.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<t.length;n+=1){var s=ek(t[n],r);o.fields.push({name:"glyph_"+n,type:"SID",value:s})}return o}(i,u),n.charStringsIndex=function(t){for(var r=new Z.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),o=0;o<t.length;o+=1){var n=t.get(o),s=function(t){for(var r=[],o=t.path,n=(r.push({name:"width",type:"NUMBER",value:t.advanceWidth}),0),s=0,i=0;i<o.commands.length;i+=1){var a,l,u,c,d=void 0,h=void 0,f=o.commands[i];"M"===(f="Q"===f.type?{type:"C",x:f.x,y:f.y,x1:1/3*n+2/3*f.x1,y1:1/3*s+2/3*f.y1,x2:1/3*f.x+2/3*f.x1,y2:1/3*f.y+2/3*f.y1}:f).type?(d=Math.round(f.x-n),h=Math.round(f.y-s),r.push({name:"dx",type:"NUMBER",value:d}),r.push({name:"dy",type:"NUMBER",value:h}),r.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(f.x),s=Math.round(f.y)):"L"===f.type?(d=Math.round(f.x-n),h=Math.round(f.y-s),r.push({name:"dx",type:"NUMBER",value:d}),r.push({name:"dy",type:"NUMBER",value:h}),r.push({name:"rlineto",type:"OP",value:5}),n=Math.round(f.x),s=Math.round(f.y)):"C"===f.type&&(a=Math.round(f.x1-n),l=Math.round(f.y1-s),u=Math.round(f.x2-f.x1),c=Math.round(f.y2-f.y1),d=Math.round(f.x-f.x2),h=Math.round(f.y-f.y2),r.push({name:"dx1",type:"NUMBER",value:a}),r.push({name:"dy1",type:"NUMBER",value:l}),r.push({name:"dx2",type:"NUMBER",value:u}),r.push({name:"dy2",type:"NUMBER",value:c}),r.push({name:"dx",type:"NUMBER",value:d}),r.push({name:"dy",type:"NUMBER",value:h}),r.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(f.x),s=Math.round(f.y))}return r.push({name:"endchar",type:"OP",value:14}),r}(n);r.charStrings.push({name:n.name,type:"CHARSTRING",value:s})}return r}(t),n.privateDict=(c={},(l=new Z.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=eM(eS,c,u),l),n.stringIndex=function(t){var r=new Z.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);r.strings=[];for(var o=0;o<t.length;o+=1)r.strings.push({name:"string_"+o,type:"STRING",value:t[o]});return r}(u),n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf());return s.charset=c,s.encoding=0,s.charStrings=s.charset+n.charsets.sizeOf(),s.private[1]=s.charStrings+n.charStringsIndex.sizeOf(),r=eC(s,u),n.topDictIndex=eA(r),n}},eR={parse:function(t,r){var o={},t=new eo.Parser(t,r);return o.version=t.parseVersion(),o.fontRevision=Math.round(1e3*t.parseFixed())/1e3,o.checkSumAdjustment=t.parseULong(),o.magicNumber=t.parseULong(),A.argument(1594834165===o.magicNumber,"Font header has wrong magic number."),o.flags=t.parseUShort(),o.unitsPerEm=t.parseUShort(),o.created=t.parseLongDateTime(),o.modified=t.parseLongDateTime(),o.xMin=t.parseShort(),o.yMin=t.parseShort(),o.xMax=t.parseShort(),o.yMax=t.parseShort(),o.macStyle=t.parseUShort(),o.lowestRecPPEM=t.parseUShort(),o.fontDirectionHint=t.parseShort(),o.indexToLocFormat=t.parseShort(),o.glyphDataFormat=t.parseShort(),o},make:function(t){var r=Math.round((new Date).getTime()/1e3)+2082844800,o=r;return t.createdTimestamp&&(o=t.createdTimestamp+2082844800),new Z.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:o},{name:"modified",type:"LONGDATETIME",value:r},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}},eP={parse:function(t,r){var o={},t=new eo.Parser(t,r);return o.version=t.parseVersion(),o.ascender=t.parseShort(),o.descender=t.parseShort(),o.lineGap=t.parseShort(),o.advanceWidthMax=t.parseUShort(),o.minLeftSideBearing=t.parseShort(),o.minRightSideBearing=t.parseShort(),o.xMaxExtent=t.parseShort(),o.caretSlopeRise=t.parseShort(),o.caretSlopeRun=t.parseShort(),o.caretOffset=t.parseShort(),t.relativeOffset+=8,o.metricDataFormat=t.parseShort(),o.numberOfHMetrics=t.parseUShort(),o},make:function(t){return new Z.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}},eL={make:function(t){for(var r=new Z.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),o="",n=12+4*t.length,s=0;s<t.length;++s){var i=o.indexOf(t[s]);i<0&&(i=o.length,o+=t[s]),r.fields.push({name:"offset "+s,type:"USHORT",value:n+i}),r.fields.push({name:"length "+s,type:"USHORT",value:t[s].length})}return r.fields.push({name:"stringPool",type:"CHARARRAY",value:o}),r},parse:function(t,r){for(var o=new eo.Parser(t,r),n=o.parseULong(),s=(A.argument(1===n,"Unsupported ltag table version."),o.skip("uLong",1),o.parseULong()),i=[],a=0;a<s;a++){for(var l="",u=r+o.parseUShort(),c=o.parseUShort(),d=u;d<u+c;++d)l+=String.fromCharCode(t.getInt8(d));i.push(l)}return i}},eI={parse:function(t,r){var o={},t=new eo.Parser(t,r);return o.version=t.parseVersion(),o.numGlyphs=t.parseUShort(),1===o.version&&(o.maxPoints=t.parseUShort(),o.maxContours=t.parseUShort(),o.maxCompositePoints=t.parseUShort(),o.maxCompositeContours=t.parseUShort(),o.maxZones=t.parseUShort(),o.maxTwilightPoints=t.parseUShort(),o.maxStorage=t.parseUShort(),o.maxFunctionDefs=t.parseUShort(),o.maxInstructionDefs=t.parseUShort(),o.maxStackElements=t.parseUShort(),o.maxSizeOfInstructions=t.parseUShort(),o.maxComponentElements=t.parseUShort(),o.maxComponentDepth=t.parseUShort()),o},make:function(t){return new Z.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}},eD=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],eF={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},eN={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},eU={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},eB="utf-16",eV={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},eG={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function eH(t,r,o){switch(t){case 0:return eB;case 1:return eG[o]||eV[r];case 3:if(1===r||10===r)return eB}}function ez(t){var r,o={};for(r in t)o[t[r]]=parseInt(r);return o}function eq(t,r,o,n,s,i){return new Z.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:r},{name:"languageID",type:"USHORT",value:o},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:i}])}function eW(t,r){if((o=function(t,r){var o=t.length,n=r.length-o+1;e:for(var s=0;s<n;s++)for(;s<n;s++){for(var i=0;i<o;i++)if(r[s+i]!==t[i])continue e;return s}return -1}(t,r))<0)for(var o=r.length,n=0,s=t.length;n<s;++n)r.push(t[n]);return o}var eX={parse:function(t,r,o){for(var n={},s=new eo.Parser(t,r),r=s.parseUShort(),i=s.parseUShort(),a=s.offset+s.parseUShort(),l=0;l<i;l++){var u=s.parseUShort(),c=s.parseUShort(),d=s.parseUShort(),h=s.parseUShort(),h=eD[h]||h,f=s.parseUShort(),p=s.parseUShort(),m=function(t,r,o){switch(t){case 0:if(65535===r)return"und";if(o)return o[r];break;case 1:return eF[r];case 3:return eU[r]}}(u,d,o),u=eH(u,c,d);void 0!==u&&void 0!==m&&(c=void 0,(c=u===eB?O.UTF16(t,a+p,f):O.MACSTRING(t,a+p,f,u))&&((d=void 0===(d=n[h])?n[h]={}:d)[m]=c))}return 1===r&&s.parseUShort(),n},make:function(t,r){var o,n=[],s={},i=ez(eD);for(o in t){var a=i[o];if(void 0===a&&(a=o),isNaN(f=parseInt(a)))throw Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');s[f]=t[o],n.push(f)}for(var l=ez(eF),u=ez(eU),c=[],d=[],h=0;h<n.length;h++){var f,p,m=s[f=n[h]];for(p in m){var y=m[p],g=1,v=l[p],b=eN[v],x=eH(g,b,v),x=R.MACSTRING(y,x),j=(void 0===x&&(g=0,(v=r.indexOf(p))<0&&(v=r.length,r.push(p)),b=4,x=R.UTF16(y)),eW(x,d)),g=(c.push(eq(g,b,v,f,x.length,j)),u[p]);void 0!==g&&(v=eW(b=R.UTF16(y),d),c.push(eq(3,1,g,f,b.length,v)))}}c.sort(function(t,r){return t.platformID-r.platformID||t.encodingID-r.encodingID||t.languageID-r.languageID||t.nameID-r.nameID});for(var w=new Z.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),S=0;S<c.length;S++)w.fields.push({name:"record_"+S,type:"RECORD",value:c[S]});return w.fields.push({name:"strings",type:"LITERAL",value:d}),w}},eY=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],eZ={parse:function(t,r){var o={},n=new eo.Parser(t,r);o.version=n.parseUShort(),o.xAvgCharWidth=n.parseShort(),o.usWeightClass=n.parseUShort(),o.usWidthClass=n.parseUShort(),o.fsType=n.parseUShort(),o.ySubscriptXSize=n.parseShort(),o.ySubscriptYSize=n.parseShort(),o.ySubscriptXOffset=n.parseShort(),o.ySubscriptYOffset=n.parseShort(),o.ySuperscriptXSize=n.parseShort(),o.ySuperscriptYSize=n.parseShort(),o.ySuperscriptXOffset=n.parseShort(),o.ySuperscriptYOffset=n.parseShort(),o.yStrikeoutSize=n.parseShort(),o.yStrikeoutPosition=n.parseShort(),o.sFamilyClass=n.parseShort(),o.panose=[];for(var s=0;s<10;s++)o.panose[s]=n.parseByte();return o.ulUnicodeRange1=n.parseULong(),o.ulUnicodeRange2=n.parseULong(),o.ulUnicodeRange3=n.parseULong(),o.ulUnicodeRange4=n.parseULong(),o.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),o.fsSelection=n.parseUShort(),o.usFirstCharIndex=n.parseUShort(),o.usLastCharIndex=n.parseUShort(),o.sTypoAscender=n.parseShort(),o.sTypoDescender=n.parseShort(),o.sTypoLineGap=n.parseShort(),o.usWinAscent=n.parseUShort(),o.usWinDescent=n.parseUShort(),1<=o.version&&(o.ulCodePageRange1=n.parseULong(),o.ulCodePageRange2=n.parseULong()),2<=o.version&&(o.sxHeight=n.parseShort(),o.sCapHeight=n.parseShort(),o.usDefaultChar=n.parseUShort(),o.usBreakChar=n.parseUShort(),o.usMaxContent=n.parseUShort()),o},make:function(t){return new Z.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)},unicodeRanges:eY,getUnicodeRange:function(t){for(var r=0;r<eY.length;r+=1){var o=eY[r];if(t>=o.begin&&t<o.end)return r}return -1}},eQ={parse:function(t,r){var o={},n=new eo.Parser(t,r);switch(o.version=n.parseVersion(),o.italicAngle=n.parseFixed(),o.underlinePosition=n.parseShort(),o.underlineThickness=n.parseShort(),o.isFixedPitch=n.parseULong(),o.minMemType42=n.parseULong(),o.maxMemType42=n.parseULong(),o.minMemType1=n.parseULong(),o.maxMemType1=n.parseULong(),o.version){case 1:o.names=el.slice();break;case 2:o.numberOfGlyphs=n.parseUShort(),o.glyphNameIndex=Array(o.numberOfGlyphs);for(var s=0;s<o.numberOfGlyphs;s++)o.glyphNameIndex[s]=n.parseUShort();o.names=[];for(var i,a=0;a<o.numberOfGlyphs;a++)o.glyphNameIndex[a]>=el.length&&(i=n.parseChar(),o.names.push(n.parseString(i)));break;case 2.5:o.numberOfGlyphs=n.parseUShort(),o.offset=Array(o.numberOfGlyphs);for(var l=0;l<o.numberOfGlyphs;l++)o.offset[l]=n.parseChar()}return o},make:function(){return new Z.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},eJ=Array(9),e$=(eJ[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();return 1===r?{substFormat:1,coverage:this.parsePointer(et.coverage),deltaGlyphId:this.parseUShort()}:2===r?{substFormat:2,coverage:this.parsePointer(et.coverage),substitute:this.parseOffset16List()}:void A.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")},eJ[2]=function(){var t=this.parseUShort();return A.argument(1===t,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(et.coverage),sequences:this.parseListOfLists()}},eJ[3]=function(){var t=this.parseUShort();return A.argument(1===t,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(et.coverage),alternateSets:this.parseListOfLists()}},eJ[4]=function(){var t=this.parseUShort();return A.argument(1===t,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(et.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:et.uShort,lookupListIndex:et.uShort});eJ[5]=function(){var t,r,o=this.offset+this.relativeOffset,n=this.parseUShort();return 1===n?{substFormat:n,coverage:this.parsePointer(et.coverage),ruleSets:this.parseListOfLists(function(){var t=this.parseUShort(),r=this.parseUShort();return{input:this.parseUShortList(t-1),lookupRecords:this.parseRecordList(r,e$)}})}:2===n?{substFormat:n,coverage:this.parsePointer(et.coverage),classDef:this.parsePointer(et.classDef),classSets:this.parseListOfLists(function(){var t=this.parseUShort(),r=this.parseUShort();return{classes:this.parseUShortList(t-1),lookupRecords:this.parseRecordList(r,e$)}})}:3===n?(t=this.parseUShort(),r=this.parseUShort(),{substFormat:n,coverages:this.parseList(t,et.pointer(et.coverage)),lookupRecords:this.parseRecordList(r,e$)}):void A.assert(!1,"0x"+o.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},eJ[6]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();return 1===r?{substFormat:1,coverage:this.parsePointer(et.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(e$)}})}:2===r?{substFormat:2,coverage:this.parsePointer(et.coverage),backtrackClassDef:this.parsePointer(et.classDef),inputClassDef:this.parsePointer(et.classDef),lookaheadClassDef:this.parsePointer(et.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(e$)}})}:3===r?{substFormat:3,backtrackCoverage:this.parseList(et.pointer(et.coverage)),inputCoverage:this.parseList(et.pointer(et.coverage)),lookaheadCoverage:this.parseList(et.pointer(et.coverage)),lookupRecords:this.parseRecordList(e$)}:void A.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},eJ[7]=function(){var t=this.parseUShort(),t=(A.argument(1===t,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),r=new et(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:eJ[t].call(r)}},eJ[8]=function(){var t=this.parseUShort();return A.argument(1===t,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(et.coverage),backtrackCoverage:this.parseList(et.pointer(et.coverage)),lookaheadCoverage:this.parseList(et.pointer(et.coverage)),substitutes:this.parseUShortList()}};var eK=Array(9);eK[1]=function(t){return 1===t.substFormat?new Z.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Z.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new Z.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Z.Coverage(t.coverage)}].concat(Z.ushortList("substitute",t.substitute)))},eK[3]=function(t){return A.assert(1===t.substFormat,"Lookup type 3 substFormat must be 1."),new Z.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Z.Coverage(t.coverage)}].concat(Z.tableList("altSet",t.alternateSets,function(t){return new Z.Table("alternateSetTable",Z.ushortList("alternate",t))})))},eK[4]=function(t){return A.assert(1===t.substFormat,"Lookup type 4 substFormat must be 1."),new Z.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Z.Coverage(t.coverage)}].concat(Z.tableList("ligSet",t.ligatureSets,function(t){return new Z.Table("ligatureSetTable",Z.tableList("ligature",t,function(t){return new Z.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:t.ligGlyph}].concat(Z.ushortList("component",t.components,t.components.length+1)))}))})))};var e0={parse:function(t,r){return r=(t=new et(t,r=r||0)).parseVersion(1),A.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(eJ)}:{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(eJ),variations:t.parseFeatureVariationsList()}},make:function(t){return new Z.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Z.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new Z.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new Z.LookupList(t.lookups,eK)}])}},e1={parse:function(t,r){for(var o=new eo.Parser(t,r),n=o.parseULong(),s=(A.argument(1===n,"Unsupported META table version."),o.parseULong(),o.parseULong(),o.parseULong()),i={},a=0;a<s;a++){var l=o.parseTag(),u=o.parseULong(),c=o.parseULong(),u=O.UTF8(t,r+u,c);i[l]=u}return i},make:function(t){var r,o=Object.keys(t).length,n="",s=16+12*o,i=new Z.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:s},{name:"numTags",type:"ULONG",value:o}]);for(r in t){var a=n.length;n+=t[r],i.fields.push({name:"tag "+r,type:"TAG",value:r}),i.fields.push({name:"offset "+r,type:"ULONG",value:s+a}),i.fields.push({name:"length "+r,type:"ULONG",value:t[r].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}};function e2(t){return Math.log(t)/Math.log(2)|0}function e3(t){for(;t.length%4!=0;)t.push(0);for(var r=0,o=0;o<t.length;o+=4)r+=(t[o]<<24)+(t[o+1]<<16)+(t[o+2]<<8)+t[o+3];return r%4294967296}function e5(t,r,o,n){return new Z.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==t?t:""},{name:"checkSum",type:"ULONG",value:void 0!==r?r:0},{name:"offset",type:"ULONG",value:void 0!==o?o:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function e4(t){for(var r=new Z.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),o=(r.tables=t,r.numTables=t.length,Math.pow(2,e2(r.numTables))),n=(r.searchRange=16*o,r.entrySelector=e2(o),r.rangeShift=16*r.numTables-r.searchRange,[]),s=[],i=r.sizeOf()+e5().sizeOf()*r.numTables;i%4!=0;)i+=1,s.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<t.length;a+=1){var l=t[a],u=(A.argument(4===l.tableName.length,"Table name"+l.tableName+" is invalid."),l.sizeOf()),c=e5(l.tableName,e3(l.encode()),i,u);for(n.push({name:c.tag+" Table Record",type:"RECORD",value:c}),s.push({name:l.tableName+" table",type:"RECORD",value:l}),i+=u,A.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!=0;)i+=1,s.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(t,r){return t.value.tag>r.value.tag?1:-1}),r.fields=r.fields.concat(n),r.fields=r.fields.concat(s),r}function e6(t,r,o){for(var n=0;n<r.length;n+=1){var s=t.charToGlyphIndex(r[n]);if(0<s)return t.glyphs.get(s).getMetrics()}return o}var e8={make:e4,fontToTable:function(t){for(var r,o=[],n=[],s=[],i=[],a=[],l=[],u=[],c=0,d=0,h=0,f=0,p=0,m=0;m<t.glyphs.length;m+=1){var y=t.glyphs.get(m),g=0|y.unicode;if(isNaN(y.advanceWidth))throw Error("Glyph "+y.name+" ("+m+"): advanceWidth is not a number.");(g<r||void 0===r)&&0<g&&(r=g),c<g&&(c=g);var g=eZ.getUnicodeRange(g);if(g<32)d|=1<<g;else if(g<64)h|=1<<g-32;else if(g<96)f|=1<<g-64;else{if(!(g<123))throw Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<g-96}".notdef"!==y.name&&(g=y.getMetrics(),o.push(g.xMin),n.push(g.yMin),s.push(g.xMax),i.push(g.yMax),l.push(g.leftSideBearing),u.push(g.rightSideBearing),a.push(y.advanceWidth))}var v,b={xMin:Math.min.apply(null,o),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,s),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:function(t){for(var r=0,o=0;o<t.length;o+=1)r+=t[o];return r/t.length}(a),minLeftSideBearing:Math.min.apply(null,l),maxLeftSideBearing:Math.max.apply(null,l),minRightSideBearing:Math.min.apply(null,u)},x=(b.ascender=t.ascender,b.descender=t.descender,eR.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp})),j=eP.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:t.glyphs.length}),w=eI.make(t.glyphs.length),S=eZ.make({xAvgCharWidth:Math.round(b.advanceWidthAvg),usWeightClass:t.tables.os2.usWeightClass,usWidthClass:t.tables.os2.usWidthClass,usFirstCharIndex:r,usLastCharIndex:c,ulUnicodeRange1:d,ulUnicodeRange2:h,ulUnicodeRange3:f,ulUnicodeRange4:p,fsSelection:t.tables.os2.fsSelection,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:e6(t,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:e6(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0}),T=function(t){for(var r=new Z.Table("hmtx",[]),o=0;o<t.length;o+=1){var n=t.get(o),s=n.advanceWidth||0,n=n.leftSideBearing||0;r.fields.push({name:"advanceWidth_"+o,type:"USHORT",value:s}),r.fields.push({name:"leftSideBearing_"+o,type:"SHORT",value:n})}return r}(t.glyphs),E=en.make(t.glyphs),k=t.getEnglishName("fontFamily"),M=t.getEnglishName("fontSubfamily"),C=k+" "+M,A=(A=t.getEnglishName("postScriptName"))||k.replace(/\s/g,"")+"-"+M,O={};for(v in t.names)O[v]=t.names[v];O.uniqueID||(O.uniqueID={en:t.getEnglishName("manufacturer")+":"+C}),O.postScriptName||(O.postScriptName={en:A}),O.preferredFamily||(O.preferredFamily=t.names.fontFamily),O.preferredSubfamily||(O.preferredSubfamily=t.names.fontSubfamily);var R=[],P=eX.make(O,R),R=0<R.length?eL.make(R):void 0,L=eQ.make(),C=eO.make(t.glyphs,{version:t.getEnglishName("version"),fullName:C,familyName:k,weightName:M,postScriptName:A,unitsPerEm:t.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),k=t.metas&&0<Object.keys(t.metas).length?e1.make(t.metas):void 0,M=[x,j,w,S,P,E,L,C,T];R&&M.push(R),t.tables.gsub&&M.push(e0.make(t.tables.gsub)),k&&M.push(k);for(var I=e3((A=e4(M)).encode()),D=A.fields,F=!1,N=0;N<D.length;N+=1)if("head table"===D[N].name){D[N].value.checkSumAdjustment=2981146554-I,F=!0;break}if(F)return A;throw Error("Could not find head table with checkSum to adjust.")},computeCheckSum:e3};function e7(t,r){for(var o=0,n=t.length-1;o<=n;){var s=o+n>>>1,i=t[s].tag;if(i===r)return s;i<r?o=1+s:n=s-1}return-o-1}function e9(t,r){for(var o=0,n=t.length-1;o<=n;){var s=o+n>>>1,i=t[s];if(i===r)return s;i<r?o=1+s:n=s-1}return-o-1}function te(t,r){for(var o=0,n=t.length-1;o<=n;){var s,i=o+n>>>1,a=(s=t[i]).start;if(a===r)return s;a<r?o=1+i:n=i-1}if(0<o)return r>(s=t[o-1]).end?0:s}function tt(t,r){this.font=t,this.tableName=r}function tr(t){tt.call(this,t,"gpos")}function to(t){tt.call(this,t,"gsub")}function tn(t,r,o){for(var n=t.subtables,s=0;s<n.length;s++){var i=n[s];if(i.substFormat===r)return i}if(o)return n.push(o),o}function ts(t){for(var r=new ArrayBuffer(t.length),o=new Uint8Array(r),n=0;n<t.length;++n)o[n]=t[n];return r}function ti(t,r){if(!t)throw r}function ta(t,r,o,n,s){var i=0<(r&n)?(i=t.parseByte(),o+(i=0==(r&s)?-i:i)):0<(r&s)?o:o+t.parseShort();return i}function tl(t,r,o){var n,s=new eo.Parser(r,o);if(t.numberOfContours=s.parseShort(),t._xMin=s.parseShort(),t._yMin=s.parseShort(),t._xMax=s.parseShort(),t._yMax=s.parseShort(),0<t.numberOfContours){for(var i=t.endPointIndices=[],a=0;a<t.numberOfContours;a+=1)i.push(s.parseUShort());t.instructionLength=s.parseUShort(),t.instructions=[];for(var l=0;l<t.instructionLength;l+=1)t.instructions.push(s.parseByte());for(var u=i[i.length-1]+1,c=[],d=0;d<u;d+=1)if(n=s.parseByte(),c.push(n),0<(8&n))for(var h=s.parseByte(),f=0;f<h;f+=1)c.push(n),d+=1;if(A.argument(c.length===u,"Bad flags."),0<i.length){var p,m=[];if(0<u){for(var y=0;y<u;y+=1)n=c[y],(p={}).onCurve=!!(1&n),p.lastPointOfContour=0<=i.indexOf(y),m.push(p);for(var g=0,v=0;v<u;v+=1)n=c[v],(p=m[v]).x=ta(s,n,g,2,16),g=p.x;for(var b=0,x=0;x<u;x+=1)n=c[x],(p=m[x]).y=ta(s,n,b,4,32),b=p.y}t.points=m}else t.points=[]}else if(0===t.numberOfContours)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var j=!0;j;){c=s.parseUShort();var w={glyphIndex:s.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&c)?0<(2&c)?(w.dx=s.parseShort(),w.dy=s.parseShort()):w.matchedPoints=[s.parseUShort(),s.parseUShort()]:0<(2&c)?(w.dx=s.parseChar(),w.dy=s.parseChar()):w.matchedPoints=[s.parseByte(),s.parseByte()],0<(8&c)?w.xScale=w.yScale=s.parseF2Dot14():0<(64&c)?(w.xScale=s.parseF2Dot14(),w.yScale=s.parseF2Dot14()):0<(128&c)&&(w.xScale=s.parseF2Dot14(),w.scale01=s.parseF2Dot14(),w.scale10=s.parseF2Dot14(),w.yScale=s.parseF2Dot14()),t.components.push(w),j=!!(32&c)}if(256&c){t.instructionLength=s.parseUShort(),t.instructions=[];for(var S=0;S<t.instructionLength;S+=1)t.instructions.push(s.parseByte())}}}function tu(t,r){for(var o=[],n=0;n<t.length;n+=1){var s=t[n],s={x:r.xScale*s.x+r.scale01*s.y+r.dx,y:r.scale10*s.x+r.yScale*s.y+r.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};o.push(s)}return o}function tc(t){var r=new k;if(t)for(var o=function(t){for(var r=[],o=[],n=0;n<t.length;n+=1){var s=t[n];o.push(s),s.lastPointOfContour&&(r.push(o),o=[])}return A.argument(0===o.length,"There are still points left in the current contour."),r}(t),n=0;n<o.length;++n){var s,i=o[n],a=i[i.length-1],l=i[0];a.onCurve?r.moveTo(a.x,a.y):l.onCurve?r.moveTo(l.x,l.y):(s={x:.5*(a.x+l.x),y:.5*(a.y+l.y)},r.moveTo(s.x,s.y));for(var u=0;u<i.length;++u){var c,d=a,a=l,l=i[(u+1)%i.length];a.onCurve?r.lineTo(a.x,a.y):(c=l,d.onCurve||(a.x,d.x,a.y,d.y),l.onCurve||(c={x:.5*(a.x+l.x),y:.5*(a.y+l.y)}),r.quadraticCurveTo(a.x,a.y,c.x,c.y))}r.closePath()}return r}function td(t,r){if(r.isComposite)for(var o=0;o<r.components.length;o+=1){var n=r.components[o],s=t.get(n.glyphIndex);if(s.getPath(),s.points){var i=void 0;if(void 0===n.matchedPoints)i=tu(s.points,n);else{if(n.matchedPoints[0]>r.points.length-1||n.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+r.name);var a=r.points[n.matchedPoints[0]],l=s.points[n.matchedPoints[1]],n={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0},l=tu([l],n)[0];n.dx=a.x-l.x,n.dy=a.y-l.y,i=tu(s.points,n)}r.points=r.points.concat(i)}}return tc(r.points)}(tr.prototype=tt.prototype={searchTag:e7,binSearch:e9,getTable:function(t){var r=this.font.tables[this.tableName];return!r&&t?this.font.tables[this.tableName]=this.createDefaultTable():r},getScriptNames:function(){var t=this.getTable();return t?t.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){var t=this.getTable();if(t){for(var r=!1,o=0;o<t.scripts.length;o++){var n=t.scripts[o].tag;if("DFLT"===n)return n;"latn"===n&&(r=!0)}return r?"latn":void 0}},getScriptTable:function(t,r){var o,n=this.getTable(r);if(n)return o=n.scripts,0<=(n=e7(n.scripts,t=t||"DFLT"))?o[n].script:r?(o.splice(-1-n,0,r={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),r.script):void 0},getLangSysTable:function(t,r,o){var n,t=this.getScriptTable(t,o);if(t)return r&&"dflt"!==r&&"DFLT"!==r?0<=(n=e7(t.langSysRecords,r))?t.langSysRecords[n].langSys:o?(t.langSysRecords.splice(-1-n,0,o={tag:r,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),o.langSys):void 0:t.defaultLangSys},getFeatureTable:function(t,r,o,n){if(t=this.getLangSysTable(t,r,n)){for(var s,i=t.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<i.length;l++)if((s=a[i[l]]).tag===o)return s.feature;if(n)return r=a.length,A.assert(0===r||o>=a[r-1].tag,"Features must be added in alphabetical order."),a.push(s={tag:o,feature:{params:0,lookupListIndexes:[]}}),i.push(r),s.feature}},getLookupTables:function(t,r,o,n,s){var t=this.getFeatureTable(t,r,o,s),i=[];if(t){for(var a,l=t.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)(a=u[l[c]]).lookupType===n&&i.push(a);if(0===i.length&&s)return r=u.length,u.push(a={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0}),l.push(r),[a]}return i},getGlyphClass:function(t,r){switch(t.format){case 1:return t.startGlyph<=r&&r<t.startGlyph+t.classes.length?t.classes[r-t.startGlyph]:0;case 2:var o=te(t.ranges,r);return o?o.classId:0}},getCoverageIndex:function(t,r){switch(t.format){case 1:var o=e9(t.glyphs,r);return 0<=o?o:-1;case 2:return(o=te(t.ranges,r))?o.index+r-o.start:-1}},expandCoverage:function(t){if(1===t.format)return t.glyphs;for(var r=[],o=t.ranges,n=0;n<o.length;n++)for(var s=o[n],i=s.start,a=s.end,l=i;l<=a;l++)r.push(l);return r}}).init=function(){var t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)},tr.prototype.getKerningValue=function(t,r,o){for(var n=0;n<t.length;n++)for(var s=t[n].subtables,i=0;i<s.length;i++){var a=s[i],l=this.getCoverageIndex(a.coverage,r);if(!(l<0))switch(a.posFormat){case 1:for(var u=a.pairSets[l],c=0;c<u.length;c++){var d=u[c];if(d.secondGlyph===o)return d.value1&&d.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(a.classDef1,r),f=this.getGlyphClass(a.classDef2,o),h=a.classRecords[h][f];return h.value1&&h.value1.xAdvance||0}}return 0},tr.prototype.getKerningTables=function(t,r){if(this.font.tables.gpos)return this.getLookupTables(t,r,"kern",2)},(to.prototype=tt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},to.prototype.getSingle=function(t,r,o){for(var n=[],s=this.getLookupTables(r,o,t,1),i=0;i<s.length;i++)for(var a=s[i].subtables,l=0;l<a.length;l++){var u=a[l],c=this.expandCoverage(u.coverage),d=void 0;if(1===u.substFormat)for(var h=u.deltaGlyphId,d=0;d<c.length;d++){var f=c[d];n.push({sub:f,by:f+h})}else{var p=u.substitute;for(d=0;d<c.length;d++)n.push({sub:c[d],by:p[d]})}}return n},to.prototype.getAlternates=function(t,r,o){for(var n=[],s=this.getLookupTables(r,o,t,3),i=0;i<s.length;i++)for(var a=s[i].subtables,l=0;l<a.length;l++)for(var u=a[l],c=this.expandCoverage(u.coverage),d=u.alternateSets,h=0;h<c.length;h++)n.push({sub:c[h],by:d[h]});return n},to.prototype.getLigatures=function(t,r,o){for(var n=[],s=this.getLookupTables(r,o,t,4),i=0;i<s.length;i++)for(var a=s[i].subtables,l=0;l<a.length;l++)for(var u=a[l],c=this.expandCoverage(u.coverage),d=u.ligatureSets,h=0;h<c.length;h++)for(var f=c[h],p=d[h],m=0;m<p.length;m++){var y=p[m];n.push({sub:[f].concat(y.components),by:y.ligGlyph})}return n},to.prototype.addSingle=function(t,r,o,n){o=tn(this.getLookupTables(o,n,t,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),A.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format),n=r.sub,(t=this.binSearch(o.coverage.glyphs,n))<0&&(o.coverage.glyphs.splice(t=-1-t,0,n),o.substitute.splice(t,0,0)),o.substitute[t]=r.by},to.prototype.addAlternate=function(t,r,o,n){o=tn(this.getLookupTables(o,n,t,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),A.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format),n=r.sub,(t=this.binSearch(o.coverage.glyphs,n))<0&&(o.coverage.glyphs.splice(t=-1-t,0,n),o.alternateSets.splice(t,0,0)),o.alternateSets[t]=r.by},to.prototype.addLigature=function(t,r,o,n){var o=this.getLookupTables(o,n,t,4,!0)[0],n=o.subtables[0],t=(n||(o.subtables[0]=n={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),A.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r.sub[0]),s=r.sub.slice(1),o={ligGlyph:r.by,components:s},r=this.binSearch(n.coverage.glyphs,t);if(0<=r){for(var i=n.ligatureSets[r],a=0;a<i.length;a++)if(function(t,r){var o=t.length;if(o===r.length){for(var n=0;n<o;n++)if(t[n]!==r[n])return;return 1}}(i[a].components,s))return;i.push(o)}else n.coverage.glyphs.splice(r=-1-r,0,t),n.ligatureSets.splice(r,0,[o])},to.prototype.getFeature=function(t,r,o){if(/ss\d\d/.test(t))return this.getSingle(t,r,o);switch(t){case"aalt":case"salt":return this.getSingle(t,r,o).concat(this.getAlternates(t,r,o));case"dlig":case"liga":case"rlig":return this.getLigatures(t,r,o)}},to.prototype.add=function(t,r,o,n){if(/ss\d\d/.test(t))return this.addSingle(t,r,o,n);switch(t){case"aalt":case"salt":return"number"==typeof r.by?this.addSingle(t,r,o,n):this.addAlternate(t,r,o,n);case"dlig":case"liga":case"rlig":return this.addLigature(t,r,o,n)}};var th={getPath:tc,parse:function(t,r,o,n){for(var s=new eg.GlyphSet(n),i=0;i<o.length-1;i+=1){var a=o[i];a!==o[i+1]?s.push(i,eg.ttfGlyphLoader(n,i,tl,t,r+a,td)):s.push(i,eg.glyphLoader(n,i))}return s}};function tf(t){this.font=t,this.getCommands=function(t){return th.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function tp(t){return t}function tm(t){return Math.sign(t)*Math.round(Math.abs(t))}function ty(t){return Math.sign(t)*Math.round(Math.abs(2*t))/2}function tg(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function tv(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function tb(t){return Math.sign(t)*Math.floor(Math.abs(t))}function t_(t){var r=this.srPeriod,o=this.srPhase,n=1;return t<0&&(t=-t,n=-1),t+=this.srThreshold-o,(t=Math.trunc(t/r)*r+o)<0?o*n:t*n}var tx={x:1,y:0,axis:"x",distance:function(t,r,o,n){return(o?t.xo:t.x)-(n?r.xo:r.x)},interpolate:function(t,r,o,n){var s,i,a,l,u,c,d;if(!n||n===this)return s=t.xo-r.xo,i=t.xo-o.xo,u=r.x-r.xo,c=o.x-o.xo,0===(d=(a=Math.abs(s))+(l=Math.abs(i)))?void(t.x=t.xo+(u+c)/2):void(t.x=t.xo+(u*l+c*a)/d);s=n.distance(t,r,!0,!0),i=n.distance(t,o,!0,!0),u=n.distance(r,r,!1,!0),c=n.distance(o,o,!1,!0),0===(d=(a=Math.abs(s))+(l=Math.abs(i)))?tx.setRelative(t,t,(u+c)/2,n,!0):tx.setRelative(t,t,(u*l+c*a)/d,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,r,o,n,s){var i,a;n&&n!==this?(i=s?r.xo:r.x,a=s?r.yo:r.y,i+=o*n.x,a+=o*n.y,t.x=i+(t.y-a)/n.normalSlope):t.x=(s?r.xo:r.x)+o},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},tj={x:0,y:1,axis:"y",distance:function(t,r,o,n){return(o?t.yo:t.y)-(n?r.yo:r.y)},interpolate:function(t,r,o,n){var s,i,a,l,u,c,d;if(!n||n===this)return s=t.yo-r.yo,i=t.yo-o.yo,u=r.y-r.yo,c=o.y-o.yo,0===(d=(a=Math.abs(s))+(l=Math.abs(i)))?void(t.y=t.yo+(u+c)/2):void(t.y=t.yo+(u*l+c*a)/d);s=n.distance(t,r,!0,!0),i=n.distance(t,o,!0,!0),u=n.distance(r,r,!1,!0),c=n.distance(o,o,!1,!0),0===(d=(a=Math.abs(s))+(l=Math.abs(i)))?tj.setRelative(t,t,(u+c)/2,n,!0):tj.setRelative(t,t,(u*l+c*a)/d,n,!0)},normalSlope:0,setRelative:function(t,r,o,n,s){var i,a;n&&n!==this?(i=s?r.xo:r.x,a=s?r.yo:r.y,i+=o*n.x,a+=o*n.y,t.y=a+n.normalSlope*(t.x-i)):t.y=(s?r.yo:r.y)+o},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};function tw(t,r){this.x=t,this.y=r,this.axis=void 0,this.slope=r/t,this.normalSlope=-t/r,Object.freeze(this)}function tS(t,r){var o=Math.sqrt(t*t+r*r);return r/=o,1==(t/=o)&&0===r?tx:0===t&&1===r?tj:new tw(t,r)}function tT(t,r,o,n){this.x=this.xo=Math.round(64*t)/64,this.y=this.yo=Math.round(64*r)/64,this.lastPointOfContour=o,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(tx),Object.freeze(tj),tw.prototype.distance=function(t,r,o,n){return this.x*tx.distance(t,r,o,n)+this.y*tj.distance(t,r,o,n)},tw.prototype.interpolate=function(t,r,o,n){var s=n.distance(t,r,!0,!0),i=n.distance(t,o,!0,!0),r=n.distance(r,r,!1,!0),o=n.distance(o,o,!1,!0),s=Math.abs(s),i=Math.abs(i),a=s+i;0===a?this.setRelative(t,t,(r+o)/2,n,!0):this.setRelative(t,t,(r*i+o*s)/a,n,!0)},tw.prototype.setRelative=function(t,r,o,n,s){var i=s?r.xo:r.x,s=s?r.yo:r.y,r=i+o*(n=n||this).x,i=s+o*n.y,s=n.normalSlope,o=this.slope,n=t.x,a=t.y;t.x=(o*n-s*r+i-a)/(o-s),t.y=o*(t.x-n)+a},tw.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0},tT.prototype.nextTouched=function(t){for(var r=this.nextPointOnContour;!t.touched(r)&&r!==this;)r=r.nextPointOnContour;return r},tT.prototype.prevTouched=function(t){for(var r=this.prevPointOnContour;!t.touched(r)&&r!==this;)r=r.prevPointOnContour;return r};var tE=Object.freeze(new tT(0,0)),tk={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function tM(t,r){switch(this.env=t,this.stack=[],this.prog=r,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=tx,this.round=tm}}function tC(t){for(var r=t.tZone=Array(t.gZone.length),o=0;o<r.length;o++)r[o]=new tT(0,0)}function tA(t,r){var o,n=t.prog,s=t.ip,i=1;do if(88===(o=n[++s]))i++;else if(89===o)i--;else if(64===o)s+=n[s+1]+1;else if(65===o)s+=2*n[s+1]+1;else if(176<=o&&o<=183)s+=o-176+1;else if(184<=o&&o<=191)s+=2*(o-184+1);else if(r&&1===i&&27===o)break;while(0<i)t.ip=s}function tO(t,o){r.DEBUG&&console.log(o.step,"SVTCA["+t.axis+"]"),o.fv=o.pv=o.dpv=t}function tR(t,o){r.DEBUG&&console.log(o.step,"SPVTCA["+t.axis+"]"),o.pv=o.dpv=t}function tP(t,o){r.DEBUG&&console.log(o.step,"SFVTCA["+t.axis+"]"),o.fv=t}function tL(t,o){var n,s=o.stack,i=s.pop(),s=s.pop(),a=o.z2[i],l=o.z1[s];r.DEBUG&&console.log("SPVTL["+t+"]",i,s),i=t?(n=a.y-l.y,l.x-a.x):(n=l.x-a.x,l.y-a.y),o.pv=o.dpv=tS(n,i)}function tI(t,o){var n,s=o.stack,i=s.pop(),s=s.pop(),a=o.z2[i],l=o.z1[s];r.DEBUG&&console.log("SFVTL["+t+"]",i,s),i=t?(n=a.y-l.y,l.x-a.x):(n=l.x-a.x,l.y-a.y),o.fv=tS(n,i)}function tD(t){r.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function tF(t,o){var n=o.stack.pop(),s=o.z0[n],i=o.fv,a=o.pv,l=(r.DEBUG&&console.log(o.step,"MDAP["+t+"]",n),a.distance(s,tE));t&&(l=o.round(l)),i.setRelative(s,tE,l,a),i.touch(s),o.rp0=o.rp1=n}function tN(t,o){var n,s,i,a=o.z2,l=a.length-2;r.DEBUG&&console.log(o.step,"IUP["+t.axis+"]");for(var u=0;u<l;u++)n=a[u],t.touched(n)||(s=n.prevTouched(t))!==n&&(s===(i=n.nextTouched(t))&&t.setRelative(n,n,t.distance(s,s,!1,!0),t,!0),t.interpolate(n,s,i,t))}function tU(t,o){for(var n=o.stack,s=t?o.rp1:o.rp2,i=(t?o.z0:o.z1)[s],a=o.fv,l=o.pv,u=o.loop,c=o.z2;u--;){var d=n.pop(),h=c[d],f=l.distance(i,i,!1,!0);a.setRelative(h,h,f,l),a.touch(h),r.DEBUG&&console.log(o.step,(1<o.loop?"loop "+(o.loop-u)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",d)}o.loop=1}function tB(t,o){for(var n=o.stack,s=t?o.rp1:o.rp2,i=(t?o.z0:o.z1)[s],a=o.fv,l=o.pv,s=n.pop(),u=o.z2[o.contours[s]],c=u,d=(r.DEBUG&&console.log(o.step,"SHC["+t+"]",s),l.distance(i,i,!1,!0));c!==i&&a.setRelative(c,c,d,l),(c=c.nextPointOnContour)!==u;);}function tV(t,o){var n,s,i=o.stack,a=t?o.rp1:o.rp2,a=(t?o.z0:o.z1)[a],l=o.fv,u=o.pv,i=i.pop();switch(r.DEBUG&&console.log(o.step,"SHZ["+t+"]",i),i){case 0:n=o.tZone;break;case 1:n=o.gZone;break;default:throw Error("Invalid zone")}for(var c=u.distance(a,a,!1,!0),d=n.length-2,h=0;h<d;h++)s=n[h],l.setRelative(s,s,c,u)}function tG(t,o){var n=o.stack,s=n.pop()/64,n=n.pop(),i=o.z1[n],a=o.z0[o.rp0],l=o.fv,u=o.pv;l.setRelative(i,a,s,u),l.touch(i),r.DEBUG&&console.log(o.step,"MSIRP["+t+"]",s,n),o.rp1=o.rp0,o.rp2=n,t&&(o.rp0=n)}function tH(t,o){var n=o.stack,s=n.pop(),n=n.pop(),i=o.z0[n],a=o.fv,l=o.pv,u=o.cvt[s],s=(r.DEBUG&&console.log(o.step,"MIAP["+t+"]",s,"(",u,")",n),l.distance(i,tE));t&&(Math.abs(s-u)<o.cvCutIn&&(s=u),s=o.round(s)),a.setRelative(i,tE,s,l),0===o.zp0&&(i.xo=i.x,i.yo=i.y),a.touch(i),o.rp0=o.rp1=n}function tz(t,o){var n=o.stack,s=n.pop(),i=o.z2[s];r.DEBUG&&console.log(o.step,"GC["+t+"]",s),n.push(64*o.dpv.distance(i,tE,t,!1))}function tq(t,o){var n=o.stack,s=n.pop(),n=n.pop(),i=o.z1[s],a=o.z0[n],a=o.dpv.distance(a,i,t,t);r.DEBUG&&console.log(o.step,"MD["+t+"]",s,n,"->",a),o.stack.push(Math.round(64*a))}function tW(t,o){var n=o.stack,s=n.pop(),i=o.fv,a=o.pv,l=o.ppem,u=o.deltaBase+16*(t-1),c=o.deltaShift,d=o.z0;r.DEBUG&&console.log(o.step,"DELTAP["+t+"]",s,n);for(var h=0;h<s;h++){var f=n.pop(),p=n.pop();u+((240&p)>>4)===l&&(0<=(p=(15&p)-8)&&p++,r.DEBUG&&console.log(o.step,"DELTAPFIX",f,"by",p*c),f=d[f],i.setRelative(f,f,p*c,a))}}function tX(t,o){var n=o.stack,s=n.pop();r.DEBUG&&console.log(o.step,"ROUND[]"),n.push(64*o.round(s/64))}function tY(t,o){var n=o.stack,s=n.pop(),i=o.ppem,a=o.deltaBase+16*(t-1),l=o.deltaShift;r.DEBUG&&console.log(o.step,"DELTAC["+t+"]",s,n);for(var u=0;u<s;u++){var c=n.pop(),d=n.pop();a+((240&d)>>4)===i&&(0<=(d=(15&d)-8)&&d++,d*=l,r.DEBUG&&console.log(o.step,"DELTACFIX",c,"by",d),o.cvt[c]+=d)}}function tZ(t,o){var n,s=o.stack,i=s.pop(),s=s.pop(),a=o.z2[i],l=o.z1[s];r.DEBUG&&console.log(o.step,"SDPVTL["+t+"]",i,s),i=t?(n=a.y-l.y,l.x-a.x):(n=l.x-a.x,l.y-a.y),o.dpv=tS(n,i)}function tQ(t,o){var n=o.stack,s=o.prog,i=o.ip;r.DEBUG&&console.log(o.step,"PUSHB["+t+"]");for(var a=0;a<t;a++)n.push(s[++i]);o.ip=i}function tJ(t,o){var n=o.ip,s=o.prog,i=o.stack;r.DEBUG&&console.log(o.ip,"PUSHW["+t+"]");for(var a=0;a<t;a++){var l=s[++n]<<8|s[++n];32768&l&&(l=-(1+(65535^l))),i.push(l)}o.ip=n}function t$(t,o,n,s,i,a){var l,u,c=a.stack,d=t&&c.pop(),c=c.pop(),h=a.rp0,h=a.z0[h],f=a.z1[c],p=a.minDis,m=a.fv,y=a.dpv,g=l=y.distance(f,h,!0,!0),v=0<=g?1:-1;g=Math.abs(g),t&&(u=a.cvt[d],s&&Math.abs(g-u)<a.cvCutIn&&(g=u)),n&&g<p&&(g=p),s&&(g=a.round(g)),m.setRelative(f,h,v*g,y),m.touch(f),r.DEBUG&&console.log(a.step,(t?"MIRP[":"MDRP[")+(o?"M":"m")+(n?">":"_")+(s?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",t?d+"("+a.cvt[d]+","+u+")":"",c,"(d =",l,"->",v*g,")"),a.rp1=a.rp0,a.rp2=c,o&&(a.rp0=c)}tf.prototype.exec=function(t,o){if("number"!=typeof o)throw Error("Point size is not a number!");if(!(2<this._errorState)){var n=this.font,s=this._prepState;if(!s||s.ppem!==o){var i=this._fpgmState;if(!i){tM.prototype=tk,(i=this._fpgmState=new tM("fpgm",n.tables.fpgm)).funcs=[],i.font=n,r.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{t1(i)}catch(t){return console.log("Hinting error in FPGM:"+t),void(this._errorState=3)}}tM.prototype=i,(s=this._prepState=new tM("prep",n.tables.prep)).ppem=o;var a=n.tables.cvt;if(a)for(var l=s.cvt=Array(a.length),u=o/n.unitsPerEm,c=0;c<a.length;c++)l[c]=a[c]*u;else s.cvt=[];r.DEBUG&&(console.log("---EXEC PREP---"),s.step=-1);try{t1(s)}catch(t){this._errorState<2&&console.log("Hinting error in PREP:"+t),this._errorState=2}}if(!(1<this._errorState))try{return tK(t,s)}catch(t){this._errorState<1&&(console.log("Hinting error:"+t),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var tK=function(t,o){var n=o.ppem/o.font.unitsPerEm,s=t.components;if(tM.prototype=o,s){for(var i=o.font,a=[],l=[],u=0;u<s.length;u++){var c=s[u],d=i.glyphs.get(c.glyphIndex),h=new tM("glyf",d.instructions);r.DEBUG&&(console.log("---EXEC COMP "+u+"---"),h.step=-1),t0(d,h,n,n);for(var f=Math.round(c.dx*n),p=Math.round(c.dy*n),m=h.gZone,y=h.contours,g=0;g<m.length;g++){var v=m[g];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+f,v.yo=v.y=v.y+p}var b=a.length;a.push.apply(a,m);for(var x=0;x<y.length;x++)l.push(y[x]+b)}t.instructions&&!h.inhibitGridFit&&((h=new tM("glyf",t.instructions)).gZone=h.z0=h.z1=h.z2=a,h.contours=l,a.push(new tT(0,0),new tT(Math.round(t.advanceWidth*n),0)),r.DEBUG&&(console.log("---EXEC COMPOSITE---"),h.step=-1),t1(h),a.length-=2)}else h=new tM("glyf",t.instructions),r.DEBUG&&(console.log("---EXEC GLYPH---"),h.step=-1),t0(t,h,n,n),a=h.gZone;return a},t0=function(t,o,n,s){for(var i,a,l,u=t.points||[],c=u.length,d=o.gZone=o.z0=o.z1=o.z2=[],h=o.contours=[],f=0;f<c;f++)i=u[f],d[f]=new tT(i.x*n,i.y*s,i.lastPointOfContour,i.onCurve);for(var p=0;p<c;p++)i=d[p],a||(a=i,h.push(p)),i.lastPointOfContour?((i.nextPointOnContour=a).prevPointOnContour=i,a=void 0):(l=d[p+1],(i.nextPointOnContour=l).prevPointOnContour=i);if(!o.inhibitGridFit){if(r.DEBUG){console.log("PROCESSING GLYPH",o.stack);for(var m=0;m<c;m++)console.log(m,d[m].x,d[m].y)}if(d.push(new tT(0,0),new tT(Math.round(t.advanceWidth*n),0)),t1(o),d.length-=2,r.DEBUG){console.log("FINISHED GLYPH",o.stack);for(var y=0;y<c;y++)console.log(y,d[y].x,d[y].y)}}},t1=function(t){var o=t.prog;if(o){var n,s=o.length;for(t.ip=0;t.ip<s;t.ip++){if(r.DEBUG&&t.step++,!(n=t2[o[t.ip]]))throw Error("unknown instruction: 0x"+Number(o[t.ip]).toString(16));n(t)}}},t2=[tO.bind(void 0,tj),tO.bind(void 0,tx),tR.bind(void 0,tj),tR.bind(void 0,tx),tP.bind(void 0,tj),tP.bind(void 0,tx),tL.bind(void 0,0),tL.bind(void 0,1),tI.bind(void 0,0),tI.bind(void 0,1),function(t){var o=(n=t.stack).pop(),n=n.pop();r.DEBUG&&console.log(t.step,"SPVFS[]",o,n),t.pv=t.dpv=tS(n,o)},function(t){var o=(n=t.stack).pop(),n=n.pop();r.DEBUG&&console.log(t.step,"SPVFS[]",o,n),t.fv=tS(n,o)},function(t){var o=t.stack,n=t.pv;r.DEBUG&&console.log(t.step,"GPV[]"),o.push(16384*n.x),o.push(16384*n.y)},function(t){var o=t.stack,n=t.fv;r.DEBUG&&console.log(t.step,"GFV[]"),o.push(16384*n.x),o.push(16384*n.y)},function(t){t.fv=t.pv,r.DEBUG&&console.log(t.step,"SFVTPV[]")},function(t){var o=(a=t.stack).pop(),n=a.pop(),s=a.pop(),i=a.pop(),a=a.pop(),l=t.z0,u=t.z1,c=l[o],l=l[n],d=u[s],u=u[i],t=t.z2[a],o=(r.DEBUG&&console.log("ISECT[], ",o,n,s,i,a),c.x),n=c.y,s=l.x,i=l.y,a=d.x,c=d.y,l=u.x,d=u.y,u=(o-s)*(c-d)-(n-i)*(a-l),h=o*i-n*s,f=a*d-c*l;t.x=(h*(a-l)-f*(o-s))/u,t.y=(h*(c-d)-f*(n-i))/u},function(t){t.rp0=t.stack.pop(),r.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)},function(t){t.rp1=t.stack.pop(),r.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)},function(t){t.rp2=t.stack.pop(),r.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)},function(t){var o=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"SZP0[]",o),t.zp0=o){case 0:t.tZone||tC(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw Error("Invalid zone pointer")}},function(t){var o=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"SZP1[]",o),t.zp1=o){case 0:t.tZone||tC(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw Error("Invalid zone pointer")}},function(t){var o=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"SZP2[]",o),t.zp2=o){case 0:t.tZone||tC(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw Error("Invalid zone pointer")}},function(t){var o=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"SZPS[]",o),t.zp0=t.zp1=t.zp2=o){case 0:t.tZone||tC(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw Error("Invalid zone pointer")}},function(t){t.loop=t.stack.pop(),r.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)},function(t){r.DEBUG&&console.log(t.step,"RTG[]"),t.round=tm},function(t){r.DEBUG&&console.log(t.step,"RTHG[]"),t.round=tg},function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"SMD[]",o),t.minDis=o/64},function(t){r.DEBUG&&console.log(t.step,"ELSE[]"),tA(t,!1)},function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"JMPR[]",o),t.ip+=o-1},function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"SCVTCI[]",o),t.cvCutIn=o/64},void 0,void 0,function(t){var o=t.stack;r.DEBUG&&console.log(t.step,"DUP[]"),o.push(o[o.length-1])},tD,function(t){r.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"SWAP[]"),o.push(n),o.push(s)},function(t){var o=t.stack;r.DEBUG&&console.log(t.step,"DEPTH[]"),o.push(o.length)},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"CINDEX[]",n),o.push(o[o.length-n])},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"MINDEX[]",n),o.push(o.splice(o.length-n,1)[0])},void 0,void 0,void 0,function(t){var o=(s=t.stack).pop(),n=s.pop(),s=(r.DEBUG&&console.log(t.step,"LOOPCALL[]",o,n),t.ip),i=t.prog;t.prog=t.funcs[o];for(var a=0;a<n;a++)t1(t),r.DEBUG&&console.log(++t.step,a+1<n?"next loopcall":"done loopcall",a);t.ip=s,t.prog=i},function(t){var o=t.stack.pop(),n=(r.DEBUG&&console.log(t.step,"CALL[]",o),t.ip),s=t.prog;t.prog=t.funcs[o],t1(t),t.ip=n,t.prog=s,r.DEBUG&&console.log(++t.step,"returning from",o)},function(t){if("fpgm"!==t.env)throw Error("FDEF not allowed here");var o=t.stack,n=t.prog,s=t.ip,o=o.pop(),i=s;for(r.DEBUG&&console.log(t.step,"FDEF[]",o);45!==n[++s];);t.ip=s,t.funcs[o]=n.slice(i+1,s)},void 0,tF.bind(void 0,0),tF.bind(void 0,1),tN.bind(void 0,tj),tN.bind(void 0,tx),tU.bind(void 0,0),tU.bind(void 0,1),tB.bind(void 0,0),tB.bind(void 0,1),tV.bind(void 0,0),tV.bind(void 0,1),function(t){for(var o=t.stack,n=t.loop,s=t.fv,i=o.pop()/64,a=t.z2;n--;){var l=o.pop(),u=a[l];r.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-n)+": ":"")+"SHPIX[]",l,i),s.setRelative(u,u,i),s.touch(u)}t.loop=1},function(t){for(var o=t.stack,n=t.rp1,s=t.rp2,i=t.loop,a=t.z0[n],l=t.z1[s],u=t.fv,c=t.dpv,d=t.z2;i--;){var h=o.pop(),f=d[h];r.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-i)+": ":"")+"IP[]",h,n,"<->",s),u.interpolate(f,a,l,c),u.touch(f)}t.loop=1},tG.bind(void 0,0),tG.bind(void 0,1),function(t){for(var o=t.stack,n=t.rp0,s=t.z0[n],i=t.loop,a=t.fv,l=t.pv,u=t.z1;i--;){var c=o.pop(),d=u[c];r.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-i)+": ":"")+"ALIGNRP[]",c),a.setRelative(d,s,0,l),a.touch(d)}t.loop=1},function(t){r.DEBUG&&console.log(t.step,"RTDG[]"),t.round=ty},tH.bind(void 0,0),tH.bind(void 0,1),function(t){var o=t.prog,n=t.ip,s=t.stack,i=o[++n];r.DEBUG&&console.log(t.step,"NPUSHB[]",i);for(var a=0;a<i;a++)s.push(o[++n]);t.ip=n},function(t){var o=t.ip,n=t.prog,s=t.stack,i=n[++o];r.DEBUG&&console.log(t.step,"NPUSHW[]",i);for(var a=0;a<i;a++){var l=n[++o]<<8|n[++o];32768&l&&(l=-(1+(65535^l))),s.push(l)}t.ip=o},function(t){var o=t.stack,n=(n=t.store)||(t.store=[]),s=o.pop(),o=o.pop();r.DEBUG&&console.log(t.step,"WS",s,o),n[o]=s},function(t){var o=t.stack,n=t.store,s=o.pop(),t=(r.DEBUG&&console.log(t.step,"RS",s),n&&n[s]||0);o.push(t)},function(t){var o=(n=t.stack).pop(),n=n.pop();r.DEBUG&&console.log(t.step,"WCVTP",o,n),t.cvt[n]=o/64},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"RCVT",n),o.push(64*t.cvt[n])},tz.bind(void 0,0),tz.bind(void 0,1),void 0,tq.bind(void 0,0),tq.bind(void 0,1),function(t){r.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)},void 0,function(t){r.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0},void 0,void 0,function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"LT[]",n,s),o.push(s<n?1:0)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"LTEQ[]",n,s),o.push(s<=n?1:0)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"GT[]",n,s),o.push(n<s?1:0)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"GTEQ[]",n,s),o.push(n<=s?1:0)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"EQ[]",n,s),o.push(n===s?1:0)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"NEQ[]",n,s),o.push(n!==s?1:0)},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"ODD[]",n),o.push(Math.trunc(n)%2?1:0)},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"EVEN[]",n),o.push(Math.trunc(n)%2?0:1)},function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"IF[]",o),o||(tA(t,!0),r.DEBUG&&console.log(t.step,"EIF[]"))},function(t){r.DEBUG&&console.log(t.step,"EIF[]")},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"AND[]",n,s),o.push(n&&s?1:0)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"OR[]",n,s),o.push(n||s?1:0)},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"NOT[]",n),o.push(n?0:1)},tW.bind(void 0,1),function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"SDB[]",o),t.deltaBase=o},function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"SDS[]",o),t.deltaShift=Math.pow(.5,o)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"ADD[]",n,s),o.push(s+n)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"SUB[]",n,s),o.push(s-n)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"DIV[]",n,s),o.push(64*s/n)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"MUL[]",n,s),o.push(s*n/64)},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"ABS[]",n),o.push(Math.abs(n))},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"NEG[]",n),o.push(-n)},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"FLOOR[]",n),o.push(64*Math.floor(n/64))},function(t){var o=t.stack,n=o.pop();r.DEBUG&&console.log(t.step,"CEILING[]",n),o.push(64*Math.ceil(n/64))},tX.bind(void 0,0),tX.bind(void 0,1),tX.bind(void 0,2),tX.bind(void 0,3),void 0,void 0,void 0,void 0,function(t){var o=(n=t.stack).pop(),n=n.pop();r.DEBUG&&console.log(t.step,"WCVTF[]",o,n),t.cvt[n]=o*t.ppem/t.font.unitsPerEm},tW.bind(void 0,2),tW.bind(void 0,3),tY.bind(void 0,1),tY.bind(void 0,2),tY.bind(void 0,3),function(t){var o,n=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"SROUND[]",n),t.round=t_,192&n){case 0:o=.5;break;case 64:o=1;break;case 128:o=2;break;default:throw Error("invalid SROUND value")}switch(t.srPeriod=o,48&n){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*o;break;case 32:t.srPhase=.5*o;break;case 48:t.srPhase=.75*o;break;default:throw Error("invalid SROUND value")}t.srThreshold=0==(n&=15)?0:(n/8-.5)*o},function(t){var o,n=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"S45ROUND[]",n),t.round=t_,192&n){case 0:o=Math.sqrt(2)/2;break;case 64:o=Math.sqrt(2);break;case 128:o=2*Math.sqrt(2);break;default:throw Error("invalid S45ROUND value")}switch(t.srPeriod=o,48&n){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*o;break;case 32:t.srPhase=.5*o;break;case 48:t.srPhase=.75*o;break;default:throw Error("invalid S45ROUND value")}t.srThreshold=0==(n&=15)?0:(n/8-.5)*o},void 0,void 0,function(t){r.DEBUG&&console.log(t.step,"ROFF[]"),t.round=tp},void 0,function(t){r.DEBUG&&console.log(t.step,"RUTG[]"),t.round=tv},function(t){r.DEBUG&&console.log(t.step,"RDTG[]"),t.round=tb},tD,tD,void 0,void 0,void 0,void 0,void 0,function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"SCANCTRL[]",o)},tZ.bind(void 0,0),tZ.bind(void 0,1),function(t){var o=t.stack,n=o.pop(),s=0;r.DEBUG&&console.log(t.step,"GETINFO[]",n),1&n&&(s=35),32&n&&(s|=4096),o.push(s)},void 0,function(t){var o=t.stack,n=o.pop(),s=o.pop(),i=o.pop();r.DEBUG&&console.log(t.step,"ROLL[]"),o.push(s),o.push(n),o.push(i)},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"MAX[]",n,s),o.push(Math.max(s,n))},function(t){var o=t.stack,n=o.pop(),s=o.pop();r.DEBUG&&console.log(t.step,"MIN[]",n,s),o.push(Math.min(s,n))},function(t){var o=t.stack.pop();r.DEBUG&&console.log(t.step,"SCANTYPE[]",o)},function(t){var o=t.stack.pop(),n=t.stack.pop();switch(r.DEBUG&&console.log(t.step,"INSTCTRL[]",o,n),o){case 1:return void(t.inhibitGridFit=!!n);case 2:return void(t.ignoreCvt=!!n);default:throw Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,tQ.bind(void 0,1),tQ.bind(void 0,2),tQ.bind(void 0,3),tQ.bind(void 0,4),tQ.bind(void 0,5),tQ.bind(void 0,6),tQ.bind(void 0,7),tQ.bind(void 0,8),tJ.bind(void 0,1),tJ.bind(void 0,2),tJ.bind(void 0,3),tJ.bind(void 0,4),tJ.bind(void 0,5),tJ.bind(void 0,6),tJ.bind(void 0,7),tJ.bind(void 0,8),t$.bind(void 0,0,0,0,0,0),t$.bind(void 0,0,0,0,0,1),t$.bind(void 0,0,0,0,0,2),t$.bind(void 0,0,0,0,0,3),t$.bind(void 0,0,0,0,1,0),t$.bind(void 0,0,0,0,1,1),t$.bind(void 0,0,0,0,1,2),t$.bind(void 0,0,0,0,1,3),t$.bind(void 0,0,0,1,0,0),t$.bind(void 0,0,0,1,0,1),t$.bind(void 0,0,0,1,0,2),t$.bind(void 0,0,0,1,0,3),t$.bind(void 0,0,0,1,1,0),t$.bind(void 0,0,0,1,1,1),t$.bind(void 0,0,0,1,1,2),t$.bind(void 0,0,0,1,1,3),t$.bind(void 0,0,1,0,0,0),t$.bind(void 0,0,1,0,0,1),t$.bind(void 0,0,1,0,0,2),t$.bind(void 0,0,1,0,0,3),t$.bind(void 0,0,1,0,1,0),t$.bind(void 0,0,1,0,1,1),t$.bind(void 0,0,1,0,1,2),t$.bind(void 0,0,1,0,1,3),t$.bind(void 0,0,1,1,0,0),t$.bind(void 0,0,1,1,0,1),t$.bind(void 0,0,1,1,0,2),t$.bind(void 0,0,1,1,0,3),t$.bind(void 0,0,1,1,1,0),t$.bind(void 0,0,1,1,1,1),t$.bind(void 0,0,1,1,1,2),t$.bind(void 0,0,1,1,1,3),t$.bind(void 0,1,0,0,0,0),t$.bind(void 0,1,0,0,0,1),t$.bind(void 0,1,0,0,0,2),t$.bind(void 0,1,0,0,0,3),t$.bind(void 0,1,0,0,1,0),t$.bind(void 0,1,0,0,1,1),t$.bind(void 0,1,0,0,1,2),t$.bind(void 0,1,0,0,1,3),t$.bind(void 0,1,0,1,0,0),t$.bind(void 0,1,0,1,0,1),t$.bind(void 0,1,0,1,0,2),t$.bind(void 0,1,0,1,0,3),t$.bind(void 0,1,0,1,1,0),t$.bind(void 0,1,0,1,1,1),t$.bind(void 0,1,0,1,1,2),t$.bind(void 0,1,0,1,1,3),t$.bind(void 0,1,1,0,0,0),t$.bind(void 0,1,1,0,0,1),t$.bind(void 0,1,1,0,0,2),t$.bind(void 0,1,1,0,0,3),t$.bind(void 0,1,1,0,1,0),t$.bind(void 0,1,1,0,1,1),t$.bind(void 0,1,1,0,1,2),t$.bind(void 0,1,1,0,1,3),t$.bind(void 0,1,1,1,0,0),t$.bind(void 0,1,1,1,0,1),t$.bind(void 0,1,1,1,0,2),t$.bind(void 0,1,1,1,0,3),t$.bind(void 0,1,1,1,1,0),t$.bind(void 0,1,1,1,1,1),t$.bind(void 0,1,1,1,1,2),t$.bind(void 0,1,1,1,1,3)],t3=Array.from||function(t){return t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function t5(t){(t=t||{}).empty||(ti(t.familyName,"When creating a new Font object, familyName is required."),ti(t.styleName,"When creating a new Font object, styleName is required."),ti(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ti(t.ascender,"When creating a new Font object, ascender is required."),ti(t.descender,"When creating a new Font object, descender is required."),ti(t.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables={os2:{usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new eg.GlyphSet(this,t.glyphs||[]),this.encoding=new eu(this),this.position=new tr(this),this.substitution=new to(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new tf(this):void 0)}})}function t4(t,r){var o,n=JSON.stringify(t),s=256;for(o in r){var i=parseInt(o);if(i&&!(i<256)){if(JSON.stringify(r[o])===n)return i;s<=i&&(s=i+1)}}return r[s]=t,s}t5.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},t5.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},t5.prototype.charToGlyph=function(t){return t=this.charToGlyphIndex(t),this.glyphs.get(t)||this.glyphs.get(0)},t5.prototype.stringToGlyphs=function(t,r){r=r||this.defaultRenderOptions;for(var o=t3(t),n=[],s=0;s<o.length;s+=1){var i=o[s];n.push(this.charToGlyphIndex(i))}var a=n.length;if(r.features){var t=r.script||this.substitution.getDefaultScriptName(),l=[];r.features.liga&&(l=l.concat(this.substitution.getFeature("liga",t,r.language))),r.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",t,r.language)));for(var u=0;u<a;u+=1)for(var c=0;c<l.length;c++){for(var d=l[c],h=d.sub,f=h.length,p=0;p<f&&h[p]===n[u+p];)p++;p===f&&(n.splice(u,f,d.by),a=a-f+1)}}for(var m=Array(a),y=this.glyphs.get(0),g=0;g<a;g+=1)m[g]=this.glyphs.get(n[g])||y;return m},t5.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},t5.prototype.nameToGlyph=function(t){return t=this.nameToGlyphIndex(t),this.glyphs.get(t)||this.glyphs.get(0)},t5.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},t5.prototype.getKerningValue=function(t,r){t=t.index||t,r=r.index||r;var o=this.position.defaultKerningTables;return o?this.position.getKerningValue(o,t,r):this.kerningPairs[t+","+r]||0},t5.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},t5.prototype.forEachGlyph=function(t,r,o,n,s,i){r=void 0!==r?r:0,o=void 0!==o?o:0,s=s||this.defaultRenderOptions;var a,l=1/this.unitsPerEm*(n=void 0!==n?n:72),u=this.stringToGlyphs(t,s);s.kerning&&(t=s.script||this.position.getDefaultScriptName(),a=this.position.getKerningTables(t,s.language));for(var c=0;c<u.length;c+=1){var d=u[c];i.call(this,d,r,o,n,s),d.advanceWidth&&(r+=d.advanceWidth*l),s.kerning&&c<u.length-1&&(r+=(a?this.position.getKerningValue(a,d.index,u[c+1].index):this.getKerningValue(d,u[c+1]))*l),s.letterSpacing?r+=s.letterSpacing*n:s.tracking&&(r+=s.tracking/1e3*n)}return r},t5.prototype.getPath=function(t,r,o,n,s){var i=new k;return this.forEachGlyph(t,r,o,n,s,function(t,r,o,n){t=t.getPath(r,o,n,s,this),i.extend(t)}),i},t5.prototype.getPaths=function(t,r,o,n,s){var i=[];return this.forEachGlyph(t,r,o,n,s,function(t,r,o,n){t=t.getPath(r,o,n,s,this),i.push(t)}),i},t5.prototype.getAdvanceWidth=function(t,r,o){return this.forEachGlyph(t,0,0,r,o,function(){})},t5.prototype.draw=function(t,r,o,n,s,i){this.getPath(r,o,n,s,i).draw(t)},t5.prototype.drawPoints=function(t,r,o,n,s,i){this.forEachGlyph(r,o,n,s,i,function(r,o,n,s){r.drawPoints(t,o,n,s)})},t5.prototype.drawMetrics=function(t,r,o,n,s,i){this.forEachGlyph(r,o,n,s,i,function(r,o,n,s){r.drawMetrics(t,o,n,s)})},t5.prototype.getEnglishName=function(t){if(t=this.names[t])return t.en},t5.prototype.validate=function(){var t=this;function r(r){(r=t.getEnglishName(r))&&r.trim().length}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),this.unitsPerEm},t5.prototype.toTables=function(){return e8.fontToTable(this)},t5.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},t5.prototype.toArrayBuffer=function(){for(var t=this.toTables().encode(),r=new ArrayBuffer(t.length),o=new Uint8Array(r),n=0;n<t.length;n++)o[n]=t[n];return r},t5.prototype.download=function(r){var o=this.getEnglishName("fontFamily"),s=this.getEnglishName("fontSubfamily"),i=(r=r||o.replace(/\s/g,"")+"-"+s+".otf",this.toArrayBuffer());"undefined"!=typeof window?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,function(t){t.root.getFile(r,{create:!0},function(t){t.createWriter(function(r){var o=new DataView(i),o=new Blob([o],{type:"font/opentype"});r.write(o),r.addEventListener("writeend",function(){location.href=t.toURL()},!1)})})},function(t){throw Error(t.name+": "+t.message)})):(o=t("fs"),s=function(t){for(var r=new n(t.byteLength),o=new Uint8Array(t),s=0;s<r.length;++s)r[s]=o[s];return r}(i),o.writeFileSync(r,s))},t5.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},t5.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},t5.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var t6={make:function(t,r){var o=new Z.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*t.axes.length}]);o.offsetToData=o.sizeOf();for(var n,s,i,a=0;a<t.axes.length;a++)o.fields=o.fields.concat((n=a,s=t.axes[a],i=r,i=t4(s.name,r),[{name:"tag_"+n,type:"TAG",value:s.tag},{name:"minValue_"+n,type:"FIXED",value:s.minValue<<16},{name:"defaultValue_"+n,type:"FIXED",value:s.defaultValue<<16},{name:"maxValue_"+n,type:"FIXED",value:s.maxValue<<16},{name:"flags_"+n,type:"USHORT",value:0},{name:"nameID_"+n,type:"USHORT",value:i}]));for(var l=0;l<t.instances.length;l++)o.fields=o.fields.concat(function(t,r,o,n){for(var s=[{name:"nameID_"+t,type:"USHORT",value:t4(r.name,n)},{name:"flags_"+t,type:"USHORT",value:0}],i=0;i<o.length;++i){var a=o[i].tag;s.push({name:"axis_"+t+" "+a,type:"FIXED",value:r.coordinates[a]<<16})}return s}(l,t.instances[l],t.axes,r));return o},parse:function(t,r,o){for(var n,s,i,a=new eo.Parser(t,r),l=a.parseULong(),u=(A.argument(65536===l,"Unsupported fvar table version."),a.parseOffset16()),c=(a.skip("uShort",1),a.parseUShort()),d=a.parseUShort(),h=a.parseUShort(),f=a.parseUShort(),p=[],m=0;m<c;m++)p.push((n=t,s=r+u+m*d,i={},n=new eo.Parser(n,s),i.tag=n.parseTag(),i.minValue=n.parseFixed(),i.defaultValue=n.parseFixed(),i.maxValue=n.parseFixed(),n.skip("uShort",1),i.name=o[n.parseUShort()]||{},i));for(var y=[],g=r+u+c*d,v=0;v<h;v++)y.push(function(t,r,o,n){var s={},i=new eo.Parser(t,r);s.name=n[i.parseUShort()]||{},i.skip("uShort",1),s.coordinates={};for(var a=0;a<o.length;++a)s.coordinates[o[a].tag]=i.parseFixed();return s}(t,g+v*f,p,o));return{axes:p,instances:y}}},t8=Array(10);t8[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();return 1===r?{posFormat:1,coverage:this.parsePointer(et.coverage),value:this.parseValueRecord()}:2===r?{posFormat:2,coverage:this.parsePointer(et.coverage),values:this.parseValueRecordList()}:void A.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},t8[2]=function(){var t,r,o,n=this.offset+this.relativeOffset,s=this.parseUShort(),n=(A.assert(1===s||2===s,"0x"+n.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(et.coverage)),i=this.parseUShort(),a=this.parseUShort();return 1===s?{posFormat:s,coverage:n,valueFormat1:i,valueFormat2:a,pairSets:this.parseList(et.pointer(et.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(a)}})))}:2===s?(t=this.parsePointer(et.classDef),{posFormat:s,coverage:n,valueFormat1:i,valueFormat2:a,classDef1:t,classDef2:this.parsePointer(et.classDef),class1Count:r=this.parseUShort(),class2Count:o=this.parseUShort(),classRecords:this.parseList(r,et.list(o,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(a)}}))}):void 0},t8[3]=function(){return{error:"GPOS Lookup 3 not supported"}},t8[4]=function(){return{error:"GPOS Lookup 4 not supported"}},t8[5]=function(){return{error:"GPOS Lookup 5 not supported"}},t8[6]=function(){return{error:"GPOS Lookup 6 not supported"}},t8[7]=function(){return{error:"GPOS Lookup 7 not supported"}},t8[8]=function(){return{error:"GPOS Lookup 8 not supported"}},t8[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var t7=Array(10),t9={parse:function(t,r){return r=(t=new et(t,r=r||0)).parseVersion(1),A.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(t8)}:{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(t8),variations:t.parseFeatureVariationsList()}},make:function(t){return new Z.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Z.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new Z.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new Z.LookupList(t.lookups,t7)}])}},re={parse:function(t,r){if(0===(r=(t=new eo.Parser(t,r)).parseUShort())){var o=t,n={},s=(o.skip("uShort"),o.parseUShort()),i=(A.argument(0===s,"Unsupported kern sub-table version."),o.skip("uShort",2),o.parseUShort());o.skip("uShort",3);for(var a=0;a<i;a+=1){var l=o.parseUShort(),u=o.parseUShort(),c=o.parseShort();n[l+","+u]=c}return n}if(1!==r)throw Error("Unsupported kern table version ("+r+").");var d=t,h={},s=(d.skip("uShort"),1<d.parseULong()&&console.warn("Only the first kern subtable is supported."),d.skip("uLong"),255&d.parseUShort());if(d.skip("uShort"),0==s){var f=d.parseUShort();d.skip("uShort",3);for(var p=0;p<f;p+=1){var m=d.parseUShort(),y=d.parseUShort(),g=d.parseShort();h[m+","+y]=g}}return h}},rt={parse:function(t,r,o,n){for(var s=new eo.Parser(t,r),i=n?s.parseUShort:s.parseULong,a=[],l=0;l<o+1;l+=1){var u=i.call(s);n&&(u*=2),a.push(u)}return a}};function rr(t,r){for(var o=[],n=12,s=0;s<r;s+=1){var i=eo.getTag(t,n),a=eo.getULong(t,n+4),l=eo.getULong(t,n+8),u=eo.getULong(t,n+12);o.push({tag:i,checksum:a,offset:l,length:u,compression:!1}),n+=16}return o}function ro(t,r){if("WOFF"!==r.compression)return{data:t,offset:r.offset};var t=new Uint8Array(t.buffer,r.offset+2,r.compressedLength-2),o=new Uint8Array(r.length);if(S(t,o),o.byteLength!==r.length)throw Error("Decompression error: "+r.tag+" decompressed length doesn't match recorded length");return{data:new DataView(o.buffer,0),offset:0}}function rn(t){var r,o,n,s,i,a,l,u,c,d,h,f,p,m,y=new t5({empty:!0}),g=new DataView(t,0),v=[],t=eo.getTag(g,0);if(t===String.fromCharCode(0,1,0,0)||"true"===t||"typ1"===t)y.outlinesFormat="truetype",v=rr(g,n=eo.getUShort(g,4));else if("OTTO"===t)y.outlinesFormat="cff",v=rr(g,n=eo.getUShort(g,4));else{if("wOFF"!==t)throw Error("Unsupported OpenType signature "+t);var b=eo.getTag(g,4);if(b===String.fromCharCode(0,1,0,0))y.outlinesFormat="truetype";else{if("OTTO"!==b)throw Error("Unsupported OpenType flavor "+t);y.outlinesFormat="cff"}v=function(t,r){for(var o=[],n=44,s=0;s<r;s+=1){var i=eo.getTag(t,n),a=eo.getULong(t,n+4),l=eo.getULong(t,n+8),u=eo.getULong(t,n+12),c=l<u&&"WOFF";o.push({tag:i,offset:a,compression:c,compressedLength:l,length:u}),n+=20}return o}(g,n=eo.getUShort(g,12))}for(var x=0;x<n;x+=1){var j=v[x],w=void 0;switch(j.tag){case"cmap":w=ro(g,j),y.tables.cmap=en.parse(w.data,w.offset),y.encoding=new ec(y.tables.cmap);break;case"cvt ":w=ro(g,j),m=new eo.Parser(w.data,w.offset),y.tables.cvt=m.parseShortList(j.length/2);break;case"fvar":i=j;break;case"fpgm":w=ro(g,j),m=new eo.Parser(w.data,w.offset),y.tables.fpgm=m.parseByteList(j.length);break;case"head":w=ro(g,j),y.tables.head=eR.parse(w.data,w.offset),y.unitsPerEm=y.tables.head.unitsPerEm,r=y.tables.head.indexToLocFormat;break;case"hhea":w=ro(g,j),y.tables.hhea=eP.parse(w.data,w.offset),y.ascender=y.tables.hhea.ascender,y.descender=y.tables.hhea.descender,y.numberOfHMetrics=y.tables.hhea.numberOfHMetrics;break;case"hmtx":c=j;break;case"ltag":w=ro(g,j),o=eL.parse(w.data,w.offset);break;case"maxp":w=ro(g,j),y.tables.maxp=eI.parse(w.data,w.offset),y.numGlyphs=y.tables.maxp.numGlyphs;break;case"name":f=j;break;case"OS/2":w=ro(g,j),y.tables.os2=eZ.parse(w.data,w.offset);break;case"post":w=ro(g,j),y.tables.post=eQ.parse(w.data,w.offset),y.glyphNames=new eh(y.tables.post);break;case"prep":w=ro(g,j),m=new eo.Parser(w.data,w.offset),y.tables.prep=m.parseByteList(j.length);break;case"glyf":a=j;break;case"loca":h=j;break;case"CFF ":s=j;break;case"kern":d=j;break;case"GPOS":l=j;break;case"GSUB":u=j;break;case"meta":p=j}}if(b=ro(g,f),y.tables.name=eX.parse(b.data,b.offset,o),y.names=y.tables.name,a&&h)t=0===r,b=ro(g,h),b=rt.parse(b.data,b.offset,y.numGlyphs,t),t=ro(g,a),y.glyphs=th.parse(t.data,t.offset,b,y);else{if(!s)throw Error("Font doesn't contain TrueType or CFF outlines.");t=ro(g,s),eO.parse(t.data,t.offset,y)}for(var b=ro(g,c),S=(function(t,r,o,n,s){for(var i,a,l=new eo.Parser(t,r),u=0;u<n;u+=1){u<o&&(i=l.parseUShort(),a=l.parseShort());var c=s.get(u);c.advanceWidth=i,c.leftSideBearing=a}}(b.data,b.offset,y.numberOfHMetrics,y.numGlyphs,y.glyphs),y),T=S.tables.cmap.glyphIndexMap,E=Object.keys(T),k=0;k<E.length;k+=1){var M,C=E[k],A=T[C];(M=S.glyphs.get(A)).addUnicode(parseInt(C))}for(var O=0;O<S.glyphs.length;O+=1)M=S.glyphs.get(O),S.cffEncoding?S.isCIDFont?M.name="gid"+O:M.name=S.cffEncoding.charset[O]:S.glyphNames.names&&(M.name=S.glyphNames.glyphIndexToName(O));return d?(t=ro(g,d),y.kerningPairs=re.parse(t.data,t.offset)):y.kerningPairs={},l&&(b=ro(g,l),y.tables.gpos=t9.parse(b.data,b.offset),y.position.init()),u&&(t=ro(g,u),y.tables.gsub=e0.parse(t.data,t.offset)),i&&(b=ro(g,i),y.tables.fvar=t6.parse(b.data,b.offset,y.names)),p&&(t=ro(g,p),y.tables.meta=e1.parse(t.data,t.offset),y.metas=y.tables.meta),y}r.Font=t5,r.Glyph=ep,r.Path=k,r.BoundingBox=E,r._parse=eo,r.parse=rn,r.load=function(r,o){("undefined"==typeof window?function(r,o){t("fs").readFile(r,function(t,r){if(t)return o(t.message);o(null,ts(r))})}:function(t,r){var o=new XMLHttpRequest;o.open("get",t,!0),o.responseType="arraybuffer",o.onload=function(){return o.response?r(null,o.response):r("Font could not be loaded: "+o.statusText)},o.onerror=function(){r("Font could not be loaded")},o.send()})(r,function(t,r){var n;if(t)return o(t);try{n=rn(r)}catch(t){return o(t,null)}return o(null,n)})},r.loadSync=function(r){return rn(ts(t("fs").readFileSync(r)))},Object.defineProperty(r,"__esModule",{value:!0})},"object"==typeof o&&void 0!==r?s(o):"function"==typeof O&&O.amd?O(["exports"],s):s(this.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],248:[function(t,r,o){(function(t){function r(t,r){for(var o=0,n=t.length-1;0<=n;n--){var s=t[n];"."===s?t.splice(n,1):".."===s?(t.splice(n,1),o++):o&&(t.splice(n,1),o--)}if(r)for(;o--;)t.unshift("..");return t}function n(t,r){if(t.filter)return t.filter(r);for(var o=[],n=0;n<t.length;n++)r(t[n],n,t)&&o.push(t[n]);return o}o.resolve=function(){for(var o="",s=!1,i=arguments.length-1;-1<=i&&!s;i--){var a=0<=i?arguments[i]:t.cwd();if("string"!=typeof a)throw TypeError("Arguments to path.resolve must be strings");a&&(o=a+"/"+o,s="/"===a.charAt(0))}return(s?"/":"")+(o=r(n(o.split("/"),function(t){return!!t}),!s).join("/"))||"."},o.normalize=function(t){var i=o.isAbsolute(t),a="/"===s(t,-1);return(t=(t=r(n(t.split("/"),function(t){return!!t}),!i).join("/"))||i?t:".")&&a&&(t+="/"),(i?"/":"")+t},o.isAbsolute=function(t){return"/"===t.charAt(0)},o.join=function(){var t=Array.prototype.slice.call(arguments,0);return o.normalize(n(t,function(t,r){if("string"!=typeof t)throw TypeError("Arguments to path.join must be strings");return t}).join("/"))},o.relative=function(t,r){function n(t){for(var r=0;r<t.length&&""===t[r];r++);for(var o=t.length-1;0<=o&&""===t[o];o--);return o<r?[]:t.slice(r,o-r+1)}t=o.resolve(t).substr(1),r=o.resolve(r).substr(1);for(var s=n(t.split("/")),i=n(r.split("/")),a=Math.min(s.length,i.length),l=a,u=0;u<a;u++)if(s[u]!==i[u]){l=u;break}for(var c=[],u=l;u<s.length;u++)c.push("..");return(c=c.concat(i.slice(l))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var r=47===t.charCodeAt(0),o=-1,n=!0,s=t.length-1;1<=s;--s)if(47===t.charCodeAt(s)){if(!n){o=s;break}}else n=!1;return -1===o?r?"/":".":r&&1===o?"/":t.slice(0,o)},o.basename=function(t,r){return t=function(t){"string"!=typeof t&&(t+="");for(var r=0,o=-1,n=!0,s=t.length-1;0<=s;--s)if(47===t.charCodeAt(s)){if(!n){r=s+1;break}}else -1===o&&(n=!1,o=s+1);return -1===o?"":t.slice(r,o)}(t),t=r&&t.substr(-1*r.length)===r?t.substr(0,t.length-r.length):t},o.extname=function(t){"string"!=typeof t&&(t+="");for(var r=-1,o=0,n=-1,s=!0,i=0,a=t.length-1;0<=a;--a){var l=t.charCodeAt(a);if(47===l){if(s)continue;o=a+1;break}-1===n&&(s=!1,n=a+1),46===l?-1===r?r=a:1!==i&&(i=1):-1!==r&&(i=-1)}return -1===r||-1===n||0===i||1===i&&r===n-1&&r===o+1?"":t.slice(r,n)};var s="b"==="ab".substr(-1)?function(t,r,o){return t.substr(r,o)}:function(t,r,o){return r<0&&(r=t.length+r),t.substr(r,o)}}).call(this,t("_process"))},{_process:249}],249:[function(t,r,o){var n,s,r=r.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(t){s=a}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(r){try{return n.call(null,t,0)}catch(r){return n.call(this,t,0)}}}var u,c=[],d=!1,h=-1;function f(){d&&u&&(d=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!d){for(var t=l(f),r=(d=!0,c.length);r;){for(u=c,c=[];++h<r;)u&&u[h].run();h=-1,r=c.length}u=null,d=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===a||!s)&&clearTimeout)return(s=clearTimeout)(t);try{s(t)}catch(r){try{return s.call(null,t)}catch(r){return s.call(this,t)}}}(t)}}function m(t,r){this.fun=t,this.array=r}function y(){}r.nextTick=function(t){var r=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)r[o-1]=arguments[o];c.push(new m(t,r)),1!==c.length||d||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],250:[function(t,r,o){r=function(t){var r,o=Object.prototype,n=o.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(t,o,n,s){var i,a,o=o&&o.prototype instanceof y?o:y,o=Object.create(o.prototype),s=new E(s||[]);return o._invoke=(i=s,a=d,function(o,s){if(a===f)throw Error("Generator is already running");if(a===p){if("throw"===o)throw s;return M()}for(i.method=o,i.arg=s;;){var l=i.delegate;if(l&&(l=function t(o,n){var s=o.iterator[n.method];if(s===r){if(n.delegate=null,"throw"===n.method){if(o.iterator.return&&(n.method="return",n.arg=r,t(o,n),"throw"===n.method))return m;n.method="throw",n.arg=TypeError("The iterator does not provide a 'throw' method")}return m}return"throw"===(s=c(s,o.iterator,n.arg)).type?(n.method="throw",n.arg=s.arg,n.delegate=null,m):(s=s.arg)?s.done?(n[o.resultName]=s.value,n.next=o.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,m):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,m)}(l,i))){if(l===m)continue;return l}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);if(a=f,"normal"===(l=c(t,n,i)).type){if(a=i.done?p:h,l.arg!==m)return{value:l.arg,done:i.done}}else"throw"===l.type&&(a=p,i.method="throw",i.arg=l.arg)}}),o}function c(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function y(){}function g(){}function v(){}var s={},b=(s[i]=function(){return this},Object.getPrototypeOf),b=b&&b(b(k([]))),x=(b&&b!==o&&n.call(b,i)&&(s=b),v.prototype=y.prototype=Object.create(s));function j(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function w(t){var r;this._invoke=function(o,s){function i(){return new Promise(function(r,i){!function r(o,s,i,a){var l,o=c(t[o],t,s);if("throw"!==o.type)return(s=(l=o.arg).value)&&"object"==typeof s&&n.call(s,"__await")?Promise.resolve(s.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(s).then(function(t){l.value=t,i(l)},function(t){return r("throw",t,i,a)});a(o.arg)}(o,s,r,i)})}return r=r?r.then(i,i):i()}}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var o,s=t[i];if(s)return s.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return o=-1,(s=function s(){for(;++o<t.length;)if(n.call(t,o))return s.value=t[o],s.done=!1,s;return s.value=r,s.done=!0,s}).next=s}return{next:M}}function M(){return{value:r,done:!0}}return(g.prototype=x.constructor=v).constructor=g,v[l]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},j(w.prototype),w.prototype[a]=function(){return this},t.AsyncIterator=w,t.async=function(r,o,n,s){var i=new w(u(r,o,n,s));return t.isGeneratorFunction(o)?i:i.next().then(function(t){return t.done?t.value:i.next()})},j(x),x[l]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r,o=[];for(r in t)o.push(r);return o.reverse(),function r(){for(;o.length;){var n=o.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function s(n,s){return l.type="throw",l.arg=t,o.next=n,s&&(o.method="next",o.arg=r),!!s}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,r){for(var o=this.tryEntries.length-1;0<=o;--o){var s=this.tryEntries[o];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),T(o),m}},catch:function(t){for(var r=this.tryEntries.length-1;0<=r;--r){var o,n,s=this.tryEntries[r];if(s.tryLoc===t)return"throw"===(o=s.completion).type&&(n=o.arg,T(s)),n}throw Error("illegal catch attempt")},delegateYield:function(t,o,n){return this.delegate={iterator:k(t),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=r),m}},t}("object"==typeof r?r.exports:{});try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},{}],251:[function(t,r,o){!function(t){var r,o,n,s,i,a,l,u,c,d;function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return t="string"!=typeof t?String(t):t}function p(t){var r={next:function(){var r=t.shift();return{done:void 0===r,value:r}}};return o&&(r[Symbol.iterator]=function(){return r}),r}function m(t){this.map={},t instanceof m?t.forEach(function(t,r){this.append(r,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(r){this.append(r,t[r])},this)}function y(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function g(t){return new Promise(function(r,o){t.onload=function(){r(t.result)},t.onerror=function(){o(t.error)}})}function v(t){var r=new FileReader,o=g(r);return r.readAsArrayBuffer(t),o}function b(t){var r;return t.slice?t.slice(0):((r=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),r.buffer)}function x(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t){if("string"==typeof t)this._bodyText=t;else if(n&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(s&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(r&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&n&&l(t))this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw Error("unsupported BodyInit type");this._bodyArrayBuffer=b(t)}}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t,r,o=y(this);if(o)return o;if(this._bodyBlob)return o=this._bodyBlob,r=g(t=new FileReader),t.readAsText(o),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var r=new Uint8Array(t),o=Array(r.length),n=0;n<r.length;n++)o[n]=String.fromCharCode(r[n]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function j(t,r){var o,n=(r=r||{}).body;if(t instanceof j){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,r.headers||(this.headers=new m(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=r.credentials||this.credentials||"omit",!r.headers&&this.headers||(this.headers=new m(r.headers)),this.method=(o=(t=r.method||this.method||"GET").toUpperCase(),-1<c.indexOf(o)?o:t),this.mode=r.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(t){var r=new FormData;return t.trim().split("&").forEach(function(t){var o;t&&(o=(t=t.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(o),decodeURIComponent(t)))}),r}function S(t,r){r=r||{},this.type="default",this.status=void 0===r.status?200:r.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in r?r.statusText:"OK",this.headers=new m(r.headers),this.url=r.url||"",this._initBody(t)}t.fetch||(r="URLSearchParams"in t,o="Symbol"in t&&"iterator"in Symbol,n="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,(i="ArrayBuffer"in t)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<a.indexOf(Object.prototype.toString.call(t))}),m.prototype.append=function(t,r){t=h(t),r=f(r);var o=this.map[t];this.map[t]=o?o+","+r:r},m.prototype.delete=function(t){delete this.map[h(t)]},m.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},m.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},m.prototype.set=function(t,r){this.map[h(t)]=f(r)},m.prototype.forEach=function(t,r){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(r,this.map[o],o,this)},m.prototype.keys=function(){var t=[];return this.forEach(function(r,o){t.push(o)}),p(t)},m.prototype.values=function(){var t=[];return this.forEach(function(r){t.push(r)}),p(t)},m.prototype.entries=function(){var t=[];return this.forEach(function(r,o){t.push([o,r])}),p(t)},o&&(m.prototype[Symbol.iterator]=m.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],j.prototype.clone=function(){return new j(this,{body:this._bodyInit})},x.call(j.prototype),x.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t},d=[301,302,303,307,308],S.redirect=function(t,r){if(-1===d.indexOf(r))throw RangeError("Invalid status code");return new S(null,{status:r,headers:{location:t}})},t.Headers=m,t.Request=j,t.Response=S,t.fetch=function(t,r){return new Promise(function(o,s){var i=new j(t,r),a=new XMLHttpRequest;a.onload=function(){var t,r={status:a.status,statusText:a.statusText,headers:(r=a.getAllResponseHeaders()||"",t=new m,r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(r){var r=r.split(":"),o=r.shift().trim();o&&(r=r.join(":").trim(),t.append(o,r))}),t)};o(new S((r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL"),"response"in a?a.response:a.responseText),r))},a.onerror=function(){s(TypeError("Network request failed"))},a.ontimeout=function(){s(TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),i.headers.forEach(function(t,r){a.setRequestHeader(r,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:this)},{}],252:[function(t,r,o){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,s=a(t("../core/main")),i=a(t("../color/color_conversion"));function a(t){return t&&t.__esModule?t:{default:t}}var l=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],u=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];s.default.prototype._rgbColorName=function(t){var r,o,t=i.default._rgbaToHSBA(t),s=[(n=t)[0],t[1],t[2]];0!==s[0]&&(s[0]=Math.round(100*s[0]),(t=s[0].toString().split(""))[o=t.length-1]=parseInt(t[o]),t[o]<2.5?t[o]=0:2.5<=t[o]&&t[o]<7.5&&(t[o]=5),2===t.length?(t[0]=parseInt(t[0]),7.5<=t[o]&&(t[o]=0,t[0]=t[0]+1),s[0]=10*t[0]+t[1]):7.5<=t[o]?s[0]=10:s[0]=t[o]),s[2]=s[2]/255;for(var a=s.length-1;1<=a;a--)s[a]<=.25?s[a]=0:.25<s[a]&&s[a]<.75?s[a]=.5:s[a]=1;if(0===s[0]&&0===s[1]&&1===s[2]){for(var c=2;0<=c;c--)n[c]=Math.round(1e4*n[c])/1e4;for(var d=0;d<l.length;d++){if(l[d].h===n[0]&&l[d].s===n[1]&&l[d].b===n[2]){r=l[d].name;break}r="white"}}else for(var h=0;h<u.length;h++)if(u[h].h===s[0]&&u[h].s===s[1]&&u[h].b===s[2]){r=u[h].name;break}return r},t=s.default,o.default=t},{"../color/color_conversion":258,"../core/main":273,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196}],253:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t},s="_Description",i="_fallbackDesc",a="_fallbackTable",l="_Label",u="_labelDesc",c="_labelTable";function d(t){if("label"===t||"fallback"===t)throw Error("description should not be LABEL or FALLBACK");return t.endsWith(".")||t.endsWith(";")||t.endsWith(",")||t.endsWith("?")||t.endsWith("!")||(t+="."),t}n.default.prototype.describe=function(t,r){var o;n.default._validateParameters("describe",arguments),"string"==typeof t&&(o=this.canvas.id,t=d(t),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==t&&(this.descriptions.fallback.innerHTML=t):this._describeHTML("fallback",t),r===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==t&&(this.descriptions.label.innerHTML=t):this._describeHTML("label",t)))},n.default.prototype.describeElement=function(t,r,o){var s,i;n.default._validateParameters("describeElement",arguments),"string"==typeof r&&"string"==typeof t&&(s=this.canvas.id,r=d(r),i=function(t){if("label"===t||"fallback"===t)throw Error("element name should not be LABEL or FALLBACK");return t.endsWith(".")||t.endsWith(";")||t.endsWith(",")?t=t.replace(/.$/,":"):t.endsWith(":")||(t+=":"),t}(t),t=t.replace(/[^a-zA-Z0-9]/g,""),i='<th scope="row">'.concat(i,"</th><td>").concat(r,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(s).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[t]?this.descriptions.fallbackElements[t].innerHTML!==i&&(this.descriptions.fallbackElements[t].innerHTML=i):this._describeElementHTML("fallback",t,i),o===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[t]?this.descriptions.labelElements[t].innerHTML!==i&&(this.descriptions.labelElements[t].innerHTML=i):this._describeElementHTML("label",t,i)))},n.default.prototype._describeHTML=function(t,r){var o,n=this.canvas.id;"fallback"===t?(this.dummyDOM.querySelector("#".concat(n+s))?this.dummyDOM.querySelector("#"+n+a).insertAdjacentHTML("beforebegin",'<p id="'.concat(n+i,'"></p>')):(o='<div id="'.concat(n).concat(s,'" role="region" aria-label="Canvas Description"><p id="').concat(n).concat(i,'"></p></div>'),this.dummyDOM.querySelector("#".concat(n,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutput")).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#".concat(n)).innerHTML=o),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(n).concat(i)),this.descriptions.fallback.innerHTML=r):"label"===t&&(this.dummyDOM.querySelector("#".concat(n+l))?this.dummyDOM.querySelector("#".concat(n+c))&&this.dummyDOM.querySelector("#".concat(n+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(n).concat(u,'"></p>')):(o='<div id="'.concat(n).concat(l,'" class="p5Label"><p id="').concat(n).concat(u,'"></p></div>'),this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#"+n).insertAdjacentHTML("afterend",o)),this.descriptions.label=this.dummyDOM.querySelector("#"+n+u),this.descriptions.label.innerHTML=r)},n.default.prototype._describeElementHTML=function(t,r,o){var n,d=this.canvas.id;"fallback"===t?(this.dummyDOM.querySelector("#".concat(d+s))?this.dummyDOM.querySelector("#"+d+a)||this.dummyDOM.querySelector("#"+d+i).insertAdjacentHTML("afterend",'<table id="'.concat(d).concat(a,'"><caption>Canvas elements and their descriptions</caption></table>')):(n='<div id="'.concat(d).concat(s,'" role="region" aria-label="Canvas Description"><table id="').concat(d).concat(a,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(d,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(d,"accessibleOutput")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#"+d).innerHTML=n),(n=document.createElement("tr")).id=d+"_fte_"+r,this.dummyDOM.querySelector("#"+d+a).appendChild(n),this.descriptions.fallbackElements[r]=this.dummyDOM.querySelector("#".concat(d).concat("_fte_").concat(r)),this.descriptions.fallbackElements[r].innerHTML=o):"label"===t&&(this.dummyDOM.querySelector("#".concat(d+l))?this.dummyDOM.querySelector("#".concat(d+c))||this.dummyDOM.querySelector("#"+d+u).insertAdjacentHTML("afterend",'<table id="'.concat(d+c,'"></table>')):(n='<div id="'.concat(d).concat(l,'" class="p5Label"><table id="').concat(d).concat(c,'"></table></div>'),this.dummyDOM.querySelector("#".concat(d,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(d,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#"+d).insertAdjacentHTML("afterend",n)),(t=document.createElement("tr")).id=d+"_lte_"+r,this.dummyDOM.querySelector("#"+d+c).appendChild(t),this.descriptions.labelElements[r]=this.dummyDOM.querySelector("#".concat(d).concat("_lte_").concat(r)),this.descriptions.labelElements[r].innerHTML=o)},t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.replace":194}],254:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype._updateGridOutput=function(t){var r,o,n,s,i,a,l,u;this.dummyDOM.querySelector("#".concat(t,"_summary"))&&(r=this._accessibleOutputs[t],i=(o=function(t,r){var o,n="",s="",i=0;for(o in r){var a,l=0;for(a in r[o]){var u='<li id="'.concat(t,"shape").concat(i,'">').concat(r[o][a].color," ").concat(o,",");"line"===o?u+=" location = ".concat(r[o][a].pos,", length = ").concat(r[o][a].length," pixels"):(u+=" location = ".concat(r[o][a].pos),"point"!==o&&(u+=", area = ".concat(r[o][a].area," %")),u+="</li>"),n+=u,l++,i++}s=1<l?"".concat(s," ").concat(l," ").concat(o,"s"):"".concat(s," ").concat(l," ").concat(o)}return{numShapes:[i,s],details:n}}(t,this.ingredients.shapes)).numShapes,a=this.ingredients.colors.background,l=this.width,u=this.height,a="".concat(a," canvas, ").concat(l," by ").concat(u," pixels, contains ").concat(i[0]),n=a=(1===i[0]?"".concat(a," shape: "):"".concat(a," shapes: ")).concat(i[1]),s=function(t,r){var o,n,s=0,i="",a=Array.from(Array(10),function(){return Array(10)});for(o in r)for(var l in r[o]){var u=void 0;u="line"!==o?'<a href="#'.concat(t,"shape").concat(s,'">').concat(r[o][l].color," ").concat(o,"</a>"):'<a href="#'.concat(t,"shape").concat(s,'">').concat(r[o][l].color," ").concat(o," midpoint</a>"),a[r[o][l].loc.locY][r[o][l].loc.locX]?a[r[o][l].loc.locY][r[o][l].loc.locX]=a[r[o][l].loc.locY][r[o][l].loc.locX]+"  "+u:a[r[o][l].loc.locY][r[o][l].loc.locX]=u,s++}for(n in a){var c,d="<tr>";for(c in a[n])d+="<td>",void 0!==a[n][c]&&(d+=a[n][c]),d+="</td>";i=i+d+"</tr>"}return i}(t,this.ingredients.shapes),n!==r.summary.innerHTML&&(r.summary.innerHTML=n),s!==r.map.innerHTML&&(r.map.innerHTML=s),o.details!==r.shapeDetails.innerHTML&&(r.shapeDetails.innerHTML=o.details),this._accessibleOutputs[t]=r)},t=t.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":157,"core-js/modules/es.array.map":163,"core-js/modules/es.string.iterator":190}],255:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r,o){return 10===(r=Math.floor(t[0]/r*10))&&(r-=1),10===(t=Math.floor(t[1]/o*10))&&(t-=1),{locX:r,locY:t}}n.default.prototype.textOutput=function(t){n.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),t===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},n.default.prototype.gridOutput=function(t){n.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),t===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},n.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},n.default.prototype._createOutput=function(t,r){var o,n,s,i=this.canvas.id,a=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode),"");"Fallback"===r?(o=i+t,this.dummyDOM.querySelector("#".concat(n=i+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(i,"_Description"))?this.dummyDOM.querySelector("#".concat(i,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(i)).innerHTML='<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===r&&(o=i+t+(a=r),this.dummyDOM.querySelector("#".concat(n=i+"accessibleOutput"+r))||(this.dummyDOM.querySelector("#".concat(i,"_Label"))?this.dummyDOM.querySelector("#".concat(i,"_Label")):this.dummyDOM.querySelector("#".concat(i))).insertAdjacentHTML("afterend",'<div id="'.concat(n,'"></div>'))),this._accessibleOutputs[o]={},"textOutput"===t?(a="#".concat(i,"gridOutput").concat(a),s='<div id="'.concat(o,'">Text Output<div id="').concat(o,'Summary" aria-label="text output summary"><p id="').concat(o,'_summary"></p><ul id="').concat(o,'_list"></ul></div><table id="').concat(o,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",s):this.dummyDOM.querySelector("#".concat(n)).innerHTML=s,this._accessibleOutputs[o].list=this.dummyDOM.querySelector("#".concat(o,"_list"))):"gridOutput"===t&&(a="#".concat(i,"textOutput").concat(a),s='<div id="'.concat(o,'">Grid Output<p id="').concat(o,'_summary" aria-label="grid output summary"><table id="').concat(o,'_map" summary="grid output content"></table><ul id="').concat(o,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",s):this.dummyDOM.querySelector("#".concat(n)).innerHTML=s,this._accessibleOutputs[o].map=this.dummyDOM.querySelector("#".concat(o,"_map"))),this._accessibleOutputs[o].shapeDetails=this.dummyDOM.querySelector("#".concat(o,"_shapeDetails")),this._accessibleOutputs[o].summary=this.dummyDOM.querySelector("#".concat(o,"_summary"))},n.default.prototype._updateAccsOutput=function(){var t=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(t+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(t+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(t+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(t+"gridOutputLabel"))},n.default.prototype._accsBackground=function(t){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==t&&(this.ingredients.colors.backgroundRGBA=t,this.ingredients.colors.background=this._rgbColorName(t))},n.default.prototype._accsCanvasColors=function(t,r){"fill"===t?this.ingredients.colors.fillRGBA!==r&&(this.ingredients.colors.fillRGBA=r,this.ingredients.colors.fill=this._rgbColorName(r)):"stroke"===t&&this.ingredients.colors.strokeRGBA!==r&&(this.ingredients.colors.strokeRGBA=r,this.ingredients.colors.stroke=this._rgbColorName(r))},n.default.prototype._accsOutput=function(t,r){"ellipse"===t&&r[2]===r[3]?t="circle":"rectangle"===t&&r[2]===r[3]&&(t="square");var o,n,i,a,l={},u=!0,c=(o="rectangle"===(o=t)||"ellipse"===o||"arc"===o||"circle"===o||"square"===o?(n=Math.round(r[0]+r[2]/2),Math.round(r[1]+r[3]/2)):"triangle"===o?(n=(r[0]+r[2]+r[4])/3,(r[1]+r[3]+r[5])/3):"quadrilateral"===o?(n=(r[0]+r[2]+r[4]+r[6])/4,(r[1]+r[3]+r[5]+r[7])/4):"line"===o?(n=(r[0]+r[2])/2,(r[1]+r[3])/2):(n=r[0],r[1]),[n,o]);if("line"===t?(l.color=this.ingredients.colors.stroke,l.length=Math.round(this.dist(r[0],r[1],r[2],r[3])),i=this._getPos(r[0],[1]),a=this._getPos(r[2],[3]),l.loc=s(c,this.width,this.height),l.pos=i===a?"at ".concat(i):"from ".concat(i," to ").concat(a)):("point"===t?l.color=this.ingredients.colors.stroke:(l.color=this.ingredients.colors.fill,l.area=this._getArea(t,r)),l.pos=this._getPos.apply(this,function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(c)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()),l.loc=s(c,this.width,this.height)),this.ingredients.shapes[t]){if(this.ingredients.shapes[t]!==[l]){for(var d in this.ingredients.shapes[t])JSON.stringify(this.ingredients.shapes[t][d])===JSON.stringify(l)&&(u=!1);!0===u&&this.ingredients.shapes[t].push(l)}}else this.ingredients.shapes[t]=[l]},n.default.prototype._getPos=function(t,r){var t=new DOMPointReadOnly(t,r),r=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),t=t.matrixTransform(r),r=t.x,t=t.y,o=this.width,n=this.height;return r<.4*o?t<.4*n?"top left":.6*n<t?"bottom left":"mid left":.6*o<r?t<.4*n?"top right":.6*n<t?"bottom right":"mid right":t<.4*n?"top middle":.6*n<t?"bottom middle":"middle"},n.default.prototype._getArea=function(t,r){var o,n,s=0,i=("arc"===t?(s=(o=((r[5]-r[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*r[2]*r[3]/8,"open"!==r[6]&&"chord"!==r[6]||(n=r[0],c=r[1],i=r[0]+r[2]/2*Math.cos(r[4]).toFixed(2),d=r[1]+r[3]/2*Math.sin(r[4]).toFixed(2),l=r[0]+r[2]/2*Math.cos(r[5]).toFixed(2),n=Math.abs(n*(d-(a=r[1]+r[3]/2*Math.sin(r[5]).toFixed(2)))+i*(a-c)+l*(c-d))/2,o>Math.PI?s+=n:s-=n)):"ellipse"===t||"circle"===t?s=3.14*r[2]/2*r[3]/2:"line"===t||"point"===t?s=0:"quadrilateral"===t?s=Math.abs((r[6]+r[0])*(r[7]-r[1])+(r[0]+r[2])*(r[1]-r[3])+(r[2]+r[4])*(r[3]-r[5])+(r[4]+r[6])*(r[5]-r[7]))/2:"rectangle"===t||"square"===t?s=r[2]*r[3]:"triangle"===t&&(s=Math.abs(r[0]*(r[3]-r[5])+r[2]*(r[5]-r[1])+r[4]*(r[1]-r[3]))/2),this.width*this._pixelDensity),a=this.height*this._pixelDensity,l=[new DOMPoint(0,0),new DOMPoint(i,0),new DOMPoint(i,a),new DOMPoint(0,a)],u=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),c=l.map(function(t){return t.matrixTransform(u)}),d=Math.abs((c[3].x+c[0].x)*(c[3].y-c[0].y)+(c[0].x+c[1].x)*(c[0].y-c[1].y)+(c[1].x+c[2].x)*(c[1].y-c[2].y)+(c[2].x+c[3].x)*(c[2].y-c[3].y))/2;return Math.round(100*s/d)},t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],256:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype._updateTextOutput=function(t){var r,o,n,s,i,a,l,u;this.dummyDOM.querySelector("#".concat(t,"_summary"))&&(r=this._accessibleOutputs[t],i=(o=function(t,r){var o,n="",s=0;for(o in r)for(var i in r[o]){var a='<li><a href="#'.concat(t,"shape").concat(s,'">').concat(r[o][i].color," ").concat(o,"</a>");"line"===o?a+=", ".concat(r[o][i].pos,", ").concat(r[o][i].length," pixels long.</li>"):(a+=", at ".concat(r[o][i].pos),"point"!==o&&(a+=", covering ".concat(r[o][i].area,"% of the canvas")),a+=".</li>"),n+=a,s++}return{numShapes:s,listShapes:n}}(t,this.ingredients.shapes)).numShapes,a=this.ingredients.colors.background,l=this.width,u=this.height,l="Your output is a, ".concat(l," by ").concat(u," pixels, ").concat(a," canvas containing the following"),n=l=1===i?"".concat(l," shape:"):"".concat(l," ").concat(i," shapes:"),s=function(t,r){var o,n="",s=0;for(o in r)for(var i in r[o]){var a='<tr id="'.concat(t,"shape").concat(s,'"><th>').concat(r[o][i].color," ").concat(o,"</th>");"line"===o?a+="<td>location = ".concat(r[o][i].pos,"</td><td>length = ").concat(r[o][i].length," pixels</td></tr>"):(a+="<td>location = ".concat(r[o][i].pos,"</td>"),"point"!==o&&(a+="<td> area = ".concat(r[o][i].area,"%</td>")),a+="</tr>"),n+=a,s++}return n}(t,this.ingredients.shapes),n!==r.summary.innerHTML&&(r.summary.innerHTML=n),o.listShapes!==r.list.innerHTML&&(r.list.innerHTML=o.listShapes),s!==r.shapeDetails.innerHTML&&(r.shapeDetails.innerHTML=s),this._accessibleOutputs[t]=r)},t=t.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151}],257:[function(t,r,o){var n=(n=t("./core/main"))&&n.__esModule?n:{default:n};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),r.exports=n.default},{"./accessibility/color_namer":252,"./accessibility/describe":253,"./accessibility/gridOutput":254,"./accessibility/outputs":255,"./accessibility/textOutput":256,"./color/color_conversion":258,"./color/creating_reading":259,"./color/p5.Color":260,"./color/setting":261,"./core/constants":262,"./core/environment":263,"./core/friendly_errors/fes_core":264,"./core/friendly_errors/file_errors":265,"./core/friendly_errors/sketch_reader":266,"./core/friendly_errors/stacktrace":267,"./core/friendly_errors/validate_params":268,"./core/helpers":269,"./core/init":270,"./core/legacy":272,"./core/main":273,"./core/p5.Element":274,"./core/p5.Graphics":275,"./core/p5.Renderer":276,"./core/p5.Renderer2D":277,"./core/preload":278,"./core/rendering":279,"./core/shape/2d_primitives":280,"./core/shape/attributes":281,"./core/shape/curves":282,"./core/shape/vertex":283,"./core/shim":284,"./core/structure":285,"./core/transform":286,"./data/local_storage.js":287,"./data/p5.TypedDict":288,"./dom/dom":289,"./events/acceleration":290,"./events/keyboard":291,"./events/mouse":292,"./events/touch":293,"./image/filters":294,"./image/image":295,"./image/loading_displaying":296,"./image/p5.Image":297,"./image/pixels":298,"./io/files":299,"./io/p5.Table":300,"./io/p5.TableRow":301,"./io/p5.XML":302,"./math/calculation":303,"./math/math":304,"./math/noise":305,"./math/p5.Vector":306,"./math/random":307,"./math/trigonometry":308,"./typography/attributes":309,"./typography/loading_displaying":310,"./typography/p5.Font":311,"./utilities/array_functions":312,"./utilities/conversion":313,"./utilities/string_functions":314,"./utilities/time_date":315,"./webgl/3d_primitives":316,"./webgl/interaction":317,"./webgl/light":318,"./webgl/loading":319,"./webgl/material":320,"./webgl/p5.Camera":321,"./webgl/p5.Framebuffer":322,"./webgl/p5.Geometry":323,"./webgl/p5.Matrix":324,"./webgl/p5.RenderBuffer":325,"./webgl/p5.RendererGL":328,"./webgl/p5.RendererGL.Immediate":326,"./webgl/p5.RendererGL.Retained":327,"./webgl/p5.Shader":329,"./webgl/p5.Texture":330,"./webgl/text":331}],258:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.ColorConversion={_hsbaToHSLA:function(t){var r=t[0],o=t[1],n=t[2],s=(2-o)*n/2;return 0!=s&&(1==s?o=0:s<.5?o/=2-o:o=o*n/(2-2*s)),[r,o,s,t[3]]},_hsbaToRGBA:function(t){var r,o,n,s,i,a=6*t[0],l=t[1],u=t[2];return 0===l?[u,u,u,t[3]]:(o=u*(1-l),n=u*(1-l*(a-(r=Math.floor(a)))),l=u*(1-l*(1+r-a)),a=1===r?(s=n,i=u,o):2===r?(s=o,i=u,l):3===r?(s=o,i=n,u):4===r?(s=l,i=o,u):5===r?(s=u,i=o,n):(s=u,i=l,o),[s,i,a,t[3]])},_hslaToHSBA:function(t){var r=t[0],o=t[1],n=t[2],s=n<.5?(1+o)*n:n+o-n*o;return[r,o=2*(s-n)/s,s,t[3]]},_hslaToRGBA:function(t){var r,o=6*t[0],n=t[1],s=t[2];return 0===n?[s,s,s,t[3]]:[(r=function(t,r,o){return t<0?t+=6:6<=t&&(t-=6),t<1?r+(o-r)*t:t<3?o:t<4?r+(o-r)*(4-t):r})(2+o,n=2*s-(s=s<.5?(1+n)*s:s+n-s*n),s),r(o,n,s),r(o-2,n,s),t[3]]},_rgbaToHSBA:function(t){var r,o,n=t[0],s=t[1],i=t[2],a=Math.max(n,s,i),l=a-Math.min(n,s,i);return 0==l?o=r=0:(o=l/a,n===a?r=(s-i)/l:s===a?r=2+(i-n)/l:i===a&&(r=4+(n-s)/l),r<0?r+=6:6<=r&&(r-=6)),[r/6,o,a,t[3]]},_rgbaToHSLA:function(t){var r,o,n=t[0],s=t[1],i=t[2],a=Math.max(n,s,i),l=Math.min(n,s,i),u=a+l,l=a-l;return 0==l?o=r=0:(o=u<1?l/u:l/(2-u),n===a?r=(s-i)/l:s===a?r=2+(i-n)/l:i===a&&(r=4+(n-s)/l),r<0?r+=6:6<=r&&(r-=6)),[r/6,o,u/2,t[3]]}},t=t.default.ColorConversion,o.default=t},{"../core/main":273}],259:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(t){return i.default._validateParameters("alpha",arguments),this.color(t)._getAlpha()},i.default.prototype.blue=function(t){return i.default._validateParameters("blue",arguments),this.color(t)._getBlue()},i.default.prototype.brightness=function(t){return i.default._validateParameters("brightness",arguments),this.color(t)._getBrightness()},i.default.prototype.color=function(){var t;return i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color?arguments[0]:(t=arguments[0]instanceof Array?arguments[0]:arguments,new i.default.Color(this,t))},i.default.prototype.green=function(t){return i.default._validateParameters("green",arguments),this.color(t)._getGreen()},i.default.prototype.hue=function(t){return i.default._validateParameters("hue",arguments),this.color(t)._getHue()},i.default.prototype.lerpColor=function(t,r,o){i.default._validateParameters("lerpColor",arguments);var n,s,l,u=this._colorMode,c=this._colorMaxes;if(u===a.RGB)s=t.levels.map(function(t){return t/255}),l=r.levels.map(function(t){return t/255});else if(u===a.HSB)t._getBrightness(),r._getBrightness(),s=t.hsba,l=r.hsba;else{if(u!==a.HSL)throw Error("".concat(u,"cannot be used for interpolation."));t._getLightness(),r._getLightness(),s=t.hsla,l=r.hsla}return o=Math.max(Math.min(o,1),0),void 0===this.lerp&&(this.lerp=function(t,r,o){return o*(r-t)+t}),t=this.lerp(s[0],l[0],o),r=this.lerp(s[1],l[1],o),n=this.lerp(s[2],l[2],o),s=this.lerp(s[3],l[3],o),t*=c[u][0],r*=c[u][1],n*=c[u][2],s*=c[u][3],this.color(t,r,n,s)},i.default.prototype.lightness=function(t){return i.default._validateParameters("lightness",arguments),this.color(t)._getLightness()},i.default.prototype.red=function(t){return i.default._validateParameters("red",arguments),this.color(t)._getRed()},i.default.prototype.saturation=function(t){return i.default._validateParameters("saturation",arguments),this.color(t)._getSaturation()};var u=i.default;o.default=u},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],260:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=c(t("../core/main")),a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=u();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants")),l=c(t("./color_conversion"));function u(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,u=function(){return t},t)}function c(t){return t&&t.__esModule?t:{default:t}}function d(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},t=/\s*/,f=/(\d{1,3})/,p=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,m=new RegExp("".concat(p.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(t.source),"i"),RGB_PERCENT:RegExp(["^rgb\\(",m.source,",",m.source,",",m.source,"\\)$"].join(t.source),"i"),RGBA:RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",p.source,"\\)$"].join(t.source),"i"),RGBA_PERCENT:RegExp(["^rgba\\(",m.source,",",m.source,",",m.source,",",p.source,"\\)$"].join(t.source),"i"),HSL:RegExp(["^hsl\\(",f.source,",",m.source,",",m.source,"\\)$"].join(t.source),"i"),HSLA:RegExp(["^hsla\\(",f.source,",",m.source,",",m.source,",",p.source,"\\)$"].join(t.source),"i"),HSB:RegExp(["^hsb\\(",f.source,",",m.source,",",m.source,"\\)$"].join(t.source),"i"),HSBA:RegExp(["^hsba\\(",f.source,",",m.source,",",m.source,",",p.source,"\\)$"].join(t.source),"i")},f=(i.default.Color=function(){var t,r;function o(t,r){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(t._colorMode,t._colorMaxes),![a.RGB,a.HSL,a.HSB].includes(this.mode))throw Error("".concat(this.mode," is an invalid colorMode."));this._array=o._parseInputs.apply(this,r),this._calculateLevels()}return r=[{key:"_parseInputs",value:function(t,r,n,s){var i,u=arguments.length,c=this.mode,d=this.maxes[c],f=[];if(3<=u){for(f[0]=t/d[0],f[1]=r/d[1],f[2]=n/d[2],f[3]="number"==typeof s?s/d[3]:1,i=f.length-1;0<=i;--i){var p=f[i];p<0?f[i]=0:1<p&&(f[i]=1)}return c===a.HSL?l.default._hslaToRGBA(f):c===a.HSB?l.default._hsbaToRGBA(f):f}if(1===u&&"string"==typeof t){if(h[n=t.trim().toLowerCase()])return o._parseInputs.call(this,h[n]);if(y.HEX3.test(n))return(f=y.HEX3.exec(n).slice(1).map(function(t){return parseInt(t+t,16)/255}))[3]=1,f;if(y.HEX6.test(n))return(f=y.HEX6.exec(n).slice(1).map(function(t){return parseInt(t,16)/255}))[3]=1,f;if(y.HEX4.test(n))return y.HEX4.exec(n).slice(1).map(function(t){return parseInt(t+t,16)/255});if(y.HEX8.test(n))return y.HEX8.exec(n).slice(1).map(function(t){return parseInt(t,16)/255});if(y.RGB.test(n))return(f=y.RGB.exec(n).slice(1).map(function(t){return t/255}))[3]=1,f;if(y.RGB_PERCENT.test(n))return(f=y.RGB_PERCENT.exec(n).slice(1).map(function(t){return parseFloat(t)/100}))[3]=1,f;if(y.RGBA.test(n))return y.RGBA.exec(n).slice(1).map(function(t,r){return 3===r?parseFloat(t):t/255});if(y.RGBA_PERCENT.test(n))return y.RGBA_PERCENT.exec(n).slice(1).map(function(t,r){return 3===r?parseFloat(t):parseFloat(t)/100});if(y.HSL.test(n)?(f=y.HSL.exec(n).slice(1).map(function(t,r){return 0===r?parseInt(t,10)/360:parseInt(t,10)/100}))[3]=1:y.HSLA.test(n)&&(f=y.HSLA.exec(n).slice(1).map(function(t,r){return 0===r?parseInt(t,10)/360:3===r?parseFloat(t):parseInt(t,10)/100})),(f=f.map(function(t){return Math.max(Math.min(t,1),0)})).length)return l.default._hslaToRGBA(f);if(y.HSB.test(n)?(f=y.HSB.exec(n).slice(1).map(function(t,r){return 0===r?parseInt(t,10)/360:parseInt(t,10)/100}))[3]=1:y.HSBA.test(n)&&(f=y.HSBA.exec(n).slice(1).map(function(t,r){return 0===r?parseInt(t,10)/360:3===r?parseFloat(t):parseInt(t,10)/100})),f.length){for(i=f.length-1;0<=i;--i)f[i]=Math.max(Math.min(f[i],1),0);return l.default._hsbaToRGBA(f)}f=[1,1,1,1]}else{if(1!==u&&2!==u||"number"!=typeof t)throw Error("".concat(arguments,"is not a valid color representation."));f[0]=t/d[2],f[1]=t/d[2],f[2]=t/d[2],f[3]="number"==typeof r?r/d[3]:1,f=f.map(function(t){return Math.max(Math.min(t,1),0)})}return f}}],t=[{key:"toString",value:function(t){var r=this.levels,o=this._array,n=o[3];switch(t){case"#rrggbb":return"#".concat(r[0]<16?"0".concat(r[0].toString(16)):r[0].toString(16),r[1]<16?"0".concat(r[1].toString(16)):r[1].toString(16),r[2]<16?"0".concat(r[2].toString(16)):r[2].toString(16));case"#rrggbbaa":return"#".concat(r[0]<16?"0".concat(r[0].toString(16)):r[0].toString(16),r[1]<16?"0".concat(r[1].toString(16)):r[1].toString(16),r[2]<16?"0".concat(r[2].toString(16)):r[2].toString(16),r[3]<16?"0".concat(r[3].toString(16)):r[3].toString(16));case"#rgb":return"#".concat(Math.round(15*o[0]).toString(16),Math.round(15*o[1]).toString(16),Math.round(15*o[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*o[0]).toString(16),Math.round(15*o[1]).toString(16),Math.round(15*o[2]).toString(16),Math.round(15*o[3]).toString(16));case"rgb":return"rgb(".concat(r[0],", ",r[1],", ",r[2],")");case"rgb%":return"rgb(".concat((100*o[0]).toPrecision(3),"%, ",(100*o[1]).toPrecision(3),"%, ",(100*o[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*o[0]).toPrecision(3),"%, ",(100*o[1]).toPrecision(3),"%, ",(100*o[2]).toPrecision(3),"%, ",(100*o[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],", ",n,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*n).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],", ",n,")");case"hsla%":return this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*n).toPrecision(3),"%)");default:return"rgba(".concat(r[0],",",r[1],",",r[2],",",n,")")}}},{key:"setRed",value:function(t){this._array[0]=t/this.maxes[a.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(t){this._array[1]=t/this.maxes[a.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(t){this._array[2]=t/this.maxes[a.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(t){this._array[3]=t/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var t=this._array,r=this.levels=Array(t.length),o=t.length-1;0<=o;--o)r[o]=Math.round(255*t[o]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(t,r){this.mode=t,this.maxes=r}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[a.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[a.RGB][1]}},{key:"_getHue",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[a.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=l.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=l.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])}}],d(o.prototype,t),r&&d(o,r),o}(),i.default.Color);o.default=f},{"../core/constants":262,"../core/main":273,"./color_conversion":258,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],261:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}t("./p5.Color"),i.default.prototype.background=function(){var t;return(t=this._renderer).background.apply(t,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},i.default.prototype.colorMode=function(t,r,o,n,s){return i.default._validateParameters("colorMode",arguments),t!==a.RGB&&t!==a.HSB&&t!==a.HSL||(this._colorMode=t,t=this._colorMaxes[t],2==arguments.length?(t[0]=r,t[1]=r,t[2]=r,t[3]=r):4==arguments.length?(t[0]=r,t[1]=o,t[2]=n):5==arguments.length&&(t[0]=r,t[1]=o,t[2]=n,t[3]=s)),this},i.default.prototype.fill=function(){var t;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(t=this._renderer).fill.apply(t,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var t;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(t=this._renderer).stroke.apply(t,arguments),this},i.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var u=i.default;o.default=u},{"../core/constants":262,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],262:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QUADRATIC=o.LINEAR=o._CTX_MIDDLE=o._DEFAULT_LEADMULT=o._DEFAULT_TEXT_FILL=o.WORD=o.CHAR=o.BOLDITALIC=o.BOLD=o.ITALIC=o.NORMAL=o.BLUR=o.ERODE=o.DILATE=o.POSTERIZE=o.INVERT=o.OPAQUE=o.GRAY=o.THRESHOLD=o.BURN=o.DODGE=o.SOFT_LIGHT=o.HARD_LIGHT=o.OVERLAY=o.REPLACE=o.SCREEN=o.MULTIPLY=o.EXCLUSION=o.SUBTRACT=o.DIFFERENCE=o.LIGHTEST=o.DARKEST=o.ADD=o.REMOVE=o.BLEND=o.UP_ARROW=o.TAB=o.SHIFT=o.RIGHT_ARROW=o.RETURN=o.OPTION=o.LEFT_ARROW=o.ESCAPE=o.ENTER=o.DOWN_ARROW=o.DELETE=o.CONTROL=o.BACKSPACE=o.ALT=o.AUTO=o.HSL=o.HSB=o.RGB=o.MITER=o.BEVEL=o.ROUND=o.SQUARE=o.PROJECT=o.PIE=o.CHORD=o.OPEN=o.CLOSE=o.TESS=o.QUAD_STRIP=o.QUADS=o.TRIANGLE_STRIP=o.TRIANGLE_FAN=o.TRIANGLES=o.LINE_LOOP=o.LINE_STRIP=o.LINES=o.POINTS=o.BASELINE=o.BOTTOM=o.TOP=o.CENTER=o.LEFT=o.RIGHT=o.RADIUS=o.CORNERS=o.CORNER=o.RAD_TO_DEG=o.DEG_TO_RAD=o.RADIANS=o.DEGREES=o.TWO_PI=o.TAU=o.QUARTER_PI=o.PI=o.HALF_PI=o.WAIT=o.TEXT=o.MOVE=o.HAND=o.CROSS=o.ARROW=o.WEBGL2=o.WEBGL=o.P2D=o.VERSION=void 0,o.RGBA=o.HALF_FLOAT=o.FLOAT=o.UNSIGNED_INT=o.UNSIGNED_BYTE=o.COVER=o.CONTAIN=o.FALLBACK=o.LABEL=o.AXES=o.GRID=o._DEFAULT_FILL=o._DEFAULT_STROKE=o.PORTRAIT=o.LANDSCAPE=o.MIRROR=o.CLAMP=o.REPEAT=o.NEAREST=o.IMAGE=o.IMMEDIATE=o.TEXTURE=o.FILL=o.STROKE=o.CURVE=o.BEZIER=void 0;var n=Math.PI,s=(o.VERSION="1.7.0",o.P2D="p2d",o.WEBGL="webgl",o.WEBGL2="webgl2",o.ARROW="default",o.CROSS="crosshair",o.HAND="pointer",o.MOVE="move",o.TEXT="text",o.WAIT="wait",n/2),s=(o.HALF_PI=s,n),s=(o.PI=s,n/4),s=(o.QUARTER_PI=s,2*n),s=(o.TAU=s,2*n),s=(o.TWO_PI=s,o.DEGREES="degrees",o.RADIANS="radians",n/180),s=(o.DEG_TO_RAD=s,180/n);o.RAD_TO_DEG=s,o.CORNER="corner",o.CORNERS="corners",o.RADIUS="radius",o.RIGHT="right",o.LEFT="left",o.CENTER="center",o.TOP="top",o.BOTTOM="bottom",o.BASELINE="alphabetic",o.POINTS=0,o.LINES=1,o.LINE_STRIP=3,o.LINE_LOOP=2,o.TRIANGLES=4,o.TRIANGLE_FAN=6,o.TRIANGLE_STRIP=5,o.QUADS="quads",o.QUAD_STRIP="quad_strip",o.TESS="tess",o.CLOSE="close",o.OPEN="open",o.CHORD="chord",o.PIE="pie",o.PROJECT="square",o.SQUARE="butt",o.ROUND="round",o.BEVEL="bevel",o.MITER="miter",o.RGB="rgb",o.HSB="hsb",o.HSL="hsl",o.AUTO="auto",o.ALT=18,o.BACKSPACE=8,o.CONTROL=17,o.DELETE=46,o.DOWN_ARROW=40,o.ENTER=13,o.ESCAPE=27,o.LEFT_ARROW=37,o.OPTION=18,o.RETURN=13,o.RIGHT_ARROW=39,o.SHIFT=16,o.TAB=9,o.UP_ARROW=38,o.BLEND="source-over",o.REMOVE="destination-out",o.ADD="lighter",o.DARKEST="darken",o.LIGHTEST="lighten",o.DIFFERENCE="difference",o.SUBTRACT="subtract",o.EXCLUSION="exclusion",o.MULTIPLY="multiply",o.SCREEN="screen",o.REPLACE="copy",o.OVERLAY="overlay",o.HARD_LIGHT="hard-light",o.SOFT_LIGHT="soft-light",o.DODGE="color-dodge",o.BURN="color-burn",o.THRESHOLD="threshold",o.GRAY="gray",o.OPAQUE="opaque",o.INVERT="invert",o.POSTERIZE="posterize",o.DILATE="dilate",o.ERODE="erode",o.BLUR="blur",o.NORMAL="normal",o.ITALIC="italic",o.BOLD="bold",o.BOLDITALIC="bold italic",o.CHAR="CHAR",o.WORD="WORD",o._DEFAULT_TEXT_FILL="#000000",o._DEFAULT_LEADMULT=1.25,o._CTX_MIDDLE="middle",o.LINEAR="linear",o.QUADRATIC="quadratic",o.BEZIER="bezier",o.CURVE="curve",o.STROKE="stroke",o.FILL="fill",o.TEXTURE="texture",o.IMMEDIATE="immediate",o.IMAGE="image",o.NEAREST="nearest",o.REPEAT="repeat",o.CLAMP="clamp",o.MIRROR="mirror",o.LANDSCAPE="landscape",o.PORTRAIT="portrait",o._DEFAULT_STROKE="#000000",o._DEFAULT_FILL="#FFFFFF",o.GRID="grid",o.AXES="axes",o.LABEL="label",o.FALLBACK="fallback",o.CONTAIN="contain",o.COVER="cover",o.UNSIGNED_BYTE="unsigned-byte",o.UNSIGNED_INT="unsigned-int",o.FLOAT="float",o.HALF_FLOAT="half-float",o.RGBA="rgba"},{}],263:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(a=t("./main"))&&a.__esModule?a:{default:a},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("./constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}var u=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT],c=(i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60,window.print);function d(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function h(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var t;arguments.length?(t=console).log.apply(t,arguments):c()},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(t,r,o){var n,s="auto",i=this._curElement.elt;u.includes(t)?s=t:"string"==typeof t&&(n="",r&&o&&"number"==typeof r&&"number"==typeof o&&(n="".concat(r," ").concat(o)),s="http://"===t.substring(0,7)||"https://"===t.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url(".concat(t,") ").concat(n,", auto"):t),i.style.cursor=s},i.default.prototype.frameRate=function(t){return i.default._validateParameters("frameRate",arguments),"number"!=typeof t||t<0?this._frameRate:(this._setProperty("_targetFrameRate",t),0===t&&this._setProperty("_frameRate",t),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(t){return this.frameRate(t)},i.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.webglVersion=a.P2D,i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=d(),i.default.prototype.windowHeight=h(),i.default.prototype._onresize=function(t){this._setProperty("windowWidth",d()),this._setProperty("windowHeight",h());var r=this._isGlobal?window:this;"function"!=typeof r.windowResized||void 0===(r=r.windowResized(t))||r||t.preventDefault()},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(t){if(i.default._validateParameters("fullscreen",arguments),void 0===t)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(t){if(t=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw Error("Fullscreen not enabled in this browser.");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(t){var r;return i.default._validateParameters("pixelDensity",arguments),"number"==typeof t?(t!==this._pixelDensity&&(this._pixelDensity=t),(r=this).resizeCanvas(this.width,this.height,!0)):r=this._pixelDensity,r},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(t){return""!==t})},i.default.prototype.getURLParams=function(){for(var t,r=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,o={};null!=(t=r.exec(location.search));)t.index===r.lastIndex&&r.lastIndex++,o[t[1]]=t[2];return o},t=i.default,o.default=t},{"./constants":262,"./main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.search":195,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],264:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(u=t("../main"))&&u.__esModule?u:{default:u};function s(t,r){r=r||console.log.bind(console),i||a(),i.some(function(o){var n;if(t.message&&null!==t.message.match("\\W?".concat(o.name,"\\W")))return n="function"===o.type?"".concat(o.name,"()"):o.name,r("Did you just try to use p5.js's ".concat(n," ").concat(o.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(l)),!0})}t("../internationalization");var i=null,a=null,l=(n.default._friendlyError=n.default._checkForUserDefinedFunctions=n.default._fesErrorMonitor=function(){},i=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),a=function(){function r(t){return Object.getOwnPropertyNames(t).filter(function(t){return"_"!==t[0]&&!(t in o)&&(o[t]=!0)}).map(function(r){var o="function"==typeof t[r]?"function":r===r.toUpperCase()?"constant":"variable";return{name:r,type:o}})}var o={};(i=[].concat(r(n.default.prototype),r(t("../constants")))).sort(function(t,r){return r.name.length-t.name.length})},u=(n.default.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",function(){window.removeEventListener("error",s,!1)})),n.default);o.default=u},{"../constants":262,"../internationalization":271,"../main":273,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.function.name":167,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.starts-with":197,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],265:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(n=t("../main"))&&n.__esModule?n:{default:n};t("../internationalization"),n.default._friendlyFileLoadError=function(){},t=n.default,o.default=t},{"../internationalization":271,"../main":273}],266:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i,a=(i=t("../main"))&&i.__esModule?i:{default:i};function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}t("../internationalization"),function(t){if((!t||!t.__esModule)&&null!==t&&("object"===s(t)||"function"==typeof t)){var r=l();if(r&&r.has(t))return r.get(t);var o,n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&((n=a?Object.getOwnPropertyDescriptor(t,o):null)&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]);i.default=t,r&&r.set(t,i)}}(t("../constants")),a.default._fesCodeReader=function(){};var u=a.default;o.default=u},{"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],267:[function(t,r,o){function n(){var t=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/;return{parse:function(t){return void 0!==t.stacktrace||void 0!==t["opera#sourceloc"]?this.parseOpera(t):t.stack&&t.stack.match(r)?this.parseV8OrIE(t):t.stack?this.parseFFOrSafari(t):void 0},extractLocation:function(t){return -1===t.indexOf(":")?[t]:[(t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,"")))[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(r)},this).map(function(t){var r=(t=-1<t.indexOf("(eval ")?t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):t).replace(/^\s+/,"").replace(/\(eval code/g,"("),o=r.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(r=o?r.replace(o[0],""):r).split(/\s+/).slice(1),o=this.extractLocation(o?o[1]:r.pop());return{functionName:r.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(o[0])?void 0:o[0],lineNumber:o[1],columnNumber:o[2],source:t}},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(t){return!t.match(o)},this).map(function(t){var r,o;return -1===(t=-1<t.indexOf(" > eval")?t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):t).indexOf("@")&&-1===t.indexOf(":")?{functionName:t}:{functionName:(o=t.match(r=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&o[1]?o[1]:void 0,fileName:(o=this.extractLocation(t.replace(r,"")))[0],lineNumber:o[1],columnNumber:o[2],source:t}},this)},parseOpera:function(t){return!t.stacktrace||-1<t.message.indexOf("\n")&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,o=t.message.split("\n"),n=[],s=2,i=o.length;s<i;s+=2){var a=r.exec(o[s]);a&&n.push({fileName:a[2],lineNumber:a[1],source:o[s]})}return n},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=t.stacktrace.split("\n"),n=[],s=0,i=o.length;s<i;s+=2){var a=r.exec(o[s]);a&&n.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:o[s]})}return n},parseOpera11:function(r){return r.stack.split("\n").filter(function(r){return!!r.match(t)&&!r.match(/^Error created at/)},this).map(function(t){var r,o=t.split("@"),n=this.extractLocation(o.pop()),o=o.shift()||"";return{functionName:o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(r=o.match(/\(([^)]*)\)/)?o.replace(/^[^(]+\(([^)]*)\)$/,"$1"):r)||"[arguments not available]"===r?void 0:r.split(","),fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:t}},this)}}}t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../main"))&&t.__esModule?t:{default:t}).default._getErrorStackParser=function(){return new n},t=t.default,o.default=t},{"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196}],268:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(s=t("../main"))&&s.__esModule?s:{default:s};function i(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,i=function(){return t},t)}function a(t){return(a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}(function(t){if((!t||!t.__esModule)&&null!==t&&("object"===a(t)||"function"==typeof t)){var r,o=i();if(o&&o.has(t))return o.get(t);var n,s={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=l?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);s.default=t,o&&o.set(t,s)}})(t("../constants")),t("../internationalization"),s.default._validateParameters=s.default._clearValidateParamsCache=function(){},t=s.default,o.default=t},{"../../../docs/parameterData.json":void 0,"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.map":168,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],269:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,i={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=l?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("./constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}o.default={modeAdjust:function(t,r,o,n,s){return s===i.CORNER?{x:t,y:r,w:o,h:n}:s===i.CORNERS?{x:t,y:r,w:o-t,h:n-r}:s===i.RADIUS?{x:t-o,y:r-n,w:2*o,h:2*n}:s===i.CENTER?{x:t-.5*o,y:r-.5*n,w:o,h:n}:void 0}}},{"./constants":262,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],270:[function(t,r,o){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var n=(s=t("../core/main"))&&s.__esModule?s:{default:s};t("./internationalization");var s=Promise.resolve();Promise.all([new Promise(function(t,r){"complete"===document.readyState?t():window.addEventListener("load",t,!1)}),s]).then(function(){void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!n.default.instance&&new n.default})},{"../core/main":273,"./internationalization":271,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/web.dom-collections.iterator":236}],271:[function(t,r,o){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.setTranslatorLanguage=o.currentTranslatorLanguage=o.availableTranslatorLanguages=o.initialize=o.translator=void 0;var n,s,i=l(t("i18next")),a=l(t("i18next-browser-languagedetector"));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){var t,r;function o(t,r){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this.init(t,r)}return t=[{key:"fetchWithTimeout",value:function(t,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(t,r),new Promise(function(t,r){return setTimeout(function(){return r(Error("timeout"))},o)})])}},{key:"init",value:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=r}},{key:"read",value:function(t,r,o){var i=this.options.loadPath;t===this.options.fallback?o(null,n[t][r]):s.includes(t)?(i=this.services.interpolator.interpolate(i,{lng:t,ns:r}),this.loadUrl(i,o)):o("Not found",!1)}},{key:"loadUrl",value:function(t,r){this.fetchWithTimeout(t).then(function(r){if(r.ok)return r.json();throw Error("failed loading ".concat(t))},function(){throw Error("failed loading ".concat(t))}).then(function(t){return r(null,t)}).catch(r)}}],u(o.prototype,t),r&&u(o,r),o}();c.type="backend",o.translator=function(t,r){console.debug("p5.js translator called before translations were loaded"),i.default.t(t,r)},o.initialize=function(){return i.default.use(a.default).use(c).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:n}).then(function(t){o.translator=t},function(t){return console.debug("Translations failed to load (".concat(t,")"))})},o.availableTranslatorLanguages=function(){return i.default.languages},o.currentTranslatorLanguage=function(t){return i.default.language},o.setTranslatorLanguage=function(t){return i.default.changeLanguage(t||void 0,function(t){return console.debug("Translations failed to load (".concat(t,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236,i18next:3,"i18next-browser-languagedetector":3}],272:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("./main"))&&t.__esModule?t:{default:t}).default.prototype.pushStyle=function(){throw Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw Error("pushMatrix() not used, see push()")},t=t.default,o.default=t},{"./main":273}],273:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,t("./shim");var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,i={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=l?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("./constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u,c=function(){var t,r;function o(t,r,n){var s=this;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=r,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var r=Object.getOwnPropertyNames(o.prototype._registeredMethods),i=!0,a=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;this._registeredMethods[d]=o.prototype._registeredMethods[d].slice()}}catch(t){a=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){s._userNode&&"string"==typeof s._userNode&&(s._userNode=document.getElementById(s._userNode));var t=s._isGlobal?window:s;if(t.preload){var r,n=document.getElementById(s._loadingScreenId),i=(n||((n=document.createElement("div")).innerHTML="Loading...",n.style.position="absolute",n.id=s._loadingScreenId,(s._userNode||document.body).appendChild(n)),s._preloadMethods);for(r in i){i[r]=i[r]||o;var a=i[r];a!==o.prototype&&a!==o||(s._isGlobal&&(window[r]=s._wrapPreload(s,r)),a=s),s._registeredPreloadMethods[r]=a[r],a[r]=s._wrapPreload(a,r)}t.preload(),s._runIfPreloadsAreDone()}else s._setup(),s._recording||s._draw()},this._runIfPreloadsAreDone=function(){var t,r=this._isGlobal?window:this;0===r._preloadCount&&((t=document.getElementById(r._loadingScreenId))&&t.parentNode.removeChild(t),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),r._setup(),this._recording||r._draw()))},this._decrementPreload=function(){var t=this._isGlobal?window:this;t._preloadDone||"function"!=typeof t.preload||(t._setProperty("_preloadCount",t._preloadCount-1),t._runIfPreloadsAreDone())},this._wrapPreload=function(t,r){var o=this;return function(){o._incrementPreload();for(var n=arguments.length,s=Array(n),i=0;i<n;i++)s[i]=arguments[i];return o._registeredPreloadMethods[r].apply(t,s)}},this._incrementPreload=function(){var t=this._isGlobal?window:this;t._preloadDone||t._setProperty("_preloadCount",t._preloadCount+1)},this._setup=function(){s.createCanvas(s._defaultCanvasSize.width,s._defaultCanvasSize.height,"p2d");var t=s._isGlobal?window:s;if("function"==typeof t.preload)for(var r in s._preloadMethods)t[r]=s._preloadMethods[r][r],t[r]&&s&&(t[r]=t[r].bind(s));s._millisStart=window.performance.now(),t._preloadDone=!0,"function"==typeof t.setup&&t.setup();var o=document.getElementsByTagName("canvas"),n=!0,i=!1,a=void 0;try{for(var l,u=o[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;"true"===c.dataset.hidden&&(c.style.visibility="",delete c.dataset.hidden)}}catch(t){i=!0,a=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}s._lastTargetFrameTime=window.performance.now(),s._lastRealFrameTime=window.performance.now(),s._setupDone=!0,(s._accessibleOutputs.grid||s._accessibleOutputs.text)&&s._updateAccsOutput()},this._draw=function(){var t=window.performance.now(),r=t-s._lastTargetFrameTime,o=1e3/s._targetFrameRate;(!s._loop||o-5<=r)&&(s.deltaTime=t-s._lastRealFrameTime,s._setProperty("deltaTime",s.deltaTime),s._frameRate=1e3/s.deltaTime,s.redraw(),s._lastTargetFrameTime=Math.max(s._lastTargetFrameTime+o,t),s._lastRealFrameTime=t,void 0!==s._updateMouseCoords&&(s._updateMouseCoords(),s._setProperty("movedX",0),s._setProperty("movedY",0))),s._loop&&(s._requestAnimId=window.requestAnimationFrame(s._draw))},this._setProperty=function(t,r){s[t]=r,s._isGlobal&&(window[t]=r)},this.remove=function(){var t=document.getElementById(s._loadingScreenId);if(t&&(t.parentNode.removeChild(t),s._incrementPreload()),s._curElement){for(var r in s._loop=!1,s._requestAnimId&&window.cancelAnimationFrame(s._requestAnimId),s._events)window.removeEventListener(r,s._events[r]);var n=!0,t=!1,i=void 0;try{for(var a,l=s._elements[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u,c=a.value;for(u in c.elt&&c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt),c._events)c.elt.removeEventListener(u,c._events[u])}}catch(r){t=!0,i=r}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}s._registeredMethods.remove.forEach(function(t){void 0!==t&&t.call(s)})}if(s._isGlobal){for(var d in o.prototype)try{delete window[d]}catch(t){window[d]=void 0}for(var h in s)if(s.hasOwnProperty(h))try{delete window[h]}catch(t){window[h]=void 0}o.instance=null}},this._registeredMethods.init.forEach(function(t){void 0!==t&&t.call(this)},this),this._setupPromisePreloads();var h,f,p=this._createFriendlyGlobalFunctionBinder();if(t)t(this),o._checkForUserDefinedFunctions(this);else{for(var m in this._isGlobal=!0,o.instance=this,o.prototype)"function"==typeof o.prototype[m]?(h=m.substring(2),this._events.hasOwnProperty(h)||p(m,Math.hasOwnProperty(m)&&Math[m]===o.prototype[m]?o.prototype[m]:o.prototype[m].bind(this))):p(m,o.prototype[m]);for(var y in this)this.hasOwnProperty(y)&&p(y,this[y])}for(f in this._events){var g=this["_on".concat(f)];g&&(g=g.bind(this),window.addEventListener(f,g,{passive:!1}),this._events[f]=g)}function v(){s._setProperty("focused",!0)}function b(){s._setProperty("focused",!1)}window.addEventListener("focus",v),window.addEventListener("blur",b),this.registerMethod("remove",function(){window.removeEventListener("focus",v),window.removeEventListener("blur",b)}),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}return t=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=i.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,r){o.prototype._preloadMethods.hasOwnProperty(t)||(o.prototype._preloadMethods[t]=r)}},{key:"registerMethod",value:function(t,r){var n=this||o.prototype;n._registeredMethods.hasOwnProperty(t)||(n._registeredMethods[t]=[]),n._registeredMethods[t].push(r)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.globalObject||window;return t.log||console.log.bind(console),function(t,n){o.disableFriendlyErrors,r[t]=n}}}],l(o.prototype,t),r&&l(o,r),o}();for(u in c.instance=null,c.disableFriendlyErrors=!1,i)c.prototype[u]=i[u];c.VERSION=i.VERSION,c.prototype._preloadMethods={loadJSON:c.prototype,loadImage:c.prototype,loadStrings:c.prototype,loadXML:c.prototype,loadBytes:c.prototype,loadTable:c.prototype,loadFont:c.prototype,loadModel:c.prototype,loadShader:c.prototype},c.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},c.prototype._registeredPreloadMethods={},o.default=c},{"./constants":262,"./shim":284,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],274:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("./main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.Element=function(){var t,r;function o(t,r){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this.elt=t,this._pInst=this._pixelsState=r,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}return r=[{key:"_adjustListener",value:function(t,r,o){return!1===r?n.default.Element._detachListener(t,o):n.default.Element._attachListener(t,r,o),this}},{key:"_attachListener",value:function(t,r,o){o._events[t]&&n.default.Element._detachListener(t,o),r=r.bind(o),o.elt.addEventListener(t,r,!1),o._events[t]=r}},{key:"_detachListener",value:function(t,r){var o=r._events[t];r.elt.removeEventListener(t,o,!1),r._events[t]=null}}],t=[{key:"parent",value:function(t){return void 0===t?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof n.default.Element&&(t=t.elt),t.appendChild(this.elt),this)}},{key:"id",value:function(t){return void 0===t?this.elt.id:(this.elt.id=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(t){return void 0===t?this.elt.className:(this.elt.className=t,this)}},{key:"mousePressed",value:function(t){return n.default.Element._adjustListener("mousedown",function(r){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(r),t.call(this,r)},this),this}},{key:"doubleClicked",value:function(t){return n.default.Element._adjustListener("dblclick",t,this),this}},{key:"mouseWheel",value:function(t){return n.default.Element._adjustListener("wheel",t,this),this}},{key:"mouseReleased",value:function(t){return n.default.Element._adjustListener("mouseup",t,this),this}},{key:"mouseClicked",value:function(t){return n.default.Element._adjustListener("click",t,this),this}},{key:"mouseMoved",value:function(t){return n.default.Element._adjustListener("mousemove",t,this),this}},{key:"mouseOver",value:function(t){return n.default.Element._adjustListener("mouseover",t,this),this}},{key:"mouseOut",value:function(t){return n.default.Element._adjustListener("mouseout",t,this),this}},{key:"touchStarted",value:function(t){return n.default.Element._adjustListener("touchstart",t,this),this}},{key:"touchMoved",value:function(t){return n.default.Element._adjustListener("touchmove",t,this),this}},{key:"touchEnded",value:function(t){return n.default.Element._adjustListener("touchend",t,this),this}},{key:"dragOver",value:function(t){return n.default.Element._adjustListener("dragover",t,this),this}},{key:"dragLeave",value:function(t){return n.default.Element._adjustListener("dragleave",t,this),this}},{key:"_setProperty",value:function(t,r){this[t]=r}}],s(o.prototype,t),r&&s(o,r),o}(),t=n.default.Element,o.default=t},{"./main":273}],275:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(p=t("./main"))&&p.__esModule?p:{default:p},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("./constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r){return(c=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function d(t,r){return r&&("object"===l(r)||"function"==typeof r)?r:h(t)}function h(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}s.default.Graphics=function(t){var r=a;if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&c(r,t);var o,n=function(){var t,r=f(a);return d(this,!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?r.apply(this,arguments):(t=f(this).constructor,Reflect.construct(r,arguments,t)))};function a(t,r,o,l,u){if(!(this instanceof a))throw TypeError("Cannot call a class as a function");p=u||document.createElement("canvas"),(c=n.call(this,p,l)).canvas=p;var c,f,p=o||i.P2D,o=l._userNode||document.body;for(f in u||o.appendChild(c.canvas),s.default.prototype)c[f]||("function"==typeof s.default.prototype[f]?c[f]=s.default.prototype[f].bind(h(c)):c[f]=s.default.prototype[f]);return s.default.prototype._initializeInstanceVariables.apply(h(c)),c.width=t,c.height=r,c._pixelDensity=l._pixelDensity,p===i.WEBGL?c._renderer=new s.default.RendererGL(c.canvas,h(c),!1):c._renderer=new s.default.Renderer2D(c.canvas,h(c),!1),l._elements.push(h(c)),Object.defineProperty(h(c),"deltaTime",{get:function(){return this._pInst.deltaTime}}),c._renderer.resize(t,r),c._renderer._applyDefaults(),d(c,h(c))}return r=a,t=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var t,r=this._pInst._elements.indexOf(this);for(t in -1!==r&&this._pInst._elements.splice(r,1),this._events)this.elt.removeEventListener(t,this._events[t])}},{key:"createFramebuffer",value:function(t){return new s.default.Framebuffer(this,t)}}],u(r.prototype,t),o&&u(r,o),a}(s.default.Element);var p=s.default.Graphics;o.default=p},{"./constants":262,"./main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],276:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(f=t("./main"))&&f.__esModule?f:{default:f},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("../core/constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r){return(c=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function d(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){var r=a;if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&c(r,t);var o,n=function(){var t,r,o=h(a);return t=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?o.apply(this,arguments):(t=h(this).constructor,Reflect.construct(o,arguments,t)),o=this,(r=t)&&("object"===l(r)||"function"==typeof r)?r:d(o)};function a(t,r,o){var s;if(this instanceof a)return(s=n.call(this,t,r)).canvas=t,s._pixelsState=r,o?(s._isMainCanvas=!0,s._pInst._setProperty("_curElement",d(s)),s._pInst._setProperty("canvas",s.canvas),s._pInst._setProperty("width",s.width),s._pInst._setProperty("height",s.height)):(s.canvas.style.display="none",s._styles=[]),s._textSize=12,s._textLeading=15,s._textFont="sans-serif",s._textStyle=i.NORMAL,s._textAscent=null,s._textDescent=null,s._textAlign=i.LEFT,s._textBaseline=i.BASELINE,s._textWrap=i.WORD,s._rectMode=i.CORNER,s._ellipseMode=i.CENTER,s._curveTightness=0,s._imageMode=i.CORNER,s._tint=null,s._doStroke=!0,s._doFill=!0,s._strokeSet=!1,s._fillSet=!1,s._leadingSet=!1,s;throw TypeError("Cannot call a class as a function")}return r=a,t=[{key:"push",value:function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(t){t.properties&&Object.assign(this,t.properties)}},{key:"resize",value:function(t,r){this.width=t,this.height=r,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=r*this._pInst._pixelDensity,this.elt.style.width="".concat(t,"px"),this.elt.style.height="".concat(r,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(t,r,o,n){var i=this._pixelsState,a=i._pixelDensity,l=this.canvas;if(void 0===t&&void 0===r)t=r=0,o=i.width,n=i.height;else if(t*=a,r*=a,void 0===o&&void 0===n)return t<0||r<0||t>=l.width||r>=l.height?[0,0,0,0]:this._getPixel(t,r);return(i=new s.default.Image(o,n)).canvas.getContext("2d").drawImage(l,t,r,o*a,n*a,0,0,o,n),i}},{key:"textLeading",value:function(t){return"number"==typeof t?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",t),this._pInst):this._textLeading}},{key:"textStyle",value:function(t){return t?(t!==i.NORMAL&&t!==i.ITALIC&&t!==i.BOLD&&t!==i.BOLDITALIC||this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(t,r){return void 0!==t?(this._setProperty("_textAlign",t),void 0!==r&&this._setProperty("_textBaseline",r),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(t){return this._setProperty("_textWrap",t),this._textWrap}},{key:"text",value:function(t,r,o,n,s){var a,l,u,c=this._pInst,d=this._textWrap,h=Number.MAX_VALUE,f=o;if((this._doFill||this._doStroke)&&void 0!==t){if(a=(t=(t="string"!=typeof t?t.toString():t).replace(/(\t)/g,"  ")).split("\n"),void 0!==n){switch(this._rectMode===i.CENTER&&(r-=n/2),this._textAlign){case i.CENTER:r+=n/2;break;case i.RIGHT:r+=n}if(void 0!==s){this._rectMode===i.CENTER&&(o-=s/2,f-=s/2);var t=o,p=c.textAscent();switch(this._textBaseline){case i.BOTTOM:o=Math.max(o+s,o),f+=p;break;case i.CENTER:o=Math.max(o+s/2,o),f+=p/2}h=o+s-p,this._textBaseline===i.CENTER&&(h=t+s-p/2)}else this._textBaseline!==i.BOTTOM&&this._textBaseline!==i.CENTER||(f=o-(t=c.textSize()*this._textLeading)/2,h=o+t/2);if(d===i.WORD){for(var m=[],y=0;y<a.length;y++){for(var g="",v=a[y].split(" "),b=0;b<v.length;b++)l="".concat(g+v[b])+" ",g=n<(u=this.textWidth(l))&&0<g.length?(m.push(g),"".concat(v[b])+" "):l;m.push(g)}var x=0;this._textBaseline===i.CENTER?x=(m.length-1)*c.textLeading()/2:this._textBaseline===i.BOTTOM&&(x=(m.length-1)*c.textLeading());for(var j=0;j<a.length;j++){g="",v=a[j].split(" ");for(var w=0;w<v.length;w++)l="".concat(g+v[w])+" ",n<(u=this.textWidth(l))&&0<g.length?(this._renderText(c,g.trim(),r,o-x,h,f),g="".concat(v[w])+" ",o+=c.textLeading()):g=l;this._renderText(c,g.trim(),r,o-x,h,f),o+=c.textLeading()}}else{for(var S=[],T=0;T<a.length;T++)for(var E=a[T].split(g=""),k=0;k<E.length;k++)l="".concat(g+E[k]),(u=this.textWidth(l))<=n?g+=E[k]:n<u&&0<g.length&&(S.push(g),g="".concat(E[k]));S.push(g);var M=0;this._textBaseline===i.CENTER?M=(S.length-1)*c.textLeading()/2:this._textBaseline===i.BOTTOM&&(M=(S.length-1)*c.textLeading());for(var C=0;C<a.length;C++){E=a[C].split(g="");for(var A=0;A<E.length;A++)l="".concat(g+E[A]),(u=this.textWidth(l))<=n?g+=E[A]:n<u&&0<g.length&&(this._renderText(c,g.trim(),r,o-M,h,f),o+=c.textLeading(),g="".concat(E[A]))}this._renderText(c,g.trim(),r,o-M,h,f),o+=c.textLeading()}}else{var O=0;this._textBaseline===i.CENTER?O=(a.length-1)*c.textLeading()/2:this._textBaseline===i.BOTTOM&&(O=(a.length-1)*c.textLeading());for(var R=0;R<a.length;R++)this._renderText(c,a[R],r,o-O,h,f-O),o+=c.textLeading()}return c}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===l(t)&&t.font&&t.font.supported}},{key:"_updateTextMetrics",value:function(){var t,r,o,n,s,i;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((t=document.createElement("span")).style.fontFamily=this._textFont,t.style.fontSize="".concat(this._textSize,"px"),t.innerHTML="ABCjgq|",(i=document.createElement("div")).style.display="inline-block",i.style.width="1px",i.style.height="0px",(r=document.createElement("div")).appendChild(t),r.appendChild(i),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),i.style.verticalAlign="baseline",n=p(i),s=p(t),o=n[1]-s[1],i.style.verticalAlign="bottom",n=p(i),s=p(t),i=n[1]-s[1]-o,document.body.removeChild(r),this._setProperty("_textAscent",o),this._setProperty("_textDescent",i)),this}}],u(r.prototype,t),o&&u(r,o),a}(s.default.Element);function p(t){var r=0,o=0;if(t.offsetParent)for(;r+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;);else r+=t.offsetLeft,o+=t.offsetTop;return[r,o]}f.prototype.textSize=function(t){return"number"==typeof t?(this._setProperty("_textSize",t),this._leadingSet||this._setProperty("_textLeading",t*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},s.default.Renderer=f,t=s.default.Renderer,o.default=t},{"../core/constants":262,"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],277:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(p=t("./main"))&&p.__esModule?p:{default:p},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("./constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r,o){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,r,o){var t=function(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=h(t)););return t}(t,r);if(t)return(t=Object.getOwnPropertyDescriptor(t,r)).get?t.get.call(o):t.value})(t,r,o||t)}function d(t,r){return(d=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t("./p5.Renderer");var f="rgba(0,0,0,0)",p=function(t){var r=a;if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&d(r,t);var o,n=function(){var t,r=h(a),r=(t=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?r.apply(this,arguments):(t=h(this).constructor,Reflect.construct(r,arguments,t)),this);if(!t||"object"!==l(t)&&"function"!=typeof t){if(void 0!==r)return r;throw ReferenceError("this hasn't been initialised - super() hasn't been called")}return t};function a(t,r,o){if(this instanceof a)return(t=n.call(this,t,r,o)).drawingContext=t.canvas.getContext("2d"),t._pInst._setProperty("drawingContext",t.drawingContext),t;throw TypeError("Cannot call a class as a function")}return r=a,t=[{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=i.BLEND,this._setFill(i._DEFAULT_FILL),this._setStroke(i._DEFAULT_STROKE),this.drawingContext.lineCap=i.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(t,r){c(h(a.prototype),"resize",this).call(this,t,r),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var t,r;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof s.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(t=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(t,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(t=this._getFill(),r=(r=this._pInst).color.apply(r,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(r.levels),r=r.toString(),this._setFill(r),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var t=(t=this._pInst).color.apply(t,arguments);this._setFill(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",t.levels)}},{key:"stroke",value:function(){var t=(t=this._pInst).color.apply(t,arguments);this._setStroke(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",t.levels)}},{key:"erase",value:function(t,r){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,t=this._pInst.color(255,t).toString(),this.drawingContext.fillStyle=t,this._cachedStrokeStyle=this.drawingContext.strokeStyle,t=this._pInst.color(255,r).toString(),this.drawingContext.strokeStyle=t,r=this._cachedBlendMode,this.blendMode(i.REMOVE),this._cachedBlendMode=r,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"image",value:function(t,r,o,n,i,a,l,u,c){t.gifProperties&&t._animateGif(this._pInst);try{s.default.MediaElement&&t instanceof s.default.MediaElement&&t._ensureCanvas();var d=(d=this._tint&&t.canvas?this._getTintedImageCanvas(t):d)||t.canvas||t.elt,h=1;t.width&&0<t.width&&(h=d.width/t.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(d,h*r,h*o,h*n,h*i,a,l,u,c),this._isErasing&&this._pInst.erase()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t}}},{key:"_getTintedImageCanvas",value:function(t){if(!t.canvas)return t;t.tintCanvas||(t.tintCanvas=document.createElement("canvas")),t.tintCanvas.width!==t.canvas.width&&(t.tintCanvas.width=t.canvas.width),t.tintCanvas.height!==t.canvas.height&&(t.tintCanvas.height=t.canvas.height);var r=t.tintCanvas.getContext("2d");return r.save(),r.clearRect(0,0,t.canvas.width,t.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(r.drawImage(t.canvas,0,0),r.globalCompositeOperation="luminosity",r.drawImage(t.canvas,0,0),r.globalCompositeOperation="color",r.drawImage(t.canvas,0,0),r.globalCompositeOperation="multiply",r.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),r.fillRect(0,0,t.canvas.width,t.canvas.height),r.globalCompositeOperation="destination-in"),r.globalAlpha=this._tint[3]/255,r.drawImage(t.canvas,0,0),r.restore(),t.tintCanvas}},{key:"blendMode",value:function(t){if(t===i.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(t!==i.BLEND&&t!==i.REMOVE&&t!==i.DARKEST&&t!==i.LIGHTEST&&t!==i.DIFFERENCE&&t!==i.MULTIPLY&&t!==i.EXCLUSION&&t!==i.SCREEN&&t!==i.REPLACE&&t!==i.OVERLAY&&t!==i.HARD_LIGHT&&t!==i.SOFT_LIGHT&&t!==i.DODGE&&t!==i.BURN&&t!==i.ADD)throw Error("Mode ".concat(t," not recognized."));this._cachedBlendMode=t,this.drawingContext.globalCompositeOperation=t}}},{key:"blend",value:function(){for(var t=this.drawingContext.globalCompositeOperation,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];var i=o[o.length-1],a=Array.prototype.slice.call(o,0,o.length-1);this.drawingContext.globalCompositeOperation=i,s.default.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=t}},{key:"_getPixel",value:function(t,r){return[(t=this.drawingContext.getImageData(t,r,1,1).data)[0],t[1],t[2],t[3]]}},{key:"loadPixels",value:function(){var t=this._pixelsState,r=t._pixelDensity,o=this.width*r,r=this.height*r,o=this.drawingContext.getImageData(0,0,o,r);t._setProperty("imageData",o),t._setProperty("pixels",o.data)}},{key:"set",value:function(t,r,o){t=Math.floor(t),r=Math.floor(r);var n=this._pixelsState;if(o instanceof s.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(n._pixelDensity,n._pixelDensity),this.drawingContext.clearRect(t,r,o.width,o.height),this.drawingContext.drawImage(o.canvas,t,r),this.drawingContext.restore();else{var i=0,a=0,l=0,u=0,c=4*(r*n._pixelDensity*(this.width*n._pixelDensity)+t*n._pixelDensity);if(n.imageData||n.loadPixels.call(n),"number"==typeof o)c<n.pixels.length&&(l=a=i=o,u=255);else if(o instanceof Array){if(o.length<4)throw Error("pixel array must be of the form [R, G, B, A]");c<n.pixels.length&&(i=o[0],a=o[1],l=o[2],u=o[3])}else o instanceof s.default.Color&&c<n.pixels.length&&(i=o.levels[0],a=o.levels[1],l=o.levels[2],u=o.levels[3]);for(var d=0;d<n._pixelDensity;d++)for(var h=0;h<n._pixelDensity;h++)c=4*((r*n._pixelDensity+h)*this.width*n._pixelDensity+(t*n._pixelDensity+d)),n.pixels[c]=i,n.pixels[c+1]=a,n.pixels[c+2]=l,n.pixels[c+3]=u}}},{key:"updatePixels",value:function(t,r,o,n){var s=this._pixelsState,i=s._pixelDensity;void 0===t&&void 0===r&&void 0===o&&void 0===n&&(r=t=0,o=this.width,n=this.height),t*=i,r*=i,o*=i,n*=i,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=s.imageData),this.drawingContext.putImageData(s.imageData,t,r,0,0,o,n)}},{key:"_acuteArcToBezier",value:function(t,r){var o=r/2,n=Math.cos(o),s=Math.sin(o),i=1/Math.tan(o),o=t+o,a=Math.cos(o),o=Math.sin(o),l=(4-n)/3,s=s+(n-l)*i;return{ax:Math.cos(t).toFixed(7),ay:Math.sin(t).toFixed(7),bx:(l*a+s*o).toFixed(7),by:(l*o-s*a).toFixed(7),cx:(l*a-s*o).toFixed(7),cy:(l*o+s*a).toFixed(7),dx:Math.cos(t+r).toFixed(7),dy:Math.sin(t+r).toFixed(7)}}},{key:"arc",value:function(t,r,o,n,s,a,l){var u,c=this.drawingContext,d=o/2,h=n/2,f=[];for(t+=d,r+=h;1e-5<=a-s;)u=Math.min(a-s,i.HALF_PI),f.push(this._acuteArcToBezier(s,u)),s+=u;return this._doFill&&(c.beginPath(),f.forEach(function(o,n){0===n&&c.moveTo(t+o.ax*d,r+o.ay*h),c.bezierCurveTo(t+o.bx*d,r+o.by*h,t+o.cx*d,r+o.cy*h,t+o.dx*d,r+o.dy*h)}),l!==i.PIE&&null!=l||c.lineTo(t,r),c.closePath(),c.fill()),this._doStroke&&(c.beginPath(),f.forEach(function(o,n){0===n&&c.moveTo(t+o.ax*d,r+o.ay*h),c.bezierCurveTo(t+o.bx*d,r+o.by*h,t+o.cx*d,r+o.cy*h,t+o.dx*d,r+o.dy*h)}),l===i.PIE?(c.lineTo(t,r),c.closePath()):l===i.CHORD&&c.closePath(),c.stroke()),this}},{key:"ellipse",value:function(t){var r=this.drawingContext,o=this._doFill,n=this._doStroke,s=parseFloat(t[0]),i=parseFloat(t[1]),a=parseFloat(t[2]),t=parseFloat(t[3]);if(o&&!n){if(this._getFill()===f)return this}else if(!o&&n&&this._getStroke()===f)return this;var l=a/2*.5522847498,u=t/2*.5522847498,c=s+a,d=i+t,a=s+a/2,t=i+t/2;r.beginPath(),r.moveTo(s,t),r.bezierCurveTo(s,t-u,a-l,i,a,i),r.bezierCurveTo(a+l,i,c,t-u,c,t),r.bezierCurveTo(c,t+u,a+l,d,a,d),r.bezierCurveTo(a-l,d,s,t+u,s,t),o&&r.fill(),n&&r.stroke()}},{key:"line",value:function(t,r,o,n){var s=this.drawingContext;return this._doStroke&&this._getStroke()!==f&&(s.beginPath(),s.moveTo(t,r),s.lineTo(o,n),s.stroke()),this}},{key:"point",value:function(t,r){var o,n,s=this.drawingContext;return this._doStroke&&this._getStroke()!==f?(o=this._getStroke(),n=this._getFill(),this._setFill(o),s.beginPath(),s.arc(t,r,s.lineWidth/2,0,i.TWO_PI,!1),s.fill(),void this._setFill(n)):this}},{key:"quad",value:function(t,r,o,n,s,i,a,l){var u=this.drawingContext,c=this._doFill,d=this._doStroke;if(c&&!d){if(this._getFill()===f)return this}else if(!c&&d&&this._getStroke()===f)return this;return u.beginPath(),u.moveTo(t,r),u.lineTo(o,n),u.lineTo(s,i),u.lineTo(a,l),u.closePath(),c&&u.fill(),d&&u.stroke(),this}},{key:"rect",value:function(t){var r,o,n=t[0],s=t[1],i=t[2],a=t[3],l=t[4],u=t[5],c=t[6],t=t[7],d=this.drawingContext,h=this._doFill,p=this._doStroke;if(h&&!p){if(this._getFill()===f)return this}else if(!h&&p&&this._getStroke()===f)return this;return d.beginPath(),void 0===l?d.rect(n,s,i,a):(void 0===u&&(u=l),void 0===c&&(c=u),void 0===t&&(t=c),p=(h=Math.abs(i))/2,o=(r=Math.abs(a))/2,r<2*(l=h<2*l?p:l)&&(l=o),r<2*(u=h<2*u?p:u)&&(u=o),r<2*(c=h<2*c?p:c)&&(c=o),r<2*(t=h<2*t?p:t)&&(t=o),d.beginPath(),d.moveTo(n+l,s),d.arcTo(n+i,s,n+i,s+a,u),d.arcTo(n+i,s+a,n,s+a,c),d.arcTo(n,s+a,n,s,t),d.arcTo(n,s,n+i,s,l),d.closePath()),this._doFill&&d.fill(),this._doStroke&&d.stroke(),this}},{key:"triangle",value:function(t){var r=this.drawingContext,o=this._doFill,n=this._doStroke,s=t[0],i=t[1],a=t[2],l=t[3],u=t[4],t=t[5];if(o&&!n){if(this._getFill()===f)return this}else if(!o&&n&&this._getStroke()===f)return this;r.beginPath(),r.moveTo(s,i),r.lineTo(a,l),r.lineTo(u,t),r.closePath(),o&&r.fill(),n&&r.stroke()}},{key:"endShape",value:function(t,r,o,n,s,a,l){if(0!==r.length&&(this._doStroke||this._doFill)){var u,c,d,h=t===i.CLOSE,f=(h&&!a&&r.push(r[0]),r.length);if(o&&(l===i.POLYGON||null===l)){if(3<f){var p=[],m=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(r[1][0],r[1][1]),c=1;c+2<f;c++)u=r[c],p[0]=[u[0],u[1]],p[1]=[u[0]+(m*r[c+1][0]-m*r[c-1][0])/6,u[1]+(m*r[c+1][1]-m*r[c-1][1])/6],p[2]=[r[c+1][0]+(m*r[c][0]-m*r[c+2][0])/6,r[c+1][1]+(m*r[c][1]-m*r[c+2][1])/6],p[3]=[r[c+1][0],r[c+1][1]],this.drawingContext.bezierCurveTo(p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]);h&&this.drawingContext.lineTo(r[c+1][0],r[c+1][1]),this._doFillStrokeClose(h)}}else if(n&&(l===i.POLYGON||null===l)){for(this.drawingContext.beginPath(),c=0;c<f;c++)r[c].isVert?r[c].moveTo?this.drawingContext.moveTo(r[c][0],r[c][1]):this.drawingContext.lineTo(r[c][0],r[c][1]):this.drawingContext.bezierCurveTo(r[c][0],r[c][1],r[c][2],r[c][3],r[c][4],r[c][5]);this._doFillStrokeClose(h)}else if(s&&(l===i.POLYGON||null===l)){for(this.drawingContext.beginPath(),c=0;c<f;c++)r[c].isVert?r[c].moveTo?this.drawingContext.moveTo(r[c][0],r[c][1]):this.drawingContext.lineTo(r[c][0],r[c][1]):this.drawingContext.quadraticCurveTo(r[c][0],r[c][1],r[c][2],r[c][3]);this._doFillStrokeClose(h)}else if(l===i.POINTS)for(c=0;c<f;c++)u=r[c],this._doStroke&&this._pInst.stroke(u[6]),this._pInst.point(u[0],u[1]);else if(l===i.LINES)for(c=0;c+1<f;c+=2)u=r[c],this._doStroke&&this._pInst.stroke(r[c+1][6]),this._pInst.line(u[0],u[1],r[c+1][0],r[c+1][1]);else if(l===i.TRIANGLES)for(c=0;c+2<f;c+=3)u=r[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(r[c+1][0],r[c+1][1]),this.drawingContext.lineTo(r[c+2][0],r[c+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(r[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(r[c+2][6]),this.drawingContext.stroke());else if(l===i.TRIANGLE_STRIP)for(c=0;c+1<f;c++)u=r[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(r[c+1][0],r[c+1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doStroke&&this._pInst.stroke(r[c+1][6]),this._doFill&&this._pInst.fill(r[c+1][5]),c+2<f&&(this.drawingContext.lineTo(r[c+2][0],r[c+2][1]),this._doStroke&&this._pInst.stroke(r[c+2][6]),this._doFill&&this._pInst.fill(r[c+2][5])),this._doFillStrokeClose(h);else if(l===i.TRIANGLE_FAN){if(2<f){for(this.drawingContext.beginPath(),c=2;c<f;c++)u=r[c],this.drawingContext.moveTo(r[0][0],r[0][1]),this.drawingContext.lineTo(r[c-1][0],r[c-1][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(r[0][0],r[0][1]),c<f-1&&(this._doFill&&u[5]!==r[c+1][5]||this._doStroke&&u[6]!==r[c+1][6])&&(this._doFill&&(this._pInst.fill(u[5]),this.drawingContext.fill(),this._pInst.fill(r[c+1][5])),this._doStroke&&(this._pInst.stroke(u[6]),this.drawingContext.stroke(),this._pInst.stroke(r[c+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(h)}}else if(l===i.QUADS)for(c=0;c+3<f;c+=4){for(u=r[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),d=1;d<4;d++)this.drawingContext.lineTo(r[c+d][0],r[c+d][1]);this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(r[c+3][5]),this._doStroke&&this._pInst.stroke(r[c+3][6]),this._doFillStrokeClose(h)}else if(l===i.QUAD_STRIP){if(3<f)for(c=0;c+1<f;c+=2)u=r[c],this.drawingContext.beginPath(),c+3<f?(this.drawingContext.moveTo(r[c+2][0],r[c+2][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(r[c+1][0],r[c+1][1]),this.drawingContext.lineTo(r[c+3][0],r[c+3][1]),this._doFill&&this._pInst.fill(r[c+3][5]),this._doStroke&&this._pInst.stroke(r[c+3][6])):(this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(r[c+1][0],r[c+1][1])),this._doFillStrokeClose(h)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(r[0][0],r[0][1]),c=1;c<f;c++)(u=r[c]).isVert&&(u.moveTo?this.drawingContext.moveTo(u[0],u[1]):this.drawingContext.lineTo(u[0],u[1]));this._doFillStrokeClose(h)}a=s=n=o=!1,h&&r.pop()}return this}},{key:"strokeCap",value:function(t){return t!==i.ROUND&&t!==i.SQUARE&&t!==i.PROJECT||(this.drawingContext.lineCap=t),this}},{key:"strokeJoin",value:function(t){return t!==i.ROUND&&t!==i.BEVEL&&t!==i.MITER||(this.drawingContext.lineJoin=t),this}},{key:"strokeWeight",value:function(t){return this.drawingContext.lineWidth=void 0===t||0===t?1e-4:t,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(t){t!==this._cachedFillStyle&&(this.drawingContext.fillStyle=t,this._cachedFillStyle=t)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(t){t!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=t,this._cachedStrokeStyle=t)}},{key:"bezier",value:function(t,r,o,n,s,i,a,l){return this._pInst.beginShape(),this._pInst.vertex(t,r),this._pInst.bezierVertex(o,n,s,i,a,l),this._pInst.endShape(),this}},{key:"curve",value:function(t,r,o,n,s,i,a,l){return this._pInst.beginShape(),this._pInst.curveVertex(t,r),this._pInst.curveVertex(o,n),this._pInst.curveVertex(s,i),this._pInst.curveVertex(a,l),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(t){t&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(t,r,o,n,s,i){this.drawingContext.transform(t,r,o,n,s,i)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(t){this.drawingContext.rotate(t)}},{key:"scale",value:function(t,r){return this.drawingContext.scale(t,r),this}},{key:"translate",value:function(t,r){return t instanceof s.default.Vector&&(r=t.y,t=t.x),this.drawingContext.translate(t,r),this}},{key:"_renderText",value:function(t,r,o,n,s,a){if(!(n<a||s<=n))return t.push(),this._isOpenType()?this._textFont._renderPath(r,o,n,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(r,o,n),this._doFill&&(this._fillSet||this._setFill(i._DEFAULT_TEXT_FILL),this.drawingContext.fillText(r,o,n))),t.pop(),t}},{key:"textWidth",value:function(t){return this._isOpenType()?this._textFont._textWidth(t,this._textSize):this.drawingContext.measureText(t).width}},{key:"_applyTextProperties",value:function(){var t,r=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(t||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===i.CENTER?this.drawingContext.textBaseline=i._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,r}},{key:"push",value:function(){return this.drawingContext.save(),c(h(a.prototype),"push",this).call(this)}},{key:"pop",value:function(t){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,c(h(a.prototype),"pop",this).call(this,t)}}],u(r.prototype,t),o&&u(r,o),a}(s.default.Renderer),t=(p.prototype.text=function(t,r,o,n,a){void 0!==n&&this.drawingContext.textBaseline===i.BASELINE&&(l=!0,this.drawingContext.textBaseline=i.TOP);var l,n=s.default.Renderer.prototype.text.apply(this,arguments);return l&&(this.drawingContext.textBaseline=i.BASELINE),n},s.default.Renderer2D=p,s.default.Renderer2D);o.default=t},{"./constants":262,"./main":273,"./p5.Renderer":276,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],278:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var n=(t=t("./main"))&&t.__esModule?t:{default:t};function s(){return{}}n.default.prototype._promisePreloads=[];var i=(n.default.prototype.registerPromisePreload=function(t){n.default.prototype._promisePreloads.push(t)},!1);n.default.prototype._setupPromisePreloads=function(){var t=!0,r=!1,o=void 0;try{for(var s,a=this._promisePreloads[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value,u=this,c=l.method,d=l.addCallbacks,h=l.legacyPreloadSetup,f=l.target||this,p=f[c].bind(f);if(f===n.default.prototype){if(i)continue;u=null,p=f[c]}f[c]=this._wrapPromisePreload(u,p,d),h&&(f[h.method]=this._legacyPreloadGenerator(u,h,f[c]))}}catch(t){r=!0,o=t}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}i=!0},n.default.prototype._wrapPromisePreload=function(t,r,o){var n=function(){for(var t=this,n=(this._incrementPreload(),null),s=null,i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];if(o)for(var u=a.length-1;0<=u&&!s&&"function"==typeof a[u];u--)s=n,n=a.pop();var c=Promise.resolve(r.apply(this,a));return n&&c.then(n),s&&c.catch(s),c.then(function(){return t._decrementPreload()}),c};return t?n.bind(t):n},n.default.prototype._legacyPreloadGenerator=function(t,r,o){var n=r.createBaseObject||s,r=function(){var t=this;this._incrementPreload();for(var r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];var a=n.apply(this,s);return o.apply(this,s).then(function(r){Object.assign(a,r),t._decrementPreload()}),a};return r=t?r.bind(t):r}},{"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],279:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(c=t("./main"))&&c.__esModule?c:{default:c},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("./constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var u="defaultCanvas0",c=(s.default.prototype.createCanvas=function(t,r,o,n){var a,l,c;if(s.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(o=i.P2D,n=arguments[2]):a=o||i.P2D,n)(c=document.getElementById(u))&&c.parentNode.removeChild(c),c=n,this._defaultGraphicsCreated=!1;else{if(a===i.WEBGL)(c=document.getElementById(u))&&(c.parentNode.removeChild(c),l=this._renderer,this._elements=this._elements.filter(function(t){return t!==l})),(c=document.createElement("canvas")).id=u,c.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)c=this.canvas;else{c=n||document.createElement("canvas");for(var d=0;document.getElementById("defaultCanvas".concat(d));)d++;u="defaultCanvas".concat(d),c.id=u,c.classList.add("p5Canvas")}this._setupDone||(c.dataset.hidden=!0,c.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(o=document.createElement("main"),document.body.appendChild(o)),document.getElementsByTagName("main")[0])).appendChild(c)}return a===i.WEBGL?(this._setProperty("_renderer",new s.default.RendererGL(c,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new s.default.Renderer2D(c,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(t,r),this._renderer._applyDefaults(),this._renderer},s.default.prototype.resizeCanvas=function(t,r,o){if(s.default._validateParameters("resizeCanvas",arguments),this._renderer){var n,i,a={};for(n in this.drawingContext){var u=this.drawingContext[n];"object"!==l(u)&&"function"!=typeof u&&(a[n]=u)}for(i in this.width=t,this.height=r,this._renderer.resize(t,r),a)try{this.drawingContext[i]=a[i]}catch(t){}o||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},s.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},s.default.prototype.createGraphics=function(t,r,o,n){return arguments[2]instanceof HTMLCanvasElement&&(o=i.P2D,n=arguments[2]),s.default._validateParameters("createGraphics",arguments),new s.default.Graphics(t,r,o,this,n)},s.default.prototype.createFramebuffer=function(t){return new s.default.Framebuffer(this,t)},s.default.prototype.blendMode=function(t){s.default._validateParameters("blendMode",arguments),t===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),t=i.BLEND),this._renderer.blendMode(t)},s.default);o.default=c},{"../webgl/p5.RendererGL":328,"./constants":262,"./main":273,"./p5.Graphics":275,"./p5.Renderer2D":277,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],280:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=c(t("../main")),a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=u();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../constants")),l=c(t("../helpers"));function u(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,u=function(){return t},t)}function c(t){return t&&t.__esModule?t:{default:t}}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),i.default.prototype._normalizeArcAngles=function(t,r,o,n,s){var i;return t-=a.TWO_PI*Math.floor(t/a.TWO_PI),r-=a.TWO_PI*Math.floor(r/a.TWO_PI),i=Math.min(Math.abs(t-r),a.TWO_PI-Math.abs(t-r)),s&&(t=t<=a.HALF_PI?Math.atan(o/n*Math.tan(t)):t>a.HALF_PI&&t<=3*a.HALF_PI?Math.atan(o/n*Math.tan(t))+a.PI:Math.atan(o/n*Math.tan(t))+a.TWO_PI,r=r<=a.HALF_PI?Math.atan(o/n*Math.tan(r)):r>a.HALF_PI&&r<=3*a.HALF_PI?Math.atan(o/n*Math.tan(r))+a.PI:Math.atan(o/n*Math.tan(r))+a.TWO_PI),r<t&&(r+=a.TWO_PI),{start:t,stop:r,correspondToSamePoint:i<1e-5}},i.default.prototype.arc=function(t,r,o,n,s,a,u,c){return i.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&s!==a&&(s=this._toRadians(s),a=this._toRadians(a),o=Math.abs(o),n=Math.abs(n),t=l.default.modeAdjust(t,r,o,n,this._renderer._ellipseMode),(r=this._normalizeArcAngles(s,a,t.w,t.h,!0)).correspondToSamePoint?this._renderer.ellipse([t.x,t.y,t.w,t.h,c]):(this._renderer.arc(t.x,t.y,t.w,t.h,r.start,r.stop,u,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[t.x,t.y,t.w,t.h,r.start,r.stop,u]))),this},i.default.prototype.ellipse=function(t,r,o,n,s){return i.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},i.default.prototype.circle=function(){i.default._validateParameters("circle",arguments);var t=Array.prototype.slice.call(arguments,0,2);return t.push(arguments[2]),t.push(arguments[2]),this._renderEllipse.apply(this,function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}())},i.default.prototype._renderEllipse=function(t,r,o,n,s){return(this._renderer._doStroke||this._renderer._doFill)&&(o<0&&(o=Math.abs(o)),void 0===n?n=o:n<0&&(n=Math.abs(n)),t=l.default.modeAdjust(t,r,o,n,this._renderer._ellipseMode),this._renderer.ellipse([t.x,t.y,t.w,t.h,s]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[t.x,t.y,t.w,t.h])),this},i.default.prototype.line=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return i.default._validateParameters("line",o),this._renderer._doStroke&&(t=this._renderer).line.apply(t,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",o),this},i.default.prototype.point=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return i.default._validateParameters("point",o),this._renderer._doStroke&&(1===o.length&&o[0]instanceof i.default.Vector?this._renderer.point.call(this._renderer,o[0].x,o[0].y,o[0].z):((t=this._renderer).point.apply(t,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",o))),this},i.default.prototype.quad=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return i.default._validateParameters("quad",o),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&o.length<12?this._renderer.quad.call(this._renderer,o[0],o[1],0,o[2],o[3],0,o[4],o[5],0,o[6],o[7],0,o[8],o[9]):((t=this._renderer).quad.apply(t,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",o))),this},i.default.prototype.rect=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return i.default._validateParameters("rect",r),this._renderRect.apply(this,r)},i.default.prototype.square=function(t,r,o,n,s,a,l){return i.default._validateParameters("square",arguments),this._renderRect.call(this,t,r,o,o,n,s,a,l)},i.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3==arguments.length&&(arguments[3]=arguments[2]);for(var t=l.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),r=[t.x,t.y,t.w,t.h],o=4;o<arguments.length;o++)r[o]=arguments[o];this._renderer.rect(r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[t.x,t.y,t.w,t.h])}return this},i.default.prototype.triangle=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return i.default._validateParameters("triangle",r),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",r),this},t=i.default,o.default=t},{"../constants":262,"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../helpers":269,"../main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],281:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(u=t("../main"))&&u.__esModule?u:{default:u},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}i.default.prototype.ellipseMode=function(t){return i.default._validateParameters("ellipseMode",arguments),t!==a.CORNER&&t!==a.CORNERS&&t!==a.RADIUS&&t!==a.CENTER||(this._renderer._ellipseMode=t),this},i.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(t){return i.default._validateParameters("rectMode",arguments),t!==a.CORNER&&t!==a.CORNERS&&t!==a.RADIUS&&t!==a.CENTER||(this._renderer._rectMode=t),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(t){return i.default._validateParameters("strokeCap",arguments),t!==a.ROUND&&t!==a.SQUARE&&t!==a.PROJECT||this._renderer.strokeCap(t),this},i.default.prototype.strokeJoin=function(t){return i.default._validateParameters("strokeJoin",arguments),t!==a.ROUND&&t!==a.BEVEL&&t!==a.MITER||this._renderer.strokeJoin(t),this},i.default.prototype.strokeWeight=function(t){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(t),this};var u=i.default;o.default=u},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],282:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(s=t("../main"))&&s.__esModule?s:{default:s};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),n.default.prototype.bezier=function(){for(var t,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n.default._validateParameters("bezier",o),(this._renderer._doStroke||this._renderer._doFill)&&(t=this._renderer).bezier.apply(t,o),this},n.default.prototype.bezierDetail=function(t){return n.default._validateParameters("bezierDetail",arguments),this._bezierDetail=t,this},n.default.prototype.bezierPoint=function(t,r,o,s,i){n.default._validateParameters("bezierPoint",arguments);var a=1-i;return Math.pow(a,3)*t+3*Math.pow(a,2)*i*r+3*a*Math.pow(i,2)*o+Math.pow(i,3)*s},n.default.prototype.bezierTangent=function(t,r,o,s,i){n.default._validateParameters("bezierTangent",arguments);var a=1-i;return 3*s*Math.pow(i,2)-3*o*Math.pow(i,2)+6*o*a*i-6*r*a*i+3*r*Math.pow(a,2)-3*t*Math.pow(a,2)},n.default.prototype.curve=function(){for(var t,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n.default._validateParameters("curve",o),this._renderer._doStroke&&(t=this._renderer).curve.apply(t,o),this},n.default.prototype.curveDetail=function(t){return n.default._validateParameters("curveDetail",arguments),this._curveDetail=t<3?3:t,this},n.default.prototype.curveTightness=function(t){return n.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=t,this},n.default.prototype.curvePoint=function(t,r,o,s,i){n.default._validateParameters("curvePoint",arguments);var a=this._renderer._curveTightness,l=i*i*i,u=i*i;return t*((a-1)/2*l+(1-a)*u+(a-1)/2*i)+r*((a+3)/2*l+(-5-a)/2*u+1)+o*((-3-a)/2*l+(a+2)*u+(1-a)/2*i)+s*((1-a)/2*l+(a-1)/2*u)},n.default.prototype.curveTangent=function(t,r,o,s,i){n.default._validateParameters("curveTangent",arguments);var a=this._renderer._curveTightness,l=i*i*3,i=2*i;return t*((a-1)/2*l+(1-a)*i+(a-1)/2)+r*((a+3)/2*l+(-5-a)/2*i)+o*((-3-a)/2*l+(a+2)*i+(1-a)/2)+s*((1-a)/2*l+(a-1)/2*i)};var s=n.default;o.default=s},{"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../main":273}],283:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(g=t("../main"))&&g.__esModule?g:{default:g},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}var u=null,c=[],d=[],h=!1,f=!1,p=!1,m=!1,y=!0,g=(i.default.prototype.beginContour=function(){return d=[],m=!0,this},i.default.prototype.beginShape=function(t){var r;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(r=this._renderer).beginShape.apply(r,arguments):(u=t===a.POINTS||t===a.LINES||t===a.TRIANGLES||t===a.TRIANGLE_FAN||t===a.TRIANGLE_STRIP||t===a.QUADS||t===a.QUAD_STRIP?t:null,c=[],d=[]),this},i.default.prototype.bezierVertex=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];if(i.default._validateParameters("bezierVertex",o),this._renderer.isP3D)(t=this._renderer).bezierVertex.apply(t,o);else if(0===c.length)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var s=[],a=0;a<o.length;a++)s[a]=o[a];s.isVert=!1,(m?d:c).push(s)}return this},i.default.prototype.curveVertex=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return i.default._validateParameters("curveVertex",o),this._renderer.isP3D?(t=this._renderer).curveVertex.apply(t,o):(f=!0,this.vertex(o[0],o[1])),this},i.default.prototype.endContour=function(){var t=d[0].slice();t.isVert=d[0].isVert,t.moveTo=!1,d.push(t),y&&(c.push(c[0]),y=!1);for(var r=0;r<d.length;r++)c.push(d[r]);return this},i.default.prototype.endShape=function(t){if(i.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(t,f,h,p,m,u);else{if(0===c.length||!this._renderer._doStroke&&!this._renderer._doFill)return this;var r=t===a.CLOSE;r&&!m&&c.push(c[0]),this._renderer.endShape(t,c,f,h,p,m,u),m=p=h=f=!1,y=!0,r&&c.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];if(i.default._validateParameters("quadraticVertex",o),this._renderer.isP3D)(t=this._renderer).quadraticVertex.apply(t,o);else{if(this._contourInited)return(t={}).x=o[0],t.y=o[1],t.x3=o[2],t.y3=o[3],t.type=a.QUADRATIC,this._contourVertices.push(t),this;if(0<c.length){p=!0;for(var s=[],l=0;l<o.length;l++)s[l]=o[l];s.isVert=!1,(m?d:c).push(s)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(t,r,o,n,s){var i;return this._renderer.isP3D?(i=this._renderer).vertex.apply(i,arguments):((i=[]).isVert=!0,i[0]=t,i[1]=r,i[2]=0,i[3]=0,i[4]=0,i[5]=this._renderer._getFill(),i[6]=this._renderer._getStroke(),o&&(i.moveTo=o),(m?(0===d.length&&(i.moveTo=!0),d):c).push(i)),this},i.default.prototype.normal=function(t,r,o){var n;return this._assert3d("normal"),i.default._validateParameters("normal",arguments),(n=this._renderer).normal.apply(n,arguments),this},i.default);o.default=g},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],284:[function(t,r,o){var n,s,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,r){window.setTimeout(t,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(n=Object.keys,t=Object.defineProperty,s="function"==typeof Symbol&&"symbol"===l(Symbol()),i=Object.prototype.propertyIsEnumerable,t(Object,"assign",{value:function(t,r){if(null==t)throw TypeError("target must be an object");for(var o,a=Object(t),l=1;l<arguments.length;++l){var u,c=Object(arguments[l]),d=n(c);for(s&&Object.getOwnPropertySymbols&&d.push.apply(d,function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(u=Object.getOwnPropertySymbols(c).filter(function(t){return function(r){return i.call(t,r)}}(c)))||function(t){if((Symbol.iterator in Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(u)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()),o=0;o<d.length;++o)a[d[o]]=c[d[o]]}return a},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/web.dom-collections.iterator":236}],285:[function(t,r,o){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.object.assign"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.object.assign"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("./main"))&&t.__esModule?t:{default:t}).default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var t=this._styles.pop();t?(this._renderer.pop(t.renderer),Object.assign(this,t.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(t){if(!this._inUserDraw&&this._setupDone){var r=parseInt(t),o=((isNaN(r)||r<1)&&(r=1),this._isGlobal?window:this);if("function"==typeof o.draw){void 0===o.setup&&o.scale(o._pixelDensity,o._pixelDensity);for(var n=function(t){t.call(o)},s=0;s<r;s++){o.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),o._renderer.isP3D&&o._renderer._update(),o._setProperty("frameCount",o.frameCount+1),o._registeredMethods.pre.forEach(n),this._inUserDraw=!0;try{o.draw()}finally{this._inUserDraw=!1}o._registeredMethods.post.forEach(n)}}}},t=t.default,o.default=t},{"./main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.object.assign":174,"core-js/modules/web.dom-collections.for-each":235}],286:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("./main"))&&t.__esModule?t:{default:t};n.default.prototype.applyMatrix=function(){var t,r=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||r?(r=this._renderer).applyMatrix.apply(r,(t=arguments.length<=0?void 0:arguments[0],function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}())):(r=this._renderer).applyMatrix.apply(r,arguments),this},n.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.default.prototype.rotate=function(t,r){return n.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(t),r),this},n.default.prototype.rotateX=function(t){return this._assert3d("rotateX"),n.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(t)),this},n.default.prototype.rotateY=function(t){return this._assert3d("rotateY"),n.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(t)),this},n.default.prototype.rotateZ=function(t){return this._assert3d("rotateZ"),n.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(t)),this},n.default.prototype.scale=function(t,r,o){var s;return n.default._validateParameters("scale",arguments),t instanceof n.default.Vector?(t=(s=t).x,r=s.y,o=s.z):t instanceof Array&&(t=(s=t)[0],r=s[1],o=s[2]||1),isNaN(r)?r=o=t:isNaN(o)&&(o=1),this._renderer.scale.call(this._renderer,t,r,o),this},n.default.prototype.shearX=function(t){return n.default._validateParameters("shearX",arguments),t=this._toRadians(t),this._renderer.applyMatrix(1,0,Math.tan(t),1,0,0),this},n.default.prototype.shearY=function(t){return n.default._validateParameters("shearY",arguments),t=this._toRadians(t),this._renderer.applyMatrix(1,Math.tan(t),0,1,0,0),this},n.default.prototype.translate=function(t,r,o){return n.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(t,r,o):this._renderer.translate(t,r),this},t=n.default,o.default=t},{"./main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236}],287:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(t){return function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t){return(a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}s.default.prototype.storeItem=function(t,r){"string"!=typeof t&&console.log("The argument that you passed to storeItem() - ".concat(t," is not a string.")),t.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(t," must not end with 'p5TypeID'.")),void 0===r&&console.log("You cannot store undefined variables using storeItem().");var o=a(r);switch(o){case"number":case"boolean":r=r.toString();break;case"object":r instanceof s.default.Color?o="p5.Color":r instanceof s.default.Vector&&(o="p5.Vector",r=[r.x,r.y,r.z]),r=JSON.stringify(r)}localStorage.setItem(t,r),t="".concat(t,"p5TypeID"),localStorage.setItem(t,o)},s.default.prototype.getItem=function(t){var r=localStorage.getItem(t),o=localStorage.getItem("".concat(t,"p5TypeID"));if(void 0===o)console.log("Unable to determine type of item stored under ".concat(t,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==r)switch(o){case"number":r=parseFloat(r);break;case"boolean":r="true"===r;break;case"object":r=JSON.parse(r);break;case"p5.Color":r=JSON.parse(r),r=this.color.apply(this,i(r.levels));break;case"p5.Vector":r=JSON.parse(r),r=this.createVector.apply(this,i(r))}return r},s.default.prototype.clearStorage=function(){localStorage.clear()},s.default.prototype.removeItem=function(t){"string"!=typeof t&&console.log("The argument that you passed to removeItem() - ".concat(t," is not a string.")),localStorage.removeItem(t),localStorage.removeItem("".concat(t,"p5TypeID"))}},{"../core/main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],288:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(t){return(i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function a(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&l(t,r)}function l(t,r){return(l=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function u(t){return function(){var r,o=c(t),o=(r=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?o.apply(this,arguments):(r=c(this).constructor,Reflect.construct(o,arguments,r)),this);if(!r||"object"!==i(r)&&"function"!=typeof r){if(void 0!==o)return o;throw ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}function h(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,r,o){r&&h(t.prototype,r),o&&h(t,o)}s.default.prototype.createStringDict=function(t,r){return s.default._validateParameters("createStringDict",arguments),new s.default.StringDict(t,r)},s.default.prototype.createNumberDict=function(t,r){return s.default._validateParameters("createNumberDict",arguments),new s.default.NumberDict(t,r)},s.default.TypedDict=function(){function t(r,o){return d(this,t),r instanceof Object?this.data=r:(this.data={},this.data[r]=o),this}return f(t,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(t){return this.data.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.data.hasOwnProperty(t))return this.data[t];console.log("".concat(t," does not exist in this Dictionary"))}},{key:"set",value:function(t,r){this._validate(r)?this.data[t]=r:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(t){for(var r in t)this.set(r,t[r])}},{key:"create",value:function(t,r){t instanceof Object&&void 0===r?this._addObj(t):void 0!==t?this.set(t,r):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(t){if(!this.data.hasOwnProperty(t))throw Error("".concat(t," does not exist in this Dictionary"));delete this.data[t]}},{key:"print",value:function(){for(var t in this.data)console.log("key:".concat(t," value:").concat(this.data[t]))}},{key:"saveTable",value:function(t){var r,o="";for(r in this.data)o+="".concat(r,",").concat(this.data[r],"\n");var n=new Blob([o],{type:"text/csv"});s.default.prototype.downloadFile(n,t||"mycsv","csv")}},{key:"saveJSON",value:function(t,r){s.default.prototype.saveJSON(this.data,t,r)}},{key:"_validate",value:function(t){return!0}}]),t}(),s.default.StringDict=function(){a(r,s.default.TypedDict);var t=u(r);function r(){d(this,r);for(var o=arguments.length,n=Array(o),s=0;s<o;s++)n[s]=arguments[s];return t.call.apply(t,[this].concat(n))}return f(r,[{key:"_validate",value:function(t){return"string"==typeof t}}]),r}(),s.default.NumberDict=function(){a(r,s.default.TypedDict);var t=u(r);function r(){d(this,r);for(var o=arguments.length,n=Array(o),s=0;s<o;s++)n[s]=arguments[s];return t.call.apply(t,[this].concat(n))}return f(r,[{key:"_validate",value:function(t){return"number"==typeof t}},{key:"add",value:function(t,r){this.data.hasOwnProperty(t)?this.data[t]+=r:console.log("The key - ".concat(t," does not exist in this dictionary."))}},{key:"sub",value:function(t,r){this.add(t,-r)}},{key:"mult",value:function(t,r){this.data.hasOwnProperty(t)?this.data[t]*=r:console.log("The key - ".concat(t," does not exist in this dictionary."))}},{key:"div",value:function(t,r){this.data.hasOwnProperty(t)?this.data[t]/=r:console.log("The key - ".concat(t," does not exist in this dictionary."))}},{key:"_valueTest",value:function(t){if(0===Object.keys(this.data).length)throw Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var r,o=this.data[Object.keys(this.data)[0]];for(r in this.data)this.data[r]*t<o*t&&(o=this.data[r]);return o}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(t){if(0===Object.keys(this.data).length)throw Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var r=Object.keys(this.data)[0],o=1;o<Object.keys(this.data).length;o++)Object.keys(this.data)[o]*t<r*t&&(r=Object.keys(this.data)[o]);return r}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),r}(),t=s.default.TypedDict,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],289:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,r,o){r&&i(t.prototype,r),o&&i(t,o)}function l(t,r){return(l=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function u(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}function h(t){return(h="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function f(t,r,o){return(r._userNode||document.body).appendChild(t),o=new(o?s.default.MediaElement:s.default.Element)(t,r),r._elements.push(o),o}function p(t,r,o,n){var s=document.createElement(r),i=("string"==typeof(o=o||"")&&(o=[o]),!0),r=!1,a=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=document.createElement("source");d.setAttribute("src",c),s.appendChild(d)}}catch(t){r=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw a}}"function"==typeof n&&s.addEventListener("canplaythrough",function t(){n(),s.removeEventListener("canplaythrough",t)});var h=f(s,t,!0);return h.loadedmetadata=!1,s.addEventListener("loadedmetadata",function(){h.width=s.videoWidth,h.height=s.videoHeight,0===h.elt.width&&(h.elt.width=s.videoWidth),0===h.elt.height&&(h.elt.height=s.videoHeight),h.presetPlaybackRate&&(h.elt.playbackRate=h.presetPlaybackRate,delete h.presetPlaybackRate),h.loadedmetadata=!0}),h}function m(t,r,o,n){d(this,m),this.callback=t,this.time=r,this.id=o,this.val=n}s.default.prototype.select=function(t,r){return s.default._validateParameters("select",arguments),(r=this._getContainer(r).querySelector(t))?this._wrapElement(r):null},s.default.prototype.selectAll=function(t,r){s.default._validateParameters("selectAll",arguments);var o=[],n=this._getContainer(r).querySelectorAll(t);if(n)for(var i=0;i<n.length;i++){var a=this._wrapElement(n[i]);o.push(a)}return o},s.default.prototype._getContainer=function(t){var r=document;return"string"==typeof t?r=document.querySelector(t)||document:t instanceof s.default.Element?r=t.elt:t instanceof HTMLElement&&(r=t),r},s.default.prototype._wrapElement=function(t){var r,o=Array.prototype.slice.call(t.children);return"INPUT"===t.tagName&&"checkbox"===t.type?((r=new s.default.Element(t,this)).checked=function(){return 0==arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},r):"VIDEO"===t.tagName||"AUDIO"===t.tagName?new s.default.MediaElement(t,this):"SELECT"===t.tagName?this.createSelect(new s.default.Element(t,this)):0<o.length&&o.every(function(t){return"INPUT"===t.tagName||"LABEL"===t.tagName})?this.createRadio(new s.default.Element(t,this)):new s.default.Element(t,this)},s.default.prototype.removeElements=function(t){s.default._validateParameters("removeElements",arguments),this._elements.filter(function(t){return!(t.elt instanceof HTMLCanvasElement)}).map(function(t){return t.remove()})},s.default.Element.prototype.changed=function(t){return s.default.Element._adjustListener("change",t,this),this},s.default.Element.prototype.input=function(t){return s.default.Element._adjustListener("input",t,this),this},s.default.prototype.createDiv=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=document.createElement("div");return r.innerHTML=t,f(r,this)},s.default.prototype.createP=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=document.createElement("p");return r.innerHTML=t,f(r,this)},s.default.prototype.createSpan=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=document.createElement("span");return r.innerHTML=t,f(r,this)},s.default.prototype.createImg=function(){s.default._validateParameters("createImg",arguments);var t,r=document.createElement("img"),o=arguments;return 1<o.length&&"string"==typeof o[1]&&(r.alt=o[1]),2<o.length&&"string"==typeof o[2]&&(r.crossOrigin=o[2]),r.src=o[0],t=f(r,this),r.addEventListener("load",function(){t.width=r.offsetWidth||r.width,t.height=r.offsetHeight||r.height;var n=o[o.length-1];"function"==typeof n&&n(t)}),t},s.default.prototype.createA=function(t,r,o){s.default._validateParameters("createA",arguments);var n=document.createElement("a");return n.href=t,n.innerHTML=r,o&&(n.target=o),f(n,this)},s.default.prototype.createSlider=function(t,r,o,n){s.default._validateParameters("createSlider",arguments);var i=document.createElement("input");return i.type="range",i.min=t,i.max=r,0===n?i.step=1e-18:n&&(i.step=n),"number"==typeof o&&(i.value=o),f(i,this)},s.default.prototype.createButton=function(t,r){s.default._validateParameters("createButton",arguments);var o=document.createElement("button");return o.innerHTML=t,r&&(o.value=r),f(o,this)},s.default.prototype.createCheckbox=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];s.default._validateParameters("createCheckbox",r);var n=document.createElement("div"),i=document.createElement("input"),a=(i.type="checkbox",document.createElement("label")),l=(a.appendChild(i),n.appendChild(a),f(n,this));return l.checked=function(){var t=l.elt.firstElementChild.getElementsByTagName("input")[0];if(t){if(0==arguments.length)return t.checked;t.checked=!(arguments.length<=0||!arguments[0])}return l},this.value=function(t){return l.value=t,this},r[0]&&(l.value(r[0]),(n=document.createElement("span")).innerHTML=r[0],a.appendChild(n)),r[1]&&(i.checked=!0),l},s.default.prototype.createSelect=function(){for(var t,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];s.default._validateParameters("createSelect",o);var i,a=o[0];return a instanceof s.default.Element&&a.elt instanceof HTMLSelectElement?this.elt=(t=a).elt:a instanceof HTMLSelectElement?(t=f(a,this),this.elt=a):(i=document.createElement("select"),a&&"boolean"==typeof a&&i.setAttribute("multiple","true"),t=f(i,this),this.elt=i),t.option=function(t,r){var o;if(void 0!==t){for(var n,s=0;s<this.elt.length;s+=1)if(this.elt[s].textContent===t){o=s;break}void 0!==o?!1===r?this.elt.remove(o):this.elt[o].value=r:((n=document.createElement("option")).textContent=t,n.value=void 0===r?t:r,this.elt.appendChild(n),this._pInst._elements.push(n))}},t.selected=function(t){if(void 0!==t){for(var r=0;r<this.elt.length;r+=1)this.elt[r].value.toString()===t.toString()&&(this.elt.selectedIndex=r);return this}if(this.elt.getAttribute("multiple")){var o=[],n=!0,s=!1,i=void 0;try{for(var a,l=this.elt.selectedOptions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;o.push(u.value)}}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}return o}return this.elt.value},t.disable=function(t){if("string"==typeof t)for(var r=0;r<this.elt.length;r++)this.elt[r].value.toString()===t&&(this.elt[r].disabled=!0,this.elt[r].selected=!1);else this.elt.disabled=!0;return this},t.enable=function(t){if("string"==typeof t)for(var r=0;r<this.elt.length;r++)this.elt[r].value.toString()===t&&(this.elt[r].disabled=!1,this.elt[r].selected=!1);else{this.elt.disabled=!1;for(var o=0;o<this.elt.length;o++)this.elt[o].disabled=!1,this.elt[o].selected=!1}return this},t},s.default.prototype.createRadio=function(){function t(t){return t instanceof HTMLInputElement&&"radio"===t.type}function r(t){return t instanceof HTMLLabelElement}var o,n,i,a=arguments.length<=0?void 0:arguments[0];return a instanceof s.default.Element&&(a.elt instanceof HTMLDivElement||a.elt instanceof HTMLSpanElement)?(o=a,this.elt=a.elt):a instanceof HTMLDivElement||a instanceof HTMLSpanElement?(o=f(a,this),n=this.elt=a,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(i=arguments.length<=1?void 0:arguments[1])):("string"==typeof a&&(i=a),o=f(n=document.createElement("div"),this),this.elt=n),o._name=i||"radioOption",o._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(o){return t(o)||r(o)&&t(o.firstElementChild)}).map(function(r){return t(r)?r:r.firstElementChild})},o.option=function(t,n){var s,i,a,l=!0,u=!1,c=void 0;try{for(var d,h=o._getOptionsArray()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(f.value===t){s=f;break}}}catch(t){u=!0,c=t}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return void 0===s&&((s=document.createElement("input")).setAttribute("type","radio"),s.setAttribute("value",t)),s.setAttribute("name",o._name),r(s.parentElement)?i=s.parentElement:(i=document.createElement("label")).insertAdjacentElement("afterbegin",s),i.lastElementChild instanceof HTMLSpanElement?a=i.lastElementChild:(a=document.createElement("span"),s.insertAdjacentElement("afterend",a)),a.innerHTML=void 0===n?t:n,this.elt.appendChild(i),s},o.remove=function(t){var n=!0,s=!1,i=void 0;try{for(var a,l=o._getOptionsArray()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;if(u.value===t)return void(r(u.parentElement)?u.parentElement:u).remove()}}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}},o.value=function(){var t="",r=!0,n=!1,s=void 0;try{for(var i,a=o._getOptionsArray()[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var l=i.value;if(l.checked){t=l.value;break}}}catch(t){n=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return t},o.selected=function(t){var r=null;if(void 0===t){var n=!0,s=!1,i=void 0;try{for(var a,l=o._getOptionsArray()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;if(u.checked){r=u;break}}}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}}else{o._getOptionsArray().forEach(function(t){t.checked=!1,t.removeAttribute("checked")});var c=!0,s=!1,i=void 0;try{for(var d,h=o._getOptionsArray()[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value;f.value===t&&(f.setAttribute("checked",!0),f.checked=!0,r=f)}}catch(t){s=!0,i=t}finally{try{c||null==h.return||h.return()}finally{if(s)throw i}}}return r},o.disable=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],r=!0,n=!1,s=void 0;try{for(var i,a=o._getOptionsArray()[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)i.value.setAttribute("disabled",t)}catch(t){n=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}},o},s.default.prototype.createColorPicker=function(t){s.default._validateParameters("createColorPicker",arguments);var r=document.createElement("input");return r.type="color",t?t instanceof s.default.Color?r.value=t.toString("#rrggbb"):(s.default.prototype._colorMode="rgb",s.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},r.value=s.default.prototype.color(t).toString("#rrggbb")):r.value="#000000",(r=f(r,this)).color=function(){return t&&(t.mode&&(s.default.prototype._colorMode=t.mode),t.maxes&&(s.default.prototype._colorMaxes=t.maxes)),s.default.prototype.color(this.elt.value)},r},s.default.prototype.createInput=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",o=(s.default._validateParameters("createInput",arguments),document.createElement("input"));return o.setAttribute("value",t),o.setAttribute("type",r),f(o,this)},s.default.prototype.createFileInput=function(t){var r,o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(s.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(r=document.createElement("input")).setAttribute("type","file"),o&&r.setAttribute("multiple",!0),r.addEventListener("change",function(r){var o=!0,n=!1,i=void 0;try{for(var a,l=r.target.files[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;s.default.File._load(u,t)}}catch(t){n=!0,i=t}finally{try{o||null==l.return||l.return()}finally{if(n)throw i}}},!1),f(r,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},s.default.prototype.createVideo=function(t,r){return s.default._validateParameters("createVideo",arguments),p(this,"video",t,r)},s.default.prototype.createAudio=function(t,r){return s.default._validateParameters("createAudio",arguments),p(this,"audio",t,r)},s.default.prototype.VIDEO="video",s.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var r=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return r?new Promise(function(o,n){r.call(navigator,t,o,n)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))}),s.default.prototype.createCapture=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];if(s.default._validateParameters("createCapture",r),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var n,i=!0,a=!0,l=0;l<r.length;l++){var u=r[l];u===s.default.prototype.VIDEO?a=!1:u===s.default.prototype.AUDIO?i=!1:"object"===h(u)?c=u:"function"==typeof u&&(n=u)}var c=c||{video:i,audio:a},d=document.createElement("video"),p=(d.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(c).then(function(t){try{"srcObject"in d?d.srcObject=t:d.src=window.URL.createObjectURL(t)}catch(r){d.src=t}},console.log),f(d,this,!0));return p.loadedmetadata=!1,d.addEventListener("loadedmetadata",function(){d.play(),d.width?(p.width=d.width,p.height=d.height):(p.width=p.elt.width=d.videoWidth,p.height=p.elt.height=d.videoHeight),p.loadedmetadata=!0,n&&n(d.srcObject)}),p},s.default.prototype.createElement=function(t,r){return s.default._validateParameters("createElement",arguments),t=document.createElement(t),void 0!==r&&(t.innerHTML=r),f(t,this)},s.default.Element.prototype.addClass=function(t){return this.elt.className?this.hasClass(t)||(this.elt.className=this.elt.className+" "+t):this.elt.className=t,this},s.default.Element.prototype.removeClass=function(t){return this.elt.classList.remove(t),this},s.default.Element.prototype.hasClass=function(t){return this.elt.classList.contains(t)},s.default.Element.prototype.toggleClass=function(t){return this.elt.classList.contains(t)?this.elt.classList.remove(t):this.elt.classList.add(t),this},s.default.Element.prototype.child=function(t){return void 0===t?this.elt.childNodes:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof s.default.Element&&(t=t.elt),t instanceof HTMLElement&&this.elt.appendChild(t),this)},s.default.Element.prototype.center=function(t){var r=this.elt.style.display,o="none"===this.elt.style.display,n="none"===this.parent().style.display,s={x:this.elt.offsetLeft,y:this.elt.offsetTop},i=(o&&this.show(),n&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===t||void 0===t?this.position(i/2+this.parent().offsetLeft,a/2+this.parent().offsetTop):"horizontal"===t?this.position(i/2+this.parent().offsetLeft,s.y):"vertical"===t&&this.position(s.x,a/2+this.parent().offsetTop),this.style("display",r),o&&this.hide(),n&&this.parent().hide(),this},s.default.Element.prototype.html=function(){return 0==arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},s.default.Element.prototype.position=function(){return 0==arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},s.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var t="";return this.elt.style.transform&&(t=(t=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2==arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3==arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=t,this},s.default.Element.prototype._rotate=function(){var t="";return this.elt.style.transform&&(t=(t=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1==arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2==arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3==arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=t,this},s.default.Element.prototype.style=function(t,r){if(void 0===(r=r instanceof s.default.Color?"rgba("+r.levels[0]+","+r.levels[1]+","+r.levels[2]+","+r.levels[3]/255+")":r)){if(-1===t.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(t);for(var o=t.split(";"),n=0;n<o.length;n++){var i=o[n].split(":");i[0]&&i[1]&&(this.elt.style[i[0].trim()]=i[1].trim())}}else this.elt.style[t]=r,"width"!==t&&"height"!==t&&"left"!==t&&"top"!==t||(r=window.getComputedStyle(this.elt).getPropertyValue(t).replace(/[^\d.]/g,""),this[t]=Math.round(parseFloat(r,10)));return this},s.default.Element.prototype.attribute=function(t,r){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===r?this.elt.getAttribute(t):(this.elt.setAttribute(t,r),this);if(void 0===r)return this.elt.firstChild.getAttribute(t);for(var o=0;o<this.elt.childNodes.length;o++)this.elt.childNodes[o].setAttribute(t,r)},s.default.Element.prototype.removeAttribute=function(t){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var r=0;r<this.elt.childNodes.length;r++)this.elt.childNodes[r].removeAttribute(t);return this.elt.removeAttribute(t),this},s.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},s.default.Element.prototype.show=function(){return this.elt.style.display="block",this},s.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},s.default.Element.prototype.size=function(t,r){if(0==arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var o=t,n=r,i=s.default.prototype.AUTO;if(o!==i||n!==i){if(o===i?o=r*this.width/this.height:n===i&&(n=t*this.height/this.width),this.elt instanceof HTMLCanvasElement){var a,l={},u=this.elt.getContext("2d");for(a in u)l[a]=u[a];for(a in this.elt.setAttribute("width",o*this._pInst._pixelDensity),this.elt.setAttribute("height",n*this._pInst._pixelDensity),this.elt.style.width=o+"px",this.elt.style.height=n+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),l)this.elt.getContext("2d")[a]=l[a]}else this.elt.style.width=o+"px",this.elt.style.height=n+"px",this.elt.width=o,this.elt.height=n;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},s.default.Element.prototype.remove=function(){this instanceof s.default.MediaElement&&(this.stop(),null!==(r=this.elt.srcObject)&&r.getTracks().forEach(function(t){t.stop()}));var t,r=this._pInst._elements.indexOf(this);for(t in -1!==r&&this._pInst._elements.splice(r,1),this._events)this.elt.removeEventListener(t,this._events[t]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},s.default.Element.prototype.drop=function(t,r){var o;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",o=function(t){t.preventDefault()}),this.elt.addEventListener("dragleave",o)),s.default.Element._attachListener("drop",function(o){o.preventDefault(),"function"==typeof r&&r.call(this,o);var o=o.dataTransfer.files,n=!0,i=!1,a=void 0;try{for(var l,u=o[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;s.default.File._load(c,t)}}catch(t){i=!0,a=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}},this)):console.log("The File APIs are not fully supported in this browser."),this},t=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),t&&l(o,t);var r=function(){var t,r,n=c(o);return t=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?n.apply(this,arguments):(t=c(this).constructor,Reflect.construct(n,arguments,t)),n=this,(r=t)&&("object"===h(r)||"function"==typeof r)?r:u(n)};function o(t,n){d(this,o);var s=u(n=r.call(this,t,n));return n.elt.crossOrigin="anonymous",n._prevTime=0,n._cueIDCounter=0,n._cues=[],n.pixels=[],n._pixelsState=u(n),n._pixelDensity=1,n._modified=!1,n._frameOnCanvas=-1,Object.defineProperty(s,"src",{get:function(){var t=s.elt.children[0].src,r=s.elt.src===window.location.href?"":s.elt.src;return t===window.location.href?r:t},set:function(r){for(var o=0;o<s.elt.children.length;o++)s.elt.removeChild(s.elt.children[o]);var n=document.createElement("source");n.src=r,t.appendChild(n),s.elt.src=r,s.modified=!0}}),s._onended=function(){},s.elt.onended=function(){s._onended(s)},n}return a(o,[{key:"play",value:function(){var t;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(t=this.elt.play())&&t.catch&&t.catch(function(t){"NotAllowedError"===t.name?console.error(t):console.error("Media play method encountered an unexpected error",t)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var t=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(t)},{passive:!0,once:!0})}},{key:"autoplay",value:function(t){var r=this,o=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",t),t&&!o&&(t=function(){return r._setupAutoplayFailDetection()},4===this.elt.readyState?t():this.elt.addEventListener("canplay",t,{passive:!0,once:!0})),this}},{key:"volume",value:function(t){if(void 0===t)return this.elt.volume;this.elt.volume=t}},{key:"speed",value:function(t){if(void 0===t)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=t:this.presetPlaybackRate=t}},{key:"time",value:function(t){return void 0===t?this.elt.currentTime:(this.elt.currentTime=t,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var t=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&t&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return s.default.Renderer2D.prototype.loadPixels.apply(this,r)}},{key:"updatePixels",value:function(t,r,o,n){return this.loadedmetadata&&(this._ensureCanvas(),s.default.Renderer2D.prototype.updatePixels.call(this,t,r,o,n)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return s.default.Renderer2D.prototype.get.apply(this,r)}},{key:"_getPixel",value:function(){this.loadPixels();for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return s.default.Renderer2D.prototype._getPixel.apply(this,r)}},{key:"set",value:function(t,r,o){this.loadedmetadata&&(this._ensureCanvas(),s.default.Renderer2D.prototype.set.call(this,t,r,o),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];s.default.prototype.copy.apply(this,r)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];s.default.Image.prototype.mask.apply(this,r)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(t){this._modified=t}},{key:"onended",value:function(t){return this._onended=t,this}},{key:"connect",value:function(t){var r,o;if("function"==typeof s.default.prototype.getAudioContext)r=s.default.prototype.getAudioContext(),o=s.default.soundOut.input;else try{o=(r=t.context).destination}catch(t){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=r.createMediaElementSource(this.elt),this.audioSourceNode.connect(o)),t?t.input?this.audioSourceNode.connect(t.input):this.audioSourceNode.connect(t):this.audioSourceNode.connect(o)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(t,r,o){var n=this._cueIDCounter++,r=new m(r,t,n,o);return this._cues.push(r),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),n}},{key:"removeCue",value:function(t){for(var r=0;r<this._cues.length;r++)this._cues[r].id===t&&(console.log(t),this._cues.splice(r,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var t=this.time(),r=0;r<this._cues.length;r++){var o=this._cues[r].time,n=this._cues[r].val;this._prevTime<o&&o<=t&&this._cues[r].callback(n)}this._prevTime=t}}]),o}(s.default.Element),s.default.MediaElement=t,t=function(){function t(r,o){d(this,t),this.file=r,this._pInst=o,o=r.type.split("/"),this.type=o[0],this.subtype=o[1],this.name=r.name,this.size=r.size,this.data=void 0}return a(t,null,[{key:"_createLoader",value:function(t,r){var o=new FileReader;return o.onload=function(o){var n,i=new s.default.File(t);"application/json"===i.file.type?i.data=JSON.parse(o.target.result):"text/xml"===i.file.type?(n=(new DOMParser).parseFromString(o.target.result,"text/xml"),i.data=new s.default.XML(n.documentElement)):i.data=o.target.result,r(i)},o}},{key:"_load",value:function(t,r){var o;/^text\//.test(t.type)||"application/json"===t.type?s.default.File._createLoader(t,r).readAsText(t):/^(video|audio)\//.test(t.type)?((o=new s.default.File(t)).data=URL.createObjectURL(t),r(o)):s.default.File._createLoader(t,r).readAsDataURL(t)}}]),t}(),s.default.File=t,t=s.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238}],290:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(g=t("../core/main"))&&g.__esModule?g:{default:g},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var u=i.default.prototype.pRotationZ=0,c=0,d=0,h="clockwise",f="clockwise",p="clockwise",m=(i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0,.5),y=30,g=(i.default.prototype.setMoveThreshold=function(t){i.default._validateParameters("setMoveThreshold",arguments),m=t},i.default.prototype.setShakeThreshold=function(t){i.default._validateParameters("setShakeThreshold",arguments),y=t},i.default.prototype._ondeviceorientation=function(t){this._updatePRotations(),this._angleMode===a.radians&&(t.beta=t.beta*(_PI/180),t.gamma=t.gamma*(_PI/180),t.alpha=t.alpha*(_PI/180)),this._setProperty("rotationX",t.beta),this._setProperty("rotationY",t.gamma),this._setProperty("rotationZ",t.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(t){this._updatePAccelerations(),this._setProperty("accelerationX",2*t.acceleration.x),this._setProperty("accelerationY",2*t.acceleration.y),this._setProperty("accelerationZ",2*t.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var t,r,o,n,s,i=this._isGlobal?window:this;"function"==typeof i.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>m||Math.abs(this.accelerationY-this.pAccelerationY)>m||Math.abs(this.accelerationZ-this.pAccelerationZ)>m)&&i.deviceMoved(),"function"==typeof i.deviceTurned&&(r=this.rotationX+180,t=this.pRotationX+180,o=u+180,0<r-t&&r-t<270||r-t<-270?h="clockwise":(r-t<0||270<r-t)&&(h="counter-clockwise"),h!==this.pRotateDirectionX&&(o=r),90<Math.abs(r-o)&&270>Math.abs(r-o)&&(o=r,this._setProperty("turnAxis","X"),i.deviceTurned()),this.pRotateDirectionX=h,u=o-180,t=this.rotationY+180,r=this.pRotationY+180,o=c+180,0<t-r&&t-r<270||t-r<-270?f="clockwise":(t-r<0||270<t-this.pRotationY)&&(f="counter-clockwise"),f!==this.pRotateDirectionY&&(o=t),90<Math.abs(t-o)&&270>Math.abs(t-o)&&(o=t,this._setProperty("turnAxis","Y"),i.deviceTurned()),this.pRotateDirectionY=f,c=o-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?p="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(d=this.rotationZ),90<Math.abs(this.rotationZ-d)&&270>Math.abs(this.rotationZ-d)&&(d=this.rotationZ,this._setProperty("turnAxis","Z"),i.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),"function"==typeof i.deviceShaken&&(null!==this.pAccelerationX&&(n=Math.abs(this.accelerationX-this.pAccelerationX),s=Math.abs(this.accelerationY-this.pAccelerationY)),y<n+s&&i.deviceShaken())},i.default);o.default=g},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],291:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.isKeyPressed=!1,n.default.prototype.keyIsPressed=!1,n.default.prototype.key="",n.default.prototype.keyCode=0,n.default.prototype._onkeydown=function(t){var r;this._downKeys[t.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",t.which),this._downKeys[t.which]=!0,this._setProperty("key",t.key||String.fromCharCode(t.which)||t.which),"function"!=typeof(r=this._isGlobal?window:this).keyPressed||t.charCode||!1===r.keyPressed(t)&&t.preventDefault())},n.default.prototype._onkeyup=function(t){this._downKeys[t.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",t.key||String.fromCharCode(t.which)||t.which),this._setProperty("keyCode",t.which);var r=this._isGlobal?window:this;"function"==typeof r.keyReleased&&!1===r.keyReleased(t)&&t.preventDefault()},n.default.prototype._onkeypress=function(t){var r;t.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",t.which),this._setProperty("key",t.key||String.fromCharCode(t.which)||t.which),"function"==typeof(r=this._isGlobal?window:this).keyTyped&&!1===r.keyTyped(t)&&t.preventDefault())},n.default.prototype._onblur=function(t){this._downKeys={}},n.default.prototype.keyIsDown=function(t){return n.default._validateParameters("keyIsDown",arguments),this._downKeys[t]||!1},n.default.prototype._areDownKeys=function(){for(var t in this._downKeys)if(this._downKeys.hasOwnProperty(t)&&!0===this._downKeys[t])return!0;return!1},t=n.default,o.default=t},{"../core/main":273}],292:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(i=t("../core/main"))&&i.__esModule?i:{default:i},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(t){var r,o,n,s,i;null!==this._curElement&&(!t.touches||0<t.touches.length)&&(r=this._curElement.elt,o=this.width,n=this.height,(s=t)&&!s.clientX&&(s.touches?s=s.touches[0]:s.changedTouches&&(s=s.changedTouches[0])),i=r.getBoundingClientRect(),o=r.scrollWidth/o||1,r=r.scrollHeight/n||1,n={x:(s.clientX-i.left)/o,y:(s.clientY-i.top)/r,winX:s.clientX,winY:s.clientY,id:s.identifier},this._setProperty("movedX",t.movementX),this._setProperty("movedY",t.movementY),this._setProperty("mouseX",n.x),this._setProperty("mouseY",n.y),this._setProperty("winMouseX",n.winX),this._setProperty("winMouseY",n.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(t){1===t.button?this._setProperty("mouseButton",a.CENTER):2===t.button?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},i.default.prototype._onmousemove=function(t){var r=this._isGlobal?window:this;this._updateNextMouseCoords(t),this.mouseIsPressed?"function"==typeof r.mouseDragged?!1===r.mouseDragged(t)&&t.preventDefault():"function"==typeof r.touchMoved&&!1===r.touchMoved(t)&&t.preventDefault():"function"==typeof r.mouseMoved&&!1===r.mouseMoved(t)&&t.preventDefault()},i.default.prototype._onmousedown=function(t){var r=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(t),this._updateNextMouseCoords(t),"function"==typeof r.mousePressed?!1===r.mousePressed(t)&&t.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof r.touchStarted&&!1===r.touchStarted(t)&&t.preventDefault()},i.default.prototype._onmouseup=function(t){var r=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof r.mouseReleased?!1===r.mouseReleased(t)&&t.preventDefault():"function"==typeof r.touchEnded&&!1===r.touchEnded(t)&&t.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(t){var r=this._isGlobal?window:this;"function"==typeof r.mouseClicked&&!1===r.mouseClicked(t)&&t.preventDefault()},i.default.prototype._ondblclick=function(t){var r=this._isGlobal?window:this;"function"==typeof r.doubleClicked&&!1===r.doubleClicked(t)&&t.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(t){var r=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",t.deltaY),"function"==typeof r.mouseWheel&&(t.delta=t.deltaY,!1===r.mouseWheel(t)&&t.preventDefault())},i.default.prototype.requestPointerLock=function(){var t=this._curElement.elt;return t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock,t.requestPointerLock?(t.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=i.default,o.default=t},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],293:[function(t,r,o){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(t){if(null!==this._curElement){for(var r=[],o=0;o<t.touches.length;o++)r[o]=function(t,r,o,n){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=t.getBoundingClientRect(),r=t.scrollWidth/r||1,t=t.scrollHeight/o||1,o=n.touches[s]||n.changedTouches[s];return{x:(o.clientX-i.left)/r,y:(o.clientY-i.top)/t,winX:o.clientX,winY:o.clientY,id:o.identifier}}(this._curElement.elt,this.width,this.height,t,o);this._setProperty("touches",r)}},t.default.prototype._ontouchstart=function(t){var r=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(t),this._updateNextMouseCoords(t),this._updateMouseCoords(),"function"==typeof r.touchStarted?!1===r.touchStarted(t)&&t.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof r.mousePressed&&!1===r.mousePressed(t)&&t.preventDefault()},t.default.prototype._ontouchmove=function(t){var r=this._isGlobal?window:this;this._updateTouchCoords(t),this._updateNextMouseCoords(t),"function"==typeof r.touchMoved?!1===r.touchMoved(t)&&t.preventDefault():"function"==typeof r.mouseDragged&&!1===r.mouseDragged(t)&&t.preventDefault()},t.default.prototype._ontouchend=function(t){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(t),this._updateNextMouseCoords(t);var r=this._isGlobal?window:this;"function"==typeof r.touchEnded?!1===r.touchEnded(t)&&t.preventDefault():"function"==typeof r.mouseReleased&&!1===r.mouseReleased(t)&&t.preventDefault()},t=t.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.string.includes":189}],294:[function(t,r,o){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,s,i,a,l={_toPixels:function(t){var r,o;return t instanceof ImageData?t.data:t.getContext("2d")?t.getContext("2d").getImageData(0,0,t.width,t.height).data:t.getContext("webgl")?(o=(r=t.getContext("webgl")).drawingBufferWidth*r.drawingBufferHeight*4,o=new Uint8Array(o),r.readPixels(0,0,t.width,t.height,r.RGBA,r.UNSIGNED_BYTE,o),o):void 0},_getARGB:function(t,r){return t[3+(r*=4)]<<24&4278190080|t[r]<<16&16711680|t[1+r]<<8&65280|255&t[2+r]},_setPixels:function(t,r){for(var o,n=0,s=t.length;n<s;n++)t[0+(o=4*n)]=(16711680&r[n])>>>16,t[1+o]=(65280&r[n])>>>8,t[2+o]=255&r[n],t[3+o]=(4278190080&r[n])>>>24},_toImageData:function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},_createImageData:function(t,r){return l._tmpCanvas=document.createElement("canvas"),l._tmpCtx=l._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,r)},apply:function(t,r,o){var n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),r=r(s,o);r instanceof ImageData?n.putImageData(r,0,0,0,0,t.width,t.height):n.putImageData(s,0,0,0,0,t.width,t.height)},threshold:function(t,r){for(var o=l._toPixels(t),n=(void 0===r&&(r=.5),Math.floor(255*r)),s=0;s<o.length;s+=4){var i=n<=.2126*o[s]+.7152*o[s+1]+.0722*o[s+2]?255:0;o[s]=o[s+1]=o[s+2]=i}},gray:function(t){for(var r=l._toPixels(t),o=0;o<r.length;o+=4){var n=r[o],s=r[o+1],i=r[o+2];r[o]=r[o+1]=r[o+2]=.2126*n+.7152*s+.0722*i}},opaque:function(t){for(var r=l._toPixels(t),o=0;o<r.length;o+=4)r[o+3]=255;return r},invert:function(t){for(var r=l._toPixels(t),o=0;o<r.length;o+=4)r[o]=255-r[o],r[o+1]=255-r[o+1],r[o+2]=255-r[o+2]},posterize:function(t,r){var o=l._toPixels(t);if(r<2||255<r)throw Error("Level must be greater than 2 and less than 255 for posterize");for(var n=r-1,s=0;s<o.length;s+=4){var i=o[s],a=o[s+1],u=o[s+2];o[s]=255*(i*r>>8)/n,o[s+1]=255*(a*r>>8)/n,o[s+2]=255*(u*r>>8)/n}},dilate:function(t){for(var r,o,n,s,i,a,u,c,d,h=l._toPixels(t),f=0,p=h.length?h.length/4:0,m=new Int32Array(p);f<p;)for(o=(r=f)+t.width;f<o;)s=n=l._getARGB(h,f),(d=f-1)<r&&(d=f),o<=(c=f+1)&&(c=f),(i=f-t.width)<0&&(i=0),p<=(a=f+t.width)&&(a=f),i=l._getARGB(h,i),d=l._getARGB(h,d),a=l._getARGB(h,a),(s=77*(s>>16&255)+151*(s>>8&255)+28*(255&s))<(u=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))&&(n=d,s=u),s<(u=77*((d=l._getARGB(h,c))>>16&255)+151*(d>>8&255)+28*(255&d))&&(n=d,s=u),s<(c=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(n=i,s=c),s<(d=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(n=a,s=d),m[f++]=n;l._setPixels(h,m)},erode:function(t){for(var r,o,n,s,i,a,u,c,d,h=l._toPixels(t),f=0,p=h.length?h.length/4:0,m=new Int32Array(p);f<p;)for(o=(r=f)+t.width;f<o;)s=n=l._getARGB(h,f),(d=f-1)<r&&(d=f),o<=(c=f+1)&&(c=f),(i=f-t.width)<0&&(i=0),p<=(a=f+t.width)&&(a=f),i=l._getARGB(h,i),d=l._getARGB(h,d),a=l._getARGB(h,a),(u=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(s=77*(s>>16&255)+151*(s>>8&255)+28*(255&s))&&(n=d,s=u),(u=77*((d=l._getARGB(h,c))>>16&255)+151*(d>>8&255)+28*(255&d))<s&&(n=d,s=u),(c=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<s&&(n=i,s=c),(d=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<s&&(n=a,s=d),m[f++]=n;l._setPixels(h,m)},blur:function(t,r){for(var o,u,c,d,h,f,p,m,y,g,v=l._toPixels(t),b=t.width,x=t.height,j=b*x,w=new Int32Array(j),S=0;S<j;S++)w[S]=l._getARGB(v,S);var T,E,k,M,C,A,O,R,P=new Int32Array(j),L=new Int32Array(j),I=new Int32Array(j),D=new Int32Array(j),F=0,N=3.5*r|0;if(n!==(N=N<1?1:N<248?N:248)){s=1+(n=N)<<1,i=new Int32Array(s),a=Array(s);for(var U=0;U<s;U++)a[U]=new Int32Array(256);for(var B=1,V=N-1;B<N;B++){i[N+B]=i[V]=A=V*V,O=a[N+B],R=a[V--];for(var G=0;G<256;G++)O[G]=R[G]=A*G}C=i[N]=N*N,O=a[N];for(var H=0;H<256;H++)O[H]=C*H}for(E=0;E<x;E++){for(T=0;T<b;T++){if(d=c=u=h=o=0,(f=T-n)<0)g=-f,f=0;else{if(b<=f)break;g=0}for(k=g;k<s&&!(b<=f);k++){var z=w[f+F];h+=(M=a[k])[(-16777216&z)>>>24],u+=M[(16711680&z)>>16],c+=M[(65280&z)>>8],d+=M[255&z],o+=i[k],f++}P[p=F+T]=h/o,L[p]=u/o,I[p]=c/o,D[p]=d/o}F+=b}for(y=(m=-n)*b,E=F=0;E<x;E++){for(T=0;T<b;T++){if(d=c=u=h=o=0,m<0)g=p=-m,f=T;else{if(x<=m)break;g=0,p=m,f=T+y}for(k=g;k<s&&!(x<=p);k++)h+=(M=a[k])[P[f]],u+=M[L[f]],c+=M[I[f]],d+=M[D[f]],o+=i[k],p++,f+=b;w[T+F]=h/o<<24|u/o<<16|c/o<<8|d/o}F+=b,y+=b,m++}l._setPixels(v,w)}};o.default=l},{"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int32-array":215,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232}],295:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(t("../core/main")),s=i(t("omggif"));function i(t){return t&&t.__esModule?t:{default:t}}n.default.prototype.createImage=function(t,r){return n.default._validateParameters("createImage",arguments),new n.default.Image(t,r)},n.default.prototype.saveCanvas=function(){n.default._validateParameters("saveCanvas",arguments);var t,r,o,s,i=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(t=arguments[0],i.shift()):arguments[0]instanceof n.default.Element?(t=arguments[0].elt,i.shift()):t=this._curElement&&this._curElement.elt,1<=i.length&&(r=i[0]),o=(o=2<=i.length?i[1]:o)||n.default.prototype._checkFileExtension(r,o)[1]||"png"){default:s="image/png";break;case"jpeg":case"jpg":s="image/jpeg"}t.toBlob(function(t){n.default.prototype.downloadFile(t,r,o)},s)},n.default.prototype.encodeAndDownloadGif=function(t,r){for(var o=t.gifProperties,i=o.loopLimit,a=(1===i?i=null:null===i&&(i=0),new Uint8Array(t.width*t.height*o.numFrames)),l=[],u={},c=0;c<o.numFrames;c++){for(var d=new Set,h=o.frames[c].image.data,f=h.length,p=new Uint32Array(t.width*t.height),m=0,y=0;m<f;m+=4,y++){var g=h[m+0]<<16|h[m+1]<<8|h[m+2]<<0;d.add(g),p[y]=g}var v=((function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}})(d)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()).sort().toString();void 0===u[v]?u[v]={freq:1,frames:[c]}:(u[v].freq+=1,u[v].frames.push(c)),l.push(p)}for(var b=[],x=Object.keys(u).sort(function(t,r){return u[r].freq-u[t].freq}),j=x[0].split(",").map(function(t){return parseInt(t)}),b=b.concat(u[j].frames),w=new Set(j),S=1;S<x.length;S++){var T=x[S].split(",").map(function(t){return parseInt(t)}).filter(function(t){return!w.has(t)});if(j.length+T.length<=256){for(var E=0;E<T.length;E++)j.push(T[E]),w.add(T[E]);b=b.concat(u[x[S]].frames)}}b=new Set(b);for(var k={},M=0;M<j.length;M++)k[j[M]]||(k[j[M]]=M);for(var C=1;C<j.length;)C<<=1;j.length=C;for(var i={loop:i,palette:new Uint32Array(j)},A=new s.default.GifWriter(a,t.width,t.height,i),O={},R=0;R<o.numFrames;R++)!function(r){var n=!b.has(r),s=n?[]:j,i=new Uint8Array(t.width*t.height),a={},u=new Set,c=(l[r].forEach(function(t,o){n?(void 0===a[t]&&(a[t]=s.length,s.push(t)),i[o]=a[t]):i[o]=k[t],0<r&&l[r-1][o]!==t&&u.add(t)}),{}),d=s.filter(function(t){return!u.has(t)});if(0<d.length){var d=d[0],h=(n?a:k)[d];if(0<r){for(var f=0;f<l[r].length;f++)l[r-1][f]===l[r][f]&&(i[f]=h);c.transparent=h,O.frameOpts.disposal=1}}if(c.delay=o.frames[r].delay/10,n){for(var p=1;p<s.length;)p<<=1;s.length=p,c.palette=new Uint32Array(s)}0<r&&A.addFrame(0,0,t.width,t.height,O.pixelPaletteIndex,O.frameOpts),O={pixelPaletteIndex:i,frameOpts:c}}(R);O.frameOpts.disposal=1,A.addFrame(0,0,t.width,t.height,O.pixelPaletteIndex,O.frameOpts),i=new Blob([a.slice(0,A.end())],{type:"image/gif"}),n.default.prototype.downloadFile(i,r,"gif")},n.default.prototype.saveFrames=function(t,r,o,s,i){n.default._validateParameters("saveFrames",arguments),o=1e3*n.default.prototype.constrain(o=o||3,0,15);var s=n.default.prototype.constrain(s||15,0,22),a=0,l=n.default.prototype._makeFrame,u=this._curElement.elt,c=[],d=setInterval(function(){c.push(l(t+a,r,u)),a++},1e3/s);setTimeout(function(){if(clearInterval(d),i)i(c);else{var t=!0,r=!1,o=void 0;try{for(var s,a=c[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;n.default.prototype.downloadFile(l.imageData,l.filename,l.ext)}}catch(t){r=!0,o=t}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}}c=[]},.01+o)},n.default.prototype._makeFrame=function(t,r,o){var n,o=this?this._curElement.elt:o;if(r)switch(r.toLowerCase()){case"png":default:n="image/png";break;case"jpeg":case"jpg":n="image/jpeg"}else r="png",n="image/png";var o=(o=o.toDataURL(n)).replace(n,"image/octet-stream"),s={};return s.imageData=o,s.filename=t,s.ext=r,s},t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,omggif:246}],296:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,t("regenerator-runtime/runtime");var i,a,l=p(t("../core/main")),u=p(t("../core/helpers")),c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=f();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants")),d=p(t("omggif")),h=t("gifenc");function f(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,f=function(){return t},t)}function p(t){return t&&t.__esModule?t:{default:t}}function m(t,r,o,n,s,i,a){try{var l=t[i](a),u=l.value}catch(t){return void o(t)}l.done?r(u):Promise.resolve(u).then(n,s)}function y(t,r){return 0<t&&t<r?t:r}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(t,r,o){l.default._validateParameters("loadImage",arguments);var n=new l.default.Image(1,1,this),s=this,i=new Request(t,{method:"GET",mode:"cors"});return fetch(t,i).then(function(i){var a,u=i.headers.get("content-type");null===u&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),u&&u.includes("image/gif")?i.arrayBuffer().then(function(t){if(t){for(var t=new Uint8Array(t),i=(function(t){s._decrementPreload()}).bind(s),a=new d.default.GifReader(t),u=(n.width=n.canvas.width=a.width,n.height=n.canvas.height=a.height,[]),c=a.numFrames(),h=new Uint8ClampedArray(n.width*n.height*4),f=0;f<c;f++){var p=a.frameInfo(f),m=n.drawingContext.getImageData(0,0,n.width,n.height),y=(h=m.data.slice(),function(t,r){try{r.decodeAndBlitFrameRGBA(t,h)}catch(t){l.default._friendlyFileLoadError(8,n.src),"function"==typeof o?o(t):console.error(t)}}(f,a),new ImageData(h,n.width,n.height)),y=(n.drawingContext.putImageData(y,0,0),p.delay);0===y&&(y=10),u.push({image:n.drawingContext.getImageData(0,0,n.width,n.height),delay:10*y}),2===p.disposal?n.drawingContext.clearRect(p.x,p.y,p.width,p.height):3===p.disposal&&n.drawingContext.putImageData(m,0,0,p.x,p.y,p.width,p.height)}null===(t=a.loopCount())?t=1:0===t&&(t=null),n.drawingContext.putImageData(u[0].image,0,0),1<u.length&&(n.gifProperties={displayIndex:0,loopLimit:t,loopCount:0,frames:u,numFrames:c,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof r&&r(n),i()}},function(t){"function"==typeof o?(o(t),s._decrementPreload()):console.error(t)}):((a=new Image).onload=function(){n.width=n.canvas.width=a.width,n.height=n.canvas.height=a.height,n.drawingContext.drawImage(a,0,0),n.modified=!0,"function"==typeof r&&r(n),s._decrementPreload()},a.onerror=function(t){l.default._friendlyFileLoadError(0,a.src),"function"==typeof o?(o(t),s._decrementPreload()):console.error(t)},0!==t.indexOf("data:image/")&&(a.crossOrigin="Anonymous"),a.src=t),n.modified=!0}).catch(function(r){l.default._friendlyFileLoadError(0,t),"function"==typeof o?(o(r),s._decrementPreload()):console.error(r)}),n},l.default.prototype.saveGif=(i=regeneratorRuntime.mark(function t(r,o){var n,s,i,a,u,c,d,f,p,m,y,g,v,b,x,j,w,S,T,E,k,M,C,A,O,R,P=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<P.length&&void 0!==P[2]?P[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof r)throw TypeError("fileName parameter must be a string");t.next=3;break;case 3:if("number"!=typeof o)throw TypeError("Duration parameter must be a number");t.next=5;break;case 5:if(s=n&&n.delay||0,i=n&&n.units||"seconds",a=n&&n.silent||!1,u=n&&n.notificationDuration||0,c=n&&n.notificationID||"progressBar","number"!=typeof s)throw TypeError("Delay parameter must be a number");t.next=12;break;case 12:if("seconds"!==i&&"frames"!==i)throw TypeError('Units parameter must be either "frames" or "seconds"');t.next=14;break;case 14:if("boolean"!=typeof a)throw TypeError("Silent parameter must be a boolean");t.next=16;break;case 16:if("number"!=typeof u)throw TypeError("Notification duration parameter must be a number");t.next=18;break;case 18:if("string"!=typeof c)throw TypeError("Notification ID parameter must be a string");t.next=20;break;case 20:return this._recording=!0,d=(d=1/(m=(m=this._targetFrameRate)!==1/0&&void 0!==m&&0!==m?m:60)*1e3)<20?20:d,p=(f="seconds"===i?o*m:o)+(m="seconds"===i?s*m:s),this.frameCount=m,y=this._pixelDensity,this.pixelDensity(1),g=[],null!==document.getElementById(c)&&document.getElementById(c).remove(),a||((v=this.createP("")).id(c),v.style("font-size","16px"),v.style("font-family","Montserrat"),v.style("background-color","#ffffffa0"),v.style("padding","8px"),v.style("border-radius","10px"),v.position(0,0)),this._renderer instanceof l.default.RendererGL&&(x=this.drawingContext,b=new Uint8Array(x.drawingBufferWidth*x.drawingBufferHeight*4)),this.noLoop(),t.next=39,Promise.resolve();case 39:if(m<p)return this.redraw(),A=void 0,A=this._renderer instanceof l.default.RendererGL?(b=new Uint8Array(x.drawingBufferWidth*x.drawingBufferHeight*4),x.readPixels(0,0,x.drawingBufferWidth,x.drawingBufferHeight,x.RGBA,x.UNSIGNED_BYTE,b),function(t){for(var r=parseInt(height/2),o=4*width,n=new Uint8Array(4*width),s=0;s<r;++s){var i=s*o,a=(height-s-1)*o;n.set(t.subarray(i,i+o)),t.copyWithin(i,a,a+o),t.set(n,a)}return t}(b)):this.drawingContext.getImageData(0,0,this.width,this.height).data,g.push(A),m++,a||v.html("Saved frame <b>"+g.length.toString()+"</b> out of "+f.toString()),t.next=48,new Promise(function(t){return setTimeout(t,0)});t.next=50;break;case 48:t.next=39;break;case 50:a||v.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(y),j=(0,h.GIFEncoder)(),w=function(t){for(var r=new Uint8Array(t.length*t[0].length),o=0;o<t.length;o++)r.set(t[o],o*t[0].length);var n=(0,h.quantize)(r,256,{format:"rgba4444",oneBitAlpha:!0});return 256===n.length?n[n.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:n.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),n}(g),S={},T=function(t){for(var r=t.length/4,o=new Uint8Array(r),n=0;n<r;n++){var s=t[4*n]<<24|t[4*n+1]<<16|t[4*n+2]<<8|t[4*n+3];void 0===S[s]&&(S[s]=(0,h.nearestColorIndex)(w,t.slice(4*n,4*(n+1)))),o[n]=S[s]}return o},E=w.length-1,k=[],M=0;case 60:if(!(M<g.length)){t.next=71;break}if(A=(C=T(g[M])).slice(),0===M)j.writeFrame(C,this.width,this.height,{palette:w,delay:d,dispose:1});else{for(O=0;O<C.length;O++)C[O]===k[O]&&(C[O]=E);j.writeFrame(C,this.width,this.height,{delay:d,transparent:!0,transparentIndex:E,dispose:1})}return k=A,a||v.html("Rendered frame <b>"+M.toString()+"</b> out of "+f.toString()),t.next=68,new Promise(function(t){return setTimeout(t,0)});case 68:M++,t.next=60;break;case 71:j.finish(),R=j.bytesView(),R=new Blob([R],{type:"image/gif"}),g=[],this._recording=!1,this.loop(),a||(v.html("Done. Downloading your gif!\uD83C\uDF38"),0<u&&setTimeout(function(){return v.remove()},1e3*u)),l.default.prototype.downloadFile(R,r,"gif");case 80:case"end":return t.stop()}},t,this)}),a=function(){var t=this,r=arguments;return new Promise(function(o,n){var s=i.apply(t,r);function a(t){m(s,o,n,a,l,"next",t)}function l(t){m(s,o,n,a,l,"throw",t)}a(void 0)})},function(t,r){return a.apply(this,arguments)}),l.default.prototype.image=function(t,r,o,n,s,i,a,d,h,f,p,m){l.default._validateParameters("image",arguments);var g,v,b,x,j,w,S,T,E,k,M,C,A,O,R,P,L,I,D,F,N=t.width,U=t.height,B=(m=m||c.CENTER,p=p||c.CENTER,t.elt&&t.elt.videoWidth&&!t.canvas&&(N=t.elt.videoWidth,U=t.elt.videoHeight),n||N),s=s||U,i=i||0,a=a||0,d=y(d||N,N),N=y(h||U,U),h=1;t.elt&&!t.canvas&&t.elt.style.width&&(h=(t.elt.videoWidth&&!n?t.elt.videoWidth:t.elt.width)/parseInt(t.elt.style.width,10)),i*=h,a*=h,N*=h,d*=h,g=f,v=p,b=m,x=(U=u.default.modeAdjust(r,o,B,s,this._renderer._imageMode)).x,j=U.y,w=U.w,S=U.h,T=i,E=a,k=d,M=N,g===c.COVER&&(C=v,O=b,I=w,D=S,L=T,F=E,P=Math.max(I/(A=k),D/(R=M)),I/=P,D/=P,P=L,L=F,C===c.CENTER?P+=(A-I)/2:C===c.RIGHT&&(P+=A-I),O===c.CENTER?L+=(R-D)/2:O===c.BOTTOM&&(L+=R-D),T=(F={x:P,y:L,w:I,h:D}).x,E=F.y,k=F.w,M=F.h),g===c.CONTAIN&&(C=v,A=b,O=x,R=j,P=w,L=S,F=Math.max((I=k)/P,(D=M)/L),I/=F,D/=F,F=O,O=R,C===c.CENTER?F+=(P-I)/2:C===c.RIGHT&&(F+=P-I),A===c.CENTER?O+=(L-D)/2:A===c.BOTTOM&&(O+=L-D),x=(g={x:F,y:O,w:I,h:D}).x,j=g.y,w=g.w,S=g.h),U={sx:T,sy:E,sw:k,sh:M,dx:x,dy:j,dw:w,dh:S},this._renderer.image(t,U.sx,U.sy,U.sw,U.sh,U.dx,U.dy,U.dw,U.dh)},l.default.prototype.tint=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];l.default._validateParameters("tint",r);var n=this.color.apply(this,r);this._renderer._tint=n.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(t){l.default._validateParameters("imageMode",arguments),t!==c.CORNER&&t!==c.CORNERS&&t!==c.CENTER||(this._renderer._imageMode=t)},t=l.default,o.default=t},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/helpers":269,"../core/main":273,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,gifenc:243,omggif:246,"regenerator-runtime/runtime":250}],297:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(t("../core/main")),s=i(t("./filters"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.Image=function(){var t,r;function o(t,r){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this.width=t,this.height=r,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}return t=[{key:"_animateGif",value:function(t){var r,o=this.gifProperties,t=t._lastRealFrameTime;0===o.lastChangeTime&&(o.lastChangeTime=t),o.playing&&(o.timeDisplayed=t-o.lastChangeTime,r=o.frames[o.displayIndex].delay,o.timeDisplayed>=r&&(r=Math.floor(o.timeDisplayed/r),o.timeDisplayed=0,o.lastChangeTime=t,o.displayIndex+=r,o.loopCount=Math.floor(o.displayIndex/o.numFrames),null!==o.loopLimit&&o.loopCount>=o.loopLimit?o.playing=!1:(t=o.displayIndex%o.numFrames,this.drawingContext.putImageData(o.frames[t].image,0,0),o.displayIndex=t,this.setModified(!0))))}},{key:"_setProperty",value:function(t,r){this[t]=r,this.setModified(!0)}},{key:"loadPixels",value:function(){n.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(t,r,o,s){n.default.Renderer2D.prototype.updatePixels.call(this,t,r,o,s),this.setModified(!0)}},{key:"get",value:function(t,r,o,s){return n.default._validateParameters("p5.Image.get",arguments),n.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.default.Renderer2D.prototype._getPixel.apply(this,r)}},{key:"set",value:function(t,r,o){n.default.Renderer2D.prototype.set.call(this,t,r,o),this.setModified(!0)}},{key:"resize",value:function(t,r){0===t&&0===r?(t=this.canvas.width,r=this.canvas.height):0===t?t=this.canvas.width*r/this.canvas.height:0===r&&(r=this.canvas.height*t/this.canvas.width),t=Math.floor(t),r=Math.floor(r);var o=document.createElement("canvas");if(o.width=t,o.height=r,this.gifProperties)for(var n=this.gifProperties,s=0;s<n.numFrames;s++){for(var i=this.drawingContext.createImageData(t,r),a=(d=d=c=u=l=void 0,n.frames[s].image),l=0,u=0;u<i.height;u++)for(var c=0;c<i.width;c++){var d=Math.floor(c*a.width/i.width),d=4*(Math.floor(u*a.height/i.height)*a.width+d);i.data[l++]=a.data[d++],i.data[l++]=a.data[d++],i.data[l++]=a.data[d++],i.data[l++]=a.data[+d]}n.frames[s].image=i}o.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,o.width,o.height),this.canvas.width=this.width=t,this.canvas.height=this.height=r,this.drawingContext.drawImage(o,0,0,t,r,0,0,t,r),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];n.default.prototype.copy.apply(this,r)}},{key:"mask",value:function(t){var r=this.drawingContext.globalCompositeOperation,o=1,s=[t=void 0===t?this:t,0,0,(o=t instanceof n.default.Renderer?t._pInst._pixelDensity:o)*t.width,o*t.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var i=0;i<this.gifProperties.frames.length;i++)this.drawingContext.putImageData(this.gifProperties.frames[i].image,0,0),this.copy.apply(this,s),this.gifProperties.frames[i].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,s);this.drawingContext.globalCompositeOperation=r,this.setModified(!0)}},{key:"filter",value:function(t,r){s.default.apply(this.canvas,s.default[t],r),this.setModified(!0)}},{key:"blend",value:function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];n.default._validateParameters("p5.Image.blend",arguments),n.default.prototype.blend.apply(this,r),this.setModified(!0)}},{key:"setModified",value:function(t){this._modified=t}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(t,r){this.gifProperties?n.default.prototype.encodeAndDownloadGif(this,t):n.default.prototype.saveCanvas(this.canvas,t,r)}},{key:"reset",value:function(){var t;this.gifProperties&&((t=this.gifProperties).playing=!0,t.timeSinceStart=0,t.timeDisplayed=0,t.lastChangeTime=0,t.loopCount=0,t.displayIndex=0,this.drawingContext.putImageData(t.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var t;if(this.gifProperties)return(t=this.gifProperties).displayIndex%t.numFrames}},{key:"setFrame",value:function(t){var r;this.gifProperties&&(t<(r=this.gifProperties).numFrames&&0<=t?(r.timeDisplayed=0,r.lastChangeTime=0,r.displayIndex=t,this.drawingContext.putImageData(r.frames[t].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(t,r){if(this.gifProperties){var o=this.gifProperties;if(r<o.numFrames&&0<=r)o.frames[r].delay=t;else{var n=!0,r=!1,s=void 0;try{for(var i,a=o.frames[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)i.value.delay=t}catch(t){r=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}}}}}],a(o.prototype,t),r&&a(o,r),o}(),t=n.default.Image,o.default=t},{"../core/main":273,"./filters":294,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],298:[function(t,r,o){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(t("../core/main")),s=i(t("./filters"));function i(t){return t&&t.__esModule?t:{default:t}}t("../color/p5.Color"),n.default.prototype.pixels=[],n.default.prototype.blend=function(){for(var t,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];n.default._validateParameters("blend",o),this._renderer?(t=this._renderer).blend.apply(t,o):n.default.Renderer2D.prototype.blend.apply(this,o)},n.default.prototype.copy=function(){for(var t,r,o,s,i,a,l,u,c,d=arguments.length,h=Array(d),f=0;f<d;f++)h[f]=arguments[f];if(n.default._validateParameters("copy",h),9===h.length)t=h[0],r=h[1],o=h[2],s=h[3],i=h[4],a=h[5],l=h[6],u=h[7],c=h[8];else{if(8!==h.length)throw Error("Signature not supported");t=this,r=h[0],o=h[1],s=h[2],i=h[3],a=h[4],l=h[5],u=h[6],c=h[7]}n.default.prototype._copyHelper(this,t,r,o,s,i,a,l,u,c)},n.default.prototype._copyHelper=function(t,r,o,s,i,a,l,u,c,d){r.loadPixels();var h=r.canvas.width/r.width,f=0,p=0;r._renderer&&r._renderer.isP3D&&(f=r.width/2,p=r.height/2),t._renderer&&t._renderer.isP3D?n.default.RendererGL.prototype.image.call(t._renderer,r,o+f,s+p,i,a,l,u,c,d):t.drawingContext.drawImage(r.canvas,h*(o+f),h*(s+p),h*i,h*a,l,u,c,d)},n.default.prototype.filter=function(t,r){n.default._validateParameters("filter",arguments),void 0!==this.canvas?s.default.apply(this.canvas,s.default[t],r):s.default.apply(this.elt,s.default[t],r)},n.default.prototype.get=function(t,r,o,s){var i;return n.default._validateParameters("get",arguments),(i=this._renderer).get.apply(i,arguments)},n.default.prototype.loadPixels=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];n.default._validateParameters("loadPixels",r),this._renderer.loadPixels()},n.default.prototype.set=function(t,r,o){this._renderer.set(t,r,o)},n.default.prototype.updatePixels=function(t,r,o,s){n.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(t,r,o,s)},t=n.default,o.default=t},{"../color/p5.Color":260,"../core/main":273,"./filters":294,"core-js/modules/es.array.filter":155}],299:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=l(t("../core/main")),i=(t("whatwg-fetch"),t("es6-promise/auto"),l(t("fetch-jsonp"))),a=l(t("file-saver"));function l(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function c(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function d(t,r){r&&!0!==r&&"true"!==r||(r="");var o="";return(t=t||"untitled").includes(".")&&(o=t.split(".").pop()),r&&o!==r&&(o=r,t="".concat(t,".").concat(o)),[t,o]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadJSON=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];s.default._validateParameters("loadJSON",r);for(var n,i,a,l=r[0],c={},d="json",h=1;h<r.length;h++){var f=r[h];"string"==typeof f?"jsonp"!==f&&"json"!==f||(d=f):"function"==typeof f?n?i=f:n=f:"object"===u(f)&&(f.hasOwnProperty("jsonpCallback")||f.hasOwnProperty("jsonpCallbackFunction"))&&(d="jsonp",a=f)}var p=this;return this.httpDo(l,"GET",a,d,function(t){for(var r in t)c[r]=t[r];void 0!==n&&n(t),p._decrementPreload()},function(t){if(s.default._friendlyFileLoadError(5,l),!i)throw t;i(t)}),c},s.default.prototype.loadStrings=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];s.default._validateParameters("loadStrings",r);for(var n,i,a=[],l=1;l<r.length;l++){var u=r[l];"function"==typeof u&&(void 0===n?n=u:void 0===i&&(i=u))}var c=this;return s.default.prototype.httpDo.call(this,r[0],"GET","text",function(t){for(var r=t.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),o=0,s=r.length;o<s;o+=32768)Array.prototype.push.apply(a,r.slice(o,Math.min(o+32768,s)));void 0!==n&&n(a),c._decrementPreload()},function(t){if(s.default._friendlyFileLoadError(3,t),!i)throw t;i(t)}),a},s.default.prototype.loadTable=function(t){var r,o,n,i=[],a=!1,l=t.substring(t.lastIndexOf(".")+1,t.length);"csv"===l?n=",":"ssv"===l?n=";":"tsv"===l&&(n="	");for(var u=1;u<arguments.length;u++)"function"==typeof arguments[u]?void 0===r?r=arguments[u]:void 0===o&&(o=arguments[u]):"string"==typeof arguments[u]&&(i.push(arguments[u]),"header"===arguments[u]&&(a=!0),"csv"===arguments[u]?n=",":"ssv"===arguments[u]?n=";":"tsv"===arguments[u]&&(n="	"));var c=new s.default.Table,d=this;return this.httpDo(t,"GET","table",function(t){for(var o,i,l={},u=[],h=0,f=null,p=function(){l.currentState=0,l.token=""},m=function(){f.push(l.token),p()},y=function(){l.currentState=4,u.push(f),f=null};;){if(null==(o=t[h++])){if(l.escaped)throw Error("Unclosed quote in file.");if(f){m(),y();break}}if(null===f&&(l.escaped=!1,f=[],p()),0===l.currentState){if('"'===o){l.escaped=!0,l.currentState=1;continue}l.currentState=1}if(1===l.currentState&&l.escaped){if('"'===o)'"'===t[h]?(l.token+='"',h++):(l.escaped=!1,l.currentState=2);else{if("\r"===o)continue;l.token+=o}}else"\r"===o?("\n"===t[h]&&h++,m(),y()):"\n"===o?(m(),y()):o===n?m():1===l.currentState&&(l.token+=o)}if(a)c.columns=u.shift();else for(var g=0;g<u[0].length;g++)c.columns[g]="null";for(var v=0;v<u.length;v++)(1!==u[v].length||"undefined"!==u[v][0]&&""!==u[v][0])&&((i=new s.default.TableRow).arr=u[v],i.obj=function(t,r){if(void 0===(r=r||[]))for(var o=0;o<t.length;o++)r[o.toString()]=o;return Object.fromEntries(r.map(function(r,o){return[r,t[o]]}))}(u[v],c.columns),c.addRow(i));"function"==typeof r&&r(c),d._decrementPreload()},function(r){s.default._friendlyFileLoadError(2,t),o?o(r):console.error(r)}),c},s.default.prototype.loadXML=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];for(var n,i,a=new s.default.XML,l=1;l<r.length;l++){var u=r[l];"function"==typeof u&&(void 0===n?n=u:void 0===i&&(i=u))}var c=this;return this.httpDo(r[0],"GET","xml",function(t){for(var r in t)a[r]=t[r];void 0!==n&&n(a),c._decrementPreload()},function(t){if(s.default._friendlyFileLoadError(1,t),!i)throw t;i(t)}),a},s.default.prototype.loadBytes=function(t,r,o){var n={},i=this;return this.httpDo(t,"GET","arrayBuffer",function(t){n.bytes=new Uint8Array(t),"function"==typeof r&&r(n),i._decrementPreload()},function(r){if(s.default._friendlyFileLoadError(6,t),!o)throw r;o(r)}),n},s.default.prototype.httpGet=function(){s.default._validateParameters("httpGet",arguments);var t=Array.prototype.slice.call(arguments);return t.splice(1,0,"GET"),s.default.prototype.httpDo.apply(this,t)},s.default.prototype.httpPost=function(){s.default._validateParameters("httpPost",arguments);var t=Array.prototype.slice.call(arguments);return t.splice(1,0,"POST"),s.default.prototype.httpDo.apply(this,t)},s.default.prototype.httpDo=function(){for(var t,r,o,n={},a=0,l="text/plain",c=arguments.length-1;0<c&&"function"==typeof(c<0||arguments.length<=c?void 0:arguments[c]);c--)a++;var d=arguments.length-a,h=arguments.length<=0?void 0:arguments[0];if(2==d&&"string"==typeof h&&"object"===u(arguments.length<=1?void 0:arguments[1]))v=new Request(h,arguments.length<=1?void 0:arguments[1]),r=arguments.length<=2?void 0:arguments[2],o=arguments.length<=3?void 0:arguments[3];else{for(var f,p="GET",m=1;m<arguments.length;m++){var y=m<0||arguments.length<=m?void 0:arguments[m];if("string"==typeof y)"GET"===y||"POST"===y||"PUT"===y||"DELETE"===y?p=y:"json"===y||"jsonp"===y||"binary"===y||"arrayBuffer"===y||"xml"===y||"text"===y||"table"===y?t=y:f=y;else if("number"==typeof y)f=y.toString();else if("object"===u(y)){if(y.hasOwnProperty("jsonpCallback")||y.hasOwnProperty("jsonpCallbackFunction"))for(var g in y)n[g]=y[g];else l=y instanceof s.default.XML?(f=y.serialize(),"application/xml"):(f=JSON.stringify(y),"application/json")}else"function"==typeof y&&(r?o=y:r=y)}var d="GET"===p?new Headers:new Headers({"Content-Type":l}),v=new Request(h,{method:p,mode:"cors",body:f,headers:d})}return(d=(d="jsonp"===(t=t||(h.includes("json")?"json":h.includes("xml")?"xml":"text"))?(0,i.default)(h,n):fetch(v)).then(function(r){if(!r.ok)throw(o=Error(r.body)).status=r.status,o.ok=!1,o;var o=0;switch((o="jsonp"!==t?r.headers.get("content-length"):o)&&64e6<o&&s.default._friendlyFileLoadError(7,h),t){case"json":case"jsonp":return r.json();case"binary":return r.blob();case"arrayBuffer":return r.arrayBuffer();case"xml":return r.text().then(function(t){return t=(new DOMParser).parseFromString(t,"text/xml"),new s.default.XML(t.documentElement)});default:return r.text()}})).then(r||function(){}),d.catch(o||console.error),d},window.URL=window.URL||window.webkitURL,s.default.prototype._pWriters=[],s.default.prototype.createWriter=function(t,r){var o,n;for(n in s.default.prototype._pWriters)if(s.default.prototype._pWriters[n].name===t)return o=new s.default.PrintWriter(t+this.millis(),r),s.default.prototype._pWriters.push(o),o;return o=new s.default.PrintWriter(t,r),s.default.prototype._pWriters.push(o),o},s.default.PrintWriter=function(t,r){var o=this;this.name=t,this.content="",this.write=function(t){this.content+=t},this.print=function(t){this.content+="".concat(t,"\n")},this.clear=function(){this.content=""},this.close=function(){var n,i=[];for(n in i.push(this.content),s.default.prototype.writeFile(i,t,r),s.default.prototype._pWriters)s.default.prototype._pWriters[n].name===this.name&&s.default.prototype._pWriters.splice(n,1);o.clear(),o={}}},s.default.prototype.save=function(t,r,o){var n=arguments,i=(this._curElement||this).elt;if(0===n.length)s.default.prototype.saveCanvas(i);else if(n[0]instanceof s.default.Renderer||n[0]instanceof s.default.Graphics)s.default.prototype.saveCanvas(n[0].elt,n[1],n[2]);else if(1===n.length&&"string"==typeof n[0])s.default.prototype.saveCanvas(i,n[0]);else switch(d(n[1],n[2])[1]){case"json":return void s.default.prototype.saveJSON(n[0],n[1],n[2]);case"txt":return void s.default.prototype.saveStrings(n[0],n[1],n[2]);default:n[0]instanceof Array?s.default.prototype.saveStrings(n[0],n[1],n[2]):n[0]instanceof s.default.Table?s.default.prototype.saveTable(n[0],n[1],n[2]):n[0]instanceof s.default.Image?s.default.prototype.saveCanvas(n[0].canvas,n[1]):n[0]instanceof s.default.SoundFile&&s.default.prototype.saveSound(n[0],n[1],n[2],n[3])}},s.default.prototype.saveJSON=function(t,r,o){s.default._validateParameters("saveJSON",arguments),o=o?JSON.stringify(t):JSON.stringify(t,void 0,2),this.saveStrings(o.split("\n"),r,"json")},s.default.prototype.saveJSONObject=s.default.prototype.saveJSON,s.default.prototype.saveJSONArray=s.default.prototype.saveJSON,s.default.prototype.saveStrings=function(t,r,o,n){s.default._validateParameters("saveStrings",arguments);for(var i=this.createWriter(r,o||"txt"),a=0;a<t.length;a++)n?i.write(t[a]+"\r\n"):i.write(t[a]+"\n");i.close(),i.clear()},s.default.prototype.saveTable=function(t,r,o){s.default._validateParameters("saveTable",arguments),n=void 0===o?r.substring(r.lastIndexOf(".")+1,r.length):o;var n,i=this.createWriter(r,n),a=t.columns,l="tsv"===n?"	":",";if("html"!==n){if("0"!==a[0]){for(var u=0;u<a.length;u++)u<a.length-1?i.write(a[u]+l):i.write(a[u]);i.write("\n")}for(var d=0;d<t.rows.length;d++){for(var h=void 0,h=0;h<t.rows[d].arr.length;h++)h<t.rows[d].arr.length-1?"csv"===n&&String(t.rows[d].arr[h]).includes(",")?i.write('"'+t.rows[d].arr[h]+'"'+l):i.write(t.rows[d].arr[h]+l):"csv"===n&&String(t.rows[d].arr[h]).includes(",")?i.write('"'+t.rows[d].arr[h]+'"'):i.write(t.rows[d].arr[h]);i.write("\n")}}else{if(i.print("<html>"),i.print("<head>"),i.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),i.print("</head>"),i.print("<body>"),i.print("  <table>"),"0"!==a[0]){i.print("    <tr>");for(var f=0;f<a.length;f++){var p=c(a[f]);i.print("      <td>".concat(p)),i.print("      </td>")}i.print("    </tr>")}for(var m=0;m<t.rows.length;m++){i.print("    <tr>");for(var y=0;y<t.columns.length;y++){var g=c(t.rows[m].getString(y));i.print("      <td>".concat(g)),i.print("      </td>")}i.print("    </tr>")}i.print("  </table>"),i.print("</body>"),i.print("</html>")}i.close(),i.clear()},s.default.prototype.writeFile=function(t,r,o){var n="application/octet-stream",t=(s.default.prototype._isSafari()&&(n="text/plain"),new Blob(t,{type:n}));s.default.prototype.downloadFile(t,r,o)},s.default.prototype.downloadFile=function(t,r,o){var n,r=d(r,o),o=r[0];t instanceof Blob?a.default.saveAs(t,o):((n=document.createElement("a")).href=t,n.download=o,n.onclick=function(t){document.body.removeChild(t.target),t.stopPropagation()},n.style.display="none",document.body.appendChild(n),s.default.prototype._isSafari()&&(t=(t='Hello, Safari user! To download this file...\n1. Go to File --> Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(r[1],'"'),alert(t)),n.click())},s.default.prototype._checkFileExtension=d,s.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},t=s.default,o.default=t},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238,"es6-promise/auto":239,"fetch-jsonp":241,"file-saver":242,"whatwg-fetch":251}],300:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.Table=function(){var t,r;function o(t){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}return t=[{key:"addRow",value:function(t){if(void 0===(t=t||new n.default.TableRow).arr||void 0===t.obj)throw Error("invalid TableRow: ".concat(t));return(t.table=this).rows.push(t),t}},{key:"removeRow",value:function(t){this.rows[t].table=null,t=this.rows.splice(t+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(t)}},{key:"getRow",value:function(t){return this.rows[t]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(t,r){if("string"==typeof r){for(var o=0;o<this.rows.length;o++)if(this.rows[o].obj[r]===t)return this.rows[o]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[r]===t)return this.rows[n];return null}},{key:"findRows",value:function(t,r){var o=[];if("string"==typeof r)for(var n=0;n<this.rows.length;n++)this.rows[n].obj[r]===t&&o.push(this.rows[n]);else for(var s=0;s<this.rows.length;s++)this.rows[s].arr[r]===t&&o.push(this.rows[s]);return o}},{key:"matchRow",value:function(t,r){if("number"==typeof r){for(var o=0;o<this.rows.length;o++)if(this.rows[o].arr[r].match(t))return this.rows[o]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[r].match(t))return this.rows[n];return null}},{key:"matchRows",value:function(t,r){var o=[];if("number"==typeof r)for(var n=0;n<this.rows.length;n++)this.rows[n].arr[r].match(t)&&o.push(this.rows[n]);else for(var s=0;s<this.rows.length;s++)this.rows[s].obj[r].match(t)&&o.push(this.rows[s]);return o}},{key:"getColumn",value:function(t){var r=[];if("string"==typeof t)for(var o=0;o<this.rows.length;o++)r.push(this.rows[o].obj[t]);else for(var n=0;n<this.rows.length;n++)r.push(this.rows[n].arr[t]);return r}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(t){this.columns.push(t||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(t,r){for(var o=[],n=0;n<t.length;n++)o.push(t.charAt(n).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var s=RegExp(o.join("|"),"g");if(void 0===r)for(var i=0;i<this.columns.length;i++)for(var a=0;a<this.rows.length;a++){var l=(l=this.rows[a].arr[i]).replace(s,"");this.rows[a].arr[i]=l,this.rows[a].obj[this.columns[i]]=l}else if("string"==typeof r)for(var u=0;u<this.rows.length;u++){var c=(c=this.rows[u].obj[r]).replace(s,""),d=(this.rows[u].obj[r]=c,this.columns.indexOf(r));this.rows[u].arr[d]=c}else for(var h=0;h<this.rows.length;h++){var f=(f=this.rows[h].arr[r]).replace(s,"");this.rows[h].arr[r]=f,this.rows[h].obj[this.columns[r]]=f}}},{key:"trim",value:function(t){var r=RegExp(" ","g");if(void 0===t)for(var o=0;o<this.columns.length;o++)for(var n=0;n<this.rows.length;n++){var s=(s=this.rows[n].arr[o]).replace(r,"");this.rows[n].arr[o]=s,this.rows[n].obj[this.columns[o]]=s}else if("string"==typeof t)for(var i=0;i<this.rows.length;i++){var a=(a=this.rows[i].obj[t]).replace(r,""),l=(this.rows[i].obj[t]=a,this.columns.indexOf(t));this.rows[i].arr[l]=a}else for(var u=0;u<this.rows.length;u++){var c=(c=this.rows[u].arr[t]).replace(r,"");this.rows[u].arr[t]=c,this.rows[u].obj[this.columns[t]]=c}}},{key:"removeColumn",value:function(t){"string"==typeof t?o=this.columns.indexOf(r=t):r=this.columns[o=t];var r,o,t=this.columns.splice(o+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(t);for(var n=0;n<this.rows.length;n++){var s=this.rows[n].arr,i=s.splice(o+1,s.length);s.pop(),this.rows[n].arr=s.concat(i),delete this.rows[n].obj[r]}}},{key:"set",value:function(t,r,o){this.rows[t].set(r,o)}},{key:"setNum",value:function(t,r,o){this.rows[t].setNum(r,o)}},{key:"setString",value:function(t,r,o){this.rows[t].setString(r,o)}},{key:"get",value:function(t,r){return this.rows[t].get(r)}},{key:"getNum",value:function(t,r){return this.rows[t].getNum(r)}},{key:"getString",value:function(t,r){return this.rows[t].getString(r)}},{key:"getObject",value:function(t){for(var r,o={},n=0;n<this.rows.length;n++)if(r=this.rows[n].obj,"string"==typeof t){if(!(0<=this.columns.indexOf(t)))throw Error('This table has no column named "'.concat(t,'"'));o[r[t]]=r}else o[n]=this.rows[n].obj;return o}},{key:"getArray",value:function(){for(var t=[],r=0;r<this.rows.length;r++)t.push(this.rows[r].arr);return t}}],s(o.prototype,t),r&&s(o,r),o}(),t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.splice":166,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194}],301:[function(t,r,o){function n(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.TableRow=function(){var t,r;function o(t,r){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");var n=[];t&&(n=t.split(r=r||",")),this.arr=n,this.obj=Object.fromEntries(n.entries()),this.table=null}return t=[{key:"set",value:function(t,r){if("string"==typeof t){var o=this.table.columns.indexOf(t);if(!(0<=o))throw Error('This table has no column named "'.concat(t,'"'));this.obj[t]=r,this.arr[o]=r}else{if(!(t<this.table.columns.length))throw Error("Column #".concat(t," is out of the range of this table"));this.arr[t]=r,o=this.table.columns[t],this.obj[o]=r}}},{key:"setNum",value:function(t,r){r=parseFloat(r),this.set(t,r)}},{key:"setString",value:function(t,r){r=r.toString(),this.set(t,r)}},{key:"get",value:function(t){return("string"==typeof t?this.obj:this.arr)[t]}},{key:"getNum",value:function(t){var r="string"==typeof t?parseFloat(this.obj[t]):parseFloat(this.arr[t]);if("NaN"===r.toString())throw"Error: ".concat(this.obj[t]," is NaN (Not a Number)");return r}},{key:"getString",value:function(t){return("string"==typeof t?this.obj:this.arr)[t].toString()}}],n(o.prototype,t),r&&n(o,r),o}(),t=t.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236}],302:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.XML=function(){var t,r;function o(t){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");t?this.DOM=t:(t=document.implementation.createDocument(null,"doc"),this.DOM=t.createElement("root"))}return t=[{key:"getParent",value:function(){return new n.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(t){var r=this.DOM.innerHTML,o=this.DOM.attributes,n=document.implementation.createDocument(null,"default").createElement(t);n.innerHTML=r;for(var s=0;s<o.length;s++)n.setAttribute(o[s].nodeName,o.nodeValue);this.DOM=n}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var t=[],r=0;r<this.DOM.childNodes.length;r++)t.push(this.DOM.childNodes[r].nodeName);return t}},{key:"getChildren",value:function(t){return function(t){for(var r=[],o=0;o<t.length;o++)r.push(new n.default.XML(t[o]));return r}(t?this.DOM.getElementsByTagName(t):this.DOM.children)}},{key:"getChild",value:function(t){if("string"!=typeof t)return new n.default.XML(this.DOM.children[t]);var r=!0,o=!1,s=void 0;try{for(var i,a=this.DOM.children[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var l=i.value;if(l.tagName===t)return new n.default.XML(l)}}catch(t){o=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}}},{key:"addChild",value:function(t){t instanceof n.default.XML&&this.DOM.appendChild(t.DOM)}},{key:"removeChild",value:function(t){var r=-1;if("string"==typeof t){for(var o=0;o<this.DOM.children.length;o++)if(this.DOM.children[o].tagName===t){r=o;break}}else r=t;-1!==r&&this.DOM.removeChild(this.DOM.children[r])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var t=[],r=!0,o=!1,n=void 0;try{for(var s,i=this.DOM.attributes[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var a=s.value;t.push(a.nodeName)}}catch(t){o=!0,n=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw n}}return t}},{key:"hasAttribute",value:function(t){var r={},o=!0,n=!1,s=void 0;try{for(var i,a=this.DOM.attributes[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var l=i.value;r[l.nodeName]=l.nodeValue}}catch(t){n=!0,s=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw s}}return!!r[t]}},{key:"getNum",value:function(t,r){var o={},n=!0,s=!1,i=void 0;try{for(var a,l=this.DOM.attributes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;o[u.nodeName]=u.nodeValue}}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}return Number(o[t])||r||0}},{key:"getString",value:function(t,r){var o={},n=!0,s=!1,i=void 0;try{for(var a,l=this.DOM.attributes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;o[u.nodeName]=u.nodeValue}}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}return o[t]?String(o[t]):r||null}},{key:"setAttribute",value:function(t,r){this.DOM.setAttribute(t,r)}},{key:"getContent",value:function(t){var r=this.DOM.textContent;return(r=r.replace(/\s\s+/g,","))||t||null}},{key:"setContent",value:function(t){this.DOM.children.length||(this.DOM.textContent=t)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}],s(o.prototype,t),r&&s(o,r),o}(),t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],303:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var t=arguments.length,r=[],o=0,n=0;n<t;n++){var s=arguments[n];if((s=+s)==1/0||s===-1/0)return 1/0;o<(s=Math.abs(s))&&(o=s),r[n]=s}0===o&&(o=1);for(var i=0,a=0,l=0;l<t;l++)var u=r[l]/o,u=u*u-a,c=i+u,a=c-i-u,i=c;return Math.sqrt(i)*o}n.default.prototype.abs=Math.abs,n.default.prototype.ceil=Math.ceil,n.default.prototype.constrain=function(t,r,o){return n.default._validateParameters("constrain",arguments),Math.max(Math.min(t,o),r)},n.default.prototype.dist=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.default._validateParameters("dist",r),4===r.length?s(r[2]-r[0],r[3]-r[1]):6===r.length?s(r[3]-r[0],r[4]-r[1],r[5]-r[2]):void 0},n.default.prototype.exp=Math.exp,n.default.prototype.floor=Math.floor,n.default.prototype.lerp=function(t,r,o){return n.default._validateParameters("lerp",arguments),o*(r-t)+t},n.default.prototype.log=Math.log,n.default.prototype.mag=function(t,r){return n.default._validateParameters("mag",arguments),s(t,r)},n.default.prototype.map=function(t,r,o,s,i,a){return n.default._validateParameters("map",arguments),t=(t-r)/(o-r)*(i-s)+s,a?s<i?this.constrain(t,s,i):this.constrain(t,i,s):t},n.default.prototype.max=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return function(t){var r=-1/0,o=!0,n=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(o=(i=a.next()).done);o=!0)var l=i.value,r=r<l?l:r}catch(t){n=!0,s=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw s}}return r}(r[0]instanceof Array?r[0]:r)},n.default.prototype.min=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return function(t){var r=1/0,o=!0,n=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(o=(i=a.next()).done);o=!0)var l=i.value,r=l<r?l:r}catch(t){n=!0,s=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw s}}return r}(r[0]instanceof Array?r[0]:r)},n.default.prototype.norm=function(t,r,o){return n.default._validateParameters("norm",arguments),this.map(t,r,o,0,1)},n.default.prototype.pow=Math.pow,n.default.prototype.round=function(t,r){return r?Math.round(t*(r=Math.pow(10,r)))/r:Math.round(t)},n.default.prototype.sq=function(t){return t*t},n.default.prototype.sqrt=Math.sqrt,n.default.prototype.fract=function(t){n.default._validateParameters("fract",arguments);var r,o=0,t=Number(t);return isNaN(t)||Math.abs(t)===1/0?t:(t<0&&(t=-t,o=1),String(t).includes(".")&&!String(t).includes("e")?Math.abs(o-(r=Number("0"+(r=String(t)).slice(r.indexOf("."))))):t<1?Math.abs(o-t):0)},t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],304:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r,o){return(s=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?function(t,r,o){var n=[null];return n.push.apply(n,r),r=new(Function.bind.apply(t,n)),o&&i(r,o.prototype),r}:Reflect.construct).apply(null,arguments)}function i(t,r){return(i=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}n.default.prototype.createVector=function(t,r,o){return this instanceof n.default?s(n.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new n.default.Vector(t,r,o)},t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186}],305:[function(t,r,o){function n(t){return .5*(1-Math.cos(t*Math.PI))}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s,i=4,a=.5,t=((t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.noise=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==s){s=Array(4096);for(var l=0;l<4096;l++)s[l]=Math.random()}t<0&&(t=-t),r<0&&(r=-r),o<0&&(o=-o);for(var u,c,d=Math.floor(t),h=Math.floor(r),f=Math.floor(o),p=t-d,m=r-h,y=o-f,g=0,v=.5,b=0;b<i;b++){var x=d+(h<<4)+(f<<8),j=n(p),w=n(m),S=s[4095&x];S+=j*(s[x+1&4095]-S),u=s[x+16&4095],S+=w*((u+=j*(s[x+16+1&4095]-u))-S),u=s[4095&(x+=256)],u+=j*(s[x+1&4095]-u),c=s[x+16&4095],u+=w*((c+=j*(s[x+16+1&4095]-c))-u),g+=(S+=n(y)*(u-S))*v,v*=a,d<<=1,h<<=1,f<<=1,1<=(p*=2)&&(d++,p--),1<=(m*=2)&&(h++,m--),1<=(y*=2)&&(f++,y--)}return g},t.default.prototype.noiseDetail=function(t,r){0<t&&(i=t),0<r&&(a=r)},t.default.prototype.noiseSeed=function(t){var r,o,n={setSeed:function(t){o=r=(null==t?4294967296*Math.random():t)>>>0},getSeed:function(){return r},rand:function(){return(o=(1664525*o+1013904223)%4294967296)/4294967296}};n.setSeed(t),s=Array(4096);for(var i=0;i<4096;i++)s[i]=n.rand()},t.default);o.default=t},{"../core/main":273}],306:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(h=t("../core/main"))&&h.__esModule?h:{default:h},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r){return 0!==t&&(this.x=this.x%t),0!==r&&(this.y=this.y%r),this}function d(t,r,o){return 0!==t&&(this.x=this.x%t),0!==r&&(this.y=this.y%r),0!==o&&(this.z=this.z%o),this}i.default.Vector=function(){var t,r;function o(){var t=this;if(!(t instanceof o))throw TypeError("Cannot call a class as a function");var r,n,t="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],r=(arguments.length<=2?void 0:arguments[2])||0,n=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(r=(arguments.length<=0?void 0:arguments[0])||0,n=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=r,this.y=n,this.z=t}return r=[{key:"fromAngle",value:function(t,r){return new i.default.Vector((r=void 0===r?1:r)*Math.cos(t),r*Math.sin(t),0)}},{key:"fromAngles",value:function(t,r,o){void 0===o&&(o=1);var n=Math.cos(r),r=Math.sin(r),s=Math.cos(t),t=Math.sin(t);return new i.default.Vector(o*t*r,-o*s,o*t*n)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*a.TWO_PI)}},{key:"random3D",value:function(){var t=Math.random()*a.TWO_PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r),n=o*Math.cos(t),o=o*Math.sin(t);return new i.default.Vector(n,o,r)}},{key:"copy",value:function(t){return t.copy(t)}},{key:"add",value:function(t,r,o){return o?o.set(t):(o=t.copy(),3==arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),o.add(r),o}},{key:"rem",value:function(t,r){if(t instanceof i.default.Vector&&r instanceof i.default.Vector)return(t=t.copy()).rem(r),t}},{key:"sub",value:function(t,r,o){return o?o.set(t):(o=t.copy(),3==arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),o.sub(r),o}},{key:"mult",value:function(t,r,o){return o?o.set(t):(o=t.copy(),3==arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),o.mult(r),o}},{key:"rotate",value:function(t,r,o){return 2==arguments.length?o=t.copy():(o instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),o.set(t)),o.rotate(r),o}},{key:"div",value:function(t,r,o){return o?o.set(t):(o=t.copy(),3==arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),o.div(r),o}},{key:"dot",value:function(t,r){return t.dot(r)}},{key:"cross",value:function(t,r){return t.cross(r)}},{key:"dist",value:function(t,r){return t.dist(r)}},{key:"lerp",value:function(t,r,o,n){return n?n.set(t):(n=t.copy(),4==arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),n.lerp(r,o),n}},{key:"slerp",value:function(t,r,o,n){return n?n.set(t):(n=t.copy(),4==arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),n.slerp(r,o),n}},{key:"mag",value:function(t){return t.mag()}},{key:"magSq",value:function(t){return t.magSq()}},{key:"normalize",value:function(t,r){return arguments.length<2?r=t.copy():(r instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),r.set(t)),r.normalize()}},{key:"limit",value:function(t,r,o){return arguments.length<3?o=t.copy():(o instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),o.set(t)),o.limit(r)}},{key:"setMag",value:function(t,r,o){return arguments.length<3?o=t.copy():(o instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),o.set(t)),o.setMag(r)}},{key:"heading",value:function(t){return t.heading()}},{key:"angleBetween",value:function(t,r){return t.angleBetween(r)}},{key:"reflect",value:function(t,r,o){return arguments.length<3?o=t.copy():(o instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),o.set(t)),o.reflect(r)}},{key:"array",value:function(t){return t.array()}},{key:"equals",value:function(t,r){var o;return t instanceof i.default.Vector?o=t:t instanceof Array?o=(new i.default.Vector).set(t):i.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),o.equals(r)}}],t=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(t,r,o){return t instanceof i.default.Vector?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):Array.isArray(t)?(this.x=t[0]||0,this.y=t[1]||0,this.z=t[2]||0):(this.x=t||0,this.y=r||0,this.z=o||0),this}},{key:"copy",value:function(){return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new i.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(t,r,o){return t instanceof i.default.Vector?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0):Array.isArray(t)?(this.x+=t[0]||0,this.y+=t[1]||0,this.z+=t[2]||0):(this.x+=t||0,this.y+=r||0,this.z+=o||0),this}},{key:"rem",value:function(t,r,o){var n;if(t instanceof i.default.Vector){if([t.x,t.y,t.z].every(Number.isFinite))return s=parseFloat(t.x),a=parseFloat(t.y),n=parseFloat(t.z),d.call(this,s,a,n)}else if(Array.isArray(t)){if(t.every(function(t){return Number.isFinite(t)}))return 2===t.length?c.call(this,t[0],t[1]):3===t.length?d.call(this,t[0],t[1],t[2]):void 0}else if(1==arguments.length){if(Number.isFinite(t)&&0!==t)return this.x=this.x%t,this.y=this.y%t,this.z=this.z%t,this}else if(2==arguments.length){var s=Array.prototype.slice.call(arguments);if(s.every(function(t){return Number.isFinite(t)})&&2===s.length)return c.call(this,s[0],s[1])}else if(3==arguments.length){var a=Array.prototype.slice.call(arguments);if(a.every(function(t){return Number.isFinite(t)})&&3===a.length)return d.call(this,a[0],a[1],a[2])}}},{key:"sub",value:function(t,r,o){return t instanceof i.default.Vector?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0):Array.isArray(t)?(this.x-=t[0]||0,this.y-=t[1]||0,this.z-=t[2]||0):(this.x-=t||0,this.y-=r||0,this.z-=o||0),this}},{key:"mult",value:function(t,r,o){var n;return t instanceof i.default.Vector?Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(t.z)&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.z?(this.x*=t.x,this.y*=t.y,this.z*=t.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(t)?t.every(function(t){return Number.isFinite(t)})&&t.every(function(t){return"number"==typeof t})?1===t.length?(this.x*=t[0],this.y*=t[0],this.z*=t[0]):2===t.length?(this.x*=t[0],this.y*=t[1]):3===t.length&&(this.x*=t[0],this.y*=t[1],this.z*=t[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(n=Array.prototype.slice.call(arguments)).every(function(t){return Number.isFinite(t)})&&n.every(function(t){return"number"==typeof t})?(1==arguments.length&&(this.x*=t,this.y*=t,this.z*=t),2==arguments.length&&(this.x*=t,this.y*=r),3==arguments.length&&(this.x*=t,this.y*=r,this.z*=o)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(t,r,o){if(t instanceof i.default.Vector){if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(t.z)&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.z){var n=0===t.z&&0===this.z;if(0===t.x||0===t.y||!n&&0===t.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=t.x,this.y/=t.y,n||(this.z/=t.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers")}else if(Array.isArray(t)){if(t.every(function(t){return Number.isFinite(t)})&&t.every(function(t){return"number"==typeof t})){if(t.some(function(t){return 0===t}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===t.length?(this.x/=t[0],this.y/=t[0],this.z/=t[0]):2===t.length?(this.x/=t[0],this.y/=t[1]):3===t.length&&(this.x/=t[0],this.y/=t[1],this.z/=t[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers")}else if(n=Array.prototype.slice.call(arguments),n.every(function(t){return Number.isFinite(t)})&&n.every(function(t){return"number"==typeof t})){if(n.some(function(t){return 0===t}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1==arguments.length&&(this.x/=t,this.y/=t,this.z/=t),2==arguments.length&&(this.x/=t,this.y/=r),3==arguments.length&&(this.x/=t,this.y/=r,this.z/=o)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var t=this.x,r=this.y,o=this.z;return t*t+r*r+o*o}},{key:"dot",value:function(t,r,o){return t instanceof i.default.Vector?this.dot(t.x,t.y,t.z):this.x*(t||0)+this.y*(r||0)+this.z*(o||0)}},{key:"cross",value:function(t){var r=this.y*t.z-this.z*t.y,o=this.z*t.x-this.x*t.z,t=this.x*t.y-this.y*t.x;return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,r,o,t):new i.default.Vector(r,o,t)}},{key:"dist",value:function(t){return t.copy().sub(this).mag()}},{key:"normalize",value:function(){var t=this.mag();return 0!==t&&this.mult(1/t),this}},{key:"limit",value:function(t){var r=this.magSq();return t*t<r&&this.div(Math.sqrt(r)).mult(t),this}},{key:"setMag",value:function(t){return this.normalize().mult(t)}},{key:"heading",value:function(){var t=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(t):t}},{key:"setHeading",value:function(t){this.isPInst&&(t=this._toRadians(t));var r=this.mag();return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this}},{key:"rotate",value:function(t){var t=this.heading()+t,r=(this.isPInst&&(t=this._toRadians(t)),this.mag());return this.x=Math.cos(t)*r,this.y=Math.sin(t)*r,this}},{key:"angleBetween",value:function(t){var r;return 0==this.magSq()*t.magSq()?NaN:(t=Math.atan2((r=this.cross(t)).mag(),this.dot(t))*Math.sign(r.z||1),this.isPInst?this._fromRadians(t):t)}},{key:"lerp",value:function(t,r,o,n){return t instanceof i.default.Vector?this.lerp(t.x,t.y,t.z,r):(this.x+=(t-this.x)*n||0,this.y+=(r-this.y)*n||0,this.z+=(o-this.z)*n||0,this)}},{key:"slerp",value:function(t,r){if(0!==r){if(1===r)return this.set(t);var o=this.mag(),n=t.mag();if(0==o*n)this.mult(1-r).add(t.x*r,t.y*r,t.z*r);else{var s=this.cross(t),i=s.mag(),a=Math.atan2(i,this.dot(t));if(0<i)s.x/=i,s.y/=i,s.z/=i;else{if(a<.5*Math.PI)return this.mult(1-r).add(t.x*r,t.y*r,t.z*r),this;0===this.z&&0===t.z?s.set(0,0,1):0!==this.x?s.set(this.y,-this.x,0).normalize():s.set(1,0,0)}i=s.cross(this),s=(t=1-r+r*n/o)*Math.cos(r*a),n=t*Math.sin(r*a),this.x=this.x*s+i.x*n,this.y=this.y*s+i.y*n,this.z=this.z*s+i.z*n}}return this}},{key:"reflect",value:function(t){return t.normalize(),this.sub(t.mult(2*this.dot(t)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(t,r,o){var n,s,t=t instanceof i.default.Vector?(n=t.x||0,s=t.y||0,t.z||0):Array.isArray(t)?(n=t[0]||0,s=t[1]||0,t[2]||0):(n=t||0,s=r||0,o||0);return this.x===n&&this.y===s&&this.z===t}}],u(o.prototype,t),r&&u(o,r),o}();var h=i.default.Vector;o.default=h},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.constructor":171,"core-js/modules/es.number.is-finite":172,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],307:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t},s="_lcg_random_state",i=0,t=(n.default.prototype._lcg=function(t){return this[t]=(1664525*this[t]+1013904223)%4294967296,this[t]/4294967296},n.default.prototype._lcgSetSeed=function(t,r){this[t]=(null==r?4294967296*Math.random():r)>>>0},n.default.prototype.randomSeed=function(t){this._lcgSetSeed(s,t),this._gaussian_previous=!1},n.default.prototype.random=function(t,r){var o,i;return n.default._validateParameters("random",arguments),o=null!=this[s]?this._lcg(s):Math.random(),void 0===t?o:void 0===r?t instanceof Array?t[Math.floor(o*t.length)]:o*t:(r<t&&(i=t,t=r,r=i),o*(r-t)+t)},n.default.prototype.randomGaussian=function(t){var r,o,n,s,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)r=i,this._gaussian_previous=!1;else{for(;1<=(s=(o=this.random(2)-1)*o+(n=this.random(2)-1)*n););r=o*(s=Math.sqrt(-2*Math.log(s)/s)),i=n*s,this._gaussian_previous=!0}return r*a+(t||0)},n.default);o.default=t},{"../core/main":273}],308:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}i.default.prototype._angleMode=a.RADIANS,i.default.prototype.acos=function(t){return this._fromRadians(Math.acos(t))},i.default.prototype.asin=function(t){return this._fromRadians(Math.asin(t))},i.default.prototype.atan=function(t){return this._fromRadians(Math.atan(t))},i.default.prototype.atan2=function(t,r){return this._fromRadians(Math.atan2(t,r))},i.default.prototype.cos=function(t){return Math.cos(this._toRadians(t))},i.default.prototype.sin=function(t){return Math.sin(this._toRadians(t))},i.default.prototype.tan=function(t){return Math.tan(this._toRadians(t))},i.default.prototype.degrees=function(t){return t*a.RAD_TO_DEG},i.default.prototype.radians=function(t){return t*a.DEG_TO_RAD},i.default.prototype.angleMode=function(t){if(i.default._validateParameters("angleMode",arguments),void 0===t)return this._angleMode;t!==a.DEGREES&&t!==a.RADIANS||(this._angleMode=t)},i.default.prototype._toRadians=function(t){return this._angleMode===a.DEGREES?t*a.DEG_TO_RAD:t},i.default.prototype._toDegrees=function(t){return this._angleMode===a.RADIANS?t*a.RAD_TO_DEG:t},i.default.prototype._fromRadians=function(t){return this._angleMode===a.DEGREES?t*a.RAD_TO_DEG:t};var u=i.default;o.default=u},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],309:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.textAlign=function(t,r){var o;return n.default._validateParameters("textAlign",arguments),(o=this._renderer).textAlign.apply(o,arguments)},n.default.prototype.textLeading=function(t){var r;return n.default._validateParameters("textLeading",arguments),(r=this._renderer).textLeading.apply(r,arguments)},n.default.prototype.textSize=function(t){var r;return n.default._validateParameters("textSize",arguments),(r=this._renderer).textSize.apply(r,arguments)},n.default.prototype.textStyle=function(t){var r;return n.default._validateParameters("textStyle",arguments),(r=this._renderer).textStyle.apply(r,arguments)},n.default.prototype.textWidth=function(){for(var t,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return o[0]+="",n.default._validateParameters("textWidth",o),0===o[0].length?0:(t=this._renderer).textWidth.apply(t,o)},n.default.prototype.textAscent=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.default._validateParameters("textAscent",r),this._renderer.textAscent()},n.default.prototype.textDescent=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.default._validateParameters("textDescent",r),this._renderer.textDescent()},n.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},n.default.prototype.textWrap=function(t){if("WORD"!==t&&"CHAR"!==t)throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(t)},t=n.default,o.default=t},{"../core/main":273}],310:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(d=t("../core/main"))&&d.__esModule?d:{default:d},a=c(t("../core/constants")),l=c(t("opentype.js"));function u(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,u=function(){return t},t)}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r=u();if(r&&r.has(t))return r.get(t);var o,n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&((n=a?Object.getOwnPropertyDescriptor(t,o):null)&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]);return i.default=t,r&&r.set(t,i),i}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(t,r,o){i.default._validateParameters("loadFont",arguments);var n=new i.default.Font(this),s=this;return l.load(t,function(a,l){if(a)return i.default._friendlyFileLoadError(4,t),void 0!==o?o(a):void console.error(a,t);n.font=l,void 0!==r&&r(n),s._decrementPreload();var a=t.split("\\").pop().split("/").pop(),l=a.lastIndexOf("."),u=l<1?null:a.slice(l+1);["ttf","otf","woff","woff2"].includes(u)&&(u=a.slice(0,-1!==l?l:0),(a=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(u,";\nsrc: url(").concat(t,");\n}\n"))),document.head.appendChild(a))}),n},i.default.prototype.text=function(t,r,o,n,s){var a;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(a=this._renderer).text.apply(a,arguments):this},i.default.prototype.textFont=function(t,r){if(i.default._validateParameters("textFont",arguments),arguments.length){if(t)return this._renderer._setProperty("_textFont",t),r&&(this._renderer._setProperty("_textSize",r),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",r*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw Error("null font passed to textFont")}return this._renderer._textFont};var d=i.default;o.default=d},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,"opentype.js":247}],311:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(s=t("../core/main"))&&s.__esModule?s:{default:s},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("../core/constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r){var o=t.length;return t[r<0?r%o+o:r%o]}function d(t,r,o,n){var s,i;return n?(void 0===d.tmpPoint1&&(d.tmpPoint1=[],d.tmpPoint2=[]),s=d.tmpPoint1,i=d.tmpPoint2,s.x=r.x-t.x,s.y=r.y-t.y,i.x=o.x-r.x,i.y=o.y-r.y,Math.acos((s.x*i.x+s.y*i.y)/((s=Math.sqrt(s.x*s.x+s.y*s.y))*(i=Math.sqrt(i.x*i.x+i.y*i.y))))<n):0==(r[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(r[1]-t[1])}function h(t,r,o,n,s,i,a,l,u){var c=1-u,d=Math.pow(c,3),h=Math.pow(c,2),f=u*u,p=f*u,m=d*t+3*h*u*o+3*c*u*u*s+p*a,d=d*r+3*h*u*n+3*c*u*u*i+p*l,h=t+2*u*(o-t)+f*(s-2*o+t),p=r+2*u*(n-r)+f*(i-2*n+r),y=o+2*u*(s-o)+f*(a-2*s+o),f=n+2*u*(i-n)+f*(l-2*i+n),t=c*t+u*o,o=c*r+u*n,r=c*s+u*a,n=c*i+u*l,s=90-180*Math.atan2(h-y,p-f)/Math.PI;return(y<h||p<f)&&(s+=180),{x:m,y:d,m:{x:h,y:p},n:{x:y,y:f},start:{x:t,y:o},end:{x:r,y:n},alpha:s}}function f(t,r,o,n,s,i,a,l,u){return null==u?v(t,r,o,n,s,i,a,l):h(t,r,o,n,s,i,a,l,function(t,r,o,n,s,i,a,l,u){if(!(u<0||v(t,r,o,n,s,i,a,l)<u)){var c,d=.5,h=.5;for(c=v(t,r,o,n,s,i,a,l,.5);.01<Math.abs(c-u);)c=v(t,r,o,n,s,i,a,l,h+=(c<u?1:-1)*(d/=2));return h}}(t,r,o,n,s,i,a,l,u))}function p(t,r,o){for(var n,s,i,a,l,u=0,c=0,d=(t=function(t,r){function o(t,r,o){var n,s,i,a,l,u,c,d,h,f,p,m,y,v,b,x,j,w;if(!t)return["C",r.x,r.y,r.x,r.y,r.x,r.y];switch((t[0]in{T:1,Q:1})||(r.qx=r.qy=null),t[0]){case"M":r.X=t[1],r.Y=t[2];break;case"A":t=["C"].concat((function t(r,o,n,s,i,a,l,u,c,d){function h(t,r,o){return{x:t*Math.cos(o)-r*Math.sin(o),y:t*Math.sin(o)+r*Math.cos(o)}}var f,p=Math.PI,m=120*p/180,y=p/180*(+i||0),g=[],v=(d?(T=d[0],f=d[1],w=d[2],S=d[3]):(r=(x=h(r,o,-y)).x,o=x.y,1<(v=(b=(r-(u=(x=h(u,c,-y)).x))/2)*b/(n*n)+(x=(o-(c=x.y))/2)*x/(s*s))&&(n*=v=Math.sqrt(v),s*=v),w=(a=(a===l?-1:1)*Math.sqrt(Math.abs(((v=n*n)*(j=s*s)-v*x*x-j*b*b)/(v*x*x+j*b*b))))*n*x/s+(r+u)/2,S=-(a*s)*b/n+(o+c)/2,T=Math.asin(((o-S)/s).toFixed(9)),f=Math.asin(((c-S)/s).toFixed(9)),(T=r<w?p-T:T)<0&&(T=2*p+T),(f=u<w?p-f:f)<0&&(f=2*p+f),l&&f<T&&(T-=2*p),!l&&T<f&&(f-=2*p)),f-T),b=(Math.abs(v)>m&&(j=f,x=u,a=c,g=t(u=w+n*Math.cos(f=T+m*(l&&T<f?1:-1)),c=S+s*Math.sin(f),n,s,i,0,l,x,a,[f,j,w,S])),v=f-T,Math.cos(T)),p=Math.sin(T),m=Math.cos(f),i=Math.sin(f),l=Math.tan(v/4),x=4/3*n*l,a=4/3*s*l,j=[r,o],w=[r+x*p,o-a*b],S=[u+x*i,c-a*m],T=[u,c];if(w[0]=2*j[0]-w[0],w[1]=2*j[1]-w[1],d)return[w,S,T].concat(g);for(var E=[],k=0,M=(g=[w,S,T].concat(g).join().split(",")).length;k<M;k++)E[k]=k%2?h(g[k-1],g[k],y).y:h(g[k],g[k+1],y).x;return E}).apply(0,[r.x,r.y].concat(t.slice(1))));break;case"S":s="C"===o||"S"===o?(n=2*r.x-r.bx,2*r.y-r.by):(n=r.x,r.y),t=["C",n,s].concat(t.slice(1));break;case"T":"Q"===o||"T"===o?(r.qx=2*r.x-r.qx,r.qy=2*r.y-r.qy):(r.qx=r.x,r.qy=r.y),t=["C"].concat(g(r.x,r.y,r.qx,r.qy,t[1],t[2]));break;case"Q":r.qx=t[1],r.qy=t[2],t=["C"].concat(g(r.x,r.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat((i=r.x,a=r.y,[i,a,l=t[1],u=t[2],l,u]));break;case"H":t=["C"].concat((c=r.x,d=r.y,[c,d,h=t[1],f=r.y,h,f]));break;case"V":t=["C"].concat((p=r.x,m=r.y,[p,m,y=r.x,v=t[1],y,v]));break;case"Z":t=["C"].concat((b=r.x,x=r.y,[b,x,j=r.X,w=r.Y,j,w]))}return t}function n(t,r){if(7<t[r].length){t[r].shift();for(var o=t[r];o.length;)d[r]="A",l&&(h[r]="A"),t.splice(r++,0,["C"].concat(o.splice(0,6)));t.splice(r,1),i=Math.max(a.length,l&&l.length||0)}}function s(t,r,o,n,s){t&&r&&"M"===t[s][0]&&"M"!==r[s][0]&&(r.splice(s,0,["M",n.x,n.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],i=Math.max(a.length,l&&l.length||0))}var i,a=m(t),l=r&&m(r),u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d=[],h=[],f="",p="";i=Math.max(a.length,l&&l.length||0);for(var y=0;y<i;y++){"C"!==(f=a[y]?a[y][0]:f)&&(d[y]=f,y&&(p=d[y-1])),a[y]=o(a[y],u,p),"A"!==d[y]&&"C"===f&&(d[y]="C"),n(a,y),l&&("C"!==(f=l[y]?l[y][0]:f)&&(h[y]=f,y&&(p=h[y-1])),l[y]=o(l[y],c,p),"A"!==h[y]&&"C"===f&&(h[y]="C"),n(l,y)),s(a,l,u,c,y),s(l,a,c,u,y);var v=a[y],b=l&&l[y],x=v.length,j=l&&b.length;u.x=v[x-2],u.y=v[x-1],u.bx=parseFloat(v[x-4])||u.x,u.by=parseFloat(v[x-3])||u.y,c.bx=l&&(parseFloat(b[j-4])||c.x),c.by=l&&(parseFloat(b[j-3])||c.y),c.x=l&&b[j-2],c.y=l&&b[j-1]}return l?[a,l]:a}(t)).length;c<d;c++){if("M"===(i=t[c])[0])n=+i[1],s=+i[2];else{if(r<u+(a=f(n,s,i[1],i[2],i[3],i[4],i[5],i[6]))&&!o)return{x:(l=f(n,s,i[1],i[2],i[3],i[4],i[5],i[6],r-u)).x,y:l.y,alpha:l.alpha};u+=a,n=+i[5],s=+i[6]}i.shift()}return(l=o?u:h(n,s,i[0],i[1],i[2],i[3],i[4],i[5],1)).alpha?{x:l.x,y:l.y,alpha:l.alpha}:l}function m(t){var r=[],o=0,n=0,s=0,i=0,a=0;if(t){"M"===t[0][0]&&(s=o=+t[0][1],i=n=+t[0][2],a++,r[0]=["M",o,n]);for(var l,u,c=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),d=a,h=t.length;d<h;d++){if(r.push(l=[]),(u=t[d])[0]!==String.prototype.toUpperCase.call(u[0]))switch(l[0]=String.prototype.toUpperCase.call(u[0]),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+(u[6]+o),l[7]=+(u[7]+n);break;case"V":l[1]=+u[1]+n;break;case"H":l[1]=+u[1]+o;break;case"R":for(var f,p=2,m=(f=[o,n].concat(u.slice(1))).length;p<m;p++)f[p]=+f[p]+o,f[++p]=+f[p]+n;r.pop(),r=r.concat(y(f,c));break;case"M":s=+u[1]+o,i=+u[2]+n;break;default:for(var g=1,v=u.length;g<v;g++)l[g]=+u[g]+(g%2?o:n)}else if("R"===u[0])f=[o,n].concat(u.slice(1)),r.pop(),r=r.concat(y(f,c)),l=["R"].concat(u.slice(-2));else for(var b=0,x=u.length;b<x;b++)l[b]=u[b];switch(l[0]){case"Z":o=s,n=i;break;case"H":o=l[1];break;case"V":n=l[1];break;case"M":s=l[l.length-2],i=l[l.length-1];break;default:o=l[l.length-2],n=l[l.length-1]}}}return r}function y(t,r){for(var o=[],n=0,s=t.length;n<s-2*!r;n+=2){var i=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];r?n?s-4===n?i[3]={x:+t[0],y:+t[1]}:s-2===n&&(i[2]={x:+t[0],y:+t[1]},i[3]={x:+t[2],y:+t[3]}):i[0]={x:+t[s-2],y:+t[s-1]}:s-4===n?i[3]=i[2]:n||(i[0]={x:+t[n],y:+t[n+1]}),o.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return o}function g(t,r,o,n,s,i){return[1/3*t+2/3*o,1/3*r+2/3*n,1/3*s+2/3*o,1/3*i+2/3*n,s,i]}function v(t,r,o,n,s,i,a,l,u){for(var c=(u=1<(u=null==u?1:u)?1:u<0?0:u)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=0,f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;p<12;p++){var m=c*d[p]+c,y=b(m,t,o,s,a),m=b(m,r,n,i,l);h+=f[p]*Math.sqrt(y*y+m*m)}return c*h}function b(t,r,o,n,s){return t*(t*(-3*r+9*o-9*n+3*s)+6*r-12*o+6*n)-3*r+3*o}s.default.Font=function(){var t,r;function o(t){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this.parent=t,this.cache={},this.font=void 0}return t=[{key:"textBounds",value:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length?arguments[3]:void 0,s=4<arguments.length?arguments[4]:void 0,a=s&&s.renderer&&s.renderer._pInst||this.parent,l=a._renderer.drawingContext,n=(l.textAlign||i.LEFT,l.textBaseline||i.BASELINE,n||a._renderer._textSize);if(!b){for(var u=[],c=[],d=[],h=(d[0]=[],[]),f=this._scale(n),p=a._renderer.textLeading(),m=0,y=(this.font.forEachGlyph(t,r,o,n,s,function(t,r,o,n){var s=t.getMetrics();0===t.index||10===t.index?d[m+=1]=[]:(d[m].push(r+s.xMin*f),d[m].push(r+s.xMax*f),h.push(o+m*p+-s.yMin*f),h.push(o+m*p+-s.yMax*f))}),0<d[m].length&&(u[m]=Math.min.apply(null,d[m]),c[m]=Math.max.apply(null,d[m])),0),g=0;g<=m;g++){u[g]=Math.min.apply(null,d[g]),c[g]=Math.max.apply(null,d[g]);var v=c[g]-u[g];y<v&&(y=v)}var l=Math.min.apply(null,u),b={x:l,y:o=Math.min.apply(null,h),h:Math.max.apply(null,h)-o,w:y,advance:l-r},n=this._handleAlignment(a._renderer,t,b.x,b.y,b.w+b.advance);b.x=n.x,b.y=n.y}return b}},{key:"textToPoints",value:function(t,r,o,n,s){var i=0,a=[],u=this._getGlyphs(t);n=n||this.parent._renderer._textSize;for(var h,f=0;f<u.length;f++){if(!(u[h=f].name&&"space"===u[h].name||t.length===u.length&&" "===t[h]))for(var m=function(t){for(var r,o=[],n=0;n<t.length;n++)"M"===t[n].type&&(r&&o.push(r),r=[]),r.push(function(t){var r=[t.type];return"M"===t.type||"L"===t.type?r.push(t.x,t.y):"C"===t.type?r.push(t.x1,t.y1,t.x2,t.y2,t.x,t.y):"Q"===t.type&&r.push(t.x1,t.y1,t.x,t.y),r}(t[n]));return o.push(r),o}(u[f].getPath(r,o,n).commands),y=0;y<m.length;y++)for(var g=function(t,r){for(var r=function(t,r){if("object"!==l(t))t=r;else for(var o in r)void 0===t[o]&&(t[o]=r[o]);return t}(r,{sampleFactor:.1,simplifyThreshold:0}),o=p(t,0,1),n=o/(o*r.sampleFactor),s=[],i=0;i<o;i+=n)s.push(p(t,i));return r.simplifyThreshold&&function(t){for(var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=t.length-1;3<t.length&&0<=o;--o)d(c(t,o-1),c(t,o),c(t,o+1),r)&&t.splice(o%t.length,1)}(s,r.simplifyThreshold),s}(m[y],s),v=0;v<g.length;v++)g[v].x+=i,a.push(g[v]);i+=u[f].advanceWidth*this._scale(n)}return a}},{key:"_getGlyphs",value:function(t){return this.font.stringToGlyphs(t)}},{key:"_getPath",value:function(t,r,o,n){var s=(n&&n.renderer&&n.renderer._pInst||this.parent)._renderer,r=this._handleAlignment(s,t,r,o);return this.font.getPath(t,r.x,r.y,s._textSize,n)}},{key:"_getPathData",value:function(t,r,o,n){var s=3;return"string"==typeof t&&2<arguments.length?t=this._getPath(t,r,o,n):"object"===l(r)&&(n=r),n&&"number"==typeof n.decimals&&(s=n.decimals),t.toPathData(s)}},{key:"_getSVG",value:function(t,r,o,n){var s=3;return"string"==typeof t&&2<arguments.length?t=this._getPath(t,r,o,n):"object"===l(r)&&(n=r),n&&("number"==typeof n.decimals&&(s=n.decimals),"number"==typeof n.strokeWidth&&(t.strokeWidth=n.strokeWidth),void 0!==n.fill&&(t.fill=n.fill),void 0!==n.stroke&&(t.stroke=n.stroke)),t.toSVG(s)}},{key:"_renderPath",value:function(t,r,o,n){var s=n&&n.renderer||this.parent._renderer,a=s.drawingContext,t=("object"===l(t)&&t.commands?t:this._getPath(t,r,o,n)).commands,u=(a.beginPath(),!0),r=!1,o=void 0;try{for(var c,d=t[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var h=c.value;"M"===h.type?a.moveTo(h.x,h.y):"L"===h.type?a.lineTo(h.x,h.y):"C"===h.type?a.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,h.x,h.y):"Q"===h.type?a.quadraticCurveTo(h.x1,h.y1,h.x,h.y):"Z"===h.type&&a.closePath()}}catch(t){r=!0,o=t}finally{try{u||null==d.return||d.return()}finally{if(r)throw o}}return s._doStroke&&s._strokeSet&&a.stroke(),s._doFill&&(s._fillSet||s._setFill(i._DEFAULT_TEXT_FILL),a.fill()),this}},{key:"_textWidth",value:function(t,r){return this.font.getAdvanceWidth(t,r)}},{key:"_textAscent",value:function(t){return this.font.ascender*this._scale(t)}},{key:"_textDescent",value:function(t){return-this.font.descender*this._scale(t)}},{key:"_scale",value:function(t){return 1/this.font.unitsPerEm*(t||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(t,r,o,n,s){var a=t._textSize;switch(void 0===s&&(s=this._textWidth(r,a)),t._textAlign){case i.CENTER:o-=s/2;break;case i.RIGHT:o-=s}switch(t._textBaseline){case i.TOP:n+=this._textAscent(a);break;case i.CENTER:n+=this._textAscent(a)/2;break;case i.BOTTOM:n-=this._textDescent(a)}return{x:o,y:n}}}],u(o.prototype,t),r&&u(o,r),o}(),t=s.default,o.default=t},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],312:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.append=function(t,r){return t.push(r),t},t.default.prototype.arrayCopy=function(t,r,o,n,s){var i,a;t=void 0!==s?(a=Math.min(s,t.length),i=n,t.slice(r,a+r)):(a=void 0!==o?Math.min(a=o,t.length):t.length,o=r,t.slice(i=0,a)),Array.prototype.splice.apply(o,[i,a].concat(t))},t.default.prototype.concat=function(t,r){return t.concat(r)},t.default.prototype.reverse=function(t){return t.reverse()},t.default.prototype.shorten=function(t){return t.pop(),t},t.default.prototype.shuffle=function(t,r){for(var o,n,s=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t),i=(t=r||s?t:t.slice()).length;1<i;)o=this.random(0,1)*i|0,n=t[--i],t[i]=t[o],t[o]=n;return t},t.default.prototype.sort=function(t,r){var o=r?t.slice(0,Math.min(r,t.length)):t,r=r?t.slice(Math.min(r,t.length)):[];return(o="string"==typeof o[0]?o.sort():o.sort(function(t,r){return t-r})).concat(r)},t.default.prototype.splice=function(t,r,o){return Array.prototype.splice.apply(t,[o,0].concat(r)),t},t.default.prototype.subset=function(t,r,o){return void 0!==o?t.slice(r,r+o):t.slice(r,t.length)},t=t.default,o.default=t},{"../core/main":273,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180}],313:[function(t,r,o){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.float=function(t){return t instanceof Array?t.map(parseFloat):parseFloat(t)},n.default.prototype.int=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return t===1/0||"Infinity"===t?1/0:t===-1/0||"-Infinity"===t?-1/0:"string"==typeof t?parseInt(t,r):"number"==typeof t?0|t:"boolean"==typeof t?t?1:0:t instanceof Array?t.map(function(t){return n.default.prototype.int(t,r)}):void 0},n.default.prototype.str=function(t){return t instanceof Array?t.map(n.default.prototype.str):String(t)},n.default.prototype.boolean=function(t){return"number"==typeof t?0!==t:"string"==typeof t?"true"===t.toLowerCase():"boolean"==typeof t?t:t instanceof Array?t.map(n.default.prototype.boolean):void 0},n.default.prototype.byte=function(t){return"number"==typeof(t=n.default.prototype.int(t,10))?(t+128)%256-128:t instanceof Array?t.map(n.default.prototype.byte):void 0},n.default.prototype.char=function(t){return"number"!=typeof t||isNaN(t)?t instanceof Array?t.map(n.default.prototype.char):"string"==typeof t?n.default.prototype.char(parseInt(t,10)):void 0:String.fromCharCode(t)},n.default.prototype.unchar=function(t){return"string"==typeof t&&1===t.length?t.charCodeAt(0):t instanceof Array?t.map(n.default.prototype.unchar):void 0},n.default.prototype.hex=function(t,r){if(r=null==r?8:r,t instanceof Array)return t.map(function(t){return n.default.prototype.hex(t,r)});if(t===1/0||t===-1/0)return(t===1/0?"F":"0").repeat(r);if("number"==typeof t){t<0&&(t=4294967295+t+1);for(var o=Number(t).toString(16).toUpperCase();o.length<r;)o="0".concat(o);return o.length>=r?o.substring(o.length-r,o.length):o}},n.default.prototype.unhex=function(t){return t instanceof Array?t.map(n.default.prototype.unhex):parseInt("0x".concat(t),16)},t=n.default,o.default=t},{"../core/main":273,"core-js/modules/es.array.map":163,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.repeat":193}],314:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],n=!0,s=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!r||o.length!==r);n=!0);}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}return o}}(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,r,o){var n=s(t.toString().split("."),2),i=n[0],n=n[1];return void 0===o?(i=i.padStart(r,"0"),n?i+"."+n:i):(i=(t=s(t.toFixed(o).toString().split("."),2))[0],n=t[1],(i=i.padStart(r,"0"))+"."+n)}function a(t,r){var o=(t=t.toString()).indexOf("."),n=-1!==o?t.substring(o):"",t=(t=-1!==o?t.substring(0,o):t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(0===r)n="";else if(void 0!==r){if(r>n.length)for(var s=r-(n+=-1===o?".":"").length+1,i=0;i<s;i++)n+="0";else n=n.substring(0,r+1)}return t+n}function l(t){return 0<parseFloat(t)?"+".concat(t.toString()):t.toString()}function u(t){return 0<=parseFloat(t)?" ".concat(t.toString()):t.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),n.default.prototype.join=function(t,r){return n.default._validateParameters("join",arguments),t.join(r)},n.default.prototype.match=function(t,r){return n.default._validateParameters("match",arguments),t.match(r)},n.default.prototype.matchAll=function(t,r){n.default._validateParameters("matchAll",arguments);for(var o=RegExp(r,"g"),s=o.exec(t),i=[];null!==s;)i.push(s),s=o.exec(t);return i},n.default.prototype.nf=function(t,r,o){return n.default._validateParameters("nf",arguments),t instanceof Array?t.map(function(t){return i(t,r,o)}):"[object Arguments]"===Object.prototype.toString.call(t)?3===t.length?this.nf(t[0],t[1],t[2]):2===t.length?this.nf(t[0],t[1]):this.nf(t[0]):i(t,r,o)},n.default.prototype.nfc=function(t,r){return n.default._validateParameters("nfc",arguments),t instanceof Array?t.map(function(t){return a(t,r)}):a(t,r)},n.default.prototype.nfp=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];n.default._validateParameters("nfp",r);var s=n.default.prototype.nf.apply(this,r);return s instanceof Array?s.map(l):l(s)},n.default.prototype.nfs=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];n.default._validateParameters("nfs",r);var s=n.default.prototype.nf.apply(this,r);return s instanceof Array?s.map(u):u(s)},n.default.prototype.split=function(t,r){return n.default._validateParameters("split",arguments),t.split(r)},n.default.prototype.splitTokens=function(t,r){var o,s;return n.default._validateParameters("splitTokens",arguments),s=void 0!==r?(s=/\]/g.exec(r),(o=/\[/g.exec(r))&&s?(r=r.slice(0,s.index)+r.slice(s.index+1),o=/\[/g.exec(r),r=r.slice(0,o.index)+r.slice(o.index+1),RegExp("[\\[".concat(r,"\\]]"),"g")):s?(r=r.slice(0,s.index)+r.slice(s.index+1),RegExp("[".concat(r,"\\]]"),"g")):o?(r=r.slice(0,o.index)+r.slice(o.index+1),RegExp("[".concat(r,"\\[]"),"g")):RegExp("[".concat(r,"]"),"g")):/\s/g,t.split(s).filter(function(t){return t})},n.default.prototype.trim=function(t){return n.default._validateParameters("trim",arguments),t instanceof Array?t.map(this.trim):t.trim()};var c=n.default;o.default=c},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.pad-start":192,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],315:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.day=function(){return(new Date).getDate()},t.default.prototype.hour=function(){return(new Date).getHours()},t.default.prototype.minute=function(){return(new Date).getMinutes()},t.default.prototype.millis=function(){return -1===this._millisStart?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return(new Date).getMonth()+1},t.default.prototype.second=function(){return(new Date).getSeconds()},t.default.prototype.year=function(){return(new Date).getFullYear()},t=t.default,o.default=t},{"../core/main":273}],316:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(c=t("../core/main"))&&c.__esModule?c:{default:c},a=(t("./p5.Geometry"),function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants")));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}function u(t,r,o,n,s,a,l){t=t<=0?1:t,r=r<0?0:r,o=o<=0?t:o,n=n<3?3:n;for(var u,c,d=(a=void 0===a||a)?-2:0,h=(s=s<1?1:s)+((l=void 0===l?0!==r:l)?2:0),f=Math.atan2(t-r,o),p=Math.sin(f),m=Math.cos(f),y=d;y<=h;++y){var g=y/s,v=o*g,b=y<0?(g=v=0,t):s<y?(v=o,g=1,r):t+(r-t)*g;for(-2!==y&&y!==s+2||(b=0),v-=o/2,u=0;u<n;++u){var x=u/(n-1),j=2*Math.PI*x,w=Math.sin(j),j=Math.cos(j),S=(this.vertices.push(new i.default.Vector(w*b,v,j*b)),y<0?new i.default.Vector(0,-1,0):s<y&&r?new i.default.Vector(0,1,0):new i.default.Vector(w*m,p,j*m));this.vertexNormals.push(S),this.uvs.push(x,g)}}var T=0;if(a){for(c=0;c<n;++c)this.faces.push([T+c,T+n+(c+1)%n,T+n+c]);T+=2*n}for(y=0;y<s;++y){for(u=0;u<n;++u){var E=(u+1)%n;this.faces.push([T+u,T+E,T+n+E]),this.faces.push([T+u,T+n+E,T+n+u])}T+=n}if(l)for(T+=n,u=0;u<n;++u)this.faces.push([T+u,T+(u+1)%n,T+n])}i.default.prototype.plane=function(t,r,o,n){this._assert3d("plane"),i.default._validateParameters("plane",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===n&&(n=1);var s,a="plane|".concat(o=void 0===o?1:o,"|").concat(n);return this._renderer.geometryInHash(a)||((s=new i.default.Geometry(o,n,function(){for(var t,r,o=0;o<=this.detailY;o++)for(var n=o/this.detailY,s=0;s<=this.detailX;s++)t=s/this.detailX,r=new i.default.Vector(t-.5,n-.5,0),this.vertices.push(r),this.uvs.push(t,n)})).computeFaces().computeNormals(),o<=1&&n<=1?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(a,s)),this._renderer.drawBuffersScaled(a,t,r,1),this},i.default.prototype.box=function(t,r,o,n,s){this._assert3d("box"),i.default._validateParameters("box",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=r);var a,l=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,l=(void 0===s&&(s=l?1:4),"box|".concat(n=void 0===n?l?1:4:n,"|").concat(s));return this._renderer.geometryInHash(l)||((a=new i.default.Geometry(n,s,function(){var t=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(r,o){for(var o=4*o,n=0;n<4;n++){var s=r[n],s=new i.default.Vector((2*(1&s)-1)/2,((2&s)-1)/2,((4&s)/2-1)/2);t.vertices.push(s),t.uvs.push(1&n,(2&n)/2)}t.faces.push([o,1+o,2+o]),t.faces.push([2+o,1+o,3+o])})})).computeNormals(),n<=4&&s<=4?a._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(l,a)),this._renderer.drawBuffersScaled(l,t,r,o),this},i.default.prototype.sphere=function(t,r,o){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),this.ellipsoid(t=void 0===t?50:t,t,t,r=void 0===r?24:r,o=void 0===o?16:o),this},i.default.prototype.cylinder=function(t,r,o,n,s,a){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===n&&(n=1),void 0===a&&(a=!0),void 0===s&&(s=!0);var l,c="cylinder|".concat(o=void 0===o?24:o,"|").concat(n,"|").concat(s,"|").concat(a);return this._renderer.geometryInHash(c)||(l=new i.default.Geometry(o,n),u.call(l,1,1,1,o,n,s,a),o<=24&&n<=16?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(c,l)),this._renderer.drawBuffersScaled(c,t,r,t),this},i.default.prototype.cone=function(t,r,o,n,s){this._assert3d("cone"),i.default._validateParameters("cone",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===n&&(n=1),void 0===s&&(s=!0);var a,l="cone|".concat(o=void 0===o?24:o,"|").concat(n,"|").concat(s);return this._renderer.geometryInHash(l)||(a=new i.default.Geometry(o,n),u.call(a,1,0,1,o,n,s,!1),o<=24&&n<=16?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(l,a)),this._renderer.drawBuffersScaled(l,t,r,t),this},i.default.prototype.ellipsoid=function(t,r,o,n,s){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=t),void 0===s&&(s=16);var a,l="ellipsoid|".concat(n=void 0===n?24:n,"|").concat(s);return this._renderer.geometryInHash(l)||((a=new i.default.Geometry(n,s,function(){for(var t=0;t<=this.detailY;t++)for(var r=t/this.detailY,o=Math.PI*r-Math.PI/2,n=Math.cos(o),s=Math.sin(o),a=0;a<=this.detailX;a++){var l=a/this.detailX,u=2*Math.PI*l,c=Math.cos(u),u=Math.sin(u),u=new i.default.Vector(n*u,s,n*c);this.vertices.push(u),this.vertexNormals.push(u),this.uvs.push(l,r)}})).computeFaces(),n<=24&&s<=24?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(l,a)),this._renderer.drawBuffersScaled(l,t,r,o),this},i.default.prototype.torus=function(t,r,o,n){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),void 0===t)t=50;else if(!t)return;if(void 0===r)r=10;else if(!r)return;void 0===o&&(o=24),void 0===n&&(n=16);var s,a=(r/t).toPrecision(4),r="torus|".concat(a,"|").concat(o,"|").concat(n);return this._renderer.geometryInHash(r)||((s=new i.default.Geometry(o,n,function(){for(var t=0;t<=this.detailY;t++)for(var r=t/this.detailY,o=2*Math.PI*r,n=Math.cos(o),s=Math.sin(o),l=1+a*n,u=0;u<=this.detailX;u++){var c=u/this.detailX,d=2*Math.PI*c,h=Math.cos(d),d=Math.sin(d),f=new i.default.Vector(l*h,l*d,a*s),h=new i.default.Vector(n*h,n*d,s);this.vertices.push(f),this.vertexNormals.push(h),this.uvs.push(c,r)}})).computeFaces(),o<=24&&n<=16?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(r,s)),this._renderer.drawBuffersScaled(r,t,t,t),this},i.default.RendererGL.prototype.point=function(t,r,o){var n=[];return n.push(new i.default.Vector(t,r,o=void 0===o?0:o)),this._drawPoints(n,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(t){var r=t[0],o=t[1],n=t[2],s=t[3],a=t[4],t=t[5],l=(this.geometryInHash("tri")||((l=new i.default.Geometry(1,1,function(){var t=[];t.push(new i.default.Vector(0,0,0)),t.push(new i.default.Vector(1,0,0)),t.push(new i.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=t,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),l.computeNormals(),this.createBuffers("tri",l)),this.uMVMatrix.copy());try{var u=Math.sign(r*s-n*o+n*t-a*s+a*o-r*t),c=new i.default.Matrix([n-r,s-o,0,0,a-r,t-o,0,0,0,0,u,0,r,o,0,1]).mult(this.uMVMatrix);this.uMVMatrix=c,this.drawBuffers("tri")}finally{this.uMVMatrix=l}return this},i.default.RendererGL.prototype.ellipse=function(t){this.arc(t[0],t[1],t[2],t[3],0,a.TWO_PI,a.OPEN,t[4])},i.default.RendererGL.prototype.arc=function(t){var r,o=arguments[1],n=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=arguments[6],d=arguments[7]||25,h=(Math.abs(u-l)>=a.TWO_PI?"".concat(f="ellipse","|"):"".concat(f="arc","|").concat(l,"|").concat(u,"|").concat(c,"|")).concat(d,"|"),f=(this.geometryInHash(h)||((r=new i.default.Geometry(d,1,function(){if(l.toFixed(10)!==u.toFixed(10)){c!==a.PIE&&void 0!==c||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var t=0;t<=d;t++){var r=(u-l)*(t/d)+l,o=.5+Math.cos(r)/2,r=.5+Math.sin(r)/2;this.vertices.push(new i.default.Vector(o,r,0)),this.uvs.push([o,r]),t<d-1&&(this.faces.push([0,t+1,t+2]),this.edges.push([t+1,t+2]))}switch(c){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case a.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case a.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),d<=50?r._edgesToVertices(r):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(f," with more than 50 detail")),this.createBuffers(h,r)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([t,o,0]),this.uMVMatrix.scale(n,s,1),this.drawBuffers(h)}finally{this.uMVMatrix=f}return this},i.default.RendererGL.prototype.rect=function(t){var r=t[0],o=t[1],n=t[2],s=t[3];if(void 0===t[4]){var l=this._pInst._glAttributes.perPixelLighting,u=t[4]||(l?1:24),c=t[5]||(l?1:16),l="rect|".concat(u,"|").concat(c),d=(this.geometryInHash(l)||((d=new i.default.Geometry(u,c,function(){for(var t=0;t<=this.detailY;t++)for(var r=t/this.detailY,o=0;o<=this.detailX;o++){var n=o/this.detailX,s=new i.default.Vector(n,r,0);this.vertices.push(s),this.uvs.push(n,r)}0<u&&0<c&&(this.edges=[[0,u],[u,(u+1)*(c+1)-1],[(u+1)*(c+1)-1,(u+1)*c],[(u+1)*c,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(l,d)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([r,o,0]),this.uMVMatrix.scale(n,s,1),this.drawBuffers(l)}finally{this.uMVMatrix=d}}else{var l=t[4],d=void 0===t[5]?l:t[5],h=void 0===t[6]?d:t[6],t=void 0===t[7]?h:t[7],f=n,p=s,m=((f+=r)<r&&(m=r,r=f,f=m),(p+=o)<o&&(m=o,o=p,p=m),Math.min((f-r)/2,(p-o)/2)),y=(m<l&&(l=m),m<d&&(d=m),m<h&&(h=m),m<t&&(t=m),r),g=o,m=f,r=p,v=(this.beginShape(),0!==d?(this.vertex(m-d,g),this.quadraticVertex(m,g,m,g+d)):this.vertex(m,g),0!==h?(this.vertex(m,r-h),this.quadraticVertex(m,r,m-h,r)):this.vertex(m,r),0!==t?(this.vertex(y+t,r),this.quadraticVertex(y,r,y,r-t)):this.vertex(y,r),0!==l?(this.vertex(y,g+l),this.quadraticVertex(y,g,y+l,g)):this.vertex(y,g),this.immediateMode.geometry.uvs.length=0,!0),o=!1,f=void 0;try{for(var b,x=this.immediateMode.geometry.vertices[Symbol.iterator]();!(v=(b=x.next()).done);v=!0){var j=b.value,w=(j.x-y)/n,S=(j.y-g)/s;this.immediateMode.geometry.uvs.push(w,S)}}catch(t){o=!0,f=t}finally{try{v||null==x.return||x.return()}finally{if(o)throw f}}this.endShape(a.CLOSE)}return this},i.default.RendererGL.prototype.quad=function(t,r,o,n,s,a,l,u,c,d,h,f,p,m){void 0===p&&(p=2),void 0===m&&(m=2);var y="quad|".concat(t,"|").concat(r,"|").concat(o,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(u,"|").concat(c,"|").concat(d,"|").concat(h,"|").concat(f,"|").concat(p,"|").concat(m);if(!this.geometryInHash(y)){var g=new i.default.Geometry(p,m,function(){for(var p=1/(this.detailX-1),m=1/(this.detailY-1),y=0;y<this.detailY;y++)for(var g=0;g<this.detailX;g++){var v=g*p,b=y*m;this.vertices.push(new i.default.Vector((1-v)*((1-b)*t+b*d)+v*((1-b)*n+b*l),(1-v)*((1-b)*r+b*h)+v*((1-b)*s+b*u),(1-v)*((1-b)*o+b*f)+v*((1-b)*a+b*c))),this.uvs.push([v,b])}});g.faces=[];for(var v=0;v<m-1;v++)for(var b=0;b<p-1;b++){var x=b+v*p,j=b+1+(v+1)*p,w=b+(v+1)*p;g.faces.push([x,b+1+v*p,j]),g.faces.push([x,j,w])}g.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(y,g)}return this.drawBuffers(y),this},i.default.RendererGL.prototype.bezier=function(t,r,o,n,s,i,a,l,u,c,d,h){8==arguments.length&&(d=l,c=a,l=i,a=s,s=n,n=o,o=i=u=h=0);var f=this._pInst._bezierDetail||20;this.beginShape();for(var p=0;p<=f;p++){var m=Math.pow(1-p/f,3),y=p/f*3*Math.pow(1-p/f,2),g=3*Math.pow(p/f,2)*(1-p/f),v=Math.pow(p/f,3);this.vertex(t*m+n*y+a*g+c*v,r*m+s*y+l*g+d*v,o*m+i*y+u*g+h*v)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(t,r,o,n,s,i,a,l,u,c,d,h){8==arguments.length&&(c=a,d=l,a=s,l=n,s=n=o,o=i=u=h=0);var f=this._pInst._curveDetail;this.beginShape();for(var p=0;p<=f;p++){var m=.5*Math.pow(p/f,3),y=.5*Math.pow(p/f,2),g=p/f*.5;this.vertex(m*(3*n-t-3*a+c)+y*(2*t-5*n+4*a-c)+g*(-t+a)+2*n*.5,m*(3*s-r-3*l+d)+y*(2*r-5*s+4*l-d)+g*(-r+l)+2*s*.5,m*(3*i-o-3*u+h)+y*(2*o-5*i+4*u-h)+g*(-o+u)+2*i*.5)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return 6==arguments.length?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4==arguments.length&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var t,r,o,n,s,i,a=[],l=[],u=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,d=0,h=1,f=0;d<1;){if(i=parseFloat(d.toFixed(6)),this._lookUpTableBezier[f]=this._bezierCoefficients(i),h.toFixed(6)===c.toFixed(6)){i=parseFloat(h.toFixed(6))+parseFloat(d.toFixed(6)),++f,this._lookUpTableBezier[f]=this._bezierCoefficients(i);break}d+=c,h-=c,++f}}for(var p=this._lookUpTableBezier.length,m=[],y=0;y<4;y++)m.push([]);m[0]=this.immediateMode.geometry.vertexColors.slice(-4),m[3]=this.curFillColor.slice();var g=[];for(y=0;y<4;y++)g.push([]);if(g[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),g[3]=this.curStrokeColor.slice(),6===u){this.isBezier=!0;var a=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],l=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],v=Math.hypot(a[0]-a[1],l[0]-l[1]),b=Math.hypot(a[1]-a[2],l[1]-l[2]),x=Math.hypot(a[2]-a[3],l[2]-l[3]),b=v+b+x;for(v/=b,x/=b,s=0;s<4;s++)m[1].push(m[0][s]*(1-v)+m[3][s]*v),m[2].push(m[0][s]*x+m[3][s]*(1-x)),g[1].push(g[0][s]*(1-v)+g[3][s]*v),g[2].push(g[0][s]*x+g[3][s]*(1-x));for(n=0;n<p;n++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],y=t=r=0;y<4;y++){for(s=0;s<4;s++)this.curFillColor[s]+=this._lookUpTableBezier[n][y]*m[y][s],this.curStrokeColor[s]+=this._lookUpTableBezier[n][y]*g[y][s];t+=a[y]*this._lookUpTableBezier[n][y],r+=l[y]*this._lookUpTableBezier[n][y]}this.vertex(t,r)}this.curFillColor=m[3],this.curStrokeColor=g[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===u){this.isBezier=!0,a=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],l=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var j=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],w=Math.hypot(a[0]-a[1],l[0]-l[1],j[0]-j[1]),b=Math.hypot(a[1]-a[2],l[1]-l[2],j[1]-j[2]),S=Math.hypot(a[2]-a[3],l[2]-l[3],j[2]-j[3]),u=w+b+S;for(w/=u,S/=u,s=0;s<4;s++)m[1].push(m[0][s]*(1-w)+m[3][s]*w),m[2].push(m[0][s]*S+m[3][s]*(1-S)),g[1].push(g[0][s]*(1-w)+g[3][s]*w),g[2].push(g[0][s]*S+g[3][s]*(1-S));for(n=0;n<p;n++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],y=t=r=o=0;y<4;y++){for(s=0;s<4;s++)this.curFillColor[s]+=this._lookUpTableBezier[n][y]*m[y][s],this.curStrokeColor[s]+=this._lookUpTableBezier[n][y]*g[y][s];t+=a[y]*this._lookUpTableBezier[n][y],r+=l[y]*this._lookUpTableBezier[n][y],o+=j[y]*this._lookUpTableBezier[n][y]}this.vertex(t,r,o)}this.curFillColor=m[3],this.curStrokeColor=g[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var t,r,o,n,s,i,a=[],l=[],u=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var c=1/this._lutQuadraticDetail,d=0,h=1,f=0;d<1;){if(i=parseFloat(d.toFixed(6)),this._lookUpTableQuadratic[f]=this._quadraticCoefficients(i),h.toFixed(6)===c.toFixed(6)){i=parseFloat(h.toFixed(6))+parseFloat(d.toFixed(6)),++f,this._lookUpTableQuadratic[f]=this._quadraticCoefficients(i);break}d+=c,h-=c,++f}}for(var p=this._lookUpTableQuadratic.length,m=[],y=0;y<3;y++)m.push([]);m[0]=this.immediateMode.geometry.vertexColors.slice(-4),m[2]=this.curFillColor.slice();var g=[];for(y=0;y<3;y++)g.push([]);if(g[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),g[2]=this.curStrokeColor.slice(),4===u){this.isQuadratic=!0;var a=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],l=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],v=Math.hypot(a[0]-a[1],l[0]-l[1]);for(v/=v+Math.hypot(a[1]-a[2],l[1]-l[2]),s=0;s<4;s++)m[1].push(m[0][s]*(1-v)+m[2][s]*v),g[1].push(g[0][s]*(1-v)+g[2][s]*v);for(n=0;n<p;n++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],y=t=r=0;y<3;y++){for(s=0;s<4;s++)this.curFillColor[s]+=this._lookUpTableQuadratic[n][y]*m[y][s],this.curStrokeColor[s]+=this._lookUpTableQuadratic[n][y]*g[y][s];t+=a[y]*this._lookUpTableQuadratic[n][y],r+=l[y]*this._lookUpTableQuadratic[n][y]}this.vertex(t,r)}this.curFillColor=m[2],this.curStrokeColor=g[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===u){this.isQuadratic=!0,a=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],l=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var b=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],x=Math.hypot(a[0]-a[1],l[0]-l[1],b[0]-b[1]);for(x/=x+Math.hypot(a[1]-a[2],l[1]-l[2],b[1]-b[2]),s=0;s<4;s++)m[1].push(m[0][s]*(1-x)+m[2][s]*x),g[1].push(g[0][s]*(1-x)+g[2][s]*x);for(n=0;n<p;n++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],y=t=r=o=0;y<3;y++){for(s=0;s<4;s++)this.curFillColor[s]+=this._lookUpTableQuadratic[n][y]*m[y][s],this.curStrokeColor[s]+=this._lookUpTableQuadratic[n][y]*g[y][s];t+=a[y]*this._lookUpTableQuadratic[n][y],r+=l[y]*this._lookUpTableQuadratic[n][y],o+=b[y]*this._lookUpTableQuadratic[n][y]}this.vertex(t,r,o)}this.curFillColor=m[2],this.curStrokeColor=g[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var t,r,o,n,s,i,a=[],l=[],u=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,d=0,h=1,f=0;d<1;){if(i=parseFloat(d.toFixed(6)),this._lookUpTableBezier[f]=this._bezierCoefficients(i),h.toFixed(6)===c.toFixed(6)){i=parseFloat(h.toFixed(6))+parseFloat(d.toFixed(6)),++f,this._lookUpTableBezier[f]=this._bezierCoefficients(i);break}d+=c,h-=c,++f}}var p=this._lookUpTableBezier.length;if(2===u){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,a=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),l=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),s=0;s<p;s++)r=a[0]*this._lookUpTableBezier[s][0]+a[1]*this._lookUpTableBezier[s][1]+a[2]*this._lookUpTableBezier[s][2]+a[3]*this._lookUpTableBezier[s][3],o=l[0]*this._lookUpTableBezier[s][0]+l[1]*this._lookUpTableBezier[s][1]+l[2]*this._lookUpTableBezier[s][2]+l[3]*this._lookUpTableBezier[s][3],this.vertex(r,o);for(s=0;s<u;s++)this.immediateMode._curveVertex.shift()}}else if(3===u&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,a=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),l=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),t=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),s=0;s<p;s++)r=a[0]*this._lookUpTableBezier[s][0]+a[1]*this._lookUpTableBezier[s][1]+a[2]*this._lookUpTableBezier[s][2]+a[3]*this._lookUpTableBezier[s][3],o=l[0]*this._lookUpTableBezier[s][0]+l[1]*this._lookUpTableBezier[s][1]+l[2]*this._lookUpTableBezier[s][2]+l[3]*this._lookUpTableBezier[s][3],n=t[0]*this._lookUpTableBezier[s][0]+t[1]*this._lookUpTableBezier[s][1]+t[2]*this._lookUpTableBezier[s][2]+t[3]*this._lookUpTableBezier[s][3],this.vertex(r,o,n);for(s=0;s<u;s++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(t,r,o,n,s,i,l,u,c){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(t),this._pInst.textureMode(a.NORMAL);var d=0,h=(r<=t.width&&(d=r/t.width),1),r=(r+n<=t.width&&(h=(r+n)/t.width),0),n=(o<=t.height&&(r=o/t.height),1);o+s<=t.height&&(n=(o+s)/t.height),this.beginShape(),this.vertex(i,l,0,d,r),this.vertex(i+u,l,0,h,r),this.vertex(i+u,l+c,0,h,n),this.vertex(i,l+c,0,d,n),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var c=i.default;o.default=c},{"../core/constants":262,"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],317:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(u=t("../core/main"))&&u.__esModule?u:{default:u},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r,o=a();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("../core/constants"));function a(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,a=function(){return t},t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}s.default.prototype.orbitControl=function(t,r,o,n){var i=this,a=(this._assert3d("orbitControl"),s.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===t&&(t=1),void 0===r&&(r=t),void 0===o&&(o=1),"object"!==l(n)&&(n={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var u=n.disableTouchActions;!0!==this.touchActionsDisabled&&(void 0===u||u)&&(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var c,d,h,u=n.freeRotation,n=void 0!==u&&u,f=[],u=(this.touches.forEach(function(t){i._renderer.prevTouches.forEach(function(r){t.id===r.id&&(r={x:t.x,y:t.y,px:r.x,py:r.y},f.push(r))})}),this._renderer.prevTouches=this.touches,0),p=0,m=0,y=0,g=0,v=this.height<this.width?this.height:this.width,b=!1;return 0<f.length?(b=0<f[0].x&&f[0].x<this.width&&0<f[0].y&&f[0].y<this.height,1===f.length?(p=-t*((c=f[0]).x-c.px)/v,m=r*(c.y-c.py)/v):(c=f[0],d=f[1],u=-(Math.hypot(c.x-d.x,c.y-d.y)-Math.hypot(c.px-d.px,c.py-d.py))*o*4e-4,y=.5*(c.x+d.x)-.5*(c.px+d.px),g=.5*(c.y+d.y)-.5*(c.py+d.py)),0<this.touches.length?b&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(b=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(u=Math.sign(this._mouseWheelDeltaY)*o*.01,this._mouseWheelDeltaY=0,b&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(p=-t*this.movedX/v,m=r*this.movedY/v):this.mouseButton===this.RIGHT&&(y=this.movedX,g=this.movedY),b&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==u&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=u),.001<Math.abs(this._renderer.zoomVelocity)?(n?a._orbitFree(0,0,this._renderer.zoomVelocity):a._orbit(0,0,this._renderer.zoomVelocity),0!==a.projMatrix.mat4[15]&&(a.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),a.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=a.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=a.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,(0!==p||0!==m)&&this._renderer.executeRotateAndMove&&this._renderer.rotateVelocity.add(.6*p,.6*m),1e-6<this._renderer.rotateVelocity.magSq()?(n?a._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):a._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),(0!==y||0!==g)&&this._renderer.executeRotateAndMove&&(c=2*y/this.width,d=-(2*g)/this.height,this._renderer.moveVelocity.add(.15*c,.15*d)),1e-6<this._renderer.moveVelocity.magSq()?(o=a._getLocalAxes(),b=Math.sqrt((t=a.eyeX-a.centerX)*t+(r=a.eyeY-a.centerY)*r+(v=a.eyeZ-a.centerZ)*v),u=new s.default.Vector(a.centerX,a.centerY,a.centerZ),u=a.cameraMatrix.multiplyPoint(u),(u=this._renderer.uPMatrix.multiplyAndNormalizePoint(u)).x-=this._renderer.moveVelocity.x,u.y-=this._renderer.moveVelocity.y,m=0===(p=this._renderer.uPMatrix.mat4)[15]?(h=(p[8]+u.x)/p[0]*b,(p[9]+u.y)/p[5]*b):(h=(u.x-p[12])/p[0],(u.y-p[13])/p[5]),a.setPosition(a.eyeX+h*o.x[0]+m*o.y[0],a.eyeY+h*o.x[1]+m*o.y[1],a.eyeZ+h*o.x[2]+m*o.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},s.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];s.default._validateParameters("debugMode",r);for(var n=this._registeredMethods.post.length-1;0<=n;n--)this._registeredMethods.post[n].toString()!==this._grid().toString()&&this._registeredMethods.post[n].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(n,1);r[0]===i.GRID?this.registerMethod("post",this._grid.call(this,r[1],r[2],r[3],r[4],r[5])):r[0]===i.AXES?this.registerMethod("post",this._axesIcon.call(this,r[1],r[2],r[3],r[4])):(this.registerMethod("post",this._grid.call(this,r[0],r[1],r[2],r[3],r[4])),this.registerMethod("post",this._axesIcon.call(this,r[5],r[6],r[7],r[8])))},s.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var t=this._registeredMethods.post.length-1;0<=t;t--)this._registeredMethods.post[t].toString()!==this._grid().toString()&&this._registeredMethods.post[t].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(t,1)},s.default.prototype._grid=function(t,r,o,n,s){void 0===t&&(t=this.width/2),void 0===r&&(r=4>Math.round(t/30)?4:Math.round(t/30)),void 0===o&&(o=0),void 0===n&&(n=0),void 0===s&&(s=0);var i=t/r,a=t/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var t=0;t<=r;t++)this.beginShape(this.LINES),this.vertex(-a+o,n,t*i-a+s),this.vertex(a+o,n,t*i-a+s),this.endShape();for(var l=0;l<=r;l++)this.beginShape(this.LINES),this.vertex(l*i-a+o,n,-a+s),this.vertex(l*i-a+o,n,a+s),this.endShape();this.pop()}},s.default.prototype._axesIcon=function(t,r,o,n){return void 0===t&&(t=40<this.width/20?this.width/20:40),void 0===r&&(r=-this.width/4),void 0===o&&(o=r),void 0===n&&(n=r),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(r,o,n),this.vertex(r+t,o,n),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(r,o,n),this.vertex(r,o+t,n),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(r,o,n),this.vertex(r,o,n+t),this.endShape(),this.pop()}};var u=s.default;o.default=u},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],318:[function(t,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};n.default.prototype.ambientLight=function(t,r,o,s){this._assert3d("ambientLight"),n.default._validateParameters("ambientLight",arguments);var i=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(i._array[0],i._array[1],i._array[2]),this._renderer._enableLighting=!0,this},n.default.prototype.specularColor=function(t,r,o){this._assert3d("specularColor"),n.default._validateParameters("specularColor",arguments);var s=this.color.apply(this,arguments);return this._renderer.specularColors=[s._array[0],s._array[1],s._array[2]],this},n.default.prototype.directionalLight=function(t,r,o,s,i,a){this._assert3d("directionalLight"),n.default._validateParameters("directionalLight",arguments),t=t instanceof n.default.Color?t:this.color(t,r,o);var l,u,r=arguments[arguments.length-1],o="number"==typeof r?(l=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(l=r.x,u=r.y,r.z),r=Math.sqrt(l*l+u*u+o*o);return this._renderer.directionalLightDirections.push(l/r,u/r,o/r),this._renderer.directionalLightDiffuseColors.push(t._array[0],t._array[1],t._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.pointLight=function(t,r,o,s,i,a){this._assert3d("pointLight"),n.default._validateParameters("pointLight",arguments),t=t instanceof n.default.Color?t:this.color(t,r,o);var l,u,r=arguments[arguments.length-1],o="number"==typeof r?(l=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(l=r.x,u=r.y,r.z);return this._renderer.pointLightPositions.push(l,u,o),this._renderer.pointLightDiffuseColors.push(t._array[0],t._array[1],t._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.lights=function(){this._assert3d("lights");var t=this.color("rgb(128,128,128)");return this.ambientLight(t),this.directionalLight(t,0,0,-1),this},n.default.prototype.lightFalloff=function(t,r,o){return this._assert3d("lightFalloff"),n.default._validateParameters("lightFalloff",arguments),t<0&&(t=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),r<0&&(r=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),o<0&&(o=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===t&&0===r&&0===o&&(t=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=t,this._renderer.linearAttenuation=r,this._renderer.quadraticAttenuation=o,this},n.default.prototype.spotLight=function(t,r,o,s,i,a,l,u,c,d,h){this._assert3d("spotLight"),n.default._validateParameters("spotLight",arguments);var f,p,m,y=arguments.length;switch(y){case 11:case 10:f=this.color(t,r,o),p=new n.default.Vector(s,i,a),m=new n.default.Vector(l,u,c);break;case 9:t instanceof n.default.Color?(f=t,p=new n.default.Vector(r,o,s),m=new n.default.Vector(i,a,l),d=u,h=c):s instanceof n.default.Vector?(f=this.color(t,r,o),p=s,m=new n.default.Vector(i,a,l),d=u,h=c):l instanceof n.default.Vector?(f=this.color(t,r,o),p=new n.default.Vector(s,i,a),m=l,d=u,h=c):(f=this.color(t,r,o),p=new n.default.Vector(s,i,a),m=new n.default.Vector(l,u,c));break;case 8:m=t instanceof n.default.Color?(f=t,p=new n.default.Vector(r,o,s),new n.default.Vector(i,a,l)):s instanceof n.default.Vector?(f=this.color(t,r,o),p=s,new n.default.Vector(i,a,l)):(f=this.color(t,r,o),p=new n.default.Vector(s,i,a),l),d=u;break;case 7:t instanceof n.default.Color&&r instanceof n.default.Vector?(f=t,p=r,m=new n.default.Vector(o,s,i),d=a,h=l):t instanceof n.default.Color&&i instanceof n.default.Vector?(f=t,p=new n.default.Vector(r,o,s),m=i,d=a,h=l):s instanceof n.default.Vector&&i instanceof n.default.Vector?(f=this.color(t,r,o),p=s,m=i,d=a,h=l):m=t instanceof n.default.Color?(f=t,p=new n.default.Vector(r,o,s),new n.default.Vector(i,a,l)):s instanceof n.default.Vector?(f=this.color(t,r,o),p=s,new n.default.Vector(i,a,l)):(f=this.color(t,r,o),p=new n.default.Vector(s,i,a),l);break;case 6:s instanceof n.default.Vector&&i instanceof n.default.Vector?(f=this.color(t,r,o),p=s,m=i,d=a):t instanceof n.default.Color&&i instanceof n.default.Vector?(f=t,p=new n.default.Vector(r,o,s),m=i,d=a):t instanceof n.default.Color&&r instanceof n.default.Vector&&(f=t,p=r,m=new n.default.Vector(o,s,i),d=a);break;case 5:t instanceof n.default.Color&&r instanceof n.default.Vector&&o instanceof n.default.Vector?(f=t,p=r,m=o,d=s,h=i):s instanceof n.default.Vector&&i instanceof n.default.Vector?(f=this.color(t,r,o),p=s,m=i):t instanceof n.default.Color&&i instanceof n.default.Vector?(f=t,p=new n.default.Vector(r,o,s),m=i):t instanceof n.default.Color&&r instanceof n.default.Vector&&(f=t,p=r,m=new n.default.Vector(o,s,i));break;case 4:f=t,p=r,m=o,d=s;break;case 3:f=t,p=r,m=o;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(y<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(p.x,p.y,p.z),m.normalize(),this._renderer.spotLightDirections.push(m.x,m.y,m.z),void 0===d&&(d=Math.PI/3),void 0!==h&&h<1?(h=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===h&&(h=100),d=this._renderer._pInst._toRadians(d),this._renderer.spotLightAngle.push(Math.cos(d)),this._renderer.spotLightConc.push(h),this._renderer._enableLighting=!0,this},n.default.prototype.noLights=function(){this._assert3d("noLights");for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.default._validateParameters("noLights",r),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},t=n.default,o.default=t},{"../core/main":273}],319:[function(t,r,o){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(s=t("../core/main"))&&s.__esModule?s:{default:s};t("./p5.Geometry"),n.default.prototype.loadModel=function(t){n.default._validateParameters("loadModel",arguments);var r,o,s,i=t.slice(-4),a=("boolean"==typeof arguments[1]?(r=arguments[1],o=arguments[2],s=arguments[3],void 0!==arguments[4]&&(i=arguments[4])):(r=!1,o=arguments[1],s=arguments[2],void 0!==arguments[3]&&(i=arguments[3])),new n.default.Geometry),l=(a.gid="".concat(t,"|").concat(r),this);return i.match(/\.stl$/i)?this.httpDo(t,"GET","arrayBuffer",function(t){(function(t,r){if(function(t){for(var r=new DataView(t),o=[115,111,108,105,100],n=0;n<5;n++)if(function(t,r,o){for(var n=0,s=t.length;n<s;n++)if(t[n]!==r.getUint8(o+n,!1))return;return 1}(o,r,n))return;return 1}(r))!function(t,r){for(var o,s,i,a,l,u,c,d=new DataView(r),h=d.getUint32(80,!0),f=!1,p=0;p<70;p++)1129270351===d.getUint32(p,!1)&&82===d.getUint8(p+4)&&61===d.getUint8(p+5)&&(f=!0,a=[],l=d.getUint8(p+6)/255,u=d.getUint8(p+7)/255,c=d.getUint8(p+8)/255);for(var m=0;m<h;m++){for(var y,g=84+50*m,v=d.getFloat32(g,!0),b=d.getFloat32(4+g,!0),x=d.getFloat32(8+g,!0),j=(f&&(i=0==(32768&(y=d.getUint16(48+g,!0)))?(o=(31&y)/31,s=(y>>5&31)/31,(y>>10&31)/31):(o=l,s=u,c)),new n.default.Vector(v,b,x)),w=1;w<=3;w++){var S=g+12*w,S=new n.default.Vector(d.getFloat32(S,!0),d.getFloat32(4+S,!0),d.getFloat32(8+S,!0));t.vertices.push(S),t.vertexNormals.push(j),f&&a.push(o,s,i)}t.faces.push([3*m,3*m+1,3*m+2]),t.uvs.push([0,0],[0,0],[0,0])}}(t,r);else{if(r=new DataView(r),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(t,r){for(var o,s,i="",a=[],l=0;l<r.length;++l){for(var u=r[l].trim(),c=u.split(" "),d=0;d<c.length;++d)""===c[d]&&c.splice(d,1);if(0!==c.length)switch(i){case"":if("solid"!==c[0])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "solid"'));i="solid";break;case"solid":if("facet"!==c[0]||"normal"!==c[1])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "facet normal"'));o=new n.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),t.vertexNormals.push(o,o,o),i="facet normal";break;case"facet normal":if("outer"!==c[0]||"loop"!==c[1])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "outer loop"'));i="vertex";break;case"vertex":if("vertex"===c[0])s=new n.default.Vector(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),t.vertices.push(s),t.uvs.push([0,0]),a.push(t.vertices.indexOf(s));else{if("endloop"!==c[0])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "vertex" or "endloop"'));t.faces.push(a),a=[],i="endloop"}break;case"endloop":if("endfacet"!==c[0])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "endfacet"'));i="endfacet";break;case"endfacet":if("endsolid"!==c[0]){if("facet"!==c[0]||"normal"!==c[1])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "endsolid" or "facet normal"'));o=new n.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),t.vertexNormals.push(o,o,o),i="facet normal"}break;default:console.error('Invalid state "'.concat(i,'"'))}}}(t,r=new TextDecoder("utf-8").decode(r).split("\n"))}})(a,t),r&&a.normalize(),l._decrementPreload(),"function"==typeof o&&o(a)},s):i.match(/\.obj$/i)?this.loadStrings(t,function(t){for(var s={v:[],vt:[],vn:[]},i={},u=0;u<t.length;++u){var c=t[u].trim().split(/\b\s+/);if(0<c.length){if("v"===c[0]||"vn"===c[0]){var d=new n.default.Vector(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));s[c[0]].push(d)}else if("vt"===c[0])d=[parseFloat(c[1]),1-parseFloat(c[2])],s[c[0]].push(d);else if("f"===c[0])for(var h=3;h<c.length;++h){for(var f=[],p=[1,h-1,h],m=0;m<p.length;++m){var y=c[p[m]],g=0;if(void 0!==i[y])g=i[y];else{for(var v=y.split("/"),b=0;b<v.length;b++)v[b]=parseInt(v[b])-1;g=i[y]=a.vertices.length,a.vertices.push(s.v[v[0]].copy()),s.vt[v[1]]?a.uvs.push(s.vt[v[1]].slice()):a.uvs.push([0,0]),s.vn[v[2]]&&a.vertexNormals.push(s.vn[v[2]].copy())}f.push(g)}f[0]!==f[1]&&f[0]!==f[2]&&f[1]!==f[2]&&a.faces.push(f)}}}0===a.vertexNormals.length&&a.computeNormals(),r&&a.normalize(),l._decrementPreload(),"function"==typeof o&&o(a)},s):(n.default._friendlyFileLoadError(3,t),s?s():n.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),a},n.default.prototype.model=function(t){this._assert3d("model"),n.default._validateParameters("model",arguments),0<t.vertices.length&&(this._renderer.geometryInHash(t.gid)||(0===t.edges.length&&t._makeTriangleEdges(),t._edgesToVertices(),this._renderer.createBuffers(t.gid,t)),this._renderer.drawBuffers(t.gid))};var s=n.default;o.default=s},{"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199}],320:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(u=t("../core/main"))&&u.__esModule?u:{default:u},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}t("./p5.Texture"),i.default.prototype.loadShader=function(t,r,o,n){function s(){l._decrementPreload(),o&&o(a)}i.default._validateParameters("loadShader",arguments),n=n||console.error;var a=new i.default.Shader,l=this,u=!1,c=!1;return this.loadStrings(t,function(t){a._vertSrc=t.join("\n"),c=!0,u&&s()},n),this.loadStrings(r,function(t){a._fragSrc=t.join("\n"),u=!0,c&&s()},n),a},i.default.prototype.createShader=function(t,r){return this._assert3d("createShader"),i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,t,r)},i.default.prototype.shader=function(t){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),void 0===t._renderer&&(t._renderer=this._renderer),t.init(),t.isStrokeShader()?this._renderer.userStrokeShader=t:(this._renderer.userFillShader=t,this._renderer._useNormalMaterial=!1),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.texture=function(t){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),t.gifProperties&&t._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=t,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(t){t!==a.IMAGE&&t!==a.NORMAL?console.warn("You tried to set ".concat(t," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=t},i.default.prototype.textureWrap=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,o=(this._renderer.textureWrapX=t,this._renderer.textureWrapY=r,!0),n=!1,s=void 0;try{for(var i,a=this._renderer.textures.values()[Symbol.iterator]();!(o=(i=a.next()).done);o=!0)i.value.setWrapMode(t,r)}catch(t){n=!0,s=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw s}}},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return i.default._validateParameters("normalMaterial",r),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.ambientMaterial=function(t,r,o){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var n=i.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=n._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.emissiveMaterial=function(t,r,o,n){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var s=i.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=s._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.specularMaterial=function(t,r,o,n){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var s=i.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=s._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.shininess=function(t){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),this._renderer._useShininess=t=t<1?1:t,this},i.default.RendererGL.prototype._applyColorBlend=function(t){var r=this.GL,o=this.drawMode===a.TEXTURE,o=this.userFillShader||this.userStrokeShader||this.userPointShader||o||this.curBlendMode!==a.BLEND||t[t.length-1]<1||this._isErasing;return o!==this._isBlending&&(o||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?r.enable(r.BLEND):r.disable(r.BLEND),r.depthMask(!0),this._isBlending=o),this._applyBlendMode(),t},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var t=this.GL;switch(this.curBlendMode){case a.BLEND:t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case a.ADD:t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE);break;case a.REMOVE:t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_ALPHA);break;case a.MULTIPLY:t.blendEquation(t.FUNC_ADD),t.blendFunc(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA);break;case a.SCREEN:t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_COLOR);break;case a.EXCLUSION:t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE_MINUS_DST_COLOR,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE);break;case a.REPLACE:t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO);break;case a.SUBTRACT:t.blendEquationSeparate(t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case a.DARKEST:this.blendExt?(t.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(t.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var u=i.default;o.default=u},{"../core/constants":262,"../core/main":273,"./p5.Texture":330,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],321:[function(t,r,o){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.prototype.camera=function(){var t;this._assert3d("camera");for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n.default._validateParameters("camera",o),(t=this._renderer._curCamera).camera.apply(t,o),this},n.default.prototype.perspective=function(){var t;this._assert3d("perspective");for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n.default._validateParameters("perspective",o),(t=this._renderer._curCamera).perspective.apply(t,o),this},n.default.prototype.ortho=function(){var t;this._assert3d("ortho");for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n.default._validateParameters("ortho",o),(t=this._renderer._curCamera).ortho.apply(t,o),this},n.default.prototype.frustum=function(){var t;this._assert3d("frustum");for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n.default._validateParameters("frustum",o),(t=this._renderer._curCamera).frustum.apply(t,o),this},n.default.prototype.createCamera=function(){this._assert3d("createCamera");var t=new n.default.Camera(this._renderer);return t._computeCameraDefaultSettings(),t._setDefaultCamera(),this._renderer._curCamera=t},n.default.Camera=function(){var t,r;function o(t){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this._renderer=t,this.cameraType="default",this.cameraMatrix=new n.default.Matrix,this.projMatrix=new n.default.Matrix,this.yScale=1}return t=[{key:"perspective",value:function(t,r,o,s){this.cameraType=0<arguments.length?"custom":"default",void 0===t?(t=this.defaultCameraFOV,this.cameraFOV=t):this.cameraFOV=this._renderer._pInst._toRadians(t),void 0===r&&(r=this.defaultAspectRatio),void 0===o&&(o=this.defaultCameraNear),void 0===s&&(s=this.defaultCameraFar),o<=1e-4&&(o=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),s<o&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=r,this.cameraNear=o,this.cameraFar=s,this.projMatrix=n.default.Matrix.identity();var t=1/Math.tan(this.cameraFOV/2),i=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(t/r,0,0,0,0,-t*this.yScale,0,0,0,0,(s+o)*i,-1,0,0,2*s*o*i,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(t,r,o,s,i,a){void 0===t&&(t=-this._renderer.width/2),void 0===r&&(r=+this._renderer.width/2),void 0===o&&(o=-this._renderer.height/2),void 0===s&&(s=+this._renderer.height/2),void 0===i&&(i=0),void 0===a&&(a=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=i;var l=r-t,u=s-o,c=(this.cameraFar=a)-i,d=2/l,h=2/u*this.yScale,r=-(r+t)/l,t=-(s+o)/u,l=-(a+i)/c;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(d,0,0,0,0,-h,0,0,0,0,-2/c,0,r,t,l,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(t,r,o,s,i,a){void 0===t&&(t=-(.05*this._renderer.width)),void 0===r&&(r=.05*+this._renderer.width),void 0===o&&(o=.05*+this._renderer.height),void 0===s&&(s=-(.05*this._renderer.height)),void 0===i&&(i=this.defaultCameraNear),void 0===a&&(a=this.defaultCameraFar),this.cameraNear=i;var l=r-t,u=s-o,c=(this.cameraFar=a)-i,d=2*i/l,h=2*i/u*this.yScale,f=-2*a*i/c,r=(r+t)/l,t=(s+o)/u,l=-(a+i)/c;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(d,0,0,0,0,-h,0,0,r,t,l,-1,0,0,f,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(t,r,o,s){var i=this.centerX,a=this.centerY,l=this.centerZ,u=(i-=this.eyeX,a-=this.eyeY,l-=this.eyeZ,n.default.Matrix.identity(this._renderer._pInst)),t=(u.rotate(this._renderer._pInst._toRadians(t),r,o,s),[i*u.mat4[0]+a*u.mat4[4]+l*u.mat4[8],i*u.mat4[1]+a*u.mat4[5]+l*u.mat4[9],i*u.mat4[2]+a*u.mat4[6]+l*u.mat4[10]]);t[0]+=this.eyeX,t[1]+=this.eyeY,t[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,t[0],t[1],t[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(t){var r=this._getLocalAxes();this._rotateView(t,r.y[0],r.y[1],r.y[2])}},{key:"tilt",value:function(t){var r=this._getLocalAxes();this._rotateView(t,r.x[0],r.x[1],r.x[2])}},{key:"lookAt",value:function(t,r,o){this.camera(this.eyeX,this.eyeY,this.eyeZ,t,r,o,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(t,r,o,n,s,i,a,l,u){return void 0===t&&(t=this.defaultEyeX,r=this.defaultEyeY,o=this.defaultEyeZ,n=t,s=r,l=1,u=a=i=0),this.eyeX=t,this.eyeY=r,this.eyeZ=o,void 0!==n&&(this.centerX=n,this.centerY=s,this.centerZ=i),void 0!==a&&(this.upX=a,this.upY=l,this.upZ=u),n=this._getLocalAxes(),this.cameraMatrix.set(n.x[0],n.y[0],n.z[0],0,n.x[1],n.y[1],n.z[1],0,n.x[2],n.y[2],n.z[2],0,0,0,0,1),s=-t,this.cameraMatrix.translate([s,-r,-o]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(t,r,o){var n=this._getLocalAxes(),t=[n.x[0]*t,n.x[1]*t,n.x[2]*t],r=[n.y[0]*r,n.y[1]*r,n.y[2]*r],n=[n.z[0]*o,n.z[1]*o,n.z[2]*o];this.camera(this.eyeX+t[0]+r[0]+n[0],this.eyeY+t[1]+r[1]+n[1],this.eyeZ+t[2]+r[2]+n[2],this.centerX+t[0]+r[0]+n[0],this.centerY+t[1]+r[1]+n[1],this.centerZ+t[2]+r[2]+n[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(t,r,o){var n=t-this.eyeX,s=r-this.eyeY,i=o-this.eyeZ;this.camera(t,r,o,this.centerX+n,this.centerY+s,this.centerZ+i,this.upX,this.upY,this.upZ)}},{key:"set",value:function(t){for(var r=0,o=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType"];r<o.length;r++){var n=o[r];this[n]=t[n]}this.cameraMatrix=t.cameraMatrix.copy(),this.projMatrix=t.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(t,r,o){var s,i,a,l,u,c,d,h,f,p,m,y,g,v,b,x,j,w;0===o?this.set(t):1===o?this.set(r):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=t.projMatrix.mat4[0]*Math.pow(r.projMatrix.mat4[0]/t.projMatrix.mat4[0],o),this.projMatrix.mat4[5]=t.projMatrix.mat4[5]*Math.pow(r.projMatrix.mat4[5]/t.projMatrix.mat4[5],o),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),l=new n.default.Vector(t.eyeX,t.eyeY,t.eyeZ),u=new n.default.Vector(r.eyeX,r.eyeY,r.eyeZ),x=new n.default.Vector(t.centerX,t.centerY,t.centerZ),w=new n.default.Vector(r.centerX,r.centerY,r.centerZ),s=(a=n.default.Vector.dist(l,x))*Math.pow((s=n.default.Vector.dist(u,w))/a,o),a=n.default.Vector.sub(l,u),i=1,1e-6<(j=(v=l.copy().sub(u).sub(x).add(w)).magSq())&&(i=Math.max(0,Math.min(i=n.default.Vector.dot(a,v)/j,1))),a=n.default.Vector.lerp(n.default.Vector.lerp(l,x,i),n.default.Vector.lerp(u,w,i),o),v=t.cameraMatrix.createSubMatrix3x3(),j=r.cameraMatrix.createSubMatrix3x3(),l=v.column(2),x=j.column(2),u=v.column(1),w=j.column(1),t=new n.default.Vector,r=new n.default.Vector,c=new n.default.Vector,d=new n.default.Vector,1-(h=.5*((v=(j=j.mult3x3(v.copy().transpose3x3())).diagonal())[0]+v[1]+v[2]-1))<1e-7?(t.set(n.default.Vector.lerp(l,x,o)).normalize(),c.set(t).mult(i*s).add(a),d.set(t).mult((i-1)*s).add(a),r.set(n.default.Vector.lerp(u,w,o)).normalize()):(x=1/(1-h),w=Math.max(v[0],v[1],v[2]),y=j.mat3[1]+j.mat3[3],g=j.mat3[2]+j.mat3[6],b=j.mat3[5]+j.mat3[7],g=Math.cos(y=o*Math.atan2(w=w===v[0]?(p=.5*y*(x/=f=Math.sqrt((v[0]-h)*x)),m=.5*g*x,.5*(j.mat3[7]-j.mat3[5])/f):w===v[1]?(m=.5*b*(x/=p=Math.sqrt((v[1]-h)*x)),f=.5*y*x,.5*(j.mat3[2]-j.mat3[6])/p):(f=.5*g*(x/=m=Math.sqrt((v[2]-h)*x)),p=.5*b*x,.5*(j.mat3[3]-j.mat3[1])/m),h)),v=Math.sin(y),(w=new n.default.Matrix("mat3",[g+(b=1-g)*f*f,b*(x=f*p)-v*m,b*(j=m*f)+v*p,b*x+v*m,g+b*p*p,b*(o=p*m)-v*f,b*j-v*p,b*o+v*f,g+b*m*m])).multiplyVec3(l,t),c.set(t).mult(i*s).add(a),d.set(t).mult((i-1)*s).add(a),w.multiplyVec3(u,r)),this.camera(c.x,c.y,c.z,d.x,d.y,d.z,r.x,r.y,r.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)}},{key:"copy",value:function(){var t=new n.default.Camera(this._renderer);return t.cameraFOV=this.cameraFOV,t.aspectRatio=this.aspectRatio,t.eyeX=this.eyeX,t.eyeY=this.eyeY,t.eyeZ=this.eyeZ,t.centerX=this.centerX,t.centerY=this.centerY,t.centerZ=this.centerZ,t.upX=this.upX,t.upY=this.upY,t.upZ=this.upZ,t.cameraNear=this.cameraNear,t.cameraFar=this.cameraFar,t.cameraType=this.cameraType,t.cameraMatrix=this.cameraMatrix.copy(),t.projMatrix=this.projMatrix.copy(),t}},{key:"_getLocalAxes",value:function(){var t=this.eyeX-this.centerX,r=this.eyeY-this.centerY,o=this.eyeZ-this.centerZ,n=Math.sqrt(t*t+r*r+o*o),n=(0!==n&&(t/=n,r/=n,o/=n),this.upX),s=(l=this.upY)*o-(u=this.upZ)*r,i=-n*o+u*t,a=n*r-l*t,n=r*a-o*i,l=-t*a+o*s,u=t*i-r*s,c=Math.sqrt(s*s+i*i+a*a),c=(0!==c&&(s/=c,i/=c,a/=c),Math.sqrt(n*n+l*l+u*u));return 0!==c&&(n/=c,l/=c,u/=c),{x:[s,i,a],y:[n,l,u],z:[t,r,o]}}},{key:"_orbit",value:function(t,r,o){var s=this.eyeX-this.centerX,i=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,l=Math.hypot(s,i,a),s=new n.default.Vector(s,i,a).normalize(),i=new n.default.Vector(this.upX,this.upY,this.upZ).normalize(),a=new n.default.Vector.cross(i,s).normalize(),u=new n.default.Vector.cross(a,i),o=((l=(l*=Math.pow(10,o))<this.cameraNear?this.cameraNear:l)>this.cameraFar&&(l=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,n.default.Vector.dot(s,i))))+r),r=t;(o<=0||o>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),i.mult(Math.cos(o)),u.mult(Math.cos(r)*Math.sin(o)),a.mult(Math.sin(r)*Math.sin(o)),s.set(i).add(u).add(a),this.eyeX=l*s.x+this.centerX,this.eyeY=l*s.y+this.centerY,this.eyeZ=l*s.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(t,r,o){var s=this.eyeX-this.centerX,i=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,l=Math.hypot(s,i,a),s=new n.default.Vector(s,i,a).normalize(),i=new n.default.Vector(this.upX,this.upY,this.upZ),a=new n.default.Vector.cross(i,s).normalize(),u=new n.default.Vector.cross(s,a),c=Math.atan2(r,t),c=(u.mult(Math.sin(c)),a.mult(Math.cos(c)).add(u),Math.sqrt(t*t+r*r)),u=new n.default.Vector.cross(s,a),t=((l=(l*=Math.pow(10,o))<this.cameraNear?this.cameraNear:l)>this.cameraFar&&(l=this.cameraFar),Math.cos(c)),r=Math.sin(c),o=i.dot(s),c=i.dot(a),d=o*t+c*r,o=-o*r+c*t,c=i.dot(u);i.x=d*s.x+o*a.x+c*u.x,i.y=d*s.y+o*a.y+c*u.y,i.z=d*s.z+o*a.z+c*u.z,a.mult(-r),s.mult(t).add(a).mult(l),this.camera(s.x+this.centerX,s.y+this.centerY,s.z+this.centerZ,this.centerX,this.centerY,this.centerZ,i.x,i.y,i.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}],s(o.prototype,t),r&&s(o,r),o}(),n.default.prototype.setCamera=function(t){this._renderer._curCamera=t,this._renderer.uPMatrix.set(t.projMatrix.mat4[0],t.projMatrix.mat4[1],t.projMatrix.mat4[2],t.projMatrix.mat4[3],t.projMatrix.mat4[4],t.projMatrix.mat4[5],t.projMatrix.mat4[6],t.projMatrix.mat4[7],t.projMatrix.mat4[8],t.projMatrix.mat4[9],t.projMatrix.mat4[10],t.projMatrix.mat4[11],t.projMatrix.mat4[12],t.projMatrix.mat4[13],t.projMatrix.mat4[14],t.projMatrix.mat4[15])},t=n.default.Camera,o.default=t},{"../core/main":273,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.string.sub":198}],322:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(x=t("../core/main"))&&x.__esModule?x:{default:x},i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==d(t)&&"function"!=typeof t)return{default:t};var r,o=u();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("../core/constants")),a=t("./p5.Texture"),l=t("./p5.RendererGL");function u(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,u=function(){return t},t)}function c(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function d(t){return(d="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function h(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}function f(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,r,o){r&&f(t.prototype,r),o&&f(t,o)}function m(t,r,o){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,r,o){var t=function(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=g(t)););return t}(t,r);if(t)return(t=Object.getOwnPropertyDescriptor(t,r)).get?t.get.call(o):t.value})(t,r,o||t)}function y(t,r){return(y=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),t&&y(o,t);var r=function(){var t,r=g(o),r=(t=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?r.apply(this,arguments):(t=g(this).constructor,Reflect.construct(r,arguments,t)),this);if(!t||"object"!==d(t)&&"function"!=typeof t){if(void 0!==r)return r;throw ReferenceError("this hasn't been initialised - super() hasn't been called")}return t};function o(t){var n;return h(this,o),(n=r.call(this,t.target._renderer)).fbo=t,n.yScale=-1,n}return p(o,[{key:"_computeCameraDefaultSettings",value:function(){m(g(o.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultEyeZ=this.fbo.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_resize",value:function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this.fbo.width/this.fbo.height)}}]),o}(s.default.Camera),b=(s.default.FramebufferCamera=v,function(){function t(r,o){h(this,t),this.framebuffer=r,this.property=o}return p(t,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),t}()),x=(s.default.FramebufferTexture=b,function(){function t(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=(h(this,t),this.target=r,this.target._renderer.framebuffers.add(this),this.pixels=[],this.format=o.format||i.UNSIGNED_BYTE,this.channels=o.channels||(r._renderer._pInst._glAttributes.alpha?i.RGBA:i.RGB),this.useDepth=void 0===o.depth||o.depth,this.depthFormat=o.depthFormat||i.FLOAT,this.textureFiltering=o.textureFiltering||i.LINEAR,void 0===o.antialias?this.antialiasSamples=r._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof o.antialias?this.antialiasSamples=o.antialias:this.antialiasSamples=o.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&r.webglVersion!==i.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),o.width&&o.height?(this.width=o.width,this.height=o.height,this.autoSized=!1):(void 0===o.width!=(void 0===o.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=r.width,this.height=r.height,this.autoSized=!0),this.density=o.density||r.pixelDensity(),r._renderer.GL);if(this.gl=o,this._checkIfFormatsAvailable(),this.framebuffer=o.createFramebuffer(),!this.framebuffer)throw Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=o.createFramebuffer(),!this.aaFramebuffer))throw Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),r=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=r}return p(t,[{key:"resize",value:function(t,r){this.autoSized=!1,this.width=t,this.height=r,this._handleResize()}},{key:"pixelDensity",value:function(t){if(!t)return this.density;this.autoSized=!1,this.density=t,this._handleResize()}},{key:"autoSized",value:function(t){if(void 0===t)return this.autoSized;this.autoSized=t,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var t=this.gl,t=(this.useDepth&&this.target.webglVersion===i.WEBGL&&!t.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===i.WEBGL&&this.depthFormat===i.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=i.UNSIGNED_INT),[i.UNSIGNED_BYTE,i.FLOAT,i.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=i.UNSIGNED_BYTE),this.useDepth&&![i.UNSIGNED_INT,i.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=i.FLOAT),(0,a.checkWebGLCapabilities)(this.target._renderer));t.float||this.format!==i.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=i.UNSIGNED_BYTE),this.useDepth&&!t.float&&this.depthFormat===i.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=i.UNSIGNED_INT),t.halfFloat||this.format!==i.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=i.UNSIGNED_BYTE),this.channels===i.RGB&&[i.FLOAT,i.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=i.RGBA)}},{key:"_recreateTextures",value:function(){var t=this.gl,r=(this._updateSize(),t.getParameter(t.TEXTURE_BINDING_2D)),o=t.getParameter(t.FRAMEBUFFER_BINDING),n=t.createTexture();if(!n)throw Error("Unable to create color texture");t.bindTexture(t.TEXTURE_2D,n);var a=this._glColorFormat();if(t.texImage2D(t.TEXTURE_2D,0,a.internalFormat,this.width*this.density,this.height*this.density,0,a.format,a.type,null),this.colorTexture=n,t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.useDepth){var n=t.createTexture();if(!n)throw Error("Unable to create depth texture");var l=this._glDepthFormat();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,l.internalFormat,this.width*this.density,this.height*this.density,0,l.format,l.type,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,n,0),this.depthTexture=n}this.antialias&&(this.colorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.colorRenderbuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,t.getParameter(t.MAX_SAMPLES))),a.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(l=this._glDepthFormat(),this.depthRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.depthRenderbuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,t.getParameter(t.MAX_SAMPLES))),l.internalFormat,this.width*this.density,this.height*this.density)),t.bindFramebuffer(t.FRAMEBUFFER,this.aaFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new b(this,"depthTexture"),n=t.NEAREST,this.depthP5Texture=new s.default.Texture(this.target._renderer,this.depth,{minFilter:n,magFilter:n}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new b(this,"colorTexture"),a=this.textureFiltering===i.LINEAR?t.LINEAR:t.NEAREST,this.colorP5Texture=new s.default.Texture(this.target._renderer,this.color,{glMinFilter:a,glMagFilter:a}),this.target._renderer.textures.set(this.color,this.colorP5Texture),t.bindTexture(t.TEXTURE_2D,r),t.bindFramebuffer(t.FRAMEBUFFER,o)}},{key:"_glColorFormat",value:function(){var t,r,o=this.gl,n=this.format===i.FLOAT?o.FLOAT:this.format===i.HALF_FLOAT?this.target.webglVersion===i.WEBGL2?o.HALF_FLOAT:o.getExtension("OES_texture_half_float").HALF_FLOAT_OES:o.UNSIGNED_BYTE,s=this.channels===i.RGBA?o.RGBA:o.RGB;return{internalFormat:this.target.webglVersion===i.WEBGL2?(c(r={},o.FLOAT,c({},o.RGBA,o.RGBA32F)),c(r,o.HALF_FLOAT,c({},o.RGBA,o.RGBA16F)),c(r,o.UNSIGNED_BYTE,(c(t={},o.RGBA,o.RGBA8),c(t,o.RGB,o.RGB8),t)),r[n][s]):this.format===i.HALF_FLOAT?o.RGBA:s,format:s,type:n}}},{key:"_glDepthFormat",value:function(){var t=this.gl,r=this.depthFormat===i.FLOAT?t.FLOAT:t.UNSIGNED_INT,o=t.DEPTH_COMPONENT,t=this.target.webglVersion===i.WEBGL2?this.depthFormat===i.FLOAT?t.DEPTH_COMPONENT32F:t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT;return{internalFormat:t,format:o,type:r}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var t=this.color,r=this.depth,o=this.colorRenderbuffer,n=this.depthRenderbuffer,t=(this._deleteTexture(t),r&&this._deleteTexture(r),this.gl);o&&t.deleteRenderbuffer(o),n&&t.deleteRenderbuffer(n),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var t=new v(this);return t._computeCameraDefaultSettings(),t._setDefaultCamera(),this.target._renderer._curCamera=t}},{key:"_deleteTexture",value:function(t){this.gl.deleteTexture(t.rawTexture()),this.target._renderer.textures.delete(t)}},{key:"remove",value:function(){var t=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),t.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&t.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&t.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&t.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){var t=this.gl;this.prevFramebuffer=t.getParameter(t.FRAMEBUFFER_BINDING),this.antialias?t.bindFramebuffer(t.FRAMEBUFFER,this.aaFramebuffer):t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.prevViewport=t.getParameter(t.VIEWPORT),t.viewport(0,0,this.width*this.density,this.height*this.density),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"end",value:function(){var t,r=this.gl;if(this.antialias){r.bindFramebuffer(r.READ_FRAMEBUFFER,this.aaFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,this.framebuffer);var o=[[r.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]];this.useDepth&&o.push([r.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var n=0;n<o.length;n++){var s,i=function(t){if(Array.isArray(t))return t}(s=o[n])||function(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],n=!0,s=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!r||o.length!==r);n=!0);}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}return o}}(s,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}(),a=i[0],i=i[1];r.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,a,i)}}r.bindFramebuffer(r.FRAMEBUFFER,this.prevFramebuffer),r.viewport.apply(r,function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(t=this.prevViewport)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()),this.target.pop()}},{key:"draw",value:function(t){this.begin(),t(),this.end()}},{key:"loadPixels",value:function(){var t=this.gl,r=t.getParameter(t.FRAMEBUFFER_BINDING),o=(t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,l.readPixelsWebGL)(this.pixels,t,this.framebuffer,0,0,this.width*this.density,this.height*this.density,o.format,o.type),t.bindFramebuffer(t.FRAMEBUFFER,r)}},{key:"get",value:function(t,r,o,n){s.default._validateParameters("p5.Framebuffer.get",arguments);var i=this._glColorFormat();if(void 0===t&&void 0===r)r=t=0,o=this.width,n=this.height;else if(void 0===o&&void 0===n)return(t<0||r<0||t>=this.width||r>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),t=this.target.constrain(t,0,this.width-1),r=this.target.constrain(r,0,this.height-1)),(0,l.readPixelWebGL)(this.gl,this.framebuffer,t*this.density,r*this.density,i.format,i.type);t=this.target.constrain(t,0,this.width-1),r=this.target.constrain(r,0,this.height-1),o=this.target.constrain(o,1,this.width-t),n=this.target.constrain(n,1,this.height-r);for(var a=(0,l.readPixelsWebGL)(void 0,this.gl,this.framebuffer,t*this.density,r*this.density,o*this.density,n*this.density,i.format,i.type),u=new Uint8ClampedArray(o*n*this.density*this.density*4),c=(u.fill(255),i.type===this.gl.RGB?3:4),d=0;d<n*this.density;d++)for(var h=0;h<o*this.density;h++)for(var f=0;f<4;f++){var p,m=4*(d*o*this.density+h)+f;f<c&&(p=4==c?m:(d*o*this.density+h)*c+f,u[m]=a[p])}return(t=new s.default.Image(o*this.density,n*this.density)).imageData=t.canvas.getContext("2d").createImageData(t.width,t.height),t.imageData.data.set(u),t.pixels=t.imageData.data,t.updatePixels(),1!==this.density&&t.resize(o,n),t}},{key:"updatePixels",value:function(){var t=this.gl,r=(this.colorP5Texture.bindTexture(),this._glColorFormat()),o=r.format===t.RGBA?4:3,o=this.width*this.height*this.density*this.density*o,n=r.type===t.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof n)||this.pixels.length!==o)throw Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");t.texImage2D(t.TEXTURE_2D,0,r.internalFormat,this.width*this.density,this.height*this.density,0,r.format,r.type,this.pixels),this.colorP5Texture.unbindTexture(),this.prevFramebuffer=t.getParameter(t.FRAMEBUFFER_BINDING),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(t.clearDepth(1),t.clear(t.DEPTH_BUFFER_BIT)),this.end()):(t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.useDepth&&(t.clearDepth(1),t.clear(t.DEPTH_BUFFER_BIT)),t.bindFramebuffer(t.FRAMEBUFFER,this.prevFramebuffer))}}]),t}()),t=s.default.Framebuffer=x;o.default=t},{"../core/constants":262,"../core/main":273,"./p5.RendererGL":328,"./p5.Texture":330,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],323:[function(t,r,o){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.Geometry=function(){var t,r;function o(t,r,n){if(this instanceof o)return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=void 0!==t?t:1,this.detailY=void 0!==r?r:1,this.dirtyFlags={},n instanceof Function&&n.call(this),this;throw TypeError("Cannot call a class as a function")}return t=[{key:"reset",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"computeFaces",value:function(){this.faces.length=0;for(var t,r,o,n=this.detailX+1,s=0;s<this.detailY;s++)for(var i=0;i<this.detailX;i++)r=(s+1)*n+i+1,this.faces.push([s*n+i,t=s*n+i+1,o=(s+1)*n+i]),this.faces.push([o,t,r]);return this}},{key:"_getFaceNormal",value:function(t){var t=this.faces[t],r=this.vertices[t[0]],o=this.vertices[t[1]],t=this.vertices[t[2]],o=n.default.Vector.sub(o,r),t=n.default.Vector.sub(t,r),r=n.default.Vector.cross(o,t),s=n.default.Vector.mag(r),o=s/(n.default.Vector.mag(o)*n.default.Vector.mag(t));return 0===o||isNaN(o)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),r):(1<o&&(o=1),r.mult(Math.asin(o)/s))}},{key:"computeNormals",value:function(){for(var t=this,r=this.vertexNormals,o=this.vertices,s=this.faces,i=r.length=0;i<o.length;++i)r.push(new n.default.Vector);for(s.forEach(function(o,n){for(var s=t._getFaceNormal(n),i=0;i<3;++i)r[o[i]].add(s)}),i=0;i<o.length;++i)r[i].normalize();return this}},{key:"averageNormals",value:function(){for(var t=0;t<=this.detailY;t++){var r=this.detailX+1,o=n.default.Vector.add(this.vertexNormals[t*r],this.vertexNormals[t*r+this.detailX]),o=n.default.Vector.div(o,2);this.vertexNormals[t*r]=o,this.vertexNormals[t*r+this.detailX]=o}return this}},{key:"averagePoleNormals",value:function(){for(var t=new n.default.Vector(0,0,0),r=0;r<this.detailX;r++)t.add(this.vertexNormals[r]);for(var t=n.default.Vector.div(t,this.detailX),o=0;o<this.detailX;o++)this.vertexNormals[o]=t;t=new n.default.Vector(0,0,0);for(var s=this.vertices.length-1;s>this.vertices.length-1-this.detailX;s--)t.add(this.vertexNormals[s]);t=n.default.Vector.div(t,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=t;return this}},{key:"_makeTriangleEdges",value:function(){for(var t=this.edges.length=0;t<this.faces.length;t++)this.edges.push([this.faces[t][0],this.faces[t][1]]),this.edges.push([this.faces[t][1],this.faces[t][2]]),this.edges.push([this.faces[t][2],this.faces[t][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var t,r=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],o=!1,n=0;n<this.edges.length;n++){var s=this.edges[n-1],i=this.edges[n],a=this.vertices[i[0]],l=this.vertices[i[1]],u=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*i[0],4*(i[0]+1)):[0,0,0,0],c=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*i[1],4*(i[1]+1)):[0,0,0,0],d=l.copy().sub(a).normalize(),h=0<d.magSq();h&&this._addSegment(a,l,u,c,d),0<n&&s[1]===i[0]?(t&&h&&d.dot(t)<1-1e-8&&this._addJoin(a,t,d,u),!h||o||r||(this._addCap(a,d.copy().mult(-1),u),o=!0)):(o=!1,h&&(!r||0<n)&&(this._addCap(a,d.copy().mult(-1),u),o=!0),t&&(!r||n<this.edges.length-1)&&(this._addCap(this.vertices[s[1]],t,u),t=void 0)),n===this.edges.length-1&&(r?this._addJoin(l,d,this.vertices[this.edges[0][1]].copy().sub(l).normalize(),c):this._addCap(l,d,c)),h&&(t=d)}return this}},{key:"_addSegment",value:function(t,r,o,n,s){var t=t.array(),r=r.array(),i=s.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var a=0,l=[this.lineTangentsIn,this.lineTangentsOut];a<l.length;a++)l[a].push(i,i,i,i,i,i);return this.lineVertices.push(t,t,r,r,t,r),this.lineVertexColors.push(o,o,n,n,o,n),this}},{key:"_addCap",value:function(t,r,o){for(var n=t.array(),s=r.array(),i=[0,0,0],a=0;a<6;a++)this.lineVertices.push(n),this.lineTangentsIn.push(s),this.lineTangentsOut.push(i),this.lineVertexColors.push(o);return this.lineSides.push(-1,-2,2,2,1,-1),this}},{key:"_addJoin",value:function(t,r,o,n){for(var s=t.array(),i=r.array(),a=o.array(),l=0;l<12;l++)this.lineVertices.push(s),this.lineTangentsIn.push(i),this.lineTangentsOut.push(a),this.lineVertexColors.push(n);for(var u=0,c=[-1,1];u<c.length;u++){var d=c[u];this.lineSides.push(d,2*d,3*d,d,3*d,0)}return this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var t=this.vertices[0].copy(),r=this.vertices[0].copy(),o=0;o<this.vertices.length;o++)t.x=Math.max(t.x,this.vertices[o].x),r.x=Math.min(r.x,this.vertices[o].x),t.y=Math.max(t.y,this.vertices[o].y),r.y=Math.min(r.y,this.vertices[o].y),t.z=Math.max(t.z,this.vertices[o].z),r.z=Math.min(r.z,this.vertices[o].z);for(var s=n.default.Vector.lerp(t,r,.5),i=n.default.Vector.sub(t,r),a=200/Math.max(Math.max(i.x,i.y),i.z),l=0;l<this.vertices.length;l++)this.vertices[l].sub(s),this.vertices[l].mult(a)}return this}}],s(o.prototype,t),r&&s(o,r),o}(),t=n.default.Geometry,o.default=t},{"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.slice":164,"core-js/modules/es.string.sub":198,"core-js/modules/web.dom-collections.for-each":235}],324:[function(t,r,o){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=Array,a=function(t){return Array.isArray(t)},t=("undefined"!=typeof Float32Array&&(i=Float32Array,a=function(t){return Array.isArray(t)||t instanceof Float32Array}),n.default.Matrix=function(){var t,r;function o(){var t=this,r=o;if(t instanceof r)return arguments.length&&((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t])instanceof n.default&&(this.p5=(r=arguments.length-1)<0||arguments.length<=r?void 0:arguments[r]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw TypeError("Cannot call a class as a function")}return r=[{key:"identity",value:function(t){return new n.default.Matrix(t)}}],t=[{key:"set",value:function(t){return t instanceof n.default.Matrix?this.mat4=t.mat4:a(t)?this.mat4=t:16==arguments.length&&(this.mat4[0]=t,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new n.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var t;return void 0!==this.mat3?((t=new n.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],t.mat3[1]=this.mat3[1],t.mat3[2]=this.mat3[2],t.mat3[3]=this.mat3[3],t.mat3[4]=this.mat3[4],t.mat3[5]=this.mat3[5],t.mat3[6]=this.mat3[6],t.mat3[7]=this.mat3[7],t.mat3[8]=this.mat3[8]):((t=new n.default.Matrix(this.p5)).mat4[0]=this.mat4[0],t.mat4[1]=this.mat4[1],t.mat4[2]=this.mat4[2],t.mat4[3]=this.mat4[3],t.mat4[4]=this.mat4[4],t.mat4[5]=this.mat4[5],t.mat4[6]=this.mat4[6],t.mat4[7]=this.mat4[7],t.mat4[8]=this.mat4[8],t.mat4[9]=this.mat4[9],t.mat4[10]=this.mat4[10],t.mat4[11]=this.mat4[11],t.mat4[12]=this.mat4[12],t.mat4[13]=this.mat4[13],t.mat4[14]=this.mat4[14],t.mat4[15]=this.mat4[15]),t}},{key:"transpose",value:function(t){var r,o,s,i,l,u;return t instanceof n.default.Matrix?(r=t.mat4[1],o=t.mat4[2],s=t.mat4[3],i=t.mat4[6],l=t.mat4[7],u=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=r,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=o,this.mat4[9]=i,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=s,this.mat4[13]=l,this.mat4[14]=u,this.mat4[15]=t.mat4[15]):a(t)&&(r=t[1],o=t[2],s=t[3],i=t[6],l=t[7],u=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=r,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=o,this.mat4[9]=i,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=s,this.mat4[13]=l,this.mat4[14]=u,this.mat4[15]=t[15]),this}},{key:"invert",value:function(t){t instanceof n.default.Matrix?(r=t.mat4[0],o=t.mat4[1],s=t.mat4[2],i=t.mat4[3],l=t.mat4[4],u=t.mat4[5],c=t.mat4[6],d=t.mat4[7],h=t.mat4[8],f=t.mat4[9],p=t.mat4[10],m=t.mat4[11],y=t.mat4[12],g=t.mat4[13],v=t.mat4[14],b=t.mat4[15]):a(t)&&(r=t[0],o=t[1],s=t[2],i=t[3],l=t[4],u=t[5],c=t[6],d=t[7],h=t[8],f=t[9],p=t[10],m=t[11],y=t[12],g=t[13],v=t[14],b=t[15]);var r,o,s,i,l,u,c,d,h,f,p,m,y,g,v,b,t=r*u-o*l,x=r*c-s*l,j=r*d-i*l,w=o*c-s*u,S=o*d-i*u,T=s*d-i*c,E=h*g-f*y,k=h*v-p*y,M=h*b-m*y,C=f*v-p*g,A=f*b-m*g,O=p*b-m*v,R=t*O-x*A+j*C+w*M-S*k+T*E;return R?(this.mat4[0]=(u*O-c*A+d*C)*(R=1/R),this.mat4[1]=(s*A-o*O-i*C)*R,this.mat4[2]=(g*T-v*S+b*w)*R,this.mat4[3]=(p*S-f*T-m*w)*R,this.mat4[4]=(c*M-l*O-d*k)*R,this.mat4[5]=(r*O-s*M+i*k)*R,this.mat4[6]=(v*j-y*T-b*x)*R,this.mat4[7]=(h*T-p*j+m*x)*R,this.mat4[8]=(l*A-u*M+d*E)*R,this.mat4[9]=(o*M-r*A-i*E)*R,this.mat4[10]=(y*S-g*j+b*t)*R,this.mat4[11]=(f*j-h*S-m*t)*R,this.mat4[12]=(u*k-l*C-c*E)*R,this.mat4[13]=(r*C-o*k+s*E)*R,this.mat4[14]=(g*x-y*w-v*t)*R,this.mat4[15]=(h*w-f*x+p*t)*R,this):null}},{key:"invert3x3",value:function(){var t=this.mat3[0],r=this.mat3[1],o=this.mat3[2],n=this.mat3[3],s=this.mat3[4],i=this.mat3[5],a=this.mat3[6],l=this.mat3[7],u=this.mat3[8],c=u*s-i*l,d=-u*n+i*a,h=l*n-s*a,f=t*c+r*d+o*h;return f?(this.mat3[0]=c*(f=1/f),this.mat3[1]=(-u*r+o*l)*f,this.mat3[2]=(i*r-o*s)*f,this.mat3[3]=d*f,this.mat3[4]=(u*t-o*a)*f,this.mat3[5]=(-i*t+o*n)*f,this.mat3[6]=h*f,this.mat3[7]=(-l*t+r*a)*f,this.mat3[8]=(s*t-r*n)*f,this):null}},{key:"transpose3x3",value:function(t){var r=(t=void 0===t?this.mat3:t)[1],o=t[2],n=t[5];return this.mat3[0]=t[0],this.mat3[1]=t[3],this.mat3[2]=t[6],this.mat3[3]=r,this.mat3[4]=t[4],this.mat3[5]=t[7],this.mat3[6]=o,this.mat3[7]=n,this.mat3[8]=t[8],this}},{key:"inverseTranspose",value:function(t){if(t=t.mat4,void 0===this.mat3?n.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=t[0],this.mat3[1]=t[1],this.mat3[2]=t[2],this.mat3[3]=t[4],this.mat3[4]=t[5],this.mat3[5]=t[6],this.mat3[6]=t[8],this.mat3[7]=t[9],this.mat3[8]=t[10]),t=this.invert3x3())t.transpose3x3(this.mat3);else for(var r=0;r<9;r++)this.mat3[r]=0;return this}},{key:"determinant",value:function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],r=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],o=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],n=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],s=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],i=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],a=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],l=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],u=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],c=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],d=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return t*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-r*d+o*c+n*u-s*l+i*a}},{key:"mult",value:function(t){if(t===this||t===this.mat4)r=this.copy().mat4;else if(t instanceof n.default.Matrix)r=t.mat4;else if(a(t))r=t;else{if(16!=arguments.length)return;r=arguments}var r,t=this.mat4[0],o=this.mat4[1],s=this.mat4[2],i=this.mat4[3];return this.mat4[0]=t*r[0]+o*r[4]+s*r[8]+i*r[12],this.mat4[1]=t*r[1]+o*r[5]+s*r[9]+i*r[13],this.mat4[2]=t*r[2]+o*r[6]+s*r[10]+i*r[14],this.mat4[3]=t*r[3]+o*r[7]+s*r[11]+i*r[15],t=this.mat4[4],o=this.mat4[5],s=this.mat4[6],i=this.mat4[7],this.mat4[4]=t*r[0]+o*r[4]+s*r[8]+i*r[12],this.mat4[5]=t*r[1]+o*r[5]+s*r[9]+i*r[13],this.mat4[6]=t*r[2]+o*r[6]+s*r[10]+i*r[14],this.mat4[7]=t*r[3]+o*r[7]+s*r[11]+i*r[15],t=this.mat4[8],o=this.mat4[9],s=this.mat4[10],i=this.mat4[11],this.mat4[8]=t*r[0]+o*r[4]+s*r[8]+i*r[12],this.mat4[9]=t*r[1]+o*r[5]+s*r[9]+i*r[13],this.mat4[10]=t*r[2]+o*r[6]+s*r[10]+i*r[14],this.mat4[11]=t*r[3]+o*r[7]+s*r[11]+i*r[15],t=this.mat4[12],o=this.mat4[13],s=this.mat4[14],i=this.mat4[15],this.mat4[12]=t*r[0]+o*r[4]+s*r[8]+i*r[12],this.mat4[13]=t*r[1]+o*r[5]+s*r[9]+i*r[13],this.mat4[14]=t*r[2]+o*r[6]+s*r[10]+i*r[14],this.mat4[15]=t*r[3]+o*r[7]+s*r[11]+i*r[15],this}},{key:"apply",value:function(t){if(t===this||t===this.mat4)r=this.copy().mat4;else if(t instanceof n.default.Matrix)r=t.mat4;else if(a(t))r=t;else{if(16!=arguments.length)return;r=arguments}var r,t=this.mat4,o=t[0],s=t[4],i=t[8],l=t[12],o=(t[0]=r[0]*o+r[1]*s+r[2]*i+r[3]*l,t[4]=r[4]*o+r[5]*s+r[6]*i+r[7]*l,t[8]=r[8]*o+r[9]*s+r[10]*i+r[11]*l,t[12]=r[12]*o+r[13]*s+r[14]*i+r[15]*l,t[1]),s=t[5],i=t[9],l=t[13],o=(t[1]=r[0]*o+r[1]*s+r[2]*i+r[3]*l,t[5]=r[4]*o+r[5]*s+r[6]*i+r[7]*l,t[9]=r[8]*o+r[9]*s+r[10]*i+r[11]*l,t[13]=r[12]*o+r[13]*s+r[14]*i+r[15]*l,t[2]),s=t[6],i=t[10],l=t[14],o=(t[2]=r[0]*o+r[1]*s+r[2]*i+r[3]*l,t[6]=r[4]*o+r[5]*s+r[6]*i+r[7]*l,t[10]=r[8]*o+r[9]*s+r[10]*i+r[11]*l,t[14]=r[12]*o+r[13]*s+r[14]*i+r[15]*l,t[3]),s=t[7],i=t[11],l=t[15];return t[3]=r[0]*o+r[1]*s+r[2]*i+r[3]*l,t[7]=r[4]*o+r[5]*s+r[6]*i+r[7]*l,t[11]=r[8]*o+r[9]*s+r[10]*i+r[11]*l,t[15]=r[12]*o+r[13]*s+r[14]*i+r[15]*l,this}},{key:"scale",value:function(t,r,o){return t instanceof n.default.Vector?(r=t.y,o=t.z,t=t.x):t instanceof Array&&(r=t[1],o=t[2],t=t[0]),this.mat4[0]*=t,this.mat4[1]*=t,this.mat4[2]*=t,this.mat4[3]*=t,this.mat4[4]*=r,this.mat4[5]*=r,this.mat4[6]*=r,this.mat4[7]*=r,this.mat4[8]*=o,this.mat4[9]*=o,this.mat4[10]*=o,this.mat4[11]*=o,this}},{key:"rotate",value:function(t,r,o,s){r instanceof n.default.Vector?(o=r.y,s=r.z,r=r.x):r instanceof Array&&(o=r[1],s=r[2],r=r[0]);var i=Math.sqrt(r*r+o*o+s*s),i=(r*=1/i,o*=1/i,s*=1/i,this.mat4[0]),a=this.mat4[1],l=this.mat4[2],u=this.mat4[3],c=this.mat4[4],d=this.mat4[5],h=this.mat4[6],f=this.mat4[7],p=this.mat4[8],m=this.mat4[9],y=this.mat4[10],g=this.mat4[11],v=Math.sin(t),t=Math.cos(t),b=1-t,x=r*r*b+t,j=o*r*b+s*v,w=s*r*b-o*v,S=r*o*b-s*v,T=o*o*b+t,E=s*o*b+r*v,k=r*s*b+o*v,o=o*s*b-r*v,r=s*s*b+t;return this.mat4[0]=i*x+c*j+p*w,this.mat4[1]=a*x+d*j+m*w,this.mat4[2]=l*x+h*j+y*w,this.mat4[3]=u*x+f*j+g*w,this.mat4[4]=i*S+c*T+p*E,this.mat4[5]=a*S+d*T+m*E,this.mat4[6]=l*S+h*T+y*E,this.mat4[7]=u*S+f*T+g*E,this.mat4[8]=i*k+c*o+p*r,this.mat4[9]=a*k+d*o+m*r,this.mat4[10]=l*k+h*o+y*r,this.mat4[11]=u*k+f*o+g*r,this}},{key:"translate",value:function(t){var r=t[0],o=t[1],t=t[2]||0;this.mat4[12]+=this.mat4[0]*r+this.mat4[4]*o+this.mat4[8]*t,this.mat4[13]+=this.mat4[1]*r+this.mat4[5]*o+this.mat4[9]*t,this.mat4[14]+=this.mat4[2]*r+this.mat4[6]*o+this.mat4[10]*t,this.mat4[15]+=this.mat4[3]*r+this.mat4[7]*o+this.mat4[11]*t}},{key:"rotateX",value:function(t){this.rotate(t,1,0,0)}},{key:"rotateY",value:function(t){this.rotate(t,0,1,0)}},{key:"rotateZ",value:function(t){this.rotate(t,0,0,1)}},{key:"perspective",value:function(t,r,o,n){var t=1/Math.tan(t/2),s=1/(o-n);return this.mat4[0]=t/r,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=t,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(n+o)*s,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*n*o*s,this.mat4[15]=0,this}},{key:"ortho",value:function(t,r,o,n,s,i){var a=1/(t-r),l=1/(o-n),u=1/(s-i);return this.mat4[0]=-2*a,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*l,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*u,this.mat4[11]=0,this.mat4[12]=(t+r)*a,this.mat4[13]=(n+o)*l,this.mat4[14]=(i+s)*u,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(t,r,o,n){var s=[,,,,],i=this.mat4;return s[0]=i[0]*t+i[4]*r+i[8]*o+i[12]*n,s[1]=i[1]*t+i[5]*r+i[9]*o+i[13]*n,s[2]=i[2]*t+i[6]*r+i[10]*o+i[14]*n,s[3]=i[3]*t+i[7]*r+i[11]*o+i[15]*n,s}},{key:"multiplyPoint",value:function(t){var r=t.x,o=t.y,t=t.z,r=this.multiplyVec4(r,o,t,1);return new n.default.Vector(r[0],r[1],r[2])}},{key:"multiplyAndNormalizePoint",value:function(t){var r=t.x,o=t.y,t=t.z,r=this.multiplyVec4(r,o,t,1);return r[0]/=r[3],r[1]/=r[3],r[2]/=r[3],new n.default.Vector(r[0],r[1],r[2])}},{key:"multiplyDirection",value:function(t){var r=t.x,o=t.y,t=t.z,r=this.multiplyVec4(r,o,t,0);return new n.default.Vector(r[0],r[1],r[2])}},{key:"mult3x3",value:function(t){if(t===this||t===this.mat3)r=this.copy().mat3;else if(t instanceof n.default.Matrix)r=t.mat3;else if(a(t))r=t;else{if(9!=arguments.length)return;r=arguments}var r,t=this.mat3[0],o=this.mat3[1],s=this.mat3[2];return this.mat3[0]=t*r[0]+o*r[3]+s*r[6],this.mat3[1]=t*r[1]+o*r[4]+s*r[7],this.mat3[2]=t*r[2]+o*r[5]+s*r[8],t=this.mat3[3],o=this.mat3[4],s=this.mat3[5],this.mat3[3]=t*r[0]+o*r[3]+s*r[6],this.mat3[4]=t*r[1]+o*r[4]+s*r[7],this.mat3[5]=t*r[2]+o*r[5]+s*r[8],t=this.mat3[6],o=this.mat3[7],s=this.mat3[8],this.mat3[6]=t*r[0]+o*r[3]+s*r[6],this.mat3[7]=t*r[1]+o*r[4]+s*r[7],this.mat3[8]=t*r[2]+o*r[5]+s*r[8],this}},{key:"column",value:function(t){return new n.default.Vector(this.mat3[t],this.mat3[t+3],this.mat3[t+6])}},{key:"row",value:function(t){return new n.default.Vector(this.mat3[3*t],this.mat3[3*t+1],this.mat3[3*t+2])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(t,r){return(r=void 0===r?t.copy():r).x=this.row(0).dot(t),r.y=this.row(1).dot(t),r.z=this.row(2).dot(t),r}},{key:"createSubMatrix3x3",value:function(){var t=new n.default.Matrix("mat3");return t.mat3[0]=this.mat4[0],t.mat3[1]=this.mat4[1],t.mat3[2]=this.mat4[2],t.mat3[3]=this.mat4[4],t.mat3[4]=this.mat4[5],t.mat3[5]=this.mat4[6],t.mat3[6]=this.mat4[8],t.mat3[7]=this.mat4[9],t.mat3[8]=this.mat4[10],t}}],s(o.prototype,t),r&&s(o,r),o}(),n.default.Matrix);o.default=t},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229}],325:[function(t,r,o){function n(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.RenderBuffer=function(){var t,r;function o(t,r,n,s,i,a){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this.size=t,this.src=r,this.dst=n,this.attr=s,this._renderer=i,this.map=a}return t=[{key:"_prepareBuffer",value:function(t,r){var o,n,s,i=r.attributes,a=this._renderer.GL,l=t.model||t,i=i[this.attr];i&&(o=t[this.dst],0<(n=l[this.src]).length?((s=!o)&&(t[this.dst]=o=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,o),(s||!1!==l.dirtyFlags[this.src])&&(s=(t=this.map)?t(n):n,this._renderer._bindBuffer(o,a.ARRAY_BUFFER,s),l.dirtyFlags[this.src]=!1),r.enableAttrib(i,this.size)):-1!==(t=i.location)&&this._renderer.registerEnabled[t]&&(a.disableVertexAttribArray(t),this._renderer.registerEnabled[t]=!1))}}],n(o.prototype,t),r&&n(o,r),o}(),t=t.default.RenderBuffer,o.default=t},{"../core/main":273,"core-js/modules/es.array.map":163}],326:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(d=t("../core/main"))&&d.__esModule?d:{default:d},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}function u(t){return function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(t){return this.immediateMode.shapeMode=void 0!==t?t:a.TESS,this.immediateMode.geometry.reset(),this};var c={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},d=(i.default.RendererGL.prototype.vertex=function(t,r){if(this.immediateMode.shapeMode===a.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var o in c){var n=c[o],o=this.immediateMode.geometry[o];o.push.apply(o,u(o.slice(o.length-3*n,o.length-2*n)).concat(u(o.slice(o.length-n,o.length))))}var s,l,d=s=l=0,h=(3==arguments.length?d=arguments[2]:4==arguments.length?(s=arguments[2],l=arguments[3]):5==arguments.length&&(d=arguments[2],s=arguments[3],l=arguments[4]),new i.default.Vector(t,r,d)),h=(this.immediateMode.geometry.vertices.push(h),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),h=(this.immediateMode.geometry.vertexColors.push(h[0],h[1],h[2],h[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(h[0],h[1],h[2],h[3]),this.textureMode===a.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(s/=this._tex.width,l/=this._tex.height):!this.isProcessingVertices&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(s,l),this.immediateMode._bezierVertex[0]=t,this.immediateMode._bezierVertex[1]=r,this.immediateMode._bezierVertex[2]=d,this.immediateMode._quadraticVertex[0]=t,this.immediateMode._quadraticVertex[1]=r,this.immediateMode._quadraticVertex[2]=d,this},i.default.RendererGL.prototype.normal=function(t,r,o){return t instanceof i.default.Vector?this._currentNormal=t:this._currentNormal=new i.default.Vector(t,r,o),this},i.default.RendererGL.prototype.endShape=function(t,r,o,n,s,i){return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(t){var r;0!==this.immediateMode.geometry.vertices.length&&(r=this._doStroke,t=t===a.CLOSE,r&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,t),this.immediateMode.geometry._edgesToVertices()),r=this.immediateMode.shapeMode===a.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||r)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape())},i.default.RendererGL.prototype._calculateEdges=function(t,r,o){var n=[],s=0;switch(t){case a.TRIANGLE_STRIP:for(s=0;s<r.length-2;s++)n.push([s,s+1]),n.push([s,s+2]);n.push([s,s+1]);break;case a.TRIANGLE_FAN:for(s=1;s<r.length-1;s++)n.push([0,s]),n.push([s,s+1]);n.push([0,r.length-1]);break;case a.TRIANGLES:for(s=0;s<r.length-2;s+=3)n.push([s,s+1]),n.push([s+1,s+2]),n.push([s+2,s]);break;case a.LINES:for(s=0;s<r.length-1;s+=2)n.push([s,s+1]);break;case a.QUADS:for(s=0;s<r.length-5;s+=6)n.push([s,s+1]),n.push([s+1,s+2]),n.push([s+3,s+5]),n.push([s+4,s+5]);break;case a.QUAD_STRIP:for(s=0;s<r.length-2;s+=2)n.push([s,s+1]),n.push([s,s+2]),n.push([s+1,s+3]);n.push([s,s+1]);break;default:for(s=0;s<r.length-1;s++)n.push([s,s+1])}return o&&n.push([r.length-1,0]),n},i.default.RendererGL.prototype._tesselateShape=function(){for(var t=this,r=(this.immediateMode.shapeMode=a.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(r,o){return[r.x,r.y,r.z,t.immediateMode.geometry.uvs[2*o],t.immediateMode.geometry.uvs[2*o+1],t.immediateMode.geometry.vertexColors[4*o],t.immediateMode.geometry.vertexColors[4*o+1],t.immediateMode.geometry.vertexColors[4*o+2],t.immediateMode.geometry.vertexColors[4*o+3],t.immediateMode.geometry.vertexNormals[o].x,t.immediateMode.geometry.vertexNormals[o].y,t.immediateMode.geometry.vertexNormals[o].z]}))]),o=this._triangulate(r),n=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),s=0,l=o.length;s<l;s+=i.default.RendererGL.prototype.tessyVertexSize)n.push.apply(n,u(o.slice(s+5,s+9))),this.normal.apply(this,u(o.slice(s+9,s+12))),this.vertex.apply(this,u(o.slice(s,s+5)));this.immediateMode.geometry.vertexColors=n},i.default.RendererGL.prototype._drawImmediateFill=function(){var t=this.GL,r=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),o=(this._setFillUniforms(r),!0),n=!1,s=void 0;try{for(var i,l=this.immediateMode.buffers.fill[Symbol.iterator]();!(o=(i=l.next()).done);o=!0)i.value._prepareBuffer(this.immediateMode.geometry,r)}catch(t){n=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(n)throw s}}this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this.immediateMode.shapeMode===a.QUADS?this.immediateMode.shapeMode=a.TRIANGLES:this.immediateMode.shapeMode===a.QUAD_STRIP&&(this.immediateMode.shapeMode=a.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),t.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),r.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var t=this.GL,r=t.isEnabled(t.CULL_FACE),o=(t.disable(t.CULL_FACE),this._getImmediateStrokeShader()),n=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(o),!0),s=!1,i=void 0;try{for(var a,l=this.immediateMode.buffers.stroke[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)a.value._prepareBuffer(this.immediateMode.geometry,o)}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}this._applyColorBlend(this.curStrokeColor),t.drawArrays(t.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),r&&t.enable(t.CULL_FACE),o.unbindShader()},i.default.RendererGL);o.default=d},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],327:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=(c=t("../core/main"))&&c.__esModule?c:{default:c},a=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants")));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}var u=0,c=(i.default.RendererGL.prototype._initBufferDefaults=function(t){var r;return this._freeBuffers(t),1e3<++u&&(r=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[r],u--),this.retainedMode.geometry[t]={}},i.default.RendererGL.prototype._freeBuffers=function(t){var r,o=this.retainedMode.geometry[t];function n(t){var n=!0,s=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;o[u.dst]&&(r.deleteBuffer(o[u.dst]),o[u.dst]=null)}}catch(t){s=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(s)throw i}}}o&&(delete this.retainedMode.geometry[t],u--,r=this.GL,o.indexBuffer&&r.deleteBuffer(o.indexBuffer),n(this.retainedMode.buffers.stroke),n(this.retainedMode.buffers.fill))},i.default.RendererGL.prototype.createBuffers=function(t,r){var o,n,s,a=this.GL,t=this._initBufferDefaults(t),l=(t.model=r,t.indexBuffer);return r.faces.length?(l=l||(t.indexBuffer=a.createBuffer()),s=(n=(o=i.default.RendererGL.prototype._flatten(r.faces)).some(function(t){return 65535<t}))?Uint32Array:Uint16Array,this._bindBuffer(l,a.ELEMENT_ARRAY_BUFFER,o,s),t.indexBufferType=n?a.UNSIGNED_INT:a.UNSIGNED_SHORT,t.vertexCount=3*r.faces.length):(l&&(a.deleteBuffer(l),t.indexBuffer=null),t.vertexCount=r.vertices?r.vertices.length:0),t.lineVertexCount=r.lineVertices?r.lineVertices.length:0,t},i.default.RendererGL.prototype.drawBuffers=function(t){var r=this.GL,o=this.retainedMode.geometry[t];if(this._doFill){this._useVertexColor=0<o.model.vertexColors.length;var n=this._getRetainedFillShader(),s=(this._setFillUniforms(n),!0),i=!1,a=void 0;try{for(var l,u=this.retainedMode.buffers.fill[Symbol.iterator]();!(s=(l=u.next()).done);s=!0)l.value._prepareBuffer(o,n)}catch(t){i=!0,a=t}finally{try{s||null==u.return||u.return()}finally{if(i)throw a}}o.indexBuffer&&this._bindBuffer(o.indexBuffer,r.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(r.TRIANGLES,t),n.unbindShader()}if(this._doStroke&&0<o.lineVertexCount){var i=r.isEnabled(r.CULL_FACE),c=(r.disable(r.CULL_FACE),this._getRetainedStrokeShader()),d=(this._useLineColor=0<o.model.vertexStrokeColors.length,this._setStrokeUniforms(c),!0),a=!1,h=void 0;try{for(var f,p=this.retainedMode.buffers.stroke[Symbol.iterator]();!(d=(f=p.next()).done);d=!0)f.value._prepareBuffer(o,c)}catch(t){a=!0,h=t}finally{try{d||null==p.return||p.return()}finally{if(a)throw h}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(r.TRIANGLES,t),i&&r.enable(r.CULL_FACE),c.unbindShader()}return this},i.default.RendererGL.prototype.drawBuffersScaled=function(t,r,o,n){var s=this.uMVMatrix.copy();try{this.uMVMatrix.scale(r,o,n),this.drawBuffers(t)}finally{this.uMVMatrix=s}},i.default.RendererGL.prototype._drawArrays=function(t,r){return this.GL.drawArrays(t,0,this.retainedMode.geometry[r].lineVertexCount),this},i.default.RendererGL.prototype._drawElements=function(t,r){var r=this.retainedMode.geometry[r],o=this.GL;if(r.indexBuffer){if(this._pInst.webglVersion!==a.WEBGL2&&r.indexBufferType===o.UNSIGNED_INT&&!o.getExtension("OES_element_index_uint"))throw Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");o.drawElements(o.TRIANGLES,r.vertexCount,r.indexBufferType,0)}else o.drawArrays(t||o.TRIANGLES,0,r.vertexCount)},i.default.RendererGL.prototype._drawPoints=function(t,r){var o=this.GL,n=this._getImmediatePointShader();this._setPointUniforms(n),this._bindBuffer(r,o.ARRAY_BUFFER,this._vToNArray(t),Float32Array,o.STATIC_DRAW),n.enableAttrib(n.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),o.drawArrays(o.Points,0,t.length),n.unbindShader()},i.default.RendererGL);o.default=c},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"./p5.RendererGL":328,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.some":165,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],328:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.float64-array"),t("core-js/modules/es.typed-array.int16-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.float64-array"),t("core-js/modules/es.typed-array.int16-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.readPixelsWebGL=S,o.readPixelWebGL=T,o.default=void 0;var s=u(t("../core/main")),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(s,n,r):s[n]=t[n]);return s.default=t,o&&o.set(t,s),s}(t("../core/constants")),a=u(t("libtess"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function d(t){return function(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,r){return(f=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function p(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,r){x+="#define STROKE_CAP_".concat(t," ").concat(r,"\n"),v[i[t]]=r}function g(t,r){x+="#define STROKE_JOIN_".concat(t," ").concat(r,"\n"),b[i[t]]=r}t("./p5.Shader"),t("./p5.Camera"),t("../core/p5.Renderer"),t("./p5.Matrix"),t("path");var v={},b={},x="",t=(y("ROUND",0),y("PROJECT",1),y("SQUARE",2),g("ROUND",0),g("MITER",1),g("BEVEL",2),"precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];	\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n"),j="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n",w={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",lightVert:t+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",lightTextureFrag:"precision highp float;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? texture2D(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    gl_FragColor = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",phongFrag:t+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec4 baseColor = isTexture\n    // Textures come in with premultiplied alpha. To apply tint and still have\n    // premultiplied alpha output, we need to multiply the RGB channels by the\n    // tint RGB, and all channels by the tint alpha.\n    ? texture2D(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n    // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n    // channels by alpha to convert it to premultiplied alpha.\n    : vec4(vColor.rgb * vColor.a, vColor.a);\n  gl_FragColor = vec4(diffuse * baseColor.rgb + \n                    vAmbientColor * (\n                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb\n                    ) + \n                    specular * uSpecularMatColor.rgb + \n                    uEmissiveMatColor.rgb, baseColor.a);\n}\n",fontVert:j+"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec2 pixelScale = vec2(\n    1. / uModelViewMatrix[0][0],\n    1. / uModelViewMatrix[1][1]\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:j+"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n	#define int float\n	#define ivec2 vec2\n	#define INT(x) float(x)\n\n	int ifloor(float v) { return floor(v); }\n	ivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n	precision highp int;\n	#define INT(x) x\n\n	int ifloor(float v) { return int(v); }\n	int ifloor(int v) { return v; }\n	ivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:x+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump float;\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nattribute vec4 aPosition;\nattribute vec3 aTangentIn;\nattribute vec3 aTangentOut;\nattribute float aSide;\nattribute vec4 aVertexColor;\n\nvarying vec4 vColor;\nvarying vec2 vTangent;\nvarying vec2 vCenter;\nvarying vec2 vPosition;\nvarying float vMaxDist;\nvarying float vCap;\nvarying float vJoin;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));\n  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float scale = mix(1., 0.995, facingCamera);\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posqIn.xyz = posqIn.xyz * scale;\n  posqOut.xyz = posqOut.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = p.xy;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,\n          tangentIn,\n          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * uStrokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));\n    } else {\n      vMaxDist = uStrokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      uStrokeWeight * 0.5 * curPerspScale;\n    vMaxDist = uStrokeWeight / 2.;\n  }\n  vPosition = vCenter + offset / curPerspScale;\n\n  gl_Position.xy = p.xy + offset.xy;\n  gl_Position.zw = p.zw;\n  \n  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);\n}\n",lineFrag:x+"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\nuniform float uStrokeWeight;\n\nvarying vec4 vColor;\nvarying vec2 vTangent;\nvarying vec2 vCenter;\nvarying vec2 vPosition;\nvarying float vMaxDist;\nvarying float vCap;\nvarying float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nvoid main() {\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      dot(vPosition - vCenter, vTangent) > 0.\n    ) {\n      discard;\n    }\n    // Use full area for PROJECT\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-vTangent.y, vTangent.x);\n      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {\n        discard;\n      }\n    }\n    // Use full area for MITER\n  }\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n	vec4 positionVec4 =  vec4(aPosition, 1.0);\n	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n	gl_PointSize = uPointSize;\n	vStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(mask > 0.98){\n    discard;\n  }\n\n  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n}\n"};function S(t,r,o,n,s,i,a,l,u,c){var d=r.getParameter(r.FRAMEBUFFER_BINDING),o=(r.bindFramebuffer(r.FRAMEBUFFER,o),l===r.RGBA?4:3),h=i*a*o,f=u===r.UNSIGNED_BYTE?Uint8Array:Float32Array;if(t instanceof f&&t.length===h||(t=new f(h)),r.readPixels(n,c?c-s-a:s,i,a,l,u,t),r.bindFramebuffer(r.FRAMEBUFFER,d),c)for(var p=Math.floor(a/2),m=new f(i*o),y=0;y<p;y++){var g=y*i*4,v=(a-y-1)*i*4;m.set(t.subarray(g,g+4*i)),t.copyWithin(g,v,v+4*i),t.set(m,v)}return t}function T(t,r,o,n,s,i,a){var l=t.getParameter(t.FRAMEBUFFER_BINDING),r=(t.bindFramebuffer(t.FRAMEBUFFER,r),s===t.RGBA?4:3),r=new(i===t.UNSIGNED_BYTE?Uint8Array:Float32Array)(r);return t.readPixels(o,a?a-n-1:n,1,1,s,i,r),t.bindFramebuffer(t.FRAMEBUFFER,l),Array.from(r)}s.default.prototype.setAttributes=function(t,r){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var o=!0;if(void 0!==r?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[t]!==r&&(this._glAttributes[t]=r,o=!1)):t instanceof Object&&this._glAttributes!==t&&(this._glAttributes=t,o=!1),this._renderer.isP3D&&!o){if(!this._setupDone){for(var n in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(n))return void s.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},s.default.RendererGL=function(t){var r=l;if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&f(r,t);var o,n=function(){var t,r,o=m(l);return t=!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){}}}()?o.apply(this,arguments):(t=m(this).constructor,Reflect.construct(o,arguments,t)),o=this,(r=t)&&("object"===c(r)||"function"==typeof r)?r:p(o)};function l(t,r,o,a){if(this instanceof l)return(t=n.call(this,t,r,o))._setAttributeDefaults(r),t._initContext(),t.isP3D=!0,t.GL=t.drawingContext,t._pInst._setProperty("drawingContext",t.drawingContext),t._isErasing=!1,t._enableLighting=!1,t.ambientLightColors=[],t.specularColors=[1,1,1],t.directionalLightDirections=[],t.directionalLightDiffuseColors=[],t.directionalLightSpecularColors=[],t.pointLightPositions=[],t.pointLightDiffuseColors=[],t.pointLightSpecularColors=[],t.spotLightPositions=[],t.spotLightDirections=[],t.spotLightDiffuseColors=[],t.spotLightSpecularColors=[],t.spotLightAngle=[],t.spotLightConc=[],t.drawMode=i.FILL,t.curFillColor=t._cachedFillStyle=[1,1,1,1],t.curAmbientColor=t._cachedFillStyle=[1,1,1,1],t.curSpecularColor=t._cachedFillStyle=[0,0,0,0],t.curEmissiveColor=t._cachedFillStyle=[0,0,0,0],t.curStrokeColor=t._cachedStrokeStyle=[0,0,0,1],t.curBlendMode=i.BLEND,t._cachedBlendMode=void 0,t.webglVersion===i.WEBGL2?t.blendExt=t.GL:t.blendExt=t.GL.getExtension("EXT_blend_minmax"),t._isBlending=!1,t._hasSetAmbient=!1,t._useSpecularMaterial=!1,t._useEmissiveMaterial=!1,t._useNormalMaterial=!1,t._useShininess=1,t._useLineColor=!1,t._useVertexColor=!1,t.registerEnabled=[],t._tint=[255,255,255,255],t.constantAttenuation=1,t.linearAttenuation=0,t.quadraticAttenuation=0,t.uMVMatrix=new s.default.Matrix,t.uPMatrix=new s.default.Matrix,t.uNMatrix=new s.default.Matrix("mat3"),t._currentNormal=new s.default.Vector(0,0,1),t._curCamera=new s.default.Camera(p(t)),t._curCamera._computeCameraDefaultSettings(),t._curCamera._setDefaultCamera(),t.prevTouches=[],t.zoomVelocity=0,t.rotateVelocity=new s.default.Vector(0,0),t.moveVelocity=new s.default.Vector(0,0),t.executeZoom=!1,t.executeRotateAndMove=!1,t._defaultLightShader=void 0,t._defaultImmediateModeShader=void 0,t._defaultNormalShader=void 0,t._defaultColorShader=void 0,t._defaultPointShader=void 0,t.userFillShader=void 0,t.userStrokeShader=void 0,t.userPointShader=void 0,t.retainedMode={geometry:{},buffers:{stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",p(t),t._flatten),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",p(t),t._flatten),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",p(t),t._flatten),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",p(t),t._flatten),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",p(t))],fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",p(t),t._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",p(t),t._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",p(t)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",p(t)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",p(t),t._flatten)],text:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",p(t),t._vToNArray),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",p(t),t._flatten)]}},t.immediateMode={geometry:new s.default.Geometry,shapeMode:i.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",p(t),t._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",p(t),t._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",p(t)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",p(t)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",p(t),t._flatten)],stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",p(t),t._flatten),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",p(t),t._flatten),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",p(t),t._flatten),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",p(t),t._flatten),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",p(t))],point:t.GL.createBuffer()}},t.pointSize=5,t.curStrokeWeight=1,t.curStrokeCap=i.ROUND,t.curStrokeJoin=i.ROUND,t.textures=new Map,t.framebuffers=new Set,t.textureMode=i.IMAGE,t.textureWrapX=i.CLAMP,t.textureWrapY=i.CLAMP,t._tex=null,t._curveTightness=6,t._lookUpTableBezier=[],t._lookUpTableQuadratic=[],t._lutBezierDetail=0,t._lutQuadraticDetail=0,t.isProcessingVertices=!1,t._tessy=t._initTessy(),t.fontInfos={},t._curShader=void 0,t;throw TypeError("Cannot call a class as a function")}return r=l,t=[{key:"_setAttributeDefaults",value:function(t){var r={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};null===t._glAttributes?t._glAttributes=r:t._glAttributes=Object.assign(r,t._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?i.WEBGL2:i.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw Error("Error creating webgl context");var t=this.drawingContext;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(t,r){var o,n=this.width,i=this.height,a=this.canvas.id,l=this._pInst instanceof s.default.Graphics,a=(l?((o=this._pInst).canvas.parentNode.removeChild(o.canvas),o.canvas=document.createElement("canvas"),(o._pInst._userNode||document.body).appendChild(o.canvas),s.default.Element.call(o,o.canvas,o._pInst),o.width=n,o.height=i):((o=this.canvas)&&o.parentNode.removeChild(o),(o=document.createElement("canvas")).id=a,(this._pInst._userNode||document.body).appendChild(o),this._pInst.canvas=o,this.canvas=o),new s.default.RendererGL(this._pInst.canvas,this._pInst,!l));this._pInst._setProperty("_renderer",a),a.resize(n,i),a._applyDefaults(),l||this._pInst._elements.push(a),"function"==typeof r&&setTimeout(function(){r.apply(window._renderer,t)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"background",value:function(){var t=(t=this._pInst).color.apply(t,arguments),r=t.levels[0]/255,o=t.levels[1]/255,n=t.levels[2]/255,t=t.levels[3]/255;this.clear(r,o,n,t)}},{key:"fill",value:function(t,r,o,n){var a=s.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=a._array,this.drawMode=i.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(t,r,o,n){var i=s.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=i._array}},{key:"strokeCap",value:function(t){this.curStrokeCap=t}},{key:"strokeJoin",value:function(t){this.curStrokeJoin=t}},{key:"filter",value:function(t){s.default._friendlyError("filter() does not work in WEBGL mode")}},{key:"blendMode",value:function(t){t===i.DARKEST||t===i.LIGHTEST||t===i.ADD||t===i.BLEND||t===i.SUBTRACT||t===i.SCREEN||t===i.EXCLUSION||t===i.REPLACE||t===i.MULTIPLY||t===i.REMOVE?this.curBlendMode=t:t!==i.BURN&&t!==i.OVERLAY&&t!==i.HARD_LIGHT&&t!==i.SOFT_LIGHT&&t!==i.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(t,r){this._isErasing||(this._applyBlendMode(i.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,t/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,r/255])}},{key:"noErase",value:function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))}},{key:"strokeWeight",value:function(t){this.curStrokeWeight!==t&&(this.pointSize=t,this.curStrokeWeight=t)}},{key:"_getPixel",value:function(t,r){var o=this.GL;return T(o,null,t,r,o.RGBA,o.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var t,r,o=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(t=this._pInst._pixelDensity,r=this.GL,o._setProperty("pixels",S(o.pixels,r,null,0,0,this.width*t,this.height*t,r.RGBA,r.UNSIGNED_BYTE,this.height*t)))}},{key:"updatePixels",value:function(){var t=this._getTempFramebuffer();t.pixels=this._pixelsState.pixels,t.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(i.CENTER),this._pInst.image(t,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:i.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:i.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(t){return void 0!==this.retainedMode.geometry[t]}},{key:"resize",value:function(t,r){s.default.Renderer.prototype.resize.call(this,t,r),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var t=this._pixelsState,o=(void 0!==t.pixels&&t._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),r=!1,t=void 0;try{for(var n,i=this.framebuffers[Symbol.iterator]();!(o=(n=i.next()).done);o=!0)n.value._canvasSizeChanged()}catch(o){r=!0,t=o}finally{try{o||null==i.return||i.return()}finally{if(r)throw t}}}},{key:"clear",value:function(){var t=(arguments.length<=0?void 0:arguments[0])||0,r=(arguments.length<=1?void 0:arguments[1])||0,o=(arguments.length<=2?void 0:arguments[2])||0,n=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(t*n,r*n,o*n,n),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(t,r,o,n,i,a){16==arguments.length?s.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([t,r,0,0,o,n,0,0,0,0,1,0,i,a,0,1])}},{key:"translate",value:function(t,r,o){return t instanceof s.default.Vector&&(o=t.z,r=t.y,t=t.x),this.uMVMatrix.translate([t,r,o]),this}},{key:"scale",value:function(t,r,o){return this.uMVMatrix.scale(t,r,o),this}},{key:"rotate",value:function(t,r){return void 0===r?this.rotateZ(t):(s.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(t){return this.rotate(t,1,0,0),this}},{key:"rotateY",value:function(t){return this.rotate(t,0,1,0),this}},{key:"rotateZ",value:function(t){return this.rotate(t,0,0,1),this}},{key:"push",value:function(){var t=s.default.Renderer.prototype.push.apply(this),r=t.properties;return r.uMVMatrix=this.uMVMatrix.copy(),r.uPMatrix=this.uPMatrix.copy(),r._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),r.ambientLightColors=this.ambientLightColors.slice(),r.specularColors=this.specularColors.slice(),r.directionalLightDirections=this.directionalLightDirections.slice(),r.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),r.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),r.pointLightPositions=this.pointLightPositions.slice(),r.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),r.pointLightSpecularColors=this.pointLightSpecularColors.slice(),r.spotLightPositions=this.spotLightPositions.slice(),r.spotLightDirections=this.spotLightDirections.slice(),r.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),r.spotLightSpecularColors=this.spotLightSpecularColors.slice(),r.spotLightAngle=this.spotLightAngle.slice(),r.spotLightConc=this.spotLightConc.slice(),r.userFillShader=this.userFillShader,r.userStrokeShader=this.userStrokeShader,r.userPointShader=this.userPointShader,r.pointSize=this.pointSize,r.curStrokeWeight=this.curStrokeWeight,r.curStrokeColor=this.curStrokeColor,r.curFillColor=this.curFillColor,r.curAmbientColor=this.curAmbientColor,r.curSpecularColor=this.curSpecularColor,r.curEmissiveColor=this.curEmissiveColor,r._hasSetAmbient=this._hasSetAmbient,r._useSpecularMaterial=this._useSpecularMaterial,r._useEmissiveMaterial=this._useEmissiveMaterial,r._useShininess=this._useShininess,r.constantAttenuation=this.constantAttenuation,r.linearAttenuation=this.linearAttenuation,r.quadraticAttenuation=this.quadraticAttenuation,r._enableLighting=this._enableLighting,r._useNormalMaterial=this._useNormalMaterial,r._tex=this._tex,r.drawMode=this.drawMode,r._currentNormal=this._currentNormal,r.curBlendMode=this.curBlendMode,t}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var t=this.userStrokeShader;return t&&t.isStrokeShader()?t:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var t=this.userFillShader;if(this._useNormalMaterial&&(!t||!t.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!t||!t.isLightShader())return this._getLightShader()}else if(this._tex){if(!t||!t.isTextureShader())return this._getLightShader()}else if(!t)return this._getImmediateModeShader();return t}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var t=this.userFillShader;if(this._enableLighting){if(!t||!t.isLightShader())return this._getLightShader()}else if(this._tex){if(!t||!t.isTextureShader())return this._getLightShader()}else if(!t)return this._getColorShader();return t}},{key:"_getImmediatePointShader",value:function(){var t=this.userPointShader;return t&&t.isPointShader()?t:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new s.default.Shader(this,w.phongVert,w.phongFrag):this._defaultLightShader=new s.default.Shader(this,w.lightVert,w.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new s.default.Shader(this,w.immediateVert,w.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new s.default.Shader(this,w.normalVert,w.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new s.default.Shader(this,w.normalVert,w.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new s.default.Shader(this,w.pointVert,w.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new s.default.Shader(this,w.lineVert,w.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===i.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+w.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+w.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(t,r){var o="";return this.webglVersion===i.WEBGL2&&(o+="#version 300 es\n#define WEBGL2\n"),"vert"===t?o+="#define VERTEX_SHADER\n":"frag"===t&&(o+="#define FRAGMENT_SHADER\n"),r&&(o+="precision ".concat(r," float;\n")),o}},{key:"_getEmptyTexture",value:function(){var t;return this._emptyTexture||((t=new s.default.Image(1,1)).set(0,0,255),this._emptyTexture=new s.default.Texture(this,t)),this._emptyTexture}},{key:"getTexture",value:function(t){t instanceof s.default.Framebuffer&&(t=t.color);var r=this.textures.get(t);return r||(r=new s.default.Texture(this,t),this.textures.set(t,r),r)}},{key:"createFramebuffer",value:function(t){return new s.default.Framebuffer(this,t)}},{key:"_setStrokeUniforms",value:function(t){t.bindShader(),t.setUniform("uUseLineColor",this._useLineColor),t.setUniform("uMaterialColor",this.curStrokeColor),t.setUniform("uStrokeWeight",this.curStrokeWeight),t.setUniform("uStrokeCap",v[this.curStrokeCap]),t.setUniform("uStrokeJoin",b[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(t){t.bindShader(),t.setUniform("uUseVertexColor",this._useVertexColor),t.setUniform("uMaterialColor",this.curFillColor),t.setUniform("isTexture",!!this._tex),this._tex&&t.setUniform("uSampler",this._tex),t.setUniform("uTint",this._tint),t.setUniform("uHasSetAmbient",this._hasSetAmbient),t.setUniform("uAmbientMatColor",this.curAmbientColor),t.setUniform("uSpecularMatColor",this.curSpecularColor),t.setUniform("uEmissiveMatColor",this.curEmissiveColor),t.setUniform("uSpecular",this._useSpecularMaterial),t.setUniform("uEmissive",this._useEmissiveMaterial),t.setUniform("uShininess",this._useShininess),t.setUniform("uUseLighting",this._enableLighting);var r=this.pointLightDiffuseColors.length/3,r=(t.setUniform("uPointLightCount",r),t.setUniform("uPointLightLocation",this.pointLightPositions),t.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),t.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),r=(t.setUniform("uDirectionalLightCount",r),t.setUniform("uLightingDirection",this.directionalLightDirections),t.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),t.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),r=(t.setUniform("uAmbientLightCount",r),t.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);t.setUniform("uSpotLightCount",r),t.setUniform("uSpotLightAngle",this.spotLightAngle),t.setUniform("uSpotLightConc",this.spotLightConc),t.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),t.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),t.setUniform("uSpotLightLocation",this.spotLightPositions),t.setUniform("uSpotLightDirection",this.spotLightDirections),t.setUniform("uConstantAttenuation",this.constantAttenuation),t.setUniform("uLinearAttenuation",this.linearAttenuation),t.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),t.bindTextures()}},{key:"_setPointUniforms",value:function(t){t.bindShader(),t.setUniform("uMaterialColor",this.curStrokeColor),t.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(t,r,o,n,s){r=r||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(r,t),void 0!==o&&(t=new(n||Float32Array)(o),this.GL.bufferData(r,t,s||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(t,r){return t.length===r.length&&t.every(function(t,o){return t===r[o]})}},{key:"_isTypedArray",value:function(t){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(r){return t instanceof r})}},{key:"_flatten",value:function(t){if(0===t.length)return[];if(2e4<t.length){for(var r,o=[],n=t.slice(),s=n.pop();Array.isArray(s)?n.push.apply(n,d(s)):o.push(s),n.length&&void 0!==(s=n.pop()););return o.reverse(),o}return(r=[]).concat.apply(r,d(t))}},{key:"_vToNArray",value:function(t){var r=[],o=!0,n=!1,s=void 0;try{for(var i,a=t[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var l=i.value;r.push(l.x,l.y,l.z)}}catch(t){n=!0,s=t}finally{try{o||null==a.return||a.return()}finally{if(n)throw s}}return r}},{key:"_bezierCoefficients",value:function(t){var r=t*t,o=1-t,n=o*o;return[n*o,3*n*t,3*o*r,r*t]}},{key:"_quadraticCoefficients",value:function(t){var r=1-t;return[r*r,2*r*t,t*t]}},{key:"_bezierToCatmull",value:function(t){return[t[1],t[1]+(t[2]-t[0])/this._curveTightness,t[2]-(t[3]-t[1])/this._curveTightness,t[2]]}},{key:"_initTessy",value:function(){var t=new a.default.GluTesselator;return t.gluTessCallback(a.default.gluEnum.GLU_TESS_VERTEX_DATA,function(t,r){for(var o=0;o<t.length;o++)r.push(t[o])}),t.gluTessCallback(a.default.gluEnum.GLU_TESS_BEGIN,function(t){t!==a.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(t))}),t.gluTessCallback(a.default.gluEnum.GLU_TESS_ERROR,function(t){console.log("error callback"),console.log("error number: ".concat(t))}),t.gluTessCallback(a.default.gluEnum.GLU_TESS_COMBINE,function(t,r,o){for(var n=Array(s.default.RendererGL.prototype.tessyVertexSize).fill(0),i=0;i<o.length;i++)for(var a=0;a<n.length;a++)0!==o[i]&&r[i]&&(n[a]+=r[i][a]*o[i]);return n}),t.gluTessCallback(a.default.gluEnum.GLU_TESS_EDGE_FLAG,function(t){}),t}},{key:"_triangulate",value:function(t){var r=t[0]?t[0][2]:void 0,o=!0,n=!0,i=!1,a=void 0;try{for(var l,u=t[Symbol.iterator]();!(n=(l=u.next()).done);n=!0)for(var c=l.value,d=0;d<c.length;d+=s.default.RendererGL.prototype.tessyVertexSize)if(c[d+2]!==r){o=!1;break}}catch(t){i=!0,a=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}o?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var i=[],h=(this._tessy.gluTessBeginPolygon(i),!0),a=!1,f=void 0;try{for(var p,m=t[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var y=p.value;this._tessy.gluTessBeginContour();for(var g=0;g<y.length;g+=s.default.RendererGL.prototype.tessyVertexSize){var v=y.slice(g,g+s.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(v,v)}this._tessy.gluTessEndContour()}}catch(t){a=!0,f=t}finally{try{h||null==m.return||m.return()}finally{if(a)throw f}}return this._tessy.gluTessEndPolygon(),i}}],h(r.prototype,t),o&&h(r,o),l}(s.default.Renderer),s.default.prototype._assert3d=function(t){if(!this._renderer.isP3D)throw Error("".concat(t,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},s.default.RendererGL.prototype.tessyVertexSize=12,t=s.default.RendererGL,o.default=t},{"../core/constants":262,"../core/main":273,"../core/p5.Renderer":276,"./p5.Camera":321,"./p5.Matrix":324,"./p5.Shader":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.map":168,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.float64-array":210,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int16-array":214,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,libtess:245,path:248}],329:[function(t,r,o){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}n.default.Shader=function(){var t,r;function o(t,r,n){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this._renderer=t,this._vertSrc=r,this._fragSrc=n,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}return t=[{key:"init",value:function(){if(0===this._glProgram){var t=this._renderer.GL;if(this._vertShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertShader,this._vertSrc),t.compileShader(this._vertShader),!t.getShaderParameter(this._vertShader,t.COMPILE_STATUS))return n.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(t.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragShader,this._fragSrc),t.compileShader(this._fragShader),!t.getShaderParameter(this._fragShader,t.COMPILE_STATUS))return n.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(t.getShaderInfoLog(this._fragShader))),null;this._glProgram=t.createProgram(),t.attachShader(this._glProgram,this._vertShader),t.attachShader(this._glProgram,this._fragShader),t.linkProgram(this._glProgram),t.getProgramParameter(this._glProgram,t.LINK_STATUS)||n.default._friendlyError("Snap! Error linking shader program: ".concat(t.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var t=this._renderer.GL,r=t.getProgramParameter(this._glProgram,t.ACTIVE_ATTRIBUTES),o=0;o<r;++o){var n=t.getActiveAttrib(this._glProgram,o),s=n.name,i=t.getAttribLocation(this._glProgram,s),a={};a.name=s,a.location=i,a.index=o,a.type=n.type,a.size=n.size,this.attributes[s]=a}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var t=this._renderer.GL,r=t.getProgramParameter(this._glProgram,t.ACTIVE_UNIFORMS),o=0,n=0;n<r;++n){var s=t.getActiveUniform(this._glProgram,n),i={},a=(i.location=t.getUniformLocation(this._glProgram,s.name),i.size=s.size,s.name);1<s.size&&(a=a.substring(0,a.indexOf("[0]"))),i.name=a,i.type=s.type,i._cachedData=void 0,i.type===t.SAMPLER_2D&&(i.samplerIndex=o,o++,this.samplers.push(i)),i.isArray=1<s.size||i.type===t.FLOAT_MAT3||i.type===t.FLOAT_MAT4||i.type===t.FLOAT_VEC2||i.type===t.FLOAT_VEC3||i.type===t.FLOAT_VEC4||i.type===t.INT_VEC2||i.type===t.INT_VEC4||i.type===t.INT_VEC3,this.uniforms[a]=i}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var t=this._renderer.GL,r=!0,o=!1,n=void 0;try{for(var s,i=this.samplers[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var a=s.value,l=a.texture;void 0===l&&(l=this._renderer._getEmptyTexture()),t.activeTexture(t.TEXTURE0+a.samplerIndex),l.bindTexture(),l.update(),t.uniform1i(a.location,a.samplerIndex)}}catch(t){o=!0,n=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw n}}}},{key:"updateTextures",value:function(){var t=!0,r=!1,o=void 0;try{for(var n,s=this.samplers[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value.texture;i&&i.update()}}catch(t){r=!0,o=t}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"unbindTextures",value:function(){var t=!0,r=!1,o=void 0;try{for(var n,s=this.samplers[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;this.setUniform(i.name,this._renderer._getEmptyTexture())}}catch(t){r=!0,o=t}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"_setMatrixUniforms",value:function(){var t=this._renderer._curCamera.cameraMatrix,r=this._renderer.uPMatrix,o=this._renderer.uMVMatrix,n=o.copy();n.mult(r),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",t.mat4),this.setUniform("uProjectionMatrix",r.mat4),this.setUniform("uModelViewMatrix",o.mat4),this.setUniform("uModelViewProjectionMatrix",n.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var t=this._renderer.GL;return this._renderer._curShader!==this&&(t.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(t,r){var o=this.uniforms[t];if(o){var s=this._renderer.GL;if(o.isArray){if(o._cachedData&&this._renderer._arraysEqual(o._cachedData,r))return;o._cachedData=r.slice(0)}else{if(o._cachedData&&o._cachedData===r)return;Array.isArray(r)?o._cachedData=r.slice(0):o._cachedData=r}var i=o.location;switch(this.useProgram(),o.type){case s.BOOL:!0===r?s.uniform1i(i,1):s.uniform1i(i,0);break;case s.INT:1<o.size?r.length&&s.uniform1iv(i,r):s.uniform1i(i,r);break;case s.FLOAT:1<o.size?r.length&&s.uniform1fv(i,r):s.uniform1f(i,r);break;case s.FLOAT_MAT3:s.uniformMatrix3fv(i,!1,r);break;case s.FLOAT_MAT4:s.uniformMatrix4fv(i,!1,r);break;case s.FLOAT_VEC2:1<o.size?r.length&&s.uniform2fv(i,r):s.uniform2f(i,r[0],r[1]);break;case s.FLOAT_VEC3:1<o.size?r.length&&s.uniform3fv(i,r):s.uniform3f(i,r[0],r[1],r[2]);break;case s.FLOAT_VEC4:1<o.size?r.length&&s.uniform4fv(i,r):s.uniform4f(i,r[0],r[1],r[2],r[3]);break;case s.INT_VEC2:1<o.size?r.length&&s.uniform2iv(i,r):s.uniform2i(i,r[0],r[1]);break;case s.INT_VEC3:1<o.size?r.length&&s.uniform3iv(i,r):s.uniform3i(i,r[0],r[1],r[2]);break;case s.INT_VEC4:1<o.size?r.length&&s.uniform4iv(i,r):s.uniform4i(i,r[0],r[1],r[2],r[3]);break;case s.SAMPLER_2D:s.activeTexture(s.TEXTURE0+o.samplerIndex),o.texture=r instanceof n.default.Texture?r:this._renderer.getTexture(r),s.uniform1i(i,o.samplerIndex),o.texture.src.gifProperties&&o.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(t,r,o,n,s,i){var a;return t&&-1!==(t=t.location)&&(a=this._renderer.GL,this._renderer.registerEnabled[t]||(a.enableVertexAttribArray(t),this._renderer.registerEnabled[t]=!0),this._renderer.GL.vertexAttribPointer(t,r,o||a.FLOAT,n||!1,s||0,i||0)),this}}],s(o.prototype,t),r&&s(o,r),o}(),t=n.default.Shader,o.default=t},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],330:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkWebGLCapabilities=c,o.default=void 0;var i=(d=t("../core/main"))&&d.__esModule?d:{default:d},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=l();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function l(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,l=function(){return t},t)}function u(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t){var r=t.GL,t=t.webglVersion,o=t===a.WEBGL2?r.getExtension("EXT_color_buffer_float")&&r.getExtension("EXT_float_blend"):r.getExtension("OES_texture_float"),n=o&&r.getExtension("OES_texture_float_linear"),t=t===a.WEBGL2?r.getExtension("EXT_color_buffer_float"):r.getExtension("OES_texture_half_float");return{float:o,floatLinear:n,halfFloat:t,halfFloatLinear:t&&r.getExtension("OES_texture_half_float_linear")}}i.default.Texture=function(){var t,r;function o(t,r,n){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");this._renderer=t;var s=this._renderer.GL,n=(n=n||{},this.src=r,this.glTex=void 0,this.glTarget=s.TEXTURE_2D,this.glFormat=n.format||s.RGBA,this.mipmaps=!1,this.glMinFilter=n.minFilter||s.LINEAR,this.glMagFilter=n.magFilter||s.LINEAR,this.glWrapS=n.wrapS||s.CLAMP_TO_EDGE,this.glWrapT=n.wrapT||s.CLAMP_TO_EDGE,this.glDataType=n.dataType||s.UNSIGNED_BYTE,c(t)),t=(this.glFormat!==s.HALF_FLOAT||n.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=s.FLOAT),this.glFormat!==s.HALF_FLOAT||this.glMinFilter!==s.LINEAR&&this.glMagFilter!==s.LINEAR||n.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===s.LINEAR&&(this.glMinFilter=s.NEAREST),this.glMagFilter===s.LINEAR&&(this.glMagFilter=s.NEAREST)),this.glFormat!==s.FLOAT||n.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=s.UNSIGNED_BYTE),this.glFormat!==s.FLOAT||this.glMinFilter!==s.LINEAR&&this.glMagFilter!==s.LINEAR||n.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===s.LINEAR&&(this.glMinFilter=s.NEAREST),this.glMagFilter===s.LINEAR&&(this.glMagFilter=s.NEAREST)),this.isSrcMediaElement=void 0!==i.default.MediaElement&&r instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==i.default.Element&&r instanceof i.default.Element&&!(r instanceof i.default.Graphics)&&!(r instanceof i.default.Renderer),this.isSrcP5Image=r instanceof i.default.Image,this.isSrcP5Graphics=r instanceof i.default.Graphics,this.isSrcP5Renderer=r instanceof i.default.Renderer,this.isImageData="undefined"!=typeof ImageData&&r instanceof ImageData,this.isFramebufferTexture=r instanceof i.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=t.width,this.height=t.height,this.init(t),this}return t=[{key:"_getTextureDataFromSource",value:function(){var t;return this.isFramebufferTexture?t=this.src.rawTexture():this.isSrcP5Image?t=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?t=this.src.elt:this.isImageData&&(t=this.src),t}},{key:"init",value:function(t){var r,o=this._renderer.GL;this.isFramebufferTexture||(this.glTex=o.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.glMagFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(r=new Uint8Array([1,1,1,1]),o.texImage2D(this.glTarget,0,o.RGBA,1,1,0,this.glFormat,this.glDataType,r)):o.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,t))}},{key:"update",value:function(){var t,r,o,n=this.src;return 0!==n.width&&0!==n.height&&!this.isFramebufferTexture&&(t=this._getTextureDataFromSource(),r=!1,o=this._renderer.GL,t.width!==this.width||t.height!==this.height?(r=!0,this.width=t.width||n.width,this.height=t.height||n.height,this.isSrcP5Image?n.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&n.setModified(!0)):this.isSrcP5Image?n.isModified()&&n.setModified((r=!0,!1)):this.isSrcMediaElement?n.isModified()?n.setModified((r=!0,!1)):n.loadedmetadata&&this._videoPrevUpdateTime!==n.time()&&(this._videoPrevUpdateTime=n.time(),r=!0):this.isImageData?n._dirty&&(n._dirty=!1,r=!0):r=!0,r&&(this.bindTexture(),o.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,t)),r)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(t,r){var o=this._renderer.GL;t===a.NEAREST?this.glMinFilter=o.NEAREST:this.glMinFilter=o.LINEAR,r===a.NEAREST?this.glMagFilter=o.NEAREST:this.glMagFilter=o.LINEAR,this.bindTexture(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.glMinFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"setWrapMode",value:function(t,r){var o,n,s=this._renderer.GL,i=this._getTextureDataFromSource(),i=i.naturalWidth&&i.naturalHeight?(l=i.naturalWidth,i.naturalHeight):(l=this.width,this.height),l=0==((o=l)&o-1),i=0==((n=i)&n-1);t===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||l&&i?this.glWrapS=s.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=s.CLAMP_TO_EDGE):t===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||l&&i?this.glWrapS=s.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=s.CLAMP_TO_EDGE):this.glWrapS=s.CLAMP_TO_EDGE,r===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||l&&i?this.glWrapT=s.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=s.CLAMP_TO_EDGE):r===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||l&&i?this.glWrapT=s.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=s.CLAMP_TO_EDGE):this.glWrapT=s.CLAMP_TO_EDGE,this.bindTexture(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,this.glWrapS),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}],u(o.prototype,t),r&&u(o,r),o}();var d=i.default.Texture;o.default=d},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],331:[function(t,r,o){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var i,a=(i=t("../core/main"))&&i.__esModule?i:{default:i},l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var r,o=u();if(o&&o.has(t))return o.get(t);var n,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&((r=a?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]);return i.default=t,o&&o.set(t,i),i}(t("../core/constants"));function u(){var t;return"function"!=typeof WeakMap?null:(t=new WeakMap,u=function(){return t},t)}function c(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}function d(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,r,o){r&&d(t.prototype,r),o&&d(t,o)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),a.default.RendererGL.prototype._applyTextProperties=function(){},a.default.RendererGL.prototype.textWidth=function(t){return this._isOpenType()?this._textFont._textWidth(t,this._textSize):0};var f=function(){function t(r,o){c(this,t),this.width=r,this.height=o,this.infos=[]}return h(t,[{key:"findImage",value:function(t){var r,o,n=this.width*this.height;if(n<t)throw Error("font is too complex to render in 3D");for(var s=this.infos.length-1;0<=s;--s){var i=this.infos[s];if(i.index+t<n){o=(r=i).imageData;break}}if(!r){try{o=new ImageData(this.width,this.height)}catch(t){var a=document.getElementsByTagName("canvas")[0],l=!a,u=(a||((a=document.createElement("canvas")).style.display="none",document.body.appendChild(a)),a.getContext("2d"));u&&(o=u.createImageData(this.width,this.height)),l&&document.body.removeChild(a)}this.infos.push(r={index:0,imageData:o})}return u=r.index,r.index+=t,o._dirty=!0,{imageData:o,index:u}}}]),t}();function p(t,r,o,n,s){var i=t.imageData.data,t=4*t.index++;i[t++]=r,i[t++]=o,i[t++]=n,i[+t]=s}var m=Math.sqrt(3),y=function(){function t(r){c(this,t),this.font=r,this.strokeImageInfos=new f(64,64),this.colDimImageInfos=new f(64,64),this.rowDimImageInfos=new f(64,64),this.colCellImageInfos=new f(64,64),this.rowCellImageInfos=new f(64,64),this.glyphInfos={}}return h(t,[{key:"getGlyphInfo",value:function(t){var r=this.glyphInfos[t.index];if(!r){var o=t.getBoundingBox(),n=o.x1,s=o.y1,i=o.x2-n,l=o.y2-s,u=t.path.commands;if(0==i||0==l||!u.length)return this.glyphInfos[t.index]={};for(var d=[],f=[],y=[],g=8;0<=g;--g)y.push([]);for(g=8;0<=g;--g)f.push([]);var v,b,x,j,w=function(){function t(r,o,n,s){c(this,t),this.p0=r,this.c0=o,this.c1=n,this.p1=s}return h(t,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return a.default.Vector.sub(a.default.Vector.sub(this.p1,this.p0),a.default.Vector.mult(a.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(r){var o=a.default.Vector.lerp(this.p0,this.c0,r),n=a.default.Vector.lerp(this.c0,this.c1,r),s=a.default.Vector.lerp(o,n,r),n=(this.c1=a.default.Vector.lerp(this.c1,this.p1,r),this.c0=a.default.Vector.lerp(n,this.c1,r),a.default.Vector.lerp(s,this.c0,r)),r=new t(this.p0,o,s,n);return this.p0=n,r}},{key:"splitInflections",value:function(){var t=a.default.Vector.sub(this.c0,this.p0),r=a.default.Vector.sub(a.default.Vector.sub(this.c1,this.c0),t),o=a.default.Vector.sub(a.default.Vector.sub(a.default.Vector.sub(this.p1,this.c1),t),a.default.Vector.mult(r,2)),n=[],s=r.x*o.y-r.y*o.x;return 0!==s&&0<=(t=(o=t.x*o.y-t.y*o.x)*o-4*s*(t.x*r.y-t.y*r.x))&&(s<0&&(s=-s,o=-o),t=(-o+(r=Math.sqrt(t)))/(2*s),0<(o=(-o-r)/(2*s))&&o<1&&(n.push(this.split(o)),t=1-(1-t)/(1-o)),0<t&&t<1&&n.push(this.split(t))),n.push(this),n}}]),t}(),S=!0,T=!1,E=void 0;try{for(var k,M=u[Symbol.iterator]();!(S=(k=M.next()).done);S=!0){var C=k.value,A=(C.x-n)/i,O=(C.y-s)/l;if(!q(v,b,A,O)){switch(C.type){case"M":x=A,j=O;break;case"L":z(v,b,A,O);break;case"Q":var R=(C.x1-n)/i,P=(C.y1-s)/l;G([v,A,R],[b,O,P],{x:v,y:b,cx:R,cy:P});break;case"Z":q(v,b,x,j)?d.push({x:v,y:b}):(z(v,b,x,j),d.push({x:x,y:j}));break;case"C":for(var L=function(t,r,o,n,s,i,l,u){var t=new w(new a.default.Vector(t,r),new a.default.Vector(o,n),new a.default.Vector(s,i),new a.default.Vector(l,u)).splitInflections(),c=[],d=30/m,h=!0,r=!1,o=void 0;try{for(var f,p=t[Symbol.iterator]();!(h=(f=p.next()).done);h=!0){for(var y=f.value,g=[],v=void 0;!(.125<=(v=d/y.quadError()));){var b=Math.pow(v,1/3),x=y.split(b),j=y.split(1-b/(1-b));c.push(x),g.push(y),y=j}v<1&&c.push(y.split(.5)),c.push(y),Array.prototype.push.apply(c,g.reverse())}}catch(t){r=!0,o=t}finally{try{h||null==p.return||p.return()}finally{if(r)throw o}}return c}(v,b,(C.x1-n)/i,(C.y1-s)/l,(C.x2-n)/i,(C.y2-s)/l,A,O),I=0;I<L.length;I++){var D=L[I].toQuadratic();G([D.x,D.x1,D.cx],[D.y,D.y1,D.cy],D)}break;default:throw Error("unknown command type: ".concat(C.type))}v=A,b=O}}}catch(t){T=!0,E=t}finally{try{S||null==M.return||M.return()}finally{if(T)throw E}}for(var F=d.length,N=this.strokeImageInfos.findImage(F),U=N.index,B=0;B<F;++B){var V=d[B];p(N,H(V.x),H(V.y),H(V.cx),H(V.cy))}(r=this.glyphInfos[t.index]={glyph:t,uGlyphRect:[o.x1,-o.y1,o.x2,-o.y2],strokeImageInfo:N,strokes:d,colInfo:W(y,this.colDimImageInfos,this.colCellImageInfos),rowInfo:W(f,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[r.colInfo.dimOffset,r.rowInfo.dimOffset]}return r;function G(t,r,o){var n=d.length;function s(t,r,o){for(var n=t.length;0<n--;){var s=t[n];s<r&&(r=s),o<s&&(o=s)}return{min:r,max:o}}d.push(o);for(var o=s(t,1,0),t=Math.max(Math.floor(9*o.min-.5),0),i=Math.min(Math.ceil(9*o.max+.5),9),a=t;a<i;++a)y[a].push(n);for(var o=s(r,1,0),t=Math.max(Math.floor(9*o.min-.5),0),l=Math.min(Math.ceil(9*o.max+.5),9),u=t;u<l;++u)f[u].push(n)}function H(t){return(t*=255)<0?0:255<t?255:t}function z(t,r,o,n){G([t,o],[r,n],{x:t,y:r,cx:(t+o)/2,cy:(r+n)/2})}function q(t,r,o,n){return 1e-5>Math.abs(o-t)&&1e-5>Math.abs(n-r)}function W(t,r,o){for(var n=t.length,s=r.findImage(n),r=s.index,i=0,a=0;a<n;++a)i+=t[a].length;for(var l=o.findImage(i),u=0;u<n;++u){var c=t[u],d=c.length,h=l.index;p(s,h>>7,127&h,d>>7,127&d);for(var f=0;f<d;++f){var m=c[f]+U;p(l,m>>7,127&m,0,0)}}return{cellImageInfo:l,dimOffset:r,dimImageInfo:s}}}}]),t}();a.default.RendererGL.prototype._renderText=function(t,r,o,n,s){if(this._textFont&&"string"!=typeof this._textFont){if(!(s<=n)&&this._doFill){if(this._isOpenType()){t.push();var s=this._doStroke,i=this.drawMode,u=(this._doStroke=!1,this.drawMode=l.TEXTURE,this._textFont.font),c=(c=this._textFont._fontInfo)||(this._textFont._fontInfo=new y(u)),o=this._textFont._handleAlignment(this,r,o,n),n=this._textSize/u.unitsPerEm,d=(this.translate(o.x,o.y,0),this.scale(n,n,1),this.GL),o=!this._defaultFontShader,h=this._getFontShader(),f=(h.init(),h.bindShader(),o&&(h.setUniform("uGridImageSize",[64,64]),h.setUniform("uCellsImageSize",[64,64]),h.setUniform("uStrokeImageSize",[64,64]),h.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),p=(f||((n=this._textGeom=new a.default.Geometry(1,1,function(){for(var t=0;t<=1;t++)for(var r=0;r<=1;r++)this.vertices.push(new a.default.Vector(r,t,0)),this.uvs.push(r,t)})).computeFaces().computeNormals(),f=this.createBuffers("glyph",n)),!0),o=!1,n=void 0;try{for(var m,g=this.retainedMode.buffers.text[Symbol.iterator]();!(p=(m=g.next()).done);p=!0)m.value._prepareBuffer(f,h)}catch(t){o=!0,n=t}finally{try{p||null==g.return||g.return()}finally{if(o)throw n}}this._bindBuffer(f.indexBuffer,d.ELEMENT_ARRAY_BUFFER),h.setUniform("uMaterialColor",this.curFillColor),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var v=0,b=null,x=u.stringToGlyphs(r),j=!0,w=!1,S=void 0;try{for(var T,E=x[Symbol.iterator]();!(j=(T=E.next()).done);j=!0){var k,M,C=T.value,A=(b&&(v+=u.getKerningValue(b,C)),c.getGlyphInfo(C));A.uGlyphRect&&(k=A.rowInfo,M=A.colInfo,h.setUniform("uSamplerStrokes",A.strokeImageInfo.imageData),h.setUniform("uSamplerRowStrokes",k.cellImageInfo.imageData),h.setUniform("uSamplerRows",k.dimImageInfo.imageData),h.setUniform("uSamplerColStrokes",M.cellImageInfo.imageData),h.setUniform("uSamplerCols",M.dimImageInfo.imageData),h.setUniform("uGridOffset",A.uGridOffset),h.setUniform("uGlyphRect",A.uGlyphRect),h.setUniform("uGlyphOffset",v),h.bindTextures(),d.drawElements(d.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),v+=C.advanceWidth,b=C}}catch(t){w=!0,S=t}finally{try{j||null==E.return||E.return()}finally{if(w)throw S}}}finally{h.unbindShader(),this._doStroke=s,this.drawMode=i,d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return t}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":262,"../core/main":273,"./p5.RendererGL.Retained":327,"./p5.Shader":329,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}]},{},[257])(257))&&tm.__esModule?tm.default:tm)(t=>{// MIDI Handling
t.loadMidiFile=function(r){let o=r.target.files[0];if(o){let r=new FileReader;// Removed s. prefix
r.onload=function(r){let o=r.target.result;t.parseMidi(o);// Removed s. prefix from arrayBuffer
},r.readAsArrayBuffer(o)}},// MIDI parse function without quantization
t.parseMidi=function(r,o=!1){// Preliminary check for unexpected data format
if("string"==typeof r&&r.startsWith("<!do")){console.error("Received unexpected HTML data instead of MIDI");return;// exit function early
}try{let n=new s8(r);// Assuming that `new Midi` can handle the raw arrayBuffer
// Adjust negative delta values
n.tracks.forEach(t=>{let r=0;t.notes.forEach(t=>{if(t.ticks<0)r+=t.ticks,t.ticks=0;else if(r<0){let o=Math.min(t.ticks,-r);// Calculate the possible adjustment
t.ticks-=o,r+=o}})}),t.noteSequences=n.tracks.map(t=>(o&&t.notes.forEach(t=>{console.log(t)}),{notes:t.notes.map(t=>({pitch:t.midi,startTime:t.time,endTime:t.time+t.duration,velocity:t.velocity// Include velocity in the note object
        }))}))}catch(t){console.error("Error processing MIDI data in pRoll.js:",t.message)}},// s.parseMidi = function(arrayBuffer, verbose = false) { 
//     const midi = new Midi(arrayBuffer);  // Removed s. prefix
//     s.noteSequences = midi.tracks.map(track => {
//         return { notes: track.notes.map(note => {
//             if (verbose){
//                 track.notes.forEach(note => {
//                     console.log(note);
//                 })}; 
//             return {
//                 pitch: note.midi,
//                 startTime: note.time,
//                 endTime: note.time + note.duration,
//                 velocity: note.velocity // Include velocity in the note object
//             };
//         })};
//     });
// }
// Constants and global variables
t.NUM_STEPS=32,t.SUBDIVISIONS=4,t.NUM_NOTES=20,t.LOWEST_MIDI_NOTE=34,t.noteSequences,t.resizingWidth=!1,t.resizingHeight=!1,t.WIDTH=550,t.HEIGHT=250,t.EDGE_THRESHOLD=10,t.offset_x=1.3,t.offset_y=1.5,t.drumMappings={35:"acoustic bass drum",36:"kick",37:"side-stick",38:"snare",39:"clap",40:"electric snare",41:"floor-tom",42:"closed-hihat",43:"high-tom",44:"pedal-hihat",45:"low-tom",46:"open-hihat",47:"mid-tom",48:"hi-tom",49:"crash",50:"high-tom",51:"ride",52:"chinese cymbal"},// Functions
t.setup=function(){t.createCanvas(t.WIDTH,t.HEIGHT).parent("pianoRollContainer");// pRollCanvas.parent('pianoRollContainer'); // attach to the specific div
// file input //no file input with the new UI
// const midiInput = document.getElementById('fileInput'); // Get the input element by its ID
// midiInput.addEventListener('change', s.loadMidiFile); // Add an event listener for when a user selects a file
// // fetch button
// let fetchButton = s.createButton('Fetch MIDI Data');
// fetchButton.mousePressed(s.triggerMidiFetch); 
},t.draw=function(){t.background("#fae"),t.tappedRhythm=as;// Fetch MIDI data from the server
let r=aL;r&&t.parseMidi(r);var o=0+t.offset_x,n=0+t.offset_y;// var y = s.HEIGHT - s.WIDTH;
t.drawTappedRhythm(t.tappedRhythm,o,n,t.WIDTH,t.WIDTH),t.noteSequences&&t.drawNotes(t.noteSequences[0].notes,o,n,t.WIDTH,t.WIDTH),t.fill(255,64),// Draw vertical lines for subdivisions
t.stroke("white");let s=t.WIDTH/(t.NUM_STEPS/4*t.SUBDIVISIONS);for(let r=0;r<t.WIDTH;r+=s)t.line(r+t.offset_x,0,r+t.offset_x,t.HEIGHT);// Draw vertical lines for beats
t.stroke("rgba(0,255,0,0.25)"),t.strokeWeight(1.2);let i=t.WIDTH/(t.NUM_STEPS/4);for(let r=0;r<t.WIDTH;r+=i)t.line(r+t.offset_x,0,r+t.offset_x,t.HEIGHT);// Draw vertical lines for bars
t.stroke("rgb(0,255,0)"),t.strokeWeight(.8);let a=t.WIDTH/(t.NUM_STEPS/16);for(let r=0;r<t.WIDTH;r+=a)t.line(r+t.offset_x,0,r+t.offset_x,t.HEIGHT);t.showPopup()},// Draw function for quantized tapped rhythm 
t.drawTappedRhythm=function(r,o,n,s,i){let a=r.length;t.push(),t.translate(o,n);var l=s/a,u=i/t.NUM_NOTES;r.forEach(function(r,o){if(1===r){var n=t.color(219,247,19,120);// Less opaque
t.fill(n),t.rect(l*o,0,l,u)}}),t.pop()},// Draw function without quantization
t.drawNotes=function(r,o,n,s,i){let a=t.noteSequences.reduce((t,r)=>{let o=r.notes.map(t=>t.endTime);return Math.max(t,...o)},0);t.push(),t.translate(o,n);var l=t.WIDTH/a,u=t.HEIGHT/t.NUM_NOTES;// Update cellWidth based on the new width
r.forEach(function(r){var o=t.color(255,0,191,255*r.velocity);t.stroke("black"),t.strokeWeight(.6),t.fill(o),t.rect(10+l*r.startTime,t.HEIGHT-u*(r.pitch-t.LOWEST_MIDI_NOTE),l*(r.endTime-r.startTime)-10,u)}),t.pop()},// For example:
t.mousePressed=function(){t.abs(t.mouseX-t.WIDTH)<t.EDGE_THRESHOLD&&(t.resizingWidth=!0),t.abs(t.mouseY-t.HEIGHT)<t.EDGE_THRESHOLD&&(t.resizingHeight=!0)},t.mouseDragged=function(){t.resizingWidth&&(t.WIDTH=t.mouseX),t.resizingHeight&&(t.HEIGHT=t.mouseY),// Apply the new width and height to the canvas
t.resizeCanvas(t.WIDTH,t.HEIGHT)},t.mouseReleased=function(){// Reset resizing flags
t.resizingWidth=!1,t.resizingHeight=!1},t.showPopup=function(){if(t.mouseX>t.offset_x&&t.mouseX<t.WIDTH+t.offset_x&&t.mouseY>0&&t.mouseY<t.HEIGHT){let r=t.HEIGHT/t.NUM_NOTES,o=Math.floor((t.HEIGHT-t.mouseY)/r),n=parseInt(Object.keys(t.drumMappings)[o]);if(n>=t.LOWEST_MIDI_NOTE&&35!=n){let r=t.drumMappings[n],o=t.textWidth(r)+10,s=t.mouseX+5;t.mouseX>(t.WIDTH+t.offset_x)/2&&(s=t.mouseX-o-5),t.fill(255),t.rect(s,t.mouseY,o,20),t.fill(0),t.text(r,s+5,t.mouseY+15)}}}}),// worker for client-side ajax requests
self.addEventListener("message",function(t){let r=t.data;"sendArray"===r.cmd&&// function sendArrayToServer(array, bpm, temperatureValue, hitTolerance, isHttpConnected, httpIp, portInput, samplingStrategy) {
//     if (!isHttpConnected) return;
//     const data_url = `http://${httpIp}:${portInput}/send_array`;
//     console.log("Sending request to:", data_url);
//     const payload = {
//         method: 'POST',
//         headers: {
//             'Content-Type': 'application/json'
//         },
//         body: JSON.stringify({
//             array: array,
//             bpm: bpm,
//             temp: temperatureValue,
//             thresh: hitTolerance,
//             samplingStrategy: samplingStrategy
//         })
//     };
//     fetch(data_url, payload)
//     .then(response => response.arrayBuffer())
//     .then(data => {
//         console.log("Processing tapped rhythms...");
//         // send a message back to the main thread if necessary
//         self.postMessage({type: 'arrayProcessed', data: data});
//     })
//     .catch(error => {
//         console.error("Error:", error);
//         self.postMessage({type: 'error', error: error});
//     });
// }
function(t,r,o,n,s,i,a,l){if(!s)return;let u=`http://${i}:${a}/send_array`;console.log("Sending request to:",u);let c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({array:t,bpm:r,temp:o,thresh:n,samplingStrategy:l})};fetch(u,c).then(t=>t.json())// Process as JSON first
// checking the success field of the response, and if it's true, you're converting the data field (base64 encoded string of the MIDI binary) 
// back to a byte array, and then you're posting this byte array back to the main thread:
.then(t=>{if(t.success){console.log("Processing tapped rhythms...");// const midiData = new Uint8Array(data.data);  // Convert base64 string to byte array
let r=atob(t.data),o=new Uint8Array(r.length).map((t,o)=>r.charCodeAt(o));console.log("Received MIDI data length:",o.length),self.postMessage({type:"arrayProcessed",data:o})}else console.warn(t.message),self.postMessage({type:"error",error:Error(t.message)})}).catch(t=>{console.error("Error:",t),self.postMessage({type:"error",error:t})})}(r.array,r.bpm,r.temperatureValue,r.hitTolerance,r.isHttpConnected,r.httpIp,r.portInput,r.samplingStrategy)});// dedicated thread for queueing up rhythms
let aB=[];// This will hold the queued MIDI events
self.addEventListener("message",function(t){let r=t.data;switch(r.cmd){case"enqueue":aB.push(r.event);break;case"dequeue":// Logic to decide which event(s) should be sent next
let o=aB.shift();// Simplified example
self.postMessage({cmd:"broadcast",event:o})}});// ----------------------------
// ----------------------------
//# sourceMappingURL=index.652a13ed.js.map

//# sourceMappingURL=index.652a13ed.js.map
